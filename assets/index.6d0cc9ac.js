const BC=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}};BC();var Ih=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function lx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Yo={exports:{}},Pt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xc=Symbol.for("react.element"),GC=Symbol.for("react.portal"),zC=Symbol.for("react.fragment"),qC=Symbol.for("react.strict_mode"),WC=Symbol.for("react.profiler"),$C=Symbol.for("react.provider"),HC=Symbol.for("react.context"),XC=Symbol.for("react.forward_ref"),YC=Symbol.for("react.suspense"),QC=Symbol.for("react.memo"),KC=Symbol.for("react.lazy"),m_=Symbol.iterator;function ZC(t){return t===null||typeof t!="object"?null:(t=m_&&t[m_]||t["@@iterator"],typeof t=="function"?t:null)}var ux={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},cx=Object.assign,hx={};function Jl(t,e,n){this.props=t,this.context=e,this.refs=hx,this.updater=n||ux}Jl.prototype.isReactComponent={};Jl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Jl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function dx(){}dx.prototype=Jl.prototype;function tv(t,e,n){this.props=t,this.context=e,this.refs=hx,this.updater=n||ux}var rv=tv.prototype=new dx;rv.constructor=tv;cx(rv,Jl.prototype);rv.isPureReactComponent=!0;var g_=Array.isArray,fx=Object.prototype.hasOwnProperty,nv={current:null},px={key:!0,ref:!0,__self:!0,__source:!0};function mx(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)fx.call(e,r)&&!px.hasOwnProperty(r)&&(s[r]=e[r]);var o=arguments.length-2;if(o===1)s.children=n;else if(1<o){for(var h=Array(o),d=0;d<o;d++)h[d]=arguments[d+2];s.children=h}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)s[r]===void 0&&(s[r]=o[r]);return{$$typeof:Xc,type:t,key:i,ref:a,props:s,_owner:nv.current}}function JC(t,e){return{$$typeof:Xc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function sv(t){return typeof t=="object"&&t!==null&&t.$$typeof===Xc}function ej(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var y_=/\/+/g;function Om(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ej(""+t.key):e.toString(36)}function ad(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Xc:case GC:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+Om(a,0):r,g_(s)?(n="",t!=null&&(n=t.replace(y_,"$&/")+"/"),ad(s,e,n,"",function(d){return d})):s!=null&&(sv(s)&&(s=JC(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(y_,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",g_(t))for(var o=0;o<t.length;o++){i=t[o];var h=r+Om(i,o);a+=ad(i,e,n,h,s)}else if(h=ZC(t),typeof h=="function")for(t=h.call(t),o=0;!(i=t.next()).done;)i=i.value,h=r+Om(i,o++),a+=ad(i,e,n,h,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Rh(t,e,n){if(t==null)return t;var r=[],s=0;return ad(t,r,"","",function(i){return e.call(n,i,s++)}),r}function tj(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var An={current:null},ld={transition:null},rj={ReactCurrentDispatcher:An,ReactCurrentBatchConfig:ld,ReactCurrentOwner:nv};Pt.Children={map:Rh,forEach:function(t,e,n){Rh(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Rh(t,function(){e++}),e},toArray:function(t){return Rh(t,function(e){return e})||[]},only:function(t){if(!sv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Pt.Component=Jl;Pt.Fragment=zC;Pt.Profiler=WC;Pt.PureComponent=tv;Pt.StrictMode=qC;Pt.Suspense=YC;Pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rj;Pt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=cx({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=nv.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(h in e)fx.call(e,h)&&!px.hasOwnProperty(h)&&(r[h]=e[h]===void 0&&o!==void 0?o[h]:e[h])}var h=arguments.length-2;if(h===1)r.children=n;else if(1<h){o=Array(h);for(var d=0;d<h;d++)o[d]=arguments[d+2];r.children=o}return{$$typeof:Xc,type:t.type,key:s,ref:i,props:r,_owner:a}};Pt.createContext=function(t){return t={$$typeof:HC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:$C,_context:t},t.Consumer=t};Pt.createElement=mx;Pt.createFactory=function(t){var e=mx.bind(null,t);return e.type=t,e};Pt.createRef=function(){return{current:null}};Pt.forwardRef=function(t){return{$$typeof:XC,render:t}};Pt.isValidElement=sv;Pt.lazy=function(t){return{$$typeof:KC,_payload:{_status:-1,_result:t},_init:tj}};Pt.memo=function(t,e){return{$$typeof:QC,type:t,compare:e===void 0?null:e}};Pt.startTransition=function(t){var e=ld.transition;ld.transition={};try{t()}finally{ld.transition=e}};Pt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Pt.useCallback=function(t,e){return An.current.useCallback(t,e)};Pt.useContext=function(t){return An.current.useContext(t)};Pt.useDebugValue=function(){};Pt.useDeferredValue=function(t){return An.current.useDeferredValue(t)};Pt.useEffect=function(t,e){return An.current.useEffect(t,e)};Pt.useId=function(){return An.current.useId()};Pt.useImperativeHandle=function(t,e,n){return An.current.useImperativeHandle(t,e,n)};Pt.useInsertionEffect=function(t,e){return An.current.useInsertionEffect(t,e)};Pt.useLayoutEffect=function(t,e){return An.current.useLayoutEffect(t,e)};Pt.useMemo=function(t,e){return An.current.useMemo(t,e)};Pt.useReducer=function(t,e,n){return An.current.useReducer(t,e,n)};Pt.useRef=function(t){return An.current.useRef(t)};Pt.useState=function(t){return An.current.useState(t)};Pt.useSyncExternalStore=function(t,e,n){return An.current.useSyncExternalStore(t,e,n)};Pt.useTransition=function(){return An.current.useTransition()};Pt.version="18.2.0";(function(t){t.exports=Pt})(Yo);const nj=lx(Yo.exports);var Tg={},gx={exports:{}},ns={},yx={exports:{}},vx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,H){var $=z.length;z.push(H);e:for(;0<$;){var ne=$-1>>>1,oe=z[ne];if(0<s(oe,H))z[ne]=H,z[$]=oe,$=ne;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var H=z[0],$=z.pop();if($!==H){z[0]=$;e:for(var ne=0,oe=z.length,_e=oe>>>1;ne<_e;){var he=2*(ne+1)-1,Te=z[he],fe=he+1,pe=z[fe];if(0>s(Te,$))fe<oe&&0>s(pe,Te)?(z[ne]=pe,z[fe]=$,ne=fe):(z[ne]=Te,z[he]=$,ne=he);else if(fe<oe&&0>s(pe,$))z[ne]=pe,z[fe]=$,ne=fe;else break e}}return H}function s(z,H){var $=z.sortIndex-H.sortIndex;return $!==0?$:z.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var h=[],d=[],g=1,m=null,c=3,l=!1,u=!1,f=!1,p=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(z){for(var H=n(d);H!==null;){if(H.callback===null)r(d);else if(H.startTime<=z)r(d),H.sortIndex=H.expirationTime,e(h,H);else break;H=n(d)}}function x(z){if(f=!1,b(z),!u)if(n(h)!==null)u=!0,K(S);else{var H=n(d);H!==null&&J(x,H.startTime-z)}}function S(z,H){u=!1,f&&(f=!1,y(M),M=-1),l=!0;var $=c;try{for(b(H),m=n(h);m!==null&&(!(m.expirationTime>H)||z&&!D());){var ne=m.callback;if(typeof ne=="function"){m.callback=null,c=m.priorityLevel;var oe=ne(m.expirationTime<=H);H=t.unstable_now(),typeof oe=="function"?m.callback=oe:m===n(h)&&r(h),b(H)}else r(h);m=n(h)}if(m!==null)var _e=!0;else{var he=n(d);he!==null&&J(x,he.startTime-H),_e=!1}return _e}finally{m=null,c=$,l=!1}}var E=!1,C=null,M=-1,I=5,A=-1;function D(){return!(t.unstable_now()-A<I)}function L(){if(C!==null){var z=t.unstable_now();A=z;var H=!0;try{H=C(!0,z)}finally{H?O():(E=!1,C=null)}}else E=!1}var O;if(typeof _=="function")O=function(){_(L)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,U=N.port2;N.port1.onmessage=L,O=function(){U.postMessage(null)}}else O=function(){p(L,0)};function K(z){C=z,E||(E=!0,O())}function J(z,H){M=p(function(){z(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){u||l||(u=!0,K(S))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return c},t.unstable_getFirstCallbackNode=function(){return n(h)},t.unstable_next=function(z){switch(c){case 1:case 2:case 3:var H=3;break;default:H=c}var $=c;c=H;try{return z()}finally{c=$}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,H){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var $=c;c=z;try{return H()}finally{c=$}},t.unstable_scheduleCallback=function(z,H,$){var ne=t.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?ne+$:ne):$=ne,z){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=$+oe,z={id:g++,callback:H,priorityLevel:z,startTime:$,expirationTime:oe,sortIndex:-1},$>ne?(z.sortIndex=$,e(d,z),n(h)===null&&z===n(d)&&(f?(y(M),M=-1):f=!0,J(x,$-ne))):(z.sortIndex=oe,e(h,z),u||l||(u=!0,K(S))),z},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(z){var H=c;return function(){var $=c;c=H;try{return z.apply(this,arguments)}finally{c=$}}}})(vx);(function(t){t.exports=vx})(yx);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _x=Yo.exports,Kn=yx.exports;function Be(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var bx=new Set,hc={};function ba(t,e){fl(t,e),fl(t+"Capture",e)}function fl(t,e){for(hc[t]=e,t=0;t<e.length;t++)bx.add(e[t])}var bi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Eg=Object.prototype.hasOwnProperty,sj=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v_={},__={};function ij(t){return Eg.call(__,t)?!0:Eg.call(v_,t)?!1:sj.test(t)?__[t]=!0:(v_[t]=!0,!1)}function oj(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function aj(t,e,n,r){if(e===null||typeof e>"u"||oj(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Dn(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var un={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){un[t]=new Dn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];un[e]=new Dn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){un[t]=new Dn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){un[t]=new Dn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){un[t]=new Dn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){un[t]=new Dn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){un[t]=new Dn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){un[t]=new Dn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){un[t]=new Dn(t,5,!1,t.toLowerCase(),null,!1,!1)});var iv=/[\-:]([a-z])/g;function ov(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(iv,ov);un[e]=new Dn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(iv,ov);un[e]=new Dn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(iv,ov);un[e]=new Dn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){un[t]=new Dn(t,1,!1,t.toLowerCase(),null,!1,!1)});un.xlinkHref=new Dn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){un[t]=new Dn(t,1,!1,t.toLowerCase(),null,!0,!0)});function av(t,e,n,r){var s=un.hasOwnProperty(e)?un[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(aj(e,n,s,r)&&(n=null),r||s===null?ij(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Oi=_x.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ph=Symbol.for("react.element"),Ba=Symbol.for("react.portal"),Ga=Symbol.for("react.fragment"),lv=Symbol.for("react.strict_mode"),kg=Symbol.for("react.profiler"),wx=Symbol.for("react.provider"),xx=Symbol.for("react.context"),uv=Symbol.for("react.forward_ref"),Cg=Symbol.for("react.suspense"),jg=Symbol.for("react.suspense_list"),cv=Symbol.for("react.memo"),Gi=Symbol.for("react.lazy"),Sx=Symbol.for("react.offscreen"),b_=Symbol.iterator;function ju(t){return t===null||typeof t!="object"?null:(t=b_&&t[b_]||t["@@iterator"],typeof t=="function"?t:null)}var xr=Object.assign,Im;function Vu(t){if(Im===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Im=e&&e[1]||""}return`
`+Im+t}var Rm=!1;function Pm(t,e){if(!t||Rm)return"";Rm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(a!==1||o!==1)do if(a--,o--,0>o||s[a]!==i[o]){var h=`
`+s[a].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=a&&0<=o);break}}}finally{Rm=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Vu(t):""}function lj(t){switch(t.tag){case 5:return Vu(t.type);case 16:return Vu("Lazy");case 13:return Vu("Suspense");case 19:return Vu("SuspenseList");case 0:case 2:case 15:return t=Pm(t.type,!1),t;case 11:return t=Pm(t.type.render,!1),t;case 1:return t=Pm(t.type,!0),t;default:return""}}function Mg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ga:return"Fragment";case Ba:return"Portal";case kg:return"Profiler";case lv:return"StrictMode";case Cg:return"Suspense";case jg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case xx:return(t.displayName||"Context")+".Consumer";case wx:return(t._context.displayName||"Context")+".Provider";case uv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case cv:return e=t.displayName||null,e!==null?e:Mg(t.type)||"Memo";case Gi:e=t._payload,t=t._init;try{return Mg(t(e))}catch{}}return null}function uj(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Mg(e);case 8:return e===lv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function co(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Tx(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function cj(t){var e=Tx(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Lh(t){t._valueTracker||(t._valueTracker=cj(t))}function Ex(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Tx(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function kd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ag(t,e){var n=e.checked;return xr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:t._wrapperState.initialChecked})}function w_(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=co(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function kx(t,e){e=e.checked,e!=null&&av(t,"checked",e,!1)}function Dg(t,e){kx(t,e);var n=co(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Og(t,e.type,n):e.hasOwnProperty("defaultValue")&&Og(t,e.type,co(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function x_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Og(t,e,n){(e!=="number"||kd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Bu=Array.isArray;function nl(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+co(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Ig(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Be(91));return xr({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function S_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Be(92));if(Bu(n)){if(1<n.length)throw Error(Be(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:co(n)}}function Cx(t,e){var n=co(e.value),r=co(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function T_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function jx(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Rg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?jx(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Nh,Mx=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Nh=Nh||document.createElement("div"),Nh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Nh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function dc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Xu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hj=["Webkit","ms","Moz","O"];Object.keys(Xu).forEach(function(t){hj.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Xu[e]=Xu[t]})});function Ax(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Xu.hasOwnProperty(t)&&Xu[t]?(""+e).trim():e+"px"}function Dx(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Ax(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var dj=xr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pg(t,e){if(e){if(dj[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Be(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Be(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Be(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Be(62))}}function Lg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ng=null;function hv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Fg=null,sl=null,il=null;function E_(t){if(t=Kc(t)){if(typeof Fg!="function")throw Error(Be(280));var e=t.stateNode;e&&(e=Tp(e),Fg(t.stateNode,t.type,e))}}function Ox(t){sl?il?il.push(t):il=[t]:sl=t}function Ix(){if(sl){var t=sl,e=il;if(il=sl=null,E_(t),e)for(t=0;t<e.length;t++)E_(e[t])}}function Rx(t,e){return t(e)}function Px(){}var Lm=!1;function Lx(t,e,n){if(Lm)return t(e,n);Lm=!0;try{return Rx(t,e,n)}finally{Lm=!1,(sl!==null||il!==null)&&(Px(),Ix())}}function fc(t,e){var n=t.stateNode;if(n===null)return null;var r=Tp(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Be(231,e,typeof n));return n}var Ug=!1;if(bi)try{var Mu={};Object.defineProperty(Mu,"passive",{get:function(){Ug=!0}}),window.addEventListener("test",Mu,Mu),window.removeEventListener("test",Mu,Mu)}catch{Ug=!1}function fj(t,e,n,r,s,i,a,o,h){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(g){this.onError(g)}}var Yu=!1,Cd=null,jd=!1,Vg=null,pj={onError:function(t){Yu=!0,Cd=t}};function mj(t,e,n,r,s,i,a,o,h){Yu=!1,Cd=null,fj.apply(pj,arguments)}function gj(t,e,n,r,s,i,a,o,h){if(mj.apply(this,arguments),Yu){if(Yu){var d=Cd;Yu=!1,Cd=null}else throw Error(Be(198));jd||(jd=!0,Vg=d)}}function wa(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Nx(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function k_(t){if(wa(t)!==t)throw Error(Be(188))}function yj(t){var e=t.alternate;if(!e){if(e=wa(t),e===null)throw Error(Be(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return k_(s),t;if(i===r)return k_(s),e;i=i.sibling}throw Error(Be(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a){for(o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a)throw Error(Be(189))}}if(n.alternate!==r)throw Error(Be(190))}if(n.tag!==3)throw Error(Be(188));return n.stateNode.current===n?t:e}function Fx(t){return t=yj(t),t!==null?Ux(t):null}function Ux(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Ux(t);if(e!==null)return e;t=t.sibling}return null}var Vx=Kn.unstable_scheduleCallback,C_=Kn.unstable_cancelCallback,vj=Kn.unstable_shouldYield,_j=Kn.unstable_requestPaint,Mr=Kn.unstable_now,bj=Kn.unstable_getCurrentPriorityLevel,dv=Kn.unstable_ImmediatePriority,Bx=Kn.unstable_UserBlockingPriority,Md=Kn.unstable_NormalPriority,wj=Kn.unstable_LowPriority,Gx=Kn.unstable_IdlePriority,bp=null,qs=null;function xj(t){if(qs&&typeof qs.onCommitFiberRoot=="function")try{qs.onCommitFiberRoot(bp,t,void 0,(t.current.flags&128)===128)}catch{}}var js=Math.clz32?Math.clz32:Ej,Sj=Math.log,Tj=Math.LN2;function Ej(t){return t>>>=0,t===0?32:31-(Sj(t)/Tj|0)|0}var Fh=64,Uh=4194304;function Gu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ad(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var o=a&~s;o!==0?r=Gu(o):(i&=a,i!==0&&(r=Gu(i)))}else a=n&~s,a!==0?r=Gu(a):i!==0&&(r=Gu(i));if(r===0)return 0;if(e!==0&&e!==r&&(e&s)===0&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if((r&4)!==0&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-js(e),s=1<<n,r|=t[n],e&=~s;return r}function kj(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cj(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-js(i),o=1<<a,h=s[a];h===-1?((o&n)===0||(o&r)!==0)&&(s[a]=kj(o,e)):h<=e&&(t.expiredLanes|=o),i&=~o}}function Bg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function zx(){var t=Fh;return Fh<<=1,(Fh&4194240)===0&&(Fh=64),t}function Nm(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Yc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-js(e),t[e]=n}function jj(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-js(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function fv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-js(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Qt=0;function qx(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var Wx,pv,$x,Hx,Xx,Gg=!1,Vh=[],Zi=null,Ji=null,eo=null,pc=new Map,mc=new Map,Wi=[],Mj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function j_(t,e){switch(t){case"focusin":case"focusout":Zi=null;break;case"dragenter":case"dragleave":Ji=null;break;case"mouseover":case"mouseout":eo=null;break;case"pointerover":case"pointerout":pc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":mc.delete(e.pointerId)}}function Au(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Kc(e),e!==null&&pv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Aj(t,e,n,r,s){switch(e){case"focusin":return Zi=Au(Zi,t,e,n,r,s),!0;case"dragenter":return Ji=Au(Ji,t,e,n,r,s),!0;case"mouseover":return eo=Au(eo,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return pc.set(i,Au(pc.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,mc.set(i,Au(mc.get(i)||null,t,e,n,r,s)),!0}return!1}function Yx(t){var e=Go(t.target);if(e!==null){var n=wa(e);if(n!==null){if(e=n.tag,e===13){if(e=Nx(n),e!==null){t.blockedOn=e,Xx(t.priority,function(){$x(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ud(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=zg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ng=r,n.target.dispatchEvent(r),Ng=null}else return e=Kc(n),e!==null&&pv(e),t.blockedOn=n,!1;e.shift()}return!0}function M_(t,e,n){ud(t)&&n.delete(e)}function Dj(){Gg=!1,Zi!==null&&ud(Zi)&&(Zi=null),Ji!==null&&ud(Ji)&&(Ji=null),eo!==null&&ud(eo)&&(eo=null),pc.forEach(M_),mc.forEach(M_)}function Du(t,e){t.blockedOn===e&&(t.blockedOn=null,Gg||(Gg=!0,Kn.unstable_scheduleCallback(Kn.unstable_NormalPriority,Dj)))}function gc(t){function e(s){return Du(s,t)}if(0<Vh.length){Du(Vh[0],t);for(var n=1;n<Vh.length;n++){var r=Vh[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Zi!==null&&Du(Zi,t),Ji!==null&&Du(Ji,t),eo!==null&&Du(eo,t),pc.forEach(e),mc.forEach(e),n=0;n<Wi.length;n++)r=Wi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Wi.length&&(n=Wi[0],n.blockedOn===null);)Yx(n),n.blockedOn===null&&Wi.shift()}var ol=Oi.ReactCurrentBatchConfig,Dd=!0;function Oj(t,e,n,r){var s=Qt,i=ol.transition;ol.transition=null;try{Qt=1,mv(t,e,n,r)}finally{Qt=s,ol.transition=i}}function Ij(t,e,n,r){var s=Qt,i=ol.transition;ol.transition=null;try{Qt=4,mv(t,e,n,r)}finally{Qt=s,ol.transition=i}}function mv(t,e,n,r){if(Dd){var s=zg(t,e,n,r);if(s===null)Hm(t,e,r,Od,n),j_(t,r);else if(Aj(s,t,e,n,r))r.stopPropagation();else if(j_(t,r),e&4&&-1<Mj.indexOf(t)){for(;s!==null;){var i=Kc(s);if(i!==null&&Wx(i),i=zg(t,e,n,r),i===null&&Hm(t,e,r,Od,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Hm(t,e,r,null,n)}}var Od=null;function zg(t,e,n,r){if(Od=null,t=hv(r),t=Go(t),t!==null)if(e=wa(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Nx(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Od=t,null}function Qx(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bj()){case dv:return 1;case Bx:return 4;case Md:case wj:return 16;case Gx:return 536870912;default:return 16}default:return 16}}var Xi=null,gv=null,cd=null;function Kx(){if(cd)return cd;var t,e=gv,n=e.length,r,s="value"in Xi?Xi.value:Xi.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return cd=s.slice(t,1<r?1-r:void 0)}function hd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Bh(){return!0}function A_(){return!1}function ss(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Bh:A_,this.isPropagationStopped=A_,this}return xr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Bh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Bh)},persist:function(){},isPersistent:Bh}),e}var eu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yv=ss(eu),Qc=xr({},eu,{view:0,detail:0}),Rj=ss(Qc),Fm,Um,Ou,wp=xr({},Qc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ou&&(Ou&&t.type==="mousemove"?(Fm=t.screenX-Ou.screenX,Um=t.screenY-Ou.screenY):Um=Fm=0,Ou=t),Fm)},movementY:function(t){return"movementY"in t?t.movementY:Um}}),D_=ss(wp),Pj=xr({},wp,{dataTransfer:0}),Lj=ss(Pj),Nj=xr({},Qc,{relatedTarget:0}),Vm=ss(Nj),Fj=xr({},eu,{animationName:0,elapsedTime:0,pseudoElement:0}),Uj=ss(Fj),Vj=xr({},eu,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Bj=ss(Vj),Gj=xr({},eu,{data:0}),O_=ss(Gj),zj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $j(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Wj[t])?!!e[t]:!1}function vv(){return $j}var Hj=xr({},Qc,{key:function(t){if(t.key){var e=zj[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=hd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?qj[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vv,charCode:function(t){return t.type==="keypress"?hd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?hd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Xj=ss(Hj),Yj=xr({},wp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),I_=ss(Yj),Qj=xr({},Qc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vv}),Kj=ss(Qj),Zj=xr({},eu,{propertyName:0,elapsedTime:0,pseudoElement:0}),Jj=ss(Zj),eM=xr({},wp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),tM=ss(eM),rM=[9,13,27,32],_v=bi&&"CompositionEvent"in window,Qu=null;bi&&"documentMode"in document&&(Qu=document.documentMode);var nM=bi&&"TextEvent"in window&&!Qu,Zx=bi&&(!_v||Qu&&8<Qu&&11>=Qu),R_=String.fromCharCode(32),P_=!1;function Jx(t,e){switch(t){case"keyup":return rM.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function eS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var za=!1;function sM(t,e){switch(t){case"compositionend":return eS(e);case"keypress":return e.which!==32?null:(P_=!0,R_);case"textInput":return t=e.data,t===R_&&P_?null:t;default:return null}}function iM(t,e){if(za)return t==="compositionend"||!_v&&Jx(t,e)?(t=Kx(),cd=gv=Xi=null,za=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Zx&&e.locale!=="ko"?null:e.data;default:return null}}var oM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function L_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!oM[t.type]:e==="textarea"}function tS(t,e,n,r){Ox(r),e=Id(e,"onChange"),0<e.length&&(n=new yv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ku=null,yc=null;function aM(t){dS(t,0)}function xp(t){var e=$a(t);if(Ex(e))return t}function lM(t,e){if(t==="change")return e}var rS=!1;if(bi){var Bm;if(bi){var Gm="oninput"in document;if(!Gm){var N_=document.createElement("div");N_.setAttribute("oninput","return;"),Gm=typeof N_.oninput=="function"}Bm=Gm}else Bm=!1;rS=Bm&&(!document.documentMode||9<document.documentMode)}function F_(){Ku&&(Ku.detachEvent("onpropertychange",nS),yc=Ku=null)}function nS(t){if(t.propertyName==="value"&&xp(yc)){var e=[];tS(e,yc,t,hv(t)),Lx(aM,e)}}function uM(t,e,n){t==="focusin"?(F_(),Ku=e,yc=n,Ku.attachEvent("onpropertychange",nS)):t==="focusout"&&F_()}function cM(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return xp(yc)}function hM(t,e){if(t==="click")return xp(e)}function dM(t,e){if(t==="input"||t==="change")return xp(e)}function fM(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var As=typeof Object.is=="function"?Object.is:fM;function vc(t,e){if(As(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Eg.call(e,s)||!As(t[s],e[s]))return!1}return!0}function U_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function V_(t,e){var n=U_(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=U_(n)}}function sS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?sS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function iS(){for(var t=window,e=kd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=kd(t.document)}return e}function bv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function pM(t){var e=iS(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&sS(n.ownerDocument.documentElement,n)){if(r!==null&&bv(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=V_(n,i);var a=V_(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var mM=bi&&"documentMode"in document&&11>=document.documentMode,qa=null,qg=null,Zu=null,Wg=!1;function B_(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Wg||qa==null||qa!==kd(r)||(r=qa,"selectionStart"in r&&bv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Zu&&vc(Zu,r)||(Zu=r,r=Id(qg,"onSelect"),0<r.length&&(e=new yv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=qa)))}function Gh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Wa={animationend:Gh("Animation","AnimationEnd"),animationiteration:Gh("Animation","AnimationIteration"),animationstart:Gh("Animation","AnimationStart"),transitionend:Gh("Transition","TransitionEnd")},zm={},oS={};bi&&(oS=document.createElement("div").style,"AnimationEvent"in window||(delete Wa.animationend.animation,delete Wa.animationiteration.animation,delete Wa.animationstart.animation),"TransitionEvent"in window||delete Wa.transitionend.transition);function Sp(t){if(zm[t])return zm[t];if(!Wa[t])return t;var e=Wa[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in oS)return zm[t]=e[n];return t}var aS=Sp("animationend"),lS=Sp("animationiteration"),uS=Sp("animationstart"),cS=Sp("transitionend"),hS=new Map,G_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wo(t,e){hS.set(t,e),ba(e,[t])}for(var qm=0;qm<G_.length;qm++){var Wm=G_[qm],gM=Wm.toLowerCase(),yM=Wm[0].toUpperCase()+Wm.slice(1);wo(gM,"on"+yM)}wo(aS,"onAnimationEnd");wo(lS,"onAnimationIteration");wo(uS,"onAnimationStart");wo("dblclick","onDoubleClick");wo("focusin","onFocus");wo("focusout","onBlur");wo(cS,"onTransitionEnd");fl("onMouseEnter",["mouseout","mouseover"]);fl("onMouseLeave",["mouseout","mouseover"]);fl("onPointerEnter",["pointerout","pointerover"]);fl("onPointerLeave",["pointerout","pointerover"]);ba("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ba("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ba("onBeforeInput",["compositionend","keypress","textInput","paste"]);ba("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ba("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ba("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vM=new Set("cancel close invalid load scroll toggle".split(" ").concat(zu));function z_(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,gj(r,e,void 0,t),t.currentTarget=null}function dS(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var o=r[a],h=o.instance,d=o.currentTarget;if(o=o.listener,h!==i&&s.isPropagationStopped())break e;z_(s,o,d),i=h}else for(a=0;a<r.length;a++){if(o=r[a],h=o.instance,d=o.currentTarget,o=o.listener,h!==i&&s.isPropagationStopped())break e;z_(s,o,d),i=h}}}if(jd)throw t=Vg,jd=!1,Vg=null,t}function ur(t,e){var n=e[Qg];n===void 0&&(n=e[Qg]=new Set);var r=t+"__bubble";n.has(r)||(fS(e,t,2,!1),n.add(r))}function $m(t,e,n){var r=0;e&&(r|=4),fS(n,t,r,e)}var zh="_reactListening"+Math.random().toString(36).slice(2);function _c(t){if(!t[zh]){t[zh]=!0,bx.forEach(function(n){n!=="selectionchange"&&(vM.has(n)||$m(n,!1,t),$m(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[zh]||(e[zh]=!0,$m("selectionchange",!1,e))}}function fS(t,e,n,r){switch(Qx(e)){case 1:var s=Oj;break;case 4:s=Ij;break;default:s=mv}n=s.bind(null,e,n,t),s=void 0,!Ug||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Hm(t,e,n,r,s){var i=r;if((e&1)===0&&(e&2)===0&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var h=a.tag;if((h===3||h===4)&&(h=a.stateNode.containerInfo,h===s||h.nodeType===8&&h.parentNode===s))return;a=a.return}for(;o!==null;){if(a=Go(o),a===null)return;if(h=a.tag,h===5||h===6){r=i=a;continue e}o=o.parentNode}}r=r.return}Lx(function(){var d=i,g=hv(n),m=[];e:{var c=hS.get(t);if(c!==void 0){var l=yv,u=t;switch(t){case"keypress":if(hd(n)===0)break e;case"keydown":case"keyup":l=Xj;break;case"focusin":u="focus",l=Vm;break;case"focusout":u="blur",l=Vm;break;case"beforeblur":case"afterblur":l=Vm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=D_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=Lj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Kj;break;case aS:case lS:case uS:l=Uj;break;case cS:l=Jj;break;case"scroll":l=Rj;break;case"wheel":l=tM;break;case"copy":case"cut":case"paste":l=Bj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=I_}var f=(e&4)!==0,p=!f&&t==="scroll",y=f?c!==null?c+"Capture":null:c;f=[];for(var _=d,b;_!==null;){b=_;var x=b.stateNode;if(b.tag===5&&x!==null&&(b=x,y!==null&&(x=fc(_,y),x!=null&&f.push(bc(_,x,b)))),p)break;_=_.return}0<f.length&&(c=new l(c,u,null,n,g),m.push({event:c,listeners:f}))}}if((e&7)===0){e:{if(c=t==="mouseover"||t==="pointerover",l=t==="mouseout"||t==="pointerout",c&&n!==Ng&&(u=n.relatedTarget||n.fromElement)&&(Go(u)||u[wi]))break e;if((l||c)&&(c=g.window===g?g:(c=g.ownerDocument)?c.defaultView||c.parentWindow:window,l?(u=n.relatedTarget||n.toElement,l=d,u=u?Go(u):null,u!==null&&(p=wa(u),u!==p||u.tag!==5&&u.tag!==6)&&(u=null)):(l=null,u=d),l!==u)){if(f=D_,x="onMouseLeave",y="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(f=I_,x="onPointerLeave",y="onPointerEnter",_="pointer"),p=l==null?c:$a(l),b=u==null?c:$a(u),c=new f(x,_+"leave",l,n,g),c.target=p,c.relatedTarget=b,x=null,Go(g)===d&&(f=new f(y,_+"enter",u,n,g),f.target=b,f.relatedTarget=p,x=f),p=x,l&&u)t:{for(f=l,y=u,_=0,b=f;b;b=Na(b))_++;for(b=0,x=y;x;x=Na(x))b++;for(;0<_-b;)f=Na(f),_--;for(;0<b-_;)y=Na(y),b--;for(;_--;){if(f===y||y!==null&&f===y.alternate)break t;f=Na(f),y=Na(y)}f=null}else f=null;l!==null&&q_(m,c,l,f,!1),u!==null&&p!==null&&q_(m,p,u,f,!0)}}e:{if(c=d?$a(d):window,l=c.nodeName&&c.nodeName.toLowerCase(),l==="select"||l==="input"&&c.type==="file")var S=lM;else if(L_(c))if(rS)S=dM;else{S=cM;var E=uM}else(l=c.nodeName)&&l.toLowerCase()==="input"&&(c.type==="checkbox"||c.type==="radio")&&(S=hM);if(S&&(S=S(t,d))){tS(m,S,n,g);break e}E&&E(t,c,d),t==="focusout"&&(E=c._wrapperState)&&E.controlled&&c.type==="number"&&Og(c,"number",c.value)}switch(E=d?$a(d):window,t){case"focusin":(L_(E)||E.contentEditable==="true")&&(qa=E,qg=d,Zu=null);break;case"focusout":Zu=qg=qa=null;break;case"mousedown":Wg=!0;break;case"contextmenu":case"mouseup":case"dragend":Wg=!1,B_(m,n,g);break;case"selectionchange":if(mM)break;case"keydown":case"keyup":B_(m,n,g)}var C;if(_v)e:{switch(t){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else za?Jx(t,n)&&(M="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(M="onCompositionStart");M&&(Zx&&n.locale!=="ko"&&(za||M!=="onCompositionStart"?M==="onCompositionEnd"&&za&&(C=Kx()):(Xi=g,gv="value"in Xi?Xi.value:Xi.textContent,za=!0)),E=Id(d,M),0<E.length&&(M=new O_(M,t,null,n,g),m.push({event:M,listeners:E}),C?M.data=C:(C=eS(n),C!==null&&(M.data=C)))),(C=nM?sM(t,n):iM(t,n))&&(d=Id(d,"onBeforeInput"),0<d.length&&(g=new O_("onBeforeInput","beforeinput",null,n,g),m.push({event:g,listeners:d}),g.data=C))}dS(m,e)})}function bc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Id(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=fc(t,n),i!=null&&r.unshift(bc(t,i,s)),i=fc(t,e),i!=null&&r.push(bc(t,i,s))),t=t.return}return r}function Na(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function q_(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var o=n,h=o.alternate,d=o.stateNode;if(h!==null&&h===r)break;o.tag===5&&d!==null&&(o=d,s?(h=fc(n,i),h!=null&&a.unshift(bc(n,h,o))):s||(h=fc(n,i),h!=null&&a.push(bc(n,h,o)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var _M=/\r\n?/g,bM=/\u0000|\uFFFD/g;function W_(t){return(typeof t=="string"?t:""+t).replace(_M,`
`).replace(bM,"")}function qh(t,e,n){if(e=W_(e),W_(t)!==e&&n)throw Error(Be(425))}function Rd(){}var $g=null,Hg=null;function Xg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Yg=typeof setTimeout=="function"?setTimeout:void 0,wM=typeof clearTimeout=="function"?clearTimeout:void 0,$_=typeof Promise=="function"?Promise:void 0,xM=typeof queueMicrotask=="function"?queueMicrotask:typeof $_<"u"?function(t){return $_.resolve(null).then(t).catch(SM)}:Yg;function SM(t){setTimeout(function(){throw t})}function Xm(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),gc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);gc(e)}function to(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function H_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var tu=Math.random().toString(36).slice(2),zs="__reactFiber$"+tu,wc="__reactProps$"+tu,wi="__reactContainer$"+tu,Qg="__reactEvents$"+tu,TM="__reactListeners$"+tu,EM="__reactHandles$"+tu;function Go(t){var e=t[zs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[wi]||n[zs]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=H_(t);t!==null;){if(n=t[zs])return n;t=H_(t)}return e}t=n,n=t.parentNode}return null}function Kc(t){return t=t[zs]||t[wi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function $a(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Be(33))}function Tp(t){return t[wc]||null}var Kg=[],Ha=-1;function xo(t){return{current:t}}function hr(t){0>Ha||(t.current=Kg[Ha],Kg[Ha]=null,Ha--)}function nr(t,e){Ha++,Kg[Ha]=t.current,t.current=e}var ho={},_n=xo(ho),Un=xo(!1),ea=ho;function pl(t,e){var n=t.type.contextTypes;if(!n)return ho;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Vn(t){return t=t.childContextTypes,t!=null}function Pd(){hr(Un),hr(_n)}function X_(t,e,n){if(_n.current!==ho)throw Error(Be(168));nr(_n,e),nr(Un,n)}function pS(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Be(108,uj(t)||"Unknown",s));return xr({},n,r)}function Ld(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ho,ea=_n.current,nr(_n,t),nr(Un,Un.current),!0}function Y_(t,e,n){var r=t.stateNode;if(!r)throw Error(Be(169));n?(t=pS(t,e,ea),r.__reactInternalMemoizedMergedChildContext=t,hr(Un),hr(_n),nr(_n,t)):hr(Un),nr(Un,n)}var ci=null,Ep=!1,Ym=!1;function mS(t){ci===null?ci=[t]:ci.push(t)}function kM(t){Ep=!0,mS(t)}function So(){if(!Ym&&ci!==null){Ym=!0;var t=0,e=Qt;try{var n=ci;for(Qt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ci=null,Ep=!1}catch(s){throw ci!==null&&(ci=ci.slice(t+1)),Vx(dv,So),s}finally{Qt=e,Ym=!1}}return null}var Xa=[],Ya=0,Nd=null,Fd=0,os=[],as=0,ta=null,hi=1,di="";function Uo(t,e){Xa[Ya++]=Fd,Xa[Ya++]=Nd,Nd=t,Fd=e}function gS(t,e,n){os[as++]=hi,os[as++]=di,os[as++]=ta,ta=t;var r=hi;t=di;var s=32-js(r)-1;r&=~(1<<s),n+=1;var i=32-js(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,hi=1<<32-js(e)+s|n<<s|r,di=i+t}else hi=1<<i|n<<s|r,di=t}function wv(t){t.return!==null&&(Uo(t,1),gS(t,1,0))}function xv(t){for(;t===Nd;)Nd=Xa[--Ya],Xa[Ya]=null,Fd=Xa[--Ya],Xa[Ya]=null;for(;t===ta;)ta=os[--as],os[as]=null,di=os[--as],os[as]=null,hi=os[--as],os[as]=null}var Yn=null,Hn=null,yr=!1,Es=null;function yS(t,e){var n=us(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Q_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Yn=t,Hn=to(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Yn=t,Hn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ta!==null?{id:hi,overflow:di}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=us(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Yn=t,Hn=null,!0):!1;default:return!1}}function Zg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Jg(t){if(yr){var e=Hn;if(e){var n=e;if(!Q_(t,e)){if(Zg(t))throw Error(Be(418));e=to(n.nextSibling);var r=Yn;e&&Q_(t,e)?yS(r,n):(t.flags=t.flags&-4097|2,yr=!1,Yn=t)}}else{if(Zg(t))throw Error(Be(418));t.flags=t.flags&-4097|2,yr=!1,Yn=t}}}function K_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Yn=t}function Wh(t){if(t!==Yn)return!1;if(!yr)return K_(t),yr=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Xg(t.type,t.memoizedProps)),e&&(e=Hn)){if(Zg(t))throw vS(),Error(Be(418));for(;e;)yS(t,e),e=to(e.nextSibling)}if(K_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Be(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Hn=to(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Hn=null}}else Hn=Yn?to(t.stateNode.nextSibling):null;return!0}function vS(){for(var t=Hn;t;)t=to(t.nextSibling)}function ml(){Hn=Yn=null,yr=!1}function Sv(t){Es===null?Es=[t]:Es.push(t)}var CM=Oi.ReactCurrentBatchConfig;function Ss(t,e){if(t&&t.defaultProps){e=xr({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Ud=xo(null),Vd=null,Qa=null,Tv=null;function Ev(){Tv=Qa=Vd=null}function kv(t){var e=Ud.current;hr(Ud),t._currentValue=e}function ey(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function al(t,e){Vd=t,Tv=Qa=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&e)!==0&&(Ln=!0),t.firstContext=null)}function ms(t){var e=t._currentValue;if(Tv!==t)if(t={context:t,memoizedValue:e,next:null},Qa===null){if(Vd===null)throw Error(Be(308));Qa=t,Vd.dependencies={lanes:0,firstContext:t}}else Qa=Qa.next=t;return e}var zo=null;function Cv(t){zo===null?zo=[t]:zo.push(t)}function _S(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Cv(e)):(n.next=s.next,s.next=n),e.interleaved=n,xi(t,r)}function xi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var zi=!1;function jv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function pi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ro(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,(Bt&2)!==0){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,xi(t,n)}return s=r.interleaved,s===null?(e.next=e,Cv(r)):(e.next=s.next,s.next=e),r.interleaved=e,xi(t,n)}function dd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,fv(t,n)}}function Z_(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Bd(t,e,n,r){var s=t.updateQueue;zi=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var h=o,d=h.next;h.next=null,a===null?i=d:a.next=d,a=h;var g=t.alternate;g!==null&&(g=g.updateQueue,o=g.lastBaseUpdate,o!==a&&(o===null?g.firstBaseUpdate=d:o.next=d,g.lastBaseUpdate=h))}if(i!==null){var m=s.baseState;a=0,g=d=h=null,o=i;do{var c=o.lane,l=o.eventTime;if((r&c)===c){g!==null&&(g=g.next={eventTime:l,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var u=t,f=o;switch(c=e,l=n,f.tag){case 1:if(u=f.payload,typeof u=="function"){m=u.call(l,m,c);break e}m=u;break e;case 3:u.flags=u.flags&-65537|128;case 0:if(u=f.payload,c=typeof u=="function"?u.call(l,m,c):u,c==null)break e;m=xr({},m,c);break e;case 2:zi=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,c=s.effects,c===null?s.effects=[o]:c.push(o))}else l={eventTime:l,lane:c,tag:o.tag,payload:o.payload,callback:o.callback,next:null},g===null?(d=g=l,h=m):g=g.next=l,a|=c;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;c=o,o=c.next,c.next=null,s.lastBaseUpdate=c,s.shared.pending=null}}while(1);if(g===null&&(h=m),s.baseState=h,s.firstBaseUpdate=d,s.lastBaseUpdate=g,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);na|=a,t.lanes=a,t.memoizedState=m}}function J_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Be(191,s));s.call(r)}}}var wS=new _x.Component().refs;function ty(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:xr({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var kp={isMounted:function(t){return(t=t._reactInternals)?wa(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Mn(),s=so(t),i=pi(r,s);i.payload=e,n!=null&&(i.callback=n),e=ro(t,i,s),e!==null&&(Ms(e,t,s,r),dd(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Mn(),s=so(t),i=pi(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=ro(t,i,s),e!==null&&(Ms(e,t,s,r),dd(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Mn(),r=so(t),s=pi(n,r);s.tag=2,e!=null&&(s.callback=e),e=ro(t,s,r),e!==null&&(Ms(e,t,r,n),dd(e,t,r))}};function eb(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!vc(n,r)||!vc(s,i):!0}function xS(t,e,n){var r=!1,s=ho,i=e.contextType;return typeof i=="object"&&i!==null?i=ms(i):(s=Vn(e)?ea:_n.current,r=e.contextTypes,i=(r=r!=null)?pl(t,s):ho),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=kp,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function tb(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&kp.enqueueReplaceState(e,e.state,null)}function ry(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs=wS,jv(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=ms(i):(i=Vn(e)?ea:_n.current,s.context=pl(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(ty(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&kp.enqueueReplaceState(s,s.state,null),Bd(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Iu(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Be(309));var r=n.stateNode}if(!r)throw Error(Be(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var o=s.refs;o===wS&&(o=s.refs={}),a===null?delete o[i]:o[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(Be(284));if(!n._owner)throw Error(Be(290,t))}return t}function $h(t,e){throw t=Object.prototype.toString.call(e),Error(Be(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function rb(t){var e=t._init;return e(t._payload)}function SS(t){function e(y,_){if(t){var b=y.deletions;b===null?(y.deletions=[_],y.flags|=16):b.push(_)}}function n(y,_){if(!t)return null;for(;_!==null;)e(y,_),_=_.sibling;return null}function r(y,_){for(y=new Map;_!==null;)_.key!==null?y.set(_.key,_):y.set(_.index,_),_=_.sibling;return y}function s(y,_){return y=io(y,_),y.index=0,y.sibling=null,y}function i(y,_,b){return y.index=b,t?(b=y.alternate,b!==null?(b=b.index,b<_?(y.flags|=2,_):b):(y.flags|=2,_)):(y.flags|=1048576,_)}function a(y){return t&&y.alternate===null&&(y.flags|=2),y}function o(y,_,b,x){return _===null||_.tag!==6?(_=rg(b,y.mode,x),_.return=y,_):(_=s(_,b),_.return=y,_)}function h(y,_,b,x){var S=b.type;return S===Ga?g(y,_,b.props.children,x,b.key):_!==null&&(_.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Gi&&rb(S)===_.type)?(x=s(_,b.props),x.ref=Iu(y,_,b),x.return=y,x):(x=vd(b.type,b.key,b.props,null,y.mode,x),x.ref=Iu(y,_,b),x.return=y,x)}function d(y,_,b,x){return _===null||_.tag!==4||_.stateNode.containerInfo!==b.containerInfo||_.stateNode.implementation!==b.implementation?(_=ng(b,y.mode,x),_.return=y,_):(_=s(_,b.children||[]),_.return=y,_)}function g(y,_,b,x,S){return _===null||_.tag!==7?(_=Ko(b,y.mode,x,S),_.return=y,_):(_=s(_,b),_.return=y,_)}function m(y,_,b){if(typeof _=="string"&&_!==""||typeof _=="number")return _=rg(""+_,y.mode,b),_.return=y,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Ph:return b=vd(_.type,_.key,_.props,null,y.mode,b),b.ref=Iu(y,null,_),b.return=y,b;case Ba:return _=ng(_,y.mode,b),_.return=y,_;case Gi:var x=_._init;return m(y,x(_._payload),b)}if(Bu(_)||ju(_))return _=Ko(_,y.mode,b,null),_.return=y,_;$h(y,_)}return null}function c(y,_,b,x){var S=_!==null?_.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return S!==null?null:o(y,_,""+b,x);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ph:return b.key===S?h(y,_,b,x):null;case Ba:return b.key===S?d(y,_,b,x):null;case Gi:return S=b._init,c(y,_,S(b._payload),x)}if(Bu(b)||ju(b))return S!==null?null:g(y,_,b,x,null);$h(y,b)}return null}function l(y,_,b,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return y=y.get(b)||null,o(_,y,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ph:return y=y.get(x.key===null?b:x.key)||null,h(_,y,x,S);case Ba:return y=y.get(x.key===null?b:x.key)||null,d(_,y,x,S);case Gi:var E=x._init;return l(y,_,b,E(x._payload),S)}if(Bu(x)||ju(x))return y=y.get(b)||null,g(_,y,x,S,null);$h(_,x)}return null}function u(y,_,b,x){for(var S=null,E=null,C=_,M=_=0,I=null;C!==null&&M<b.length;M++){C.index>M?(I=C,C=null):I=C.sibling;var A=c(y,C,b[M],x);if(A===null){C===null&&(C=I);break}t&&C&&A.alternate===null&&e(y,C),_=i(A,_,M),E===null?S=A:E.sibling=A,E=A,C=I}if(M===b.length)return n(y,C),yr&&Uo(y,M),S;if(C===null){for(;M<b.length;M++)C=m(y,b[M],x),C!==null&&(_=i(C,_,M),E===null?S=C:E.sibling=C,E=C);return yr&&Uo(y,M),S}for(C=r(y,C);M<b.length;M++)I=l(C,y,M,b[M],x),I!==null&&(t&&I.alternate!==null&&C.delete(I.key===null?M:I.key),_=i(I,_,M),E===null?S=I:E.sibling=I,E=I);return t&&C.forEach(function(D){return e(y,D)}),yr&&Uo(y,M),S}function f(y,_,b,x){var S=ju(b);if(typeof S!="function")throw Error(Be(150));if(b=S.call(b),b==null)throw Error(Be(151));for(var E=S=null,C=_,M=_=0,I=null,A=b.next();C!==null&&!A.done;M++,A=b.next()){C.index>M?(I=C,C=null):I=C.sibling;var D=c(y,C,A.value,x);if(D===null){C===null&&(C=I);break}t&&C&&D.alternate===null&&e(y,C),_=i(D,_,M),E===null?S=D:E.sibling=D,E=D,C=I}if(A.done)return n(y,C),yr&&Uo(y,M),S;if(C===null){for(;!A.done;M++,A=b.next())A=m(y,A.value,x),A!==null&&(_=i(A,_,M),E===null?S=A:E.sibling=A,E=A);return yr&&Uo(y,M),S}for(C=r(y,C);!A.done;M++,A=b.next())A=l(C,y,M,A.value,x),A!==null&&(t&&A.alternate!==null&&C.delete(A.key===null?M:A.key),_=i(A,_,M),E===null?S=A:E.sibling=A,E=A);return t&&C.forEach(function(L){return e(y,L)}),yr&&Uo(y,M),S}function p(y,_,b,x){if(typeof b=="object"&&b!==null&&b.type===Ga&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Ph:e:{for(var S=b.key,E=_;E!==null;){if(E.key===S){if(S=b.type,S===Ga){if(E.tag===7){n(y,E.sibling),_=s(E,b.props.children),_.return=y,y=_;break e}}else if(E.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Gi&&rb(S)===E.type){n(y,E.sibling),_=s(E,b.props),_.ref=Iu(y,E,b),_.return=y,y=_;break e}n(y,E);break}else e(y,E);E=E.sibling}b.type===Ga?(_=Ko(b.props.children,y.mode,x,b.key),_.return=y,y=_):(x=vd(b.type,b.key,b.props,null,y.mode,x),x.ref=Iu(y,_,b),x.return=y,y=x)}return a(y);case Ba:e:{for(E=b.key;_!==null;){if(_.key===E)if(_.tag===4&&_.stateNode.containerInfo===b.containerInfo&&_.stateNode.implementation===b.implementation){n(y,_.sibling),_=s(_,b.children||[]),_.return=y,y=_;break e}else{n(y,_);break}else e(y,_);_=_.sibling}_=ng(b,y.mode,x),_.return=y,y=_}return a(y);case Gi:return E=b._init,p(y,_,E(b._payload),x)}if(Bu(b))return u(y,_,b,x);if(ju(b))return f(y,_,b,x);$h(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,_!==null&&_.tag===6?(n(y,_.sibling),_=s(_,b),_.return=y,y=_):(n(y,_),_=rg(b,y.mode,x),_.return=y,y=_),a(y)):n(y,_)}return p}var gl=SS(!0),TS=SS(!1),Zc={},Ws=xo(Zc),xc=xo(Zc),Sc=xo(Zc);function qo(t){if(t===Zc)throw Error(Be(174));return t}function Mv(t,e){switch(nr(Sc,e),nr(xc,t),nr(Ws,Zc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Rg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Rg(e,t)}hr(Ws),nr(Ws,e)}function yl(){hr(Ws),hr(xc),hr(Sc)}function ES(t){qo(Sc.current);var e=qo(Ws.current),n=Rg(e,t.type);e!==n&&(nr(xc,t),nr(Ws,n))}function Av(t){xc.current===t&&(hr(Ws),hr(xc))}var br=xo(0);function Gd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Qm=[];function Dv(){for(var t=0;t<Qm.length;t++)Qm[t]._workInProgressVersionPrimary=null;Qm.length=0}var fd=Oi.ReactCurrentDispatcher,Km=Oi.ReactCurrentBatchConfig,ra=0,wr=null,Nr=null,$r=null,zd=!1,Ju=!1,Tc=0,jM=0;function fn(){throw Error(Be(321))}function Ov(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!As(t[n],e[n]))return!1;return!0}function Iv(t,e,n,r,s,i){if(ra=i,wr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,fd.current=t===null||t.memoizedState===null?OM:IM,t=n(r,s),Ju){i=0;do{if(Ju=!1,Tc=0,25<=i)throw Error(Be(301));i+=1,$r=Nr=null,e.updateQueue=null,fd.current=RM,t=n(r,s)}while(Ju)}if(fd.current=qd,e=Nr!==null&&Nr.next!==null,ra=0,$r=Nr=wr=null,zd=!1,e)throw Error(Be(300));return t}function Rv(){var t=Tc!==0;return Tc=0,t}function Gs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $r===null?wr.memoizedState=$r=t:$r=$r.next=t,$r}function gs(){if(Nr===null){var t=wr.alternate;t=t!==null?t.memoizedState:null}else t=Nr.next;var e=$r===null?wr.memoizedState:$r.next;if(e!==null)$r=e,Nr=t;else{if(t===null)throw Error(Be(310));Nr=t,t={memoizedState:Nr.memoizedState,baseState:Nr.baseState,baseQueue:Nr.baseQueue,queue:Nr.queue,next:null},$r===null?wr.memoizedState=$r=t:$r=$r.next=t}return $r}function Ec(t,e){return typeof e=="function"?e(t):e}function Zm(t){var e=gs(),n=e.queue;if(n===null)throw Error(Be(311));n.lastRenderedReducer=t;var r=Nr,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var o=a=null,h=null,d=i;do{var g=d.lane;if((ra&g)===g)h!==null&&(h=h.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:g,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};h===null?(o=h=m,a=r):h=h.next=m,wr.lanes|=g,na|=g}d=d.next}while(d!==null&&d!==i);h===null?a=r:h.next=o,As(r,e.memoizedState)||(Ln=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=h,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,wr.lanes|=i,na|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Jm(t){var e=gs(),n=e.queue;if(n===null)throw Error(Be(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);As(i,e.memoizedState)||(Ln=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function kS(){}function CS(t,e){var n=wr,r=gs(),s=e(),i=!As(r.memoizedState,s);if(i&&(r.memoizedState=s,Ln=!0),r=r.queue,Pv(AS.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||$r!==null&&$r.memoizedState.tag&1){if(n.flags|=2048,kc(9,MS.bind(null,n,r,s,e),void 0,null),Hr===null)throw Error(Be(349));(ra&30)!==0||jS(n,e,s)}return s}function jS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=wr.updateQueue,e===null?(e={lastEffect:null,stores:null},wr.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function MS(t,e,n,r){e.value=n,e.getSnapshot=r,DS(e)&&OS(t)}function AS(t,e,n){return n(function(){DS(e)&&OS(t)})}function DS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!As(t,n)}catch{return!0}}function OS(t){var e=xi(t,1);e!==null&&Ms(e,t,1,-1)}function nb(t){var e=Gs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ec,lastRenderedState:t},e.queue=t,t=t.dispatch=DM.bind(null,wr,t),[e.memoizedState,t]}function kc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=wr.updateQueue,e===null?(e={lastEffect:null,stores:null},wr.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function IS(){return gs().memoizedState}function pd(t,e,n,r){var s=Gs();wr.flags|=t,s.memoizedState=kc(1|e,n,void 0,r===void 0?null:r)}function Cp(t,e,n,r){var s=gs();r=r===void 0?null:r;var i=void 0;if(Nr!==null){var a=Nr.memoizedState;if(i=a.destroy,r!==null&&Ov(r,a.deps)){s.memoizedState=kc(e,n,i,r);return}}wr.flags|=t,s.memoizedState=kc(1|e,n,i,r)}function sb(t,e){return pd(8390656,8,t,e)}function Pv(t,e){return Cp(2048,8,t,e)}function RS(t,e){return Cp(4,2,t,e)}function PS(t,e){return Cp(4,4,t,e)}function LS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function NS(t,e,n){return n=n!=null?n.concat([t]):null,Cp(4,4,LS.bind(null,e,t),n)}function Lv(){}function FS(t,e){var n=gs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ov(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function US(t,e){var n=gs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ov(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function VS(t,e,n){return(ra&21)===0?(t.baseState&&(t.baseState=!1,Ln=!0),t.memoizedState=n):(As(n,e)||(n=zx(),wr.lanes|=n,na|=n,t.baseState=!0),e)}function MM(t,e){var n=Qt;Qt=n!==0&&4>n?n:4,t(!0);var r=Km.transition;Km.transition={};try{t(!1),e()}finally{Qt=n,Km.transition=r}}function BS(){return gs().memoizedState}function AM(t,e,n){var r=so(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},GS(t))zS(e,n);else if(n=_S(t,e,n,r),n!==null){var s=Mn();Ms(n,t,r,s),qS(n,e,r)}}function DM(t,e,n){var r=so(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(GS(t))zS(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,As(o,a)){var h=e.interleaved;h===null?(s.next=s,Cv(e)):(s.next=h.next,h.next=s),e.interleaved=s;return}}catch{}finally{}n=_S(t,e,s,r),n!==null&&(s=Mn(),Ms(n,t,r,s),qS(n,e,r))}}function GS(t){var e=t.alternate;return t===wr||e!==null&&e===wr}function zS(t,e){Ju=zd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function qS(t,e,n){if((n&4194240)!==0){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,fv(t,n)}}var qd={readContext:ms,useCallback:fn,useContext:fn,useEffect:fn,useImperativeHandle:fn,useInsertionEffect:fn,useLayoutEffect:fn,useMemo:fn,useReducer:fn,useRef:fn,useState:fn,useDebugValue:fn,useDeferredValue:fn,useTransition:fn,useMutableSource:fn,useSyncExternalStore:fn,useId:fn,unstable_isNewReconciler:!1},OM={readContext:ms,useCallback:function(t,e){return Gs().memoizedState=[t,e===void 0?null:e],t},useContext:ms,useEffect:sb,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,pd(4194308,4,LS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return pd(4194308,4,t,e)},useInsertionEffect:function(t,e){return pd(4,2,t,e)},useMemo:function(t,e){var n=Gs();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Gs();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=AM.bind(null,wr,t),[r.memoizedState,t]},useRef:function(t){var e=Gs();return t={current:t},e.memoizedState=t},useState:nb,useDebugValue:Lv,useDeferredValue:function(t){return Gs().memoizedState=t},useTransition:function(){var t=nb(!1),e=t[0];return t=MM.bind(null,t[1]),Gs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=wr,s=Gs();if(yr){if(n===void 0)throw Error(Be(407));n=n()}else{if(n=e(),Hr===null)throw Error(Be(349));(ra&30)!==0||jS(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,sb(AS.bind(null,r,i,t),[t]),r.flags|=2048,kc(9,MS.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Gs(),e=Hr.identifierPrefix;if(yr){var n=di,r=hi;n=(r&~(1<<32-js(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Tc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=jM++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},IM={readContext:ms,useCallback:FS,useContext:ms,useEffect:Pv,useImperativeHandle:NS,useInsertionEffect:RS,useLayoutEffect:PS,useMemo:US,useReducer:Zm,useRef:IS,useState:function(){return Zm(Ec)},useDebugValue:Lv,useDeferredValue:function(t){var e=gs();return VS(e,Nr.memoizedState,t)},useTransition:function(){var t=Zm(Ec)[0],e=gs().memoizedState;return[t,e]},useMutableSource:kS,useSyncExternalStore:CS,useId:BS,unstable_isNewReconciler:!1},RM={readContext:ms,useCallback:FS,useContext:ms,useEffect:Pv,useImperativeHandle:NS,useInsertionEffect:RS,useLayoutEffect:PS,useMemo:US,useReducer:Jm,useRef:IS,useState:function(){return Jm(Ec)},useDebugValue:Lv,useDeferredValue:function(t){var e=gs();return Nr===null?e.memoizedState=t:VS(e,Nr.memoizedState,t)},useTransition:function(){var t=Jm(Ec)[0],e=gs().memoizedState;return[t,e]},useMutableSource:kS,useSyncExternalStore:CS,useId:BS,unstable_isNewReconciler:!1};function vl(t,e){try{var n="",r=e;do n+=lj(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function eg(t,e,n){return{value:t,source:null,stack:n!=null?n:null,digest:e!=null?e:null}}function ny(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var PM=typeof WeakMap=="function"?WeakMap:Map;function WS(t,e,n){n=pi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){$d||($d=!0,fy=r),ny(t,e)},n}function $S(t,e,n){n=pi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){ny(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){ny(t,e),typeof r!="function"&&(no===null?no=new Set([this]):no.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function ib(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new PM;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=YM.bind(null,t,e,n),e.then(t,t))}function ob(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ab(t,e,n,r,s){return(t.mode&1)===0?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=pi(-1,1),e.tag=2,ro(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=s,t)}var LM=Oi.ReactCurrentOwner,Ln=!1;function xn(t,e,n,r){e.child=t===null?TS(e,null,n,r):gl(e,t.child,n,r)}function lb(t,e,n,r,s){n=n.render;var i=e.ref;return al(e,s),r=Iv(t,e,n,r,i,s),n=Rv(),t!==null&&!Ln?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Si(t,e,s)):(yr&&n&&wv(e),e.flags|=1,xn(t,e,r,s),e.child)}function ub(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!qv(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,HS(t,e,i,r,s)):(t=vd(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,(t.lanes&s)===0){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:vc,n(a,r)&&t.ref===e.ref)return Si(t,e,s)}return e.flags|=1,t=io(i,r),t.ref=e.ref,t.return=e,e.child=t}function HS(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(vc(i,r)&&t.ref===e.ref)if(Ln=!1,e.pendingProps=r=i,(t.lanes&s)!==0)(t.flags&131072)!==0&&(Ln=!0);else return e.lanes=t.lanes,Si(t,e,s)}return sy(t,e,n,r,s)}function XS(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if((e.mode&1)===0)e.memoizedState={baseLanes:0,cachePool:null,transitions:null},nr(Za,$n),$n|=n;else{if((n&1073741824)===0)return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,nr(Za,$n),$n|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,nr(Za,$n),$n|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,nr(Za,$n),$n|=r;return xn(t,e,s,n),e.child}function YS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function sy(t,e,n,r,s){var i=Vn(n)?ea:_n.current;return i=pl(e,i),al(e,s),n=Iv(t,e,n,r,i,s),r=Rv(),t!==null&&!Ln?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Si(t,e,s)):(yr&&r&&wv(e),e.flags|=1,xn(t,e,n,s),e.child)}function cb(t,e,n,r,s){if(Vn(n)){var i=!0;Ld(e)}else i=!1;if(al(e,s),e.stateNode===null)md(t,e),xS(e,n,r),ry(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var h=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=ms(d):(d=Vn(n)?ea:_n.current,d=pl(e,d));var g=n.getDerivedStateFromProps,m=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function";m||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||h!==d)&&tb(e,a,r,d),zi=!1;var c=e.memoizedState;a.state=c,Bd(e,r,a,s),h=e.memoizedState,o!==r||c!==h||Un.current||zi?(typeof g=="function"&&(ty(e,n,g,r),h=e.memoizedState),(o=zi||eb(e,n,o,r,c,h,d))?(m||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=h),a.props=r,a.state=h,a.context=d,r=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,bS(t,e),o=e.memoizedProps,d=e.type===e.elementType?o:Ss(e.type,o),a.props=d,m=e.pendingProps,c=a.context,h=n.contextType,typeof h=="object"&&h!==null?h=ms(h):(h=Vn(n)?ea:_n.current,h=pl(e,h));var l=n.getDerivedStateFromProps;(g=typeof l=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==m||c!==h)&&tb(e,a,r,h),zi=!1,c=e.memoizedState,a.state=c,Bd(e,r,a,s);var u=e.memoizedState;o!==m||c!==u||Un.current||zi?(typeof l=="function"&&(ty(e,n,l,r),u=e.memoizedState),(d=zi||eb(e,n,d,r,c,u,h)||!1)?(g||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,u,h),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,u,h)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&c===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&c===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=h,r=d):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&c===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&c===t.memoizedState||(e.flags|=1024),r=!1)}return iy(t,e,n,r,i,s)}function iy(t,e,n,r,s,i){YS(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&Y_(e,n,!1),Si(t,e,i);r=e.stateNode,LM.current=e;var o=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=gl(e,t.child,null,i),e.child=gl(e,null,o,i)):xn(t,e,o,i),e.memoizedState=r.state,s&&Y_(e,n,!0),e.child}function QS(t){var e=t.stateNode;e.pendingContext?X_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&X_(t,e.context,!1),Mv(t,e.containerInfo)}function hb(t,e,n,r,s){return ml(),Sv(s),e.flags|=256,xn(t,e,n,r),e.child}var oy={dehydrated:null,treeContext:null,retryLane:0};function ay(t){return{baseLanes:t,cachePool:null,transitions:null}}function KS(t,e,n){var r=e.pendingProps,s=br.current,i=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(s&2)!==0),o?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),nr(br,s&1),t===null)return Jg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((e.mode&1)===0?e.lanes=1:t.data==="$!"?e.lanes=8:e.lanes=1073741824,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},(r&1)===0&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Ap(a,r,0,null),t=Ko(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=ay(n),e.memoizedState=oy,t):Nv(e,a));if(s=t.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return NM(t,e,a,r,o,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,o=s.sibling;var h={mode:"hidden",children:r.children};return(a&1)===0&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=h,e.deletions=null):(r=io(s,h),r.subtreeFlags=s.subtreeFlags&14680064),o!==null?i=io(o,i):(i=Ko(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?ay(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=oy,r}return i=t.child,t=i.sibling,r=io(i,{mode:"visible",children:r.children}),(e.mode&1)===0&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Nv(t,e){return e=Ap({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Hh(t,e,n,r){return r!==null&&Sv(r),gl(e,t.child,null,n),t=Nv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function NM(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=eg(Error(Be(422))),Hh(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Ap({mode:"visible",children:r.children},s,0,null),i=Ko(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,(e.mode&1)!==0&&gl(e,t.child,null,a),e.child.memoizedState=ay(a),e.memoizedState=oy,i);if((e.mode&1)===0)return Hh(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var o=r.dgst;return r=o,i=Error(Be(419)),r=eg(i,r,void 0),Hh(t,e,a,r)}if(o=(a&t.childLanes)!==0,Ln||o){if(r=Hr,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=(s&(r.suspendedLanes|a))!==0?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,xi(t,s),Ms(r,t,s,-1))}return zv(),r=eg(Error(Be(421))),Hh(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=QM.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Hn=to(s.nextSibling),Yn=e,yr=!0,Es=null,t!==null&&(os[as++]=hi,os[as++]=di,os[as++]=ta,hi=t.id,di=t.overflow,ta=e),e=Nv(e,r.children),e.flags|=4096,e)}function db(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ey(t.return,e,n)}function tg(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function ZS(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(xn(t,e,r.children,n),r=br.current,(r&2)!==0)r=r&1|2,e.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&db(t,n,e);else if(t.tag===19)db(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(nr(br,r),(e.mode&1)===0)e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Gd(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),tg(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Gd(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}tg(e,!0,n,null,i);break;case"together":tg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function md(t,e){(e.mode&1)===0&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Si(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),na|=e.lanes,(n&e.childLanes)===0)return null;if(t!==null&&e.child!==t.child)throw Error(Be(153));if(e.child!==null){for(t=e.child,n=io(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=io(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function FM(t,e,n){switch(e.tag){case 3:QS(e),ml();break;case 5:ES(e);break;case 1:Vn(e.type)&&Ld(e);break;case 4:Mv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;nr(Ud,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(nr(br,br.current&1),e.flags|=128,null):(n&e.child.childLanes)!==0?KS(t,e,n):(nr(br,br.current&1),t=Si(t,e,n),t!==null?t.sibling:null);nr(br,br.current&1);break;case 19:if(r=(n&e.childLanes)!==0,(t.flags&128)!==0){if(r)return ZS(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),nr(br,br.current),r)break;return null;case 22:case 23:return e.lanes=0,XS(t,e,n)}return Si(t,e,n)}var JS,ly,e2,t2;JS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ly=function(){};e2=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,qo(Ws.current);var i=null;switch(n){case"input":s=Ag(t,s),r=Ag(t,r),i=[];break;case"select":s=xr({},s,{value:void 0}),r=xr({},r,{value:void 0}),i=[];break;case"textarea":s=Ig(t,s),r=Ig(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Rd)}Pg(n,r);var a;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var o=s[d];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(hc.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var h=r[d];if(o=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&h!==o&&(h!=null||o!=null))if(d==="style")if(o){for(a in o)!o.hasOwnProperty(a)||h&&h.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in h)h.hasOwnProperty(a)&&o[a]!==h[a]&&(n||(n={}),n[a]=h[a])}else n||(i||(i=[]),i.push(d,n)),n=h;else d==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,o=o?o.__html:void 0,h!=null&&o!==h&&(i=i||[]).push(d,h)):d==="children"?typeof h!="string"&&typeof h!="number"||(i=i||[]).push(d,""+h):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(hc.hasOwnProperty(d)?(h!=null&&d==="onScroll"&&ur("scroll",t),i||o===h||(i=[])):(i=i||[]).push(d,h))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};t2=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ru(t,e){if(!yr)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function pn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function UM(t,e,n){var r=e.pendingProps;switch(xv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pn(e),null;case 1:return Vn(e.type)&&Pd(),pn(e),null;case 3:return r=e.stateNode,yl(),hr(Un),hr(_n),Dv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Wh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,Es!==null&&(gy(Es),Es=null))),ly(t,e),pn(e),null;case 5:Av(e);var s=qo(Sc.current);if(n=e.type,t!==null&&e.stateNode!=null)e2(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Be(166));return pn(e),null}if(t=qo(Ws.current),Wh(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[zs]=e,r[wc]=i,t=(e.mode&1)!==0,n){case"dialog":ur("cancel",r),ur("close",r);break;case"iframe":case"object":case"embed":ur("load",r);break;case"video":case"audio":for(s=0;s<zu.length;s++)ur(zu[s],r);break;case"source":ur("error",r);break;case"img":case"image":case"link":ur("error",r),ur("load",r);break;case"details":ur("toggle",r);break;case"input":w_(r,i),ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ur("invalid",r);break;case"textarea":S_(r,i),ur("invalid",r)}Pg(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];a==="children"?typeof o=="string"?r.textContent!==o&&(i.suppressHydrationWarning!==!0&&qh(r.textContent,o,t),s=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&qh(r.textContent,o,t),s=["children",""+o]):hc.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&ur("scroll",r)}switch(n){case"input":Lh(r),x_(r,i,!0);break;case"textarea":Lh(r),T_(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Rd)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=jx(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[zs]=e,t[wc]=r,JS(t,e,!1,!1),e.stateNode=t;e:{switch(a=Lg(n,r),n){case"dialog":ur("cancel",t),ur("close",t),s=r;break;case"iframe":case"object":case"embed":ur("load",t),s=r;break;case"video":case"audio":for(s=0;s<zu.length;s++)ur(zu[s],t);s=r;break;case"source":ur("error",t),s=r;break;case"img":case"image":case"link":ur("error",t),ur("load",t),s=r;break;case"details":ur("toggle",t),s=r;break;case"input":w_(t,r),s=Ag(t,r),ur("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=xr({},r,{value:void 0}),ur("invalid",t);break;case"textarea":S_(t,r),s=Ig(t,r),ur("invalid",t);break;default:s=r}Pg(n,s),o=s;for(i in o)if(o.hasOwnProperty(i)){var h=o[i];i==="style"?Dx(t,h):i==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&Mx(t,h)):i==="children"?typeof h=="string"?(n!=="textarea"||h!=="")&&dc(t,h):typeof h=="number"&&dc(t,""+h):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(hc.hasOwnProperty(i)?h!=null&&i==="onScroll"&&ur("scroll",t):h!=null&&av(t,i,h,a))}switch(n){case"input":Lh(t),x_(t,r,!1);break;case"textarea":Lh(t),T_(t);break;case"option":r.value!=null&&t.setAttribute("value",""+co(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?nl(t,!!r.multiple,i,!1):r.defaultValue!=null&&nl(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Rd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return pn(e),null;case 6:if(t&&e.stateNode!=null)t2(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Be(166));if(n=qo(Sc.current),qo(Ws.current),Wh(e)){if(r=e.stateNode,n=e.memoizedProps,r[zs]=e,(i=r.nodeValue!==n)&&(t=Yn,t!==null))switch(t.tag){case 3:qh(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&qh(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[zs]=e,e.stateNode=r}return pn(e),null;case 13:if(hr(br),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(yr&&Hn!==null&&(e.mode&1)!==0&&(e.flags&128)===0)vS(),ml(),e.flags|=98560,i=!1;else if(i=Wh(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Be(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Be(317));i[zs]=e}else ml(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;pn(e),i=!1}else Es!==null&&(gy(Es),Es=null),i=!0;if(!i)return e.flags&65536?e:null}return(e.flags&128)!==0?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,(e.mode&1)!==0&&(t===null||(br.current&1)!==0?Fr===0&&(Fr=3):zv())),e.updateQueue!==null&&(e.flags|=4),pn(e),null);case 4:return yl(),ly(t,e),t===null&&_c(e.stateNode.containerInfo),pn(e),null;case 10:return kv(e.type._context),pn(e),null;case 17:return Vn(e.type)&&Pd(),pn(e),null;case 19:if(hr(br),i=e.memoizedState,i===null)return pn(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)Ru(i,!1);else{if(Fr!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(a=Gd(t),a!==null){for(e.flags|=128,Ru(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return nr(br,br.current&1|2),e.child}t=t.sibling}i.tail!==null&&Mr()>_l&&(e.flags|=128,r=!0,Ru(i,!1),e.lanes=4194304)}else{if(!r)if(t=Gd(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ru(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!yr)return pn(e),null}else 2*Mr()-i.renderingStartTime>_l&&n!==1073741824&&(e.flags|=128,r=!0,Ru(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Mr(),e.sibling=null,n=br.current,nr(br,r?n&1|2:n&1),e):(pn(e),null);case 22:case 23:return Gv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&(e.mode&1)!==0?($n&1073741824)!==0&&(pn(e),e.subtreeFlags&6&&(e.flags|=8192)):pn(e),null;case 24:return null;case 25:return null}throw Error(Be(156,e.tag))}function VM(t,e){switch(xv(e),e.tag){case 1:return Vn(e.type)&&Pd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return yl(),hr(Un),hr(_n),Dv(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 5:return Av(e),null;case 13:if(hr(br),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Be(340));ml()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return hr(br),null;case 4:return yl(),null;case 10:return kv(e.type._context),null;case 22:case 23:return Gv(),null;case 24:return null;default:return null}}var Xh=!1,mn=!1,BM=typeof WeakSet=="function"?WeakSet:Set,rt=null;function Ka(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Er(t,e,r)}else n.current=null}function uy(t,e,n){try{n()}catch(r){Er(t,e,r)}}var fb=!1;function GM(t,e){if($g=Dd,t=iS(),bv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,o=-1,h=-1,d=0,g=0,m=t,c=null;t:for(;;){for(var l;m!==n||s!==0&&m.nodeType!==3||(o=a+s),m!==i||r!==0&&m.nodeType!==3||(h=a+r),m.nodeType===3&&(a+=m.nodeValue.length),(l=m.firstChild)!==null;)c=m,m=l;for(;;){if(m===t)break t;if(c===n&&++d===s&&(o=a),c===i&&++g===r&&(h=a),(l=m.nextSibling)!==null)break;m=c,c=m.parentNode}m=l}n=o===-1||h===-1?null:{start:o,end:h}}else n=null}n=n||{start:0,end:0}}else n=null;for(Hg={focusedElem:t,selectionRange:n},Dd=!1,rt=e;rt!==null;)if(e=rt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,rt=t;else for(;rt!==null;){e=rt;try{var u=e.alternate;if((e.flags&1024)!==0)switch(e.tag){case 0:case 11:case 15:break;case 1:if(u!==null){var f=u.memoizedProps,p=u.memoizedState,y=e.stateNode,_=y.getSnapshotBeforeUpdate(e.elementType===e.type?f:Ss(e.type,f),p);y.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Be(163))}}catch(x){Er(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,rt=t;break}rt=e.return}return u=fb,fb=!1,u}function ec(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&uy(e,n,i)}s=s.next}while(s!==r)}}function jp(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function cy(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function r2(t){var e=t.alternate;e!==null&&(t.alternate=null,r2(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[zs],delete e[wc],delete e[Qg],delete e[TM],delete e[EM])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function n2(t){return t.tag===5||t.tag===3||t.tag===4}function pb(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||n2(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function hy(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Rd));else if(r!==4&&(t=t.child,t!==null))for(hy(t,e,n),t=t.sibling;t!==null;)hy(t,e,n),t=t.sibling}function dy(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(dy(t,e,n),t=t.sibling;t!==null;)dy(t,e,n),t=t.sibling}var Zr=null,Ts=!1;function Vi(t,e,n){for(n=n.child;n!==null;)s2(t,e,n),n=n.sibling}function s2(t,e,n){if(qs&&typeof qs.onCommitFiberUnmount=="function")try{qs.onCommitFiberUnmount(bp,n)}catch{}switch(n.tag){case 5:mn||Ka(n,e);case 6:var r=Zr,s=Ts;Zr=null,Vi(t,e,n),Zr=r,Ts=s,Zr!==null&&(Ts?(t=Zr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Zr.removeChild(n.stateNode));break;case 18:Zr!==null&&(Ts?(t=Zr,n=n.stateNode,t.nodeType===8?Xm(t.parentNode,n):t.nodeType===1&&Xm(t,n),gc(t)):Xm(Zr,n.stateNode));break;case 4:r=Zr,s=Ts,Zr=n.stateNode.containerInfo,Ts=!0,Vi(t,e,n),Zr=r,Ts=s;break;case 0:case 11:case 14:case 15:if(!mn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&((i&2)!==0||(i&4)!==0)&&uy(n,e,a),s=s.next}while(s!==r)}Vi(t,e,n);break;case 1:if(!mn&&(Ka(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Er(n,e,o)}Vi(t,e,n);break;case 21:Vi(t,e,n);break;case 22:n.mode&1?(mn=(r=mn)||n.memoizedState!==null,Vi(t,e,n),mn=r):Vi(t,e,n);break;default:Vi(t,e,n)}}function mb(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new BM),e.forEach(function(r){var s=KM.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function xs(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:Zr=o.stateNode,Ts=!1;break e;case 3:Zr=o.stateNode.containerInfo,Ts=!0;break e;case 4:Zr=o.stateNode.containerInfo,Ts=!0;break e}o=o.return}if(Zr===null)throw Error(Be(160));s2(i,a,s),Zr=null,Ts=!1;var h=s.alternate;h!==null&&(h.return=null),s.return=null}catch(d){Er(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)i2(e,t),e=e.sibling}function i2(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(xs(e,t),Bs(t),r&4){try{ec(3,t,t.return),jp(3,t)}catch(f){Er(t,t.return,f)}try{ec(5,t,t.return)}catch(f){Er(t,t.return,f)}}break;case 1:xs(e,t),Bs(t),r&512&&n!==null&&Ka(n,n.return);break;case 5:if(xs(e,t),Bs(t),r&512&&n!==null&&Ka(n,n.return),t.flags&32){var s=t.stateNode;try{dc(s,"")}catch(f){Er(t,t.return,f)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,o=t.type,h=t.updateQueue;if(t.updateQueue=null,h!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&kx(s,i),Lg(o,a);var d=Lg(o,i);for(a=0;a<h.length;a+=2){var g=h[a],m=h[a+1];g==="style"?Dx(s,m):g==="dangerouslySetInnerHTML"?Mx(s,m):g==="children"?dc(s,m):av(s,g,m,d)}switch(o){case"input":Dg(s,i);break;case"textarea":Cx(s,i);break;case"select":var c=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var l=i.value;l!=null?nl(s,!!i.multiple,l,!1):c!==!!i.multiple&&(i.defaultValue!=null?nl(s,!!i.multiple,i.defaultValue,!0):nl(s,!!i.multiple,i.multiple?[]:"",!1))}s[wc]=i}catch(f){Er(t,t.return,f)}}break;case 6:if(xs(e,t),Bs(t),r&4){if(t.stateNode===null)throw Error(Be(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(f){Er(t,t.return,f)}}break;case 3:if(xs(e,t),Bs(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{gc(e.containerInfo)}catch(f){Er(t,t.return,f)}break;case 4:xs(e,t),Bs(t);break;case 13:xs(e,t),Bs(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Vv=Mr())),r&4&&mb(t);break;case 22:if(g=n!==null&&n.memoizedState!==null,t.mode&1?(mn=(d=mn)||g,xs(e,t),mn=d):xs(e,t),Bs(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!g&&(t.mode&1)!==0)for(rt=t,g=t.child;g!==null;){for(m=rt=g;rt!==null;){switch(c=rt,l=c.child,c.tag){case 0:case 11:case 14:case 15:ec(4,c,c.return);break;case 1:Ka(c,c.return);var u=c.stateNode;if(typeof u.componentWillUnmount=="function"){r=c,n=c.return;try{e=r,u.props=e.memoizedProps,u.state=e.memoizedState,u.componentWillUnmount()}catch(f){Er(r,n,f)}}break;case 5:Ka(c,c.return);break;case 22:if(c.memoizedState!==null){yb(m);continue}}l!==null?(l.return=c,rt=l):yb(m)}g=g.sibling}e:for(g=null,m=t;;){if(m.tag===5){if(g===null){g=m;try{s=m.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=m.stateNode,h=m.memoizedProps.style,a=h!=null&&h.hasOwnProperty("display")?h.display:null,o.style.display=Ax("display",a))}catch(f){Er(t,t.return,f)}}}else if(m.tag===6){if(g===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(f){Er(t,t.return,f)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;g===m&&(g=null),m=m.return}g===m&&(g=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:xs(e,t),Bs(t),r&4&&mb(t);break;case 21:break;default:xs(e,t),Bs(t)}}function Bs(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(n2(n)){var r=n;break e}n=n.return}throw Error(Be(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(dc(s,""),r.flags&=-33);var i=pb(t);dy(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,o=pb(t);hy(t,o,a);break;default:throw Error(Be(161))}}catch(h){Er(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function zM(t,e,n){rt=t,o2(t)}function o2(t,e,n){for(var r=(t.mode&1)!==0;rt!==null;){var s=rt,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Xh;if(!a){var o=s.alternate,h=o!==null&&o.memoizedState!==null||mn;o=Xh;var d=mn;if(Xh=a,(mn=h)&&!d)for(rt=s;rt!==null;)a=rt,h=a.child,a.tag===22&&a.memoizedState!==null?vb(s):h!==null?(h.return=a,rt=h):vb(s);for(;i!==null;)rt=i,o2(i),i=i.sibling;rt=s,Xh=o,mn=d}gb(t)}else(s.subtreeFlags&8772)!==0&&i!==null?(i.return=s,rt=i):gb(t)}}function gb(t){for(;rt!==null;){var e=rt;if((e.flags&8772)!==0){var n=e.alternate;try{if((e.flags&8772)!==0)switch(e.tag){case 0:case 11:case 15:mn||jp(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!mn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Ss(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&J_(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}J_(e,a,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&n.focus();break;case"img":h.src&&(n.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var g=d.memoizedState;if(g!==null){var m=g.dehydrated;m!==null&&gc(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Be(163))}mn||e.flags&512&&cy(e)}catch(c){Er(e,e.return,c)}}if(e===t){rt=null;break}if(n=e.sibling,n!==null){n.return=e.return,rt=n;break}rt=e.return}}function yb(t){for(;rt!==null;){var e=rt;if(e===t){rt=null;break}var n=e.sibling;if(n!==null){n.return=e.return,rt=n;break}rt=e.return}}function vb(t){for(;rt!==null;){var e=rt;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{jp(4,e)}catch(h){Er(e,n,h)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(h){Er(e,s,h)}}var i=e.return;try{cy(e)}catch(h){Er(e,i,h)}break;case 5:var a=e.return;try{cy(e)}catch(h){Er(e,a,h)}}}catch(h){Er(e,e.return,h)}if(e===t){rt=null;break}var o=e.sibling;if(o!==null){o.return=e.return,rt=o;break}rt=e.return}}var qM=Math.ceil,Wd=Oi.ReactCurrentDispatcher,Fv=Oi.ReactCurrentOwner,cs=Oi.ReactCurrentBatchConfig,Bt=0,Hr=null,Pr=null,sn=0,$n=0,Za=xo(0),Fr=0,Cc=null,na=0,Mp=0,Uv=0,tc=null,Rn=null,Vv=0,_l=1/0,li=null,$d=!1,fy=null,no=null,Yh=!1,Yi=null,Hd=0,rc=0,py=null,gd=-1,yd=0;function Mn(){return(Bt&6)!==0?Mr():gd!==-1?gd:gd=Mr()}function so(t){return(t.mode&1)===0?1:(Bt&2)!==0&&sn!==0?sn&-sn:CM.transition!==null?(yd===0&&(yd=zx()),yd):(t=Qt,t!==0||(t=window.event,t=t===void 0?16:Qx(t.type)),t)}function Ms(t,e,n,r){if(50<rc)throw rc=0,py=null,Error(Be(185));Yc(t,n,r),((Bt&2)===0||t!==Hr)&&(t===Hr&&((Bt&2)===0&&(Mp|=n),Fr===4&&$i(t,sn)),Bn(t,r),n===1&&Bt===0&&(e.mode&1)===0&&(_l=Mr()+500,Ep&&So()))}function Bn(t,e){var n=t.callbackNode;Cj(t,e);var r=Ad(t,t===Hr?sn:0);if(r===0)n!==null&&C_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&C_(n),e===1)t.tag===0?kM(_b.bind(null,t)):mS(_b.bind(null,t)),xM(function(){(Bt&6)===0&&So()}),n=null;else{switch(qx(r)){case 1:n=dv;break;case 4:n=Bx;break;case 16:n=Md;break;case 536870912:n=Gx;break;default:n=Md}n=p2(n,a2.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function a2(t,e){if(gd=-1,yd=0,(Bt&6)!==0)throw Error(Be(327));var n=t.callbackNode;if(ll()&&t.callbackNode!==n)return null;var r=Ad(t,t===Hr?sn:0);if(r===0)return null;if((r&30)!==0||(r&t.expiredLanes)!==0||e)e=Xd(t,r);else{e=r;var s=Bt;Bt|=2;var i=u2();(Hr!==t||sn!==e)&&(li=null,_l=Mr()+500,Qo(t,e));do try{HM();break}catch(o){l2(t,o)}while(1);Ev(),Wd.current=i,Bt=s,Pr!==null?e=0:(Hr=null,sn=0,e=Fr)}if(e!==0){if(e===2&&(s=Bg(t),s!==0&&(r=s,e=my(t,s))),e===1)throw n=Cc,Qo(t,0),$i(t,r),Bn(t,Mr()),n;if(e===6)$i(t,r);else{if(s=t.current.alternate,(r&30)===0&&!WM(s)&&(e=Xd(t,r),e===2&&(i=Bg(t),i!==0&&(r=i,e=my(t,i))),e===1))throw n=Cc,Qo(t,0),$i(t,r),Bn(t,Mr()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Be(345));case 2:Vo(t,Rn,li);break;case 3:if($i(t,r),(r&130023424)===r&&(e=Vv+500-Mr(),10<e)){if(Ad(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Mn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Yg(Vo.bind(null,t,Rn,li),e);break}Vo(t,Rn,li);break;case 4:if($i(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-js(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=Mr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*qM(r/1960))-r,10<r){t.timeoutHandle=Yg(Vo.bind(null,t,Rn,li),r);break}Vo(t,Rn,li);break;case 5:Vo(t,Rn,li);break;default:throw Error(Be(329))}}}return Bn(t,Mr()),t.callbackNode===n?a2.bind(null,t):null}function my(t,e){var n=tc;return t.current.memoizedState.isDehydrated&&(Qo(t,e).flags|=256),t=Xd(t,e),t!==2&&(e=Rn,Rn=n,e!==null&&gy(e)),t}function gy(t){Rn===null?Rn=t:Rn.push.apply(Rn,t)}function WM(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!As(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function $i(t,e){for(e&=~Uv,e&=~Mp,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-js(e),r=1<<n;t[n]=-1,e&=~r}}function _b(t){if((Bt&6)!==0)throw Error(Be(327));ll();var e=Ad(t,0);if((e&1)===0)return Bn(t,Mr()),null;var n=Xd(t,e);if(t.tag!==0&&n===2){var r=Bg(t);r!==0&&(e=r,n=my(t,r))}if(n===1)throw n=Cc,Qo(t,0),$i(t,e),Bn(t,Mr()),n;if(n===6)throw Error(Be(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Vo(t,Rn,li),Bn(t,Mr()),null}function Bv(t,e){var n=Bt;Bt|=1;try{return t(e)}finally{Bt=n,Bt===0&&(_l=Mr()+500,Ep&&So())}}function sa(t){Yi!==null&&Yi.tag===0&&(Bt&6)===0&&ll();var e=Bt;Bt|=1;var n=cs.transition,r=Qt;try{if(cs.transition=null,Qt=1,t)return t()}finally{Qt=r,cs.transition=n,Bt=e,(Bt&6)===0&&So()}}function Gv(){$n=Za.current,hr(Za)}function Qo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,wM(n)),Pr!==null)for(n=Pr.return;n!==null;){var r=n;switch(xv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Pd();break;case 3:yl(),hr(Un),hr(_n),Dv();break;case 5:Av(r);break;case 4:yl();break;case 13:hr(br);break;case 19:hr(br);break;case 10:kv(r.type._context);break;case 22:case 23:Gv()}n=n.return}if(Hr=t,Pr=t=io(t.current,null),sn=$n=e,Fr=0,Cc=null,Uv=Mp=na=0,Rn=tc=null,zo!==null){for(e=0;e<zo.length;e++)if(n=zo[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}zo=null}return t}function l2(t,e){do{var n=Pr;try{if(Ev(),fd.current=qd,zd){for(var r=wr.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}zd=!1}if(ra=0,$r=Nr=wr=null,Ju=!1,Tc=0,Fv.current=null,n===null||n.return===null){Fr=1,Cc=e,Pr=null;break}e:{var i=t,a=n.return,o=n,h=e;if(e=sn,o.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var d=h,g=o,m=g.tag;if((g.mode&1)===0&&(m===0||m===11||m===15)){var c=g.alternate;c?(g.updateQueue=c.updateQueue,g.memoizedState=c.memoizedState,g.lanes=c.lanes):(g.updateQueue=null,g.memoizedState=null)}var l=ob(a);if(l!==null){l.flags&=-257,ab(l,a,o,i,e),l.mode&1&&ib(i,d,e),e=l,h=d;var u=e.updateQueue;if(u===null){var f=new Set;f.add(h),e.updateQueue=f}else u.add(h);break e}else{if((e&1)===0){ib(i,d,e),zv();break e}h=Error(Be(426))}}else if(yr&&o.mode&1){var p=ob(a);if(p!==null){(p.flags&65536)===0&&(p.flags|=256),ab(p,a,o,i,e),Sv(vl(h,o));break e}}i=h=vl(h,o),Fr!==4&&(Fr=2),tc===null?tc=[i]:tc.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=WS(i,h,e);Z_(i,y);break e;case 1:o=h;var _=i.type,b=i.stateNode;if((i.flags&128)===0&&(typeof _.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(no===null||!no.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var x=$S(i,o,e);Z_(i,x);break e}}i=i.return}while(i!==null)}h2(n)}catch(S){e=S,Pr===n&&n!==null&&(Pr=n=n.return);continue}break}while(1)}function u2(){var t=Wd.current;return Wd.current=qd,t===null?qd:t}function zv(){(Fr===0||Fr===3||Fr===2)&&(Fr=4),Hr===null||(na&268435455)===0&&(Mp&268435455)===0||$i(Hr,sn)}function Xd(t,e){var n=Bt;Bt|=2;var r=u2();(Hr!==t||sn!==e)&&(li=null,Qo(t,e));do try{$M();break}catch(s){l2(t,s)}while(1);if(Ev(),Bt=n,Wd.current=r,Pr!==null)throw Error(Be(261));return Hr=null,sn=0,Fr}function $M(){for(;Pr!==null;)c2(Pr)}function HM(){for(;Pr!==null&&!vj();)c2(Pr)}function c2(t){var e=f2(t.alternate,t,$n);t.memoizedProps=t.pendingProps,e===null?h2(t):Pr=e,Fv.current=null}function h2(t){var e=t;do{var n=e.alternate;if(t=e.return,(e.flags&32768)===0){if(n=UM(n,e,$n),n!==null){Pr=n;return}}else{if(n=VM(n,e),n!==null){n.flags&=32767,Pr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Fr=6,Pr=null;return}}if(e=e.sibling,e!==null){Pr=e;return}Pr=e=t}while(e!==null);Fr===0&&(Fr=5)}function Vo(t,e,n){var r=Qt,s=cs.transition;try{cs.transition=null,Qt=1,XM(t,e,n,r)}finally{cs.transition=s,Qt=r}return null}function XM(t,e,n,r){do ll();while(Yi!==null);if((Bt&6)!==0)throw Error(Be(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Be(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(jj(t,i),t===Hr&&(Pr=Hr=null,sn=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||Yh||(Yh=!0,p2(Md,function(){return ll(),null})),i=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||i){i=cs.transition,cs.transition=null;var a=Qt;Qt=1;var o=Bt;Bt|=4,Fv.current=null,GM(t,n),i2(n,t),pM(Hg),Dd=!!$g,Hg=$g=null,t.current=n,zM(n),_j(),Bt=o,Qt=a,cs.transition=i}else t.current=n;if(Yh&&(Yh=!1,Yi=t,Hd=s),i=t.pendingLanes,i===0&&(no=null),xj(n.stateNode),Bn(t,Mr()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if($d)throw $d=!1,t=fy,fy=null,t;return(Hd&1)!==0&&t.tag!==0&&ll(),i=t.pendingLanes,(i&1)!==0?t===py?rc++:(rc=0,py=t):rc=0,So(),null}function ll(){if(Yi!==null){var t=qx(Hd),e=cs.transition,n=Qt;try{if(cs.transition=null,Qt=16>t?16:t,Yi===null)var r=!1;else{if(t=Yi,Yi=null,Hd=0,(Bt&6)!==0)throw Error(Be(331));var s=Bt;for(Bt|=4,rt=t.current;rt!==null;){var i=rt,a=i.child;if((rt.flags&16)!==0){var o=i.deletions;if(o!==null){for(var h=0;h<o.length;h++){var d=o[h];for(rt=d;rt!==null;){var g=rt;switch(g.tag){case 0:case 11:case 15:ec(8,g,i)}var m=g.child;if(m!==null)m.return=g,rt=m;else for(;rt!==null;){g=rt;var c=g.sibling,l=g.return;if(r2(g),g===d){rt=null;break}if(c!==null){c.return=l,rt=c;break}rt=l}}}var u=i.alternate;if(u!==null){var f=u.child;if(f!==null){u.child=null;do{var p=f.sibling;f.sibling=null,f=p}while(f!==null)}}rt=i}}if((i.subtreeFlags&2064)!==0&&a!==null)a.return=i,rt=a;else e:for(;rt!==null;){if(i=rt,(i.flags&2048)!==0)switch(i.tag){case 0:case 11:case 15:ec(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,rt=y;break e}rt=i.return}}var _=t.current;for(rt=_;rt!==null;){a=rt;var b=a.child;if((a.subtreeFlags&2064)!==0&&b!==null)b.return=a,rt=b;else e:for(a=_;rt!==null;){if(o=rt,(o.flags&2048)!==0)try{switch(o.tag){case 0:case 11:case 15:jp(9,o)}}catch(S){Er(o,o.return,S)}if(o===a){rt=null;break e}var x=o.sibling;if(x!==null){x.return=o.return,rt=x;break e}rt=o.return}}if(Bt=s,So(),qs&&typeof qs.onPostCommitFiberRoot=="function")try{qs.onPostCommitFiberRoot(bp,t)}catch{}r=!0}return r}finally{Qt=n,cs.transition=e}}return!1}function bb(t,e,n){e=vl(n,e),e=WS(t,e,1),t=ro(t,e,1),e=Mn(),t!==null&&(Yc(t,1,e),Bn(t,e))}function Er(t,e,n){if(t.tag===3)bb(t,t,n);else for(;e!==null;){if(e.tag===3){bb(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(no===null||!no.has(r))){t=vl(n,t),t=$S(e,t,1),e=ro(e,t,1),t=Mn(),e!==null&&(Yc(e,1,t),Bn(e,t));break}}e=e.return}}function YM(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Mn(),t.pingedLanes|=t.suspendedLanes&n,Hr===t&&(sn&n)===n&&(Fr===4||Fr===3&&(sn&130023424)===sn&&500>Mr()-Vv?Qo(t,0):Uv|=n),Bn(t,e)}function d2(t,e){e===0&&((t.mode&1)===0?e=1:(e=Uh,Uh<<=1,(Uh&130023424)===0&&(Uh=4194304)));var n=Mn();t=xi(t,e),t!==null&&(Yc(t,e,n),Bn(t,n))}function QM(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),d2(t,n)}function KM(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Be(314))}r!==null&&r.delete(e),d2(t,n)}var f2;f2=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Un.current)Ln=!0;else{if((t.lanes&n)===0&&(e.flags&128)===0)return Ln=!1,FM(t,e,n);Ln=(t.flags&131072)!==0}else Ln=!1,yr&&(e.flags&1048576)!==0&&gS(e,Fd,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;md(t,e),t=e.pendingProps;var s=pl(e,_n.current);al(e,n),s=Iv(null,e,r,t,s,n);var i=Rv();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Vn(r)?(i=!0,Ld(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,jv(e),s.updater=kp,e.stateNode=s,s._reactInternals=e,ry(e,r,t,n),e=iy(null,e,r,!0,i,n)):(e.tag=0,yr&&i&&wv(e),xn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(md(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=JM(r),t=Ss(r,t),s){case 0:e=sy(null,e,r,t,n);break e;case 1:e=cb(null,e,r,t,n);break e;case 11:e=lb(null,e,r,t,n);break e;case 14:e=ub(null,e,r,Ss(r.type,t),n);break e}throw Error(Be(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ss(r,s),sy(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ss(r,s),cb(t,e,r,s,n);case 3:e:{if(QS(e),t===null)throw Error(Be(387));r=e.pendingProps,i=e.memoizedState,s=i.element,bS(t,e),Bd(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=vl(Error(Be(423)),e),e=hb(t,e,r,n,s);break e}else if(r!==s){s=vl(Error(Be(424)),e),e=hb(t,e,r,n,s);break e}else for(Hn=to(e.stateNode.containerInfo.firstChild),Yn=e,yr=!0,Es=null,n=TS(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ml(),r===s){e=Si(t,e,n);break e}xn(t,e,r,n)}e=e.child}return e;case 5:return ES(e),t===null&&Jg(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,Xg(r,s)?a=null:i!==null&&Xg(r,i)&&(e.flags|=32),YS(t,e),xn(t,e,a,n),e.child;case 6:return t===null&&Jg(e),null;case 13:return KS(t,e,n);case 4:return Mv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=gl(e,null,r,n):xn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ss(r,s),lb(t,e,r,s,n);case 7:return xn(t,e,e.pendingProps,n),e.child;case 8:return xn(t,e,e.pendingProps.children,n),e.child;case 12:return xn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,nr(Ud,r._currentValue),r._currentValue=a,i!==null)if(As(i.value,a)){if(i.children===s.children&&!Un.current){e=Si(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var o=i.dependencies;if(o!==null){a=i.child;for(var h=o.firstContext;h!==null;){if(h.context===r){if(i.tag===1){h=pi(-1,n&-n),h.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var g=d.pending;g===null?h.next=h:(h.next=g.next,g.next=h),d.pending=h}}i.lanes|=n,h=i.alternate,h!==null&&(h.lanes|=n),ey(i.return,n,e),o.lanes|=n;break}h=h.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(Be(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),ey(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}xn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,al(e,n),s=ms(s),r=r(s),e.flags|=1,xn(t,e,r,n),e.child;case 14:return r=e.type,s=Ss(r,e.pendingProps),s=Ss(r.type,s),ub(t,e,r,s,n);case 15:return HS(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ss(r,s),md(t,e),e.tag=1,Vn(r)?(t=!0,Ld(e)):t=!1,al(e,n),xS(e,r,s),ry(e,r,s,n),iy(null,e,r,!0,t,n);case 19:return ZS(t,e,n);case 22:return XS(t,e,n)}throw Error(Be(156,e.tag))};function p2(t,e){return Vx(t,e)}function ZM(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function us(t,e,n,r){return new ZM(t,e,n,r)}function qv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function JM(t){if(typeof t=="function")return qv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===uv)return 11;if(t===cv)return 14}return 2}function io(t,e){var n=t.alternate;return n===null?(n=us(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function vd(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")qv(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Ga:return Ko(n.children,s,i,e);case lv:a=8,s|=8;break;case kg:return t=us(12,n,e,s|2),t.elementType=kg,t.lanes=i,t;case Cg:return t=us(13,n,e,s),t.elementType=Cg,t.lanes=i,t;case jg:return t=us(19,n,e,s),t.elementType=jg,t.lanes=i,t;case Sx:return Ap(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case wx:a=10;break e;case xx:a=9;break e;case uv:a=11;break e;case cv:a=14;break e;case Gi:a=16,r=null;break e}throw Error(Be(130,t==null?t:typeof t,""))}return e=us(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Ko(t,e,n,r){return t=us(7,t,r,e),t.lanes=n,t}function Ap(t,e,n,r){return t=us(22,t,r,e),t.elementType=Sx,t.lanes=n,t.stateNode={isHidden:!1},t}function rg(t,e,n){return t=us(6,t,null,e),t.lanes=n,t}function ng(t,e,n){return e=us(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function eA(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Nm(0),this.expirationTimes=Nm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nm(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Wv(t,e,n,r,s,i,a,o,h){return t=new eA(t,e,n,o,h),e===1?(e=1,i===!0&&(e|=8)):e=0,i=us(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},jv(i),t}function tA(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ba,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function m2(t){if(!t)return ho;t=t._reactInternals;e:{if(wa(t)!==t||t.tag!==1)throw Error(Be(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Vn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Be(171))}if(t.tag===1){var n=t.type;if(Vn(n))return pS(t,n,e)}return e}function g2(t,e,n,r,s,i,a,o,h){return t=Wv(n,r,!0,t,s,i,a,o,h),t.context=m2(null),n=t.current,r=Mn(),s=so(n),i=pi(r,s),i.callback=e!=null?e:null,ro(n,i,s),t.current.lanes=s,Yc(t,s,r),Bn(t,r),t}function Dp(t,e,n,r){var s=e.current,i=Mn(),a=so(s);return n=m2(n),e.context===null?e.context=n:e.pendingContext=n,e=pi(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ro(s,e,a),t!==null&&(Ms(t,s,a,i),dd(t,s,a)),a}function Yd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function wb(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function $v(t,e){wb(t,e),(t=t.alternate)&&wb(t,e)}function rA(){return null}var y2=typeof reportError=="function"?reportError:function(t){console.error(t)};function Hv(t){this._internalRoot=t}Op.prototype.render=Hv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Be(409));Dp(t,e,null,null)};Op.prototype.unmount=Hv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;sa(function(){Dp(null,t,null,null)}),e[wi]=null}};function Op(t){this._internalRoot=t}Op.prototype.unstable_scheduleHydration=function(t){if(t){var e=Hx();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Wi.length&&e!==0&&e<Wi[n].priority;n++);Wi.splice(n,0,t),n===0&&Yx(t)}};function Xv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ip(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function xb(){}function nA(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Yd(a);i.call(d)}}var a=g2(e,r,t,0,null,!1,!1,"",xb);return t._reactRootContainer=a,t[wi]=a.current,_c(t.nodeType===8?t.parentNode:t),sa(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var o=r;r=function(){var d=Yd(h);o.call(d)}}var h=Wv(t,0,!1,null,null,!1,!1,"",xb);return t._reactRootContainer=h,t[wi]=h.current,_c(t.nodeType===8?t.parentNode:t),sa(function(){Dp(e,h,n,r)}),h}function Rp(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var o=s;s=function(){var h=Yd(a);o.call(h)}}Dp(e,a,t,s)}else a=nA(n,e,t,s,r);return Yd(a)}Wx=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Gu(e.pendingLanes);n!==0&&(fv(e,n|1),Bn(e,Mr()),(Bt&6)===0&&(_l=Mr()+500,So()))}break;case 13:sa(function(){var r=xi(t,1);if(r!==null){var s=Mn();Ms(r,t,1,s)}}),$v(t,1)}};pv=function(t){if(t.tag===13){var e=xi(t,134217728);if(e!==null){var n=Mn();Ms(e,t,134217728,n)}$v(t,134217728)}};$x=function(t){if(t.tag===13){var e=so(t),n=xi(t,e);if(n!==null){var r=Mn();Ms(n,t,e,r)}$v(t,e)}};Hx=function(){return Qt};Xx=function(t,e){var n=Qt;try{return Qt=t,e()}finally{Qt=n}};Fg=function(t,e,n){switch(e){case"input":if(Dg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Tp(r);if(!s)throw Error(Be(90));Ex(r),Dg(r,s)}}}break;case"textarea":Cx(t,n);break;case"select":e=n.value,e!=null&&nl(t,!!n.multiple,e,!1)}};Rx=Bv;Px=sa;var sA={usingClientEntryPoint:!1,Events:[Kc,$a,Tp,Ox,Ix,Bv]},Pu={findFiberByHostInstance:Go,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},iA={bundleType:Pu.bundleType,version:Pu.version,rendererPackageName:Pu.rendererPackageName,rendererConfig:Pu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Oi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Fx(t),t===null?null:t.stateNode},findFiberByHostInstance:Pu.findFiberByHostInstance||rA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qh.isDisabled&&Qh.supportsFiber)try{bp=Qh.inject(iA),qs=Qh}catch{}}ns.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sA;ns.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Xv(e))throw Error(Be(200));return tA(t,e,null,n)};ns.createRoot=function(t,e){if(!Xv(t))throw Error(Be(299));var n=!1,r="",s=y2;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Wv(t,1,!1,null,null,n,!1,r,s),t[wi]=e.current,_c(t.nodeType===8?t.parentNode:t),new Hv(e)};ns.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Be(188)):(t=Object.keys(t).join(","),Error(Be(268,t)));return t=Fx(e),t=t===null?null:t.stateNode,t};ns.flushSync=function(t){return sa(t)};ns.hydrate=function(t,e,n){if(!Ip(e))throw Error(Be(200));return Rp(null,t,e,!0,n)};ns.hydrateRoot=function(t,e,n){if(!Xv(t))throw Error(Be(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=y2;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=g2(e,null,t,1,n!=null?n:null,s,!1,i,a),t[wi]=e.current,_c(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Op(e)};ns.render=function(t,e,n){if(!Ip(e))throw Error(Be(200));return Rp(null,t,e,!1,n)};ns.unmountComponentAtNode=function(t){if(!Ip(t))throw Error(Be(40));return t._reactRootContainer?(sa(function(){Rp(null,null,t,!1,function(){t._reactRootContainer=null,t[wi]=null})}),!0):!1};ns.unstable_batchedUpdates=Bv;ns.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ip(n))throw Error(Be(200));if(t==null||t._reactInternals===void 0)throw Error(Be(38));return Rp(t,e,n,!1,r)};ns.version="18.2.0-next-9e3b772b8-20220608";(function(t){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}e(),t.exports=ns})(gx);var Sb=gx.exports;Tg.createRoot=Sb.createRoot,Tg.hydrateRoot=Sb.hydrateRoot;function Kh(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var v2={exports:{}};/*! p5.js v1.4.2 July 21, 2022 */(function(t,e){(function(n){t.exports=n()})(function(){var n;return function r(s,i,a){function o(g,m){if(!i[g]){if(!s[g]){var c=typeof Kh=="function"&&Kh;if(!m&&c)return c(g,!0);if(h)return h(g,!0);var l=new Error("Cannot find module '"+g+"'");throw l.code="MODULE_NOT_FOUND",l}var u=i[g]={exports:{}};s[g][0].call(u.exports,function(f){return o(s[g][1][f]||f)},u,u.exports,r,s,i,a)}return i[g].exports}for(var h=typeof Kh=="function"&&Kh,d=0;d<a.length;d++)o(a[d]);return o}({1:[function(r,s,i){i.byteLength=function(u){var f=c(u),p=f[0],y=f[1];return 3*(p+y)/4-y},i.toByteArray=function(u){var f,p,y=c(u),_=y[0],b=y[1],x=new h(function(C,M){return 3*(C+M)/4-M}(_,b)),S=0,E=0<b?_-4:_;for(p=0;p<E;p+=4)f=o[u.charCodeAt(p)]<<18|o[u.charCodeAt(p+1)]<<12|o[u.charCodeAt(p+2)]<<6|o[u.charCodeAt(p+3)],x[S++]=f>>16&255,x[S++]=f>>8&255,x[S++]=255&f;return b===2&&(f=o[u.charCodeAt(p)]<<2|o[u.charCodeAt(p+1)]>>4,x[S++]=255&f),b===1&&(f=o[u.charCodeAt(p)]<<10|o[u.charCodeAt(p+1)]<<4|o[u.charCodeAt(p+2)]>>2,x[S++]=f>>8&255,x[S++]=255&f),x},i.fromByteArray=function(u){for(var f,p=u.length,y=p%3,_=[],b=0,x=p-y;b<x;b+=16383)_.push(l(u,b,x<b+16383?x:b+16383));return y==1?(f=u[p-1],_.push(a[f>>2]+a[f<<4&63]+"==")):y==2&&(f=(u[p-2]<<8)+u[p-1],_.push(a[f>>10]+a[f>>4&63]+a[f<<2&63]+"=")),_.join("")};for(var a=[],o=[],h=typeof Uint8Array<"u"?Uint8Array:Array,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g=0,m=d.length;g<m;++g)a[g]=d[g],o[d.charCodeAt(g)]=g;function c(u){var f=u.length;if(0<f%4)throw new Error("Invalid string. Length must be a multiple of 4");var p=u.indexOf("=");return p===-1&&(p=f),[p,p===f?0:4-p%4]}function l(u,f,p){for(var y,_,b=[],x=f;x<p;x+=3)y=(u[x]<<16&16711680)+(u[x+1]<<8&65280)+(255&u[x+2]),b.push(a[(_=y)>>18&63]+a[_>>12&63]+a[_>>6&63]+a[63&_]);return b.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},{}],2:[function(r,s,i){},{}],3:[function(r,s,i){arguments[4][2][0].apply(i,arguments)},{dup:2}],4:[function(r,s,i){(function(c){var o=r("base64-js"),h=r("ieee754"),d=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;i.Buffer=c,i.SlowBuffer=function(R){return+R!=R&&(R=0),c.alloc(+R)},i.INSPECT_MAX_BYTES=50;var g=2147483647;function m(R){if(g<R)throw new RangeError('The value "'+R+'" is invalid for option "size"');var V=new Uint8Array(R);return Object.setPrototypeOf(V,c.prototype),V}function c(R,V,q){if(typeof R!="number")return l(R,V,q);if(typeof V=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(R)}function l(R,V,q){if(typeof R=="string")return function(re,xe){if(typeof xe=="string"&&xe!==""||(xe="utf8"),!c.isEncoding(xe))throw new TypeError("Unknown encoding: "+xe);var Q=0|_(re,xe),ce=m(Q),de=ce.write(re,xe);return de!==Q&&(ce=ce.slice(0,de)),ce}(R,V);if(ArrayBuffer.isView(R))return p(R);if(R==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof R);if(Te(R,ArrayBuffer)||R&&Te(R.buffer,ArrayBuffer))return function(re,xe,Q){if(xe<0||re.byteLength<xe)throw new RangeError('"offset" is outside of buffer bounds');if(re.byteLength<xe+(Q||0))throw new RangeError('"length" is outside of buffer bounds');var ce;return ce=xe===void 0&&Q===void 0?new Uint8Array(re):Q===void 0?new Uint8Array(re,xe):new Uint8Array(re,xe,Q),Object.setPrototypeOf(ce,c.prototype),ce}(R,V,q);if(typeof R=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var ee=R.valueOf&&R.valueOf();if(ee!=null&&ee!==R)return c.from(ee,V,q);var se=function(re){if(c.isBuffer(re)){var xe=0|y(re.length),Q=m(xe);return Q.length===0||re.copy(Q,0,0,xe),Q}if(re.length!==void 0)return typeof re.length!="number"||fe(re.length)?m(0):p(re);if(re.type==="Buffer"&&Array.isArray(re.data))return p(re.data)}(R);if(se)return se;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof R[Symbol.toPrimitive]=="function")return c.from(R[Symbol.toPrimitive]("string"),V,q);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof R)}function u(R){if(typeof R!="number")throw new TypeError('"size" argument must be of type number');if(R<0)throw new RangeError('The value "'+R+'" is invalid for option "size"')}function f(R){return u(R),m(R<0?0:0|y(R))}function p(R){for(var V=R.length<0?0:0|y(R.length),q=m(V),ee=0;ee<V;ee+=1)q[ee]=255&R[ee];return q}function y(R){if(g<=R)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+g.toString(16)+" bytes");return 0|R}function _(R,V){if(c.isBuffer(R))return R.length;if(ArrayBuffer.isView(R)||Te(R,ArrayBuffer))return R.byteLength;if(typeof R!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof R);var q=R.length,ee=2<arguments.length&&arguments[2]===!0;if(!ee&&q===0)return 0;for(var se=!1;;)switch(V){case"ascii":case"latin1":case"binary":return q;case"utf8":case"utf-8":return oe(R).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*q;case"hex":return q>>>1;case"base64":return _e(R).length;default:if(se)return ee?-1:oe(R).length;V=(""+V).toLowerCase(),se=!0}}function b(R,V,q){var ee=R[V];R[V]=R[q],R[q]=ee}function x(R,V,q,ee,se){if(R.length===0)return-1;if(typeof q=="string"?(ee=q,q=0):2147483647<q?q=2147483647:q<-2147483648&&(q=-2147483648),fe(q=+q)&&(q=se?0:R.length-1),q<0&&(q=R.length+q),q>=R.length){if(se)return-1;q=R.length-1}else if(q<0){if(!se)return-1;q=0}if(typeof V=="string"&&(V=c.from(V,ee)),c.isBuffer(V))return V.length===0?-1:S(R,V,q,ee,se);if(typeof V=="number")return V&=255,typeof Uint8Array.prototype.indexOf=="function"?se?Uint8Array.prototype.indexOf.call(R,V,q):Uint8Array.prototype.lastIndexOf.call(R,V,q):S(R,[V],q,ee,se);throw new TypeError("val must be string, number or Buffer")}function S(R,V,q,ee,se){var re,xe=1,Q=R.length,ce=V.length;if(ee!==void 0&&((ee=String(ee).toLowerCase())==="ucs2"||ee==="ucs-2"||ee==="utf16le"||ee==="utf-16le")){if(R.length<2||V.length<2)return-1;Q/=xe=2,ce/=2,q/=2}function de(Ee,Fe){return xe===1?Ee[Fe]:Ee.readUInt16BE(Fe*xe)}if(se){var ae=-1;for(re=q;re<Q;re++)if(de(R,re)===de(V,ae===-1?0:re-ae)){if(ae===-1&&(ae=re),re-ae+1===ce)return ae*xe}else ae!==-1&&(re-=re-ae),ae=-1}else for(Q<q+ce&&(q=Q-ce),re=q;0<=re;re--){for(var Se=!0,ke=0;ke<ce;ke++)if(de(R,re+ke)!==de(V,ke)){Se=!1;break}if(Se)return re}return-1}function E(R,V,q,ee){q=Number(q)||0;var se=R.length-q;ee?se<(ee=Number(ee))&&(ee=se):ee=se;var re=V.length;re/2<ee&&(ee=re/2);for(var xe=0;xe<ee;++xe){var Q=parseInt(V.substr(2*xe,2),16);if(fe(Q))return xe;R[q+xe]=Q}return xe}function C(R,V,q,ee){return he(function(se){for(var re=[],xe=0;xe<se.length;++xe)re.push(255&se.charCodeAt(xe));return re}(V),R,q,ee)}function M(R,V,q,ee){return he(function(se,re){for(var xe,Q,ce,de=[],ae=0;ae<se.length&&!((re-=2)<0);++ae)xe=se.charCodeAt(ae),Q=xe>>8,ce=xe%256,de.push(ce),de.push(Q);return de}(V,R.length-q),R,q,ee)}function I(R,V,q){return V===0&&q===R.length?o.fromByteArray(R):o.fromByteArray(R.slice(V,q))}function A(R,V,q){q=Math.min(R.length,q);for(var ee=[],se=V;se<q;){var re,xe,Q,ce,de=R[se],ae=null,Se=239<de?4:223<de?3:191<de?2:1;if(se+Se<=q)switch(Se){case 1:de<128&&(ae=de);break;case 2:(192&(re=R[se+1]))==128&&127<(ce=(31&de)<<6|63&re)&&(ae=ce);break;case 3:re=R[se+1],xe=R[se+2],(192&re)==128&&(192&xe)==128&&2047<(ce=(15&de)<<12|(63&re)<<6|63&xe)&&(ce<55296||57343<ce)&&(ae=ce);break;case 4:re=R[se+1],xe=R[se+2],Q=R[se+3],(192&re)==128&&(192&xe)==128&&(192&Q)==128&&65535<(ce=(15&de)<<18|(63&re)<<12|(63&xe)<<6|63&Q)&&ce<1114112&&(ae=ce)}ae===null?(ae=65533,Se=1):65535<ae&&(ae-=65536,ee.push(ae>>>10&1023|55296),ae=56320|1023&ae),ee.push(ae),se+=Se}return function(ke){var Ee=ke.length;if(Ee<=D)return String.fromCharCode.apply(String,ke);for(var Fe="",Qe=0;Qe<Ee;)Fe+=String.fromCharCode.apply(String,ke.slice(Qe,Qe+=D));return Fe}(ee)}i.kMaxLength=g,(c.TYPED_ARRAY_SUPPORT=function(){try{var R=new Uint8Array(1),V={foo:function(){return 42}};return Object.setPrototypeOf(V,Uint8Array.prototype),Object.setPrototypeOf(R,V),R.foo()===42}catch{return!1}}())||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),c.poolSize=8192,c.from=function(R,V,q){return l(R,V,q)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(R,V,q){return se=V,re=q,u(ee=R),ee<=0?m(ee):se!==void 0?typeof re=="string"?m(ee).fill(se,re):m(ee).fill(se):m(ee);var ee,se,re},c.allocUnsafe=function(R){return f(R)},c.allocUnsafeSlow=function(R){return f(R)},c.isBuffer=function(R){return R!=null&&R._isBuffer===!0&&R!==c.prototype},c.compare=function(R,V){if(Te(R,Uint8Array)&&(R=c.from(R,R.offset,R.byteLength)),Te(V,Uint8Array)&&(V=c.from(V,V.offset,V.byteLength)),!c.isBuffer(R)||!c.isBuffer(V))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(R===V)return 0;for(var q=R.length,ee=V.length,se=0,re=Math.min(q,ee);se<re;++se)if(R[se]!==V[se]){q=R[se],ee=V[se];break}return q<ee?-1:ee<q?1:0},c.isEncoding=function(R){switch(String(R).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(R,V){if(!Array.isArray(R))throw new TypeError('"list" argument must be an Array of Buffers');if(R.length===0)return c.alloc(0);var q;if(V===void 0)for(q=V=0;q<R.length;++q)V+=R[q].length;var ee=c.allocUnsafe(V),se=0;for(q=0;q<R.length;++q){var re=R[q];if(Te(re,Uint8Array)&&(re=c.from(re)),!c.isBuffer(re))throw new TypeError('"list" argument must be an Array of Buffers');re.copy(ee,se),se+=re.length}return ee},c.byteLength=_,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var R=this.length;if(R%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var V=0;V<R;V+=2)b(this,V,V+1);return this},c.prototype.swap32=function(){var R=this.length;if(R%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var V=0;V<R;V+=4)b(this,V,V+3),b(this,V+1,V+2);return this},c.prototype.swap64=function(){var R=this.length;if(R%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var V=0;V<R;V+=8)b(this,V,V+7),b(this,V+1,V+6),b(this,V+2,V+5),b(this,V+3,V+4);return this},c.prototype.toLocaleString=c.prototype.toString=function(){var R=this.length;return R===0?"":arguments.length===0?A(this,0,R):function(V,q,ee){var se=!1;if((q===void 0||q<0)&&(q=0),q>this.length||((ee===void 0||ee>this.length)&&(ee=this.length),ee<=0)||(ee>>>=0)<=(q>>>=0))return"";for(V=V||"utf8";;)switch(V){case"hex":return N(this,q,ee);case"utf8":case"utf-8":return A(this,q,ee);case"ascii":return L(this,q,ee);case"latin1":case"binary":return O(this,q,ee);case"base64":return I(this,q,ee);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,q,ee);default:if(se)throw new TypeError("Unknown encoding: "+V);V=(V+"").toLowerCase(),se=!0}}.apply(this,arguments)},c.prototype.equals=function(R){if(!c.isBuffer(R))throw new TypeError("Argument must be a Buffer");return this===R||c.compare(this,R)===0},c.prototype.inspect=function(){var R="",V=i.INSPECT_MAX_BYTES;return R=this.toString("hex",0,V).replace(/(.{2})/g,"$1 ").trim(),this.length>V&&(R+=" ... "),"<Buffer "+R+">"},d&&(c.prototype[d]=c.prototype.inspect),c.prototype.compare=function(R,V,q,ee,se){if(Te(R,Uint8Array)&&(R=c.from(R,R.offset,R.byteLength)),!c.isBuffer(R))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof R);if(V===void 0&&(V=0),q===void 0&&(q=R?R.length:0),ee===void 0&&(ee=0),se===void 0&&(se=this.length),V<0||q>R.length||ee<0||se>this.length)throw new RangeError("out of range index");if(se<=ee&&q<=V)return 0;if(se<=ee)return-1;if(q<=V)return 1;if(this===R)return 0;for(var re=(se>>>=0)-(ee>>>=0),xe=(q>>>=0)-(V>>>=0),Q=Math.min(re,xe),ce=this.slice(ee,se),de=R.slice(V,q),ae=0;ae<Q;++ae)if(ce[ae]!==de[ae]){re=ce[ae],xe=de[ae];break}return re<xe?-1:xe<re?1:0},c.prototype.includes=function(R,V,q){return this.indexOf(R,V,q)!==-1},c.prototype.indexOf=function(R,V,q){return x(this,R,V,q,!0)},c.prototype.lastIndexOf=function(R,V,q){return x(this,R,V,q,!1)},c.prototype.write=function(R,V,q,ee){if(V===void 0)ee="utf8",q=this.length,V=0;else if(q===void 0&&typeof V=="string")ee=V,q=this.length,V=0;else{if(!isFinite(V))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");V>>>=0,isFinite(q)?(q>>>=0,ee===void 0&&(ee="utf8")):(ee=q,q=void 0)}var se=this.length-V;if((q===void 0||se<q)&&(q=se),0<R.length&&(q<0||V<0)||V>this.length)throw new RangeError("Attempt to write outside buffer bounds");ee=ee||"utf8";for(var re,xe,Q,ce,de,ae,Se=!1;;)switch(ee){case"hex":return E(this,R,V,q);case"utf8":case"utf-8":return de=V,ae=q,he(oe(R,(ce=this).length-de),ce,de,ae);case"ascii":return C(this,R,V,q);case"latin1":case"binary":return C(this,R,V,q);case"base64":return re=this,xe=V,Q=q,he(_e(R),re,xe,Q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,R,V,q);default:if(Se)throw new TypeError("Unknown encoding: "+ee);ee=(""+ee).toLowerCase(),Se=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var D=4096;function L(R,V,q){var ee="";q=Math.min(R.length,q);for(var se=V;se<q;++se)ee+=String.fromCharCode(127&R[se]);return ee}function O(R,V,q){var ee="";q=Math.min(R.length,q);for(var se=V;se<q;++se)ee+=String.fromCharCode(R[se]);return ee}function N(R,V,q){var ee=R.length;(!V||V<0)&&(V=0),(!q||q<0||ee<q)&&(q=ee);for(var se="",re=V;re<q;++re)se+=pe[R[re]];return se}function U(R,V,q){for(var ee=R.slice(V,q),se="",re=0;re<ee.length;re+=2)se+=String.fromCharCode(ee[re]+256*ee[re+1]);return se}function K(R,V,q){if(R%1!=0||R<0)throw new RangeError("offset is not uint");if(q<R+V)throw new RangeError("Trying to access beyond buffer length")}function J(R,V,q,ee,se,re){if(!c.isBuffer(R))throw new TypeError('"buffer" argument must be a Buffer instance');if(se<V||V<re)throw new RangeError('"value" argument is out of bounds');if(q+ee>R.length)throw new RangeError("Index out of range")}function z(R,V,q,ee){if(q+ee>R.length)throw new RangeError("Index out of range");if(q<0)throw new RangeError("Index out of range")}function H(R,V,q,ee,se){return V=+V,q>>>=0,se||z(R,0,q,4),h.write(R,V,q,ee,23,4),q+4}function $(R,V,q,ee,se){return V=+V,q>>>=0,se||z(R,0,q,8),h.write(R,V,q,ee,52,8),q+8}c.prototype.slice=function(R,V){var q=this.length;(R=~~R)<0?(R+=q)<0&&(R=0):q<R&&(R=q),(V=V===void 0?q:~~V)<0?(V+=q)<0&&(V=0):q<V&&(V=q),V<R&&(V=R);var ee=this.subarray(R,V);return Object.setPrototypeOf(ee,c.prototype),ee},c.prototype.readUIntLE=function(R,V,q){R>>>=0,V>>>=0,q||K(R,V,this.length);for(var ee=this[R],se=1,re=0;++re<V&&(se*=256);)ee+=this[R+re]*se;return ee},c.prototype.readUIntBE=function(R,V,q){R>>>=0,V>>>=0,q||K(R,V,this.length);for(var ee=this[R+--V],se=1;0<V&&(se*=256);)ee+=this[R+--V]*se;return ee},c.prototype.readUInt8=function(R,V){return R>>>=0,V||K(R,1,this.length),this[R]},c.prototype.readUInt16LE=function(R,V){return R>>>=0,V||K(R,2,this.length),this[R]|this[R+1]<<8},c.prototype.readUInt16BE=function(R,V){return R>>>=0,V||K(R,2,this.length),this[R]<<8|this[R+1]},c.prototype.readUInt32LE=function(R,V){return R>>>=0,V||K(R,4,this.length),(this[R]|this[R+1]<<8|this[R+2]<<16)+16777216*this[R+3]},c.prototype.readUInt32BE=function(R,V){return R>>>=0,V||K(R,4,this.length),16777216*this[R]+(this[R+1]<<16|this[R+2]<<8|this[R+3])},c.prototype.readIntLE=function(R,V,q){R>>>=0,V>>>=0,q||K(R,V,this.length);for(var ee=this[R],se=1,re=0;++re<V&&(se*=256);)ee+=this[R+re]*se;return(se*=128)<=ee&&(ee-=Math.pow(2,8*V)),ee},c.prototype.readIntBE=function(R,V,q){R>>>=0,V>>>=0,q||K(R,V,this.length);for(var ee=V,se=1,re=this[R+--ee];0<ee&&(se*=256);)re+=this[R+--ee]*se;return(se*=128)<=re&&(re-=Math.pow(2,8*V)),re},c.prototype.readInt8=function(R,V){return R>>>=0,V||K(R,1,this.length),128&this[R]?-1*(255-this[R]+1):this[R]},c.prototype.readInt16LE=function(R,V){R>>>=0,V||K(R,2,this.length);var q=this[R]|this[R+1]<<8;return 32768&q?4294901760|q:q},c.prototype.readInt16BE=function(R,V){R>>>=0,V||K(R,2,this.length);var q=this[R+1]|this[R]<<8;return 32768&q?4294901760|q:q},c.prototype.readInt32LE=function(R,V){return R>>>=0,V||K(R,4,this.length),this[R]|this[R+1]<<8|this[R+2]<<16|this[R+3]<<24},c.prototype.readInt32BE=function(R,V){return R>>>=0,V||K(R,4,this.length),this[R]<<24|this[R+1]<<16|this[R+2]<<8|this[R+3]},c.prototype.readFloatLE=function(R,V){return R>>>=0,V||K(R,4,this.length),h.read(this,R,!0,23,4)},c.prototype.readFloatBE=function(R,V){return R>>>=0,V||K(R,4,this.length),h.read(this,R,!1,23,4)},c.prototype.readDoubleLE=function(R,V){return R>>>=0,V||K(R,8,this.length),h.read(this,R,!0,52,8)},c.prototype.readDoubleBE=function(R,V){return R>>>=0,V||K(R,8,this.length),h.read(this,R,!1,52,8)},c.prototype.writeUIntLE=function(R,V,q,ee){R=+R,V>>>=0,q>>>=0,ee||J(this,R,V,q,Math.pow(2,8*q)-1,0);var se=1,re=0;for(this[V]=255&R;++re<q&&(se*=256);)this[V+re]=R/se&255;return V+q},c.prototype.writeUIntBE=function(R,V,q,ee){R=+R,V>>>=0,q>>>=0,ee||J(this,R,V,q,Math.pow(2,8*q)-1,0);var se=q-1,re=1;for(this[V+se]=255&R;0<=--se&&(re*=256);)this[V+se]=R/re&255;return V+q},c.prototype.writeUInt8=function(R,V,q){return R=+R,V>>>=0,q||J(this,R,V,1,255,0),this[V]=255&R,V+1},c.prototype.writeUInt16LE=function(R,V,q){return R=+R,V>>>=0,q||J(this,R,V,2,65535,0),this[V]=255&R,this[V+1]=R>>>8,V+2},c.prototype.writeUInt16BE=function(R,V,q){return R=+R,V>>>=0,q||J(this,R,V,2,65535,0),this[V]=R>>>8,this[V+1]=255&R,V+2},c.prototype.writeUInt32LE=function(R,V,q){return R=+R,V>>>=0,q||J(this,R,V,4,4294967295,0),this[V+3]=R>>>24,this[V+2]=R>>>16,this[V+1]=R>>>8,this[V]=255&R,V+4},c.prototype.writeUInt32BE=function(R,V,q){return R=+R,V>>>=0,q||J(this,R,V,4,4294967295,0),this[V]=R>>>24,this[V+1]=R>>>16,this[V+2]=R>>>8,this[V+3]=255&R,V+4},c.prototype.writeIntLE=function(R,V,q,ee){if(R=+R,V>>>=0,!ee){var se=Math.pow(2,8*q-1);J(this,R,V,q,se-1,-se)}var re=0,xe=1,Q=0;for(this[V]=255&R;++re<q&&(xe*=256);)R<0&&Q===0&&this[V+re-1]!==0&&(Q=1),this[V+re]=(R/xe>>0)-Q&255;return V+q},c.prototype.writeIntBE=function(R,V,q,ee){if(R=+R,V>>>=0,!ee){var se=Math.pow(2,8*q-1);J(this,R,V,q,se-1,-se)}var re=q-1,xe=1,Q=0;for(this[V+re]=255&R;0<=--re&&(xe*=256);)R<0&&Q===0&&this[V+re+1]!==0&&(Q=1),this[V+re]=(R/xe>>0)-Q&255;return V+q},c.prototype.writeInt8=function(R,V,q){return R=+R,V>>>=0,q||J(this,R,V,1,127,-128),R<0&&(R=255+R+1),this[V]=255&R,V+1},c.prototype.writeInt16LE=function(R,V,q){return R=+R,V>>>=0,q||J(this,R,V,2,32767,-32768),this[V]=255&R,this[V+1]=R>>>8,V+2},c.prototype.writeInt16BE=function(R,V,q){return R=+R,V>>>=0,q||J(this,R,V,2,32767,-32768),this[V]=R>>>8,this[V+1]=255&R,V+2},c.prototype.writeInt32LE=function(R,V,q){return R=+R,V>>>=0,q||J(this,R,V,4,2147483647,-2147483648),this[V]=255&R,this[V+1]=R>>>8,this[V+2]=R>>>16,this[V+3]=R>>>24,V+4},c.prototype.writeInt32BE=function(R,V,q){return R=+R,V>>>=0,q||J(this,R,V,4,2147483647,-2147483648),R<0&&(R=4294967295+R+1),this[V]=R>>>24,this[V+1]=R>>>16,this[V+2]=R>>>8,this[V+3]=255&R,V+4},c.prototype.writeFloatLE=function(R,V,q){return H(this,R,V,!0,q)},c.prototype.writeFloatBE=function(R,V,q){return H(this,R,V,!1,q)},c.prototype.writeDoubleLE=function(R,V,q){return $(this,R,V,!0,q)},c.prototype.writeDoubleBE=function(R,V,q){return $(this,R,V,!1,q)},c.prototype.copy=function(R,V,q,ee){if(!c.isBuffer(R))throw new TypeError("argument should be a Buffer");if(q=q||0,ee||ee===0||(ee=this.length),V>=R.length&&(V=R.length),V=V||0,0<ee&&ee<q&&(ee=q),ee===q||R.length===0||this.length===0)return 0;if(V<0)throw new RangeError("targetStart out of bounds");if(q<0||q>=this.length)throw new RangeError("Index out of range");if(ee<0)throw new RangeError("sourceEnd out of bounds");ee>this.length&&(ee=this.length),R.length-V<ee-q&&(ee=R.length-V+q);var se=ee-q;if(this===R&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(V,q,ee);else if(this===R&&q<V&&V<ee)for(var re=se-1;0<=re;--re)R[re+V]=this[re+q];else Uint8Array.prototype.set.call(R,this.subarray(q,ee),V);return se},c.prototype.fill=function(R,V,q,ee){if(typeof R=="string"){if(typeof V=="string"?(ee=V,V=0,q=this.length):typeof q=="string"&&(ee=q,q=this.length),ee!==void 0&&typeof ee!="string")throw new TypeError("encoding must be a string");if(typeof ee=="string"&&!c.isEncoding(ee))throw new TypeError("Unknown encoding: "+ee);if(R.length===1){var se=R.charCodeAt(0);(ee==="utf8"&&se<128||ee==="latin1")&&(R=se)}}else typeof R=="number"?R&=255:typeof R=="boolean"&&(R=Number(R));if(V<0||this.length<V||this.length<q)throw new RangeError("Out of range index");if(q<=V)return this;var re;if(V>>>=0,q=q===void 0?this.length:q>>>0,typeof(R=R||0)=="number")for(re=V;re<q;++re)this[re]=R;else{var xe=c.isBuffer(R)?R:c.from(R,ee),Q=xe.length;if(Q===0)throw new TypeError('The value "'+R+'" is invalid for argument "value"');for(re=0;re<q-V;++re)this[re+V]=xe[re%Q]}return this};var ne=/[^+/0-9A-Za-z-_]/g;function oe(R,V){var q;V=V||1/0;for(var ee=R.length,se=null,re=[],xe=0;xe<ee;++xe){if(55295<(q=R.charCodeAt(xe))&&q<57344){if(!se){if(56319<q){-1<(V-=3)&&re.push(239,191,189);continue}if(xe+1===ee){-1<(V-=3)&&re.push(239,191,189);continue}se=q;continue}if(q<56320){-1<(V-=3)&&re.push(239,191,189),se=q;continue}q=65536+(se-55296<<10|q-56320)}else se&&-1<(V-=3)&&re.push(239,191,189);if(se=null,q<128){if(--V<0)break;re.push(q)}else if(q<2048){if((V-=2)<0)break;re.push(q>>6|192,63&q|128)}else if(q<65536){if((V-=3)<0)break;re.push(q>>12|224,q>>6&63|128,63&q|128)}else{if(!(q<1114112))throw new Error("Invalid code point");if((V-=4)<0)break;re.push(q>>18|240,q>>12&63|128,q>>6&63|128,63&q|128)}}return re}function _e(R){return o.toByteArray(function(V){if((V=(V=V.split("=")[0]).trim().replace(ne,"")).length<2)return"";for(;V.length%4!=0;)V+="=";return V}(R))}function he(R,V,q,ee){for(var se=0;se<ee&&!(se+q>=V.length||se>=R.length);++se)V[se+q]=R[se];return se}function Te(R,V){return R instanceof V||R!=null&&R.constructor!=null&&R.constructor.name!=null&&R.constructor.name===V.name}function fe(R){return R!=R}var pe=function(){for(var R="0123456789abcdef",V=new Array(256),q=0;q<16;++q)for(var ee=16*q,se=0;se<16;++se)V[ee+se]=R[q]+R[se];return V}()}).call(this,r("buffer").Buffer)},{"base64-js":1,buffer:4,ieee754:236}],5:[function(r,s,i){s.exports=function(a){if(typeof a!="function")throw TypeError(String(a)+" is not a function");return a}},{}],6:[function(r,s,i){var a=r("../internals/is-object");s.exports=function(o){if(!a(o)&&o!==null)throw TypeError("Can't set "+String(o)+" as a prototype");return o}},{"../internals/is-object":74}],7:[function(r,s,i){var a=r("../internals/well-known-symbol"),o=r("../internals/object-create"),h=r("../internals/object-define-property"),d=a("unscopables"),g=Array.prototype;g[d]==null&&h.f(g,d,{configurable:!0,value:o(null)}),s.exports=function(m){g[d][m]=!0}},{"../internals/object-create":90,"../internals/object-define-property":92,"../internals/well-known-symbol":146}],8:[function(r,s,i){var a=r("../internals/string-multibyte").charAt;s.exports=function(o,h,d){return h+(d?a(o,h).length:1)}},{"../internals/string-multibyte":123}],9:[function(r,s,i){s.exports=function(a,o,h){if(!(a instanceof o))throw TypeError("Incorrect "+(h?h+" ":"")+"invocation");return a}},{}],10:[function(r,s,i){var a=r("../internals/is-object");s.exports=function(o){if(!a(o))throw TypeError(String(o)+" is not an object");return o}},{"../internals/is-object":74}],11:[function(r,s,i){s.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},{}],12:[function(r,s,i){function a(z){return m(z)&&c(J,l(z))}var o,h=r("../internals/array-buffer-native"),d=r("../internals/descriptors"),g=r("../internals/global"),m=r("../internals/is-object"),c=r("../internals/has"),l=r("../internals/classof"),u=r("../internals/create-non-enumerable-property"),f=r("../internals/redefine"),p=r("../internals/object-define-property").f,y=r("../internals/object-get-prototype-of"),_=r("../internals/object-set-prototype-of"),b=r("../internals/well-known-symbol"),x=r("../internals/uid"),S=g.Int8Array,E=S&&S.prototype,C=g.Uint8ClampedArray,M=C&&C.prototype,I=S&&y(S),A=E&&y(E),D=Object.prototype,L=D.isPrototypeOf,O=b("toStringTag"),N=x("TYPED_ARRAY_TAG"),U=h&&!!_&&l(g.opera)!=="Opera",K=!1,J={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};for(o in J)g[o]||(U=!1);if((!U||typeof I!="function"||I===Function.prototype)&&(I=function(){throw TypeError("Incorrect invocation")},U))for(o in J)g[o]&&_(g[o],I);if((!U||!A||A===D)&&(A=I.prototype,U))for(o in J)g[o]&&_(g[o].prototype,A);if(U&&y(M)!==A&&_(M,A),d&&!c(A,O))for(o in K=!0,p(A,O,{get:function(){return m(this)?this[N]:void 0}}),J)g[o]&&u(g[o],N,o);s.exports={NATIVE_ARRAY_BUFFER_VIEWS:U,TYPED_ARRAY_TAG:K&&N,aTypedArray:function(z){if(a(z))return z;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(z){if(_){if(L.call(I,z))return z}else for(var H in J)if(c(J,o)){var $=g[H];if($&&(z===$||L.call($,z)))return z}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(z,H,$){if(d){if($)for(var ne in J){var oe=g[ne];oe&&c(oe.prototype,z)&&delete oe.prototype[z]}A[z]&&!$||f(A,z,$?H:U&&E[z]||H)}},exportTypedArrayStaticMethod:function(z,H,$){var ne,oe;if(d){if(_){if($)for(ne in J)(oe=g[ne])&&c(oe,z)&&delete oe[z];if(I[z]&&!$)return;try{return f(I,z,$?H:U&&S[z]||H)}catch{}}for(ne in J)!(oe=g[ne])||oe[z]&&!$||f(oe,z,H)}},isView:function(z){var H=l(z);return H==="DataView"||c(J,H)},isTypedArray:a,TypedArray:I,TypedArrayPrototype:A}},{"../internals/array-buffer-native":11,"../internals/classof":29,"../internals/create-non-enumerable-property":37,"../internals/descriptors":42,"../internals/global":59,"../internals/has":60,"../internals/is-object":74,"../internals/object-define-property":92,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine":108,"../internals/uid":143,"../internals/well-known-symbol":146}],13:[function(r,s,i){function a(de){return[255&de]}function o(de){return[255&de,de>>8&255]}function h(de){return[255&de,de>>8&255,de>>16&255,de>>24&255]}function d(de){return de[3]<<24|de[2]<<16|de[1]<<8|de[0]}function g(de){return V(de,23,4)}function m(de){return V(de,52,8)}function c(de,ae){O(de[ne],ae,{get:function(){return J(this)[ae]}})}function l(de,ae,Se,ke){var Ee=M(Se),Fe=J(de);if(Ee+ae>Fe.byteLength)throw R(oe);var Qe=J(Fe.buffer).bytes,Ye=Ee+Fe.byteOffset,Ve=Qe.slice(Ye,Ye+ae);return ke?Ve:Ve.reverse()}function u(de,ae,Se,ke,Ee,Fe){var Qe=M(Se),Ye=J(de);if(Qe+ae>Ye.byteLength)throw R(oe);for(var Ve=J(Ye.buffer).bytes,pt=Qe+Ye.byteOffset,Oe=ke(+Ee),De=0;De<ae;De++)Ve[pt+De]=Oe[Fe?De:ae-De-1]}var f=r("../internals/global"),p=r("../internals/descriptors"),y=r("../internals/array-buffer-native"),_=r("../internals/create-non-enumerable-property"),b=r("../internals/redefine-all"),x=r("../internals/fails"),S=r("../internals/an-instance"),E=r("../internals/to-integer"),C=r("../internals/to-length"),M=r("../internals/to-index"),I=r("../internals/ieee754"),A=r("../internals/object-get-prototype-of"),D=r("../internals/object-set-prototype-of"),L=r("../internals/object-get-own-property-names").f,O=r("../internals/object-define-property").f,N=r("../internals/array-fill"),U=r("../internals/set-to-string-tag"),K=r("../internals/internal-state"),J=K.get,z=K.set,H="ArrayBuffer",$="DataView",ne="prototype",oe="Wrong index",_e=f[H],he=_e,Te=f[$],fe=Te&&Te[ne],pe=Object.prototype,R=f.RangeError,V=I.pack,q=I.unpack;if(y){if(!x(function(){_e(1)})||!x(function(){new _e(-1)})||x(function(){return new _e,new _e(1.5),new _e(NaN),_e.name!=H})){for(var ee,se=(he=function(de){return S(this,he),new _e(M(de))})[ne]=_e[ne],re=L(_e),xe=0;re.length>xe;)(ee=re[xe++])in he||_(he,ee,_e[ee]);se.constructor=he}D&&A(fe)!==pe&&D(fe,pe);var Q=new Te(new he(2)),ce=fe.setInt8;Q.setInt8(0,2147483648),Q.setInt8(1,2147483649),!Q.getInt8(0)&&Q.getInt8(1)||b(fe,{setInt8:function(de,ae){ce.call(this,de,ae<<24>>24)},setUint8:function(de,ae){ce.call(this,de,ae<<24>>24)}},{unsafe:!0})}else he=function(de){S(this,he,H);var ae=M(de);z(this,{bytes:N.call(new Array(ae),0),byteLength:ae}),p||(this.byteLength=ae)},Te=function(de,ae,Se){S(this,Te,$),S(de,he,$);var ke=J(de).byteLength,Ee=E(ae);if(Ee<0||ke<Ee)throw R("Wrong offset");if(ke<Ee+(Se=Se===void 0?ke-Ee:C(Se)))throw R("Wrong length");z(this,{buffer:de,byteLength:Se,byteOffset:Ee}),p||(this.buffer=de,this.byteLength=Se,this.byteOffset=Ee)},p&&(c(he,"byteLength"),c(Te,"buffer"),c(Te,"byteLength"),c(Te,"byteOffset")),b(Te[ne],{getInt8:function(de){return l(this,1,de)[0]<<24>>24},getUint8:function(de){return l(this,1,de)[0]},getInt16:function(de,ae){var Se=l(this,2,de,1<arguments.length?ae:void 0);return(Se[1]<<8|Se[0])<<16>>16},getUint16:function(de,ae){var Se=l(this,2,de,1<arguments.length?ae:void 0);return Se[1]<<8|Se[0]},getInt32:function(de,ae){return d(l(this,4,de,1<arguments.length?ae:void 0))},getUint32:function(de,ae){return d(l(this,4,de,1<arguments.length?ae:void 0))>>>0},getFloat32:function(de,ae){return q(l(this,4,de,1<arguments.length?ae:void 0),23)},getFloat64:function(de,ae){return q(l(this,8,de,1<arguments.length?ae:void 0),52)},setInt8:function(de,ae){u(this,1,de,a,ae)},setUint8:function(de,ae){u(this,1,de,a,ae)},setInt16:function(de,ae,Se){u(this,2,de,o,ae,2<arguments.length?Se:void 0)},setUint16:function(de,ae,Se){u(this,2,de,o,ae,2<arguments.length?Se:void 0)},setInt32:function(de,ae,Se){u(this,4,de,h,ae,2<arguments.length?Se:void 0)},setUint32:function(de,ae,Se){u(this,4,de,h,ae,2<arguments.length?Se:void 0)},setFloat32:function(de,ae,Se){u(this,4,de,g,ae,2<arguments.length?Se:void 0)},setFloat64:function(de,ae,Se){u(this,8,de,m,ae,2<arguments.length?Se:void 0)}});U(he,H),U(Te,$),s.exports={ArrayBuffer:he,DataView:Te}},{"../internals/an-instance":9,"../internals/array-buffer-native":11,"../internals/array-fill":15,"../internals/create-non-enumerable-property":37,"../internals/descriptors":42,"../internals/fails":50,"../internals/global":59,"../internals/ieee754":65,"../internals/internal-state":70,"../internals/object-define-property":92,"../internals/object-get-own-property-names":95,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine-all":107,"../internals/set-to-string-tag":117,"../internals/to-index":131,"../internals/to-integer":133,"../internals/to-length":134}],14:[function(r,s,i){var a=r("../internals/to-object"),o=r("../internals/to-absolute-index"),h=r("../internals/to-length"),d=Math.min;s.exports=[].copyWithin||function(g,m,c){var l=a(this),u=h(l.length),f=o(g,u),p=o(m,u),y=2<arguments.length?c:void 0,_=d((y===void 0?u:o(y,u))-p,u-f),b=1;for(p<f&&f<p+_&&(b=-1,p+=_-1,f+=_-1);0<_--;)p in l?l[f]=l[p]:delete l[f],f+=b,p+=b;return l}},{"../internals/to-absolute-index":130,"../internals/to-length":134,"../internals/to-object":135}],15:[function(r,s,i){var a=r("../internals/to-object"),o=r("../internals/to-absolute-index"),h=r("../internals/to-length");s.exports=function(d,g,m){for(var c=a(this),l=h(c.length),u=arguments.length,f=o(1<u?g:void 0,l),p=2<u?m:void 0,y=p===void 0?l:o(p,l);f<y;)c[f++]=d;return c}},{"../internals/to-absolute-index":130,"../internals/to-length":134,"../internals/to-object":135}],16:[function(r,s,i){var a=r("../internals/array-iteration").forEach,o=r("../internals/array-method-is-strict"),h=r("../internals/array-method-uses-to-length"),d=o("forEach"),g=h("forEach");s.exports=d&&g?[].forEach:function(m,c){return a(this,m,1<arguments.length?c:void 0)}},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23}],17:[function(r,s,i){var a=r("../internals/function-bind-context"),o=r("../internals/to-object"),h=r("../internals/call-with-safe-iteration-closing"),d=r("../internals/is-array-iterator-method"),g=r("../internals/to-length"),m=r("../internals/create-property"),c=r("../internals/get-iterator-method");s.exports=function(l,u,f){var p,y,_,b,x,S,E=o(l),C=typeof this=="function"?this:Array,M=arguments.length,I=1<M?u:void 0,A=I!==void 0,D=c(E),L=0;if(A&&(I=a(I,2<M?f:void 0,2)),D==null||C==Array&&d(D))for(y=new C(p=g(E.length));L<p;L++)S=A?I(E[L],L):E[L],m(y,L,S);else for(x=(b=D.call(E)).next,y=new C;!(_=x.call(b)).done;L++)S=A?h(b,I,[_.value,L],!0):_.value,m(y,L,S);return y.length=L,y}},{"../internals/call-with-safe-iteration-closing":26,"../internals/create-property":39,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":134,"../internals/to-object":135}],18:[function(r,s,i){function a(g){return function(m,c,l){var u,f=o(m),p=h(f.length),y=d(l,p);if(g&&c!=c){for(;y<p;)if((u=f[y++])!=u)return!0}else for(;y<p;y++)if((g||y in f)&&f[y]===c)return g||y||0;return!g&&-1}}var o=r("../internals/to-indexed-object"),h=r("../internals/to-length"),d=r("../internals/to-absolute-index");s.exports={includes:a(!0),indexOf:a(!1)}},{"../internals/to-absolute-index":130,"../internals/to-indexed-object":132,"../internals/to-length":134}],19:[function(r,s,i){function a(l){var u=l==1,f=l==2,p=l==3,y=l==4,_=l==6,b=l==5||_;return function(x,S,E,C){for(var M,I,A=d(x),D=h(A),L=o(S,E,3),O=g(D.length),N=0,U=C||m,K=u?U(x,O):f?U(x,0):void 0;N<O;N++)if((b||N in D)&&(I=L(M=D[N],N,A),l)){if(u)K[N]=I;else if(I)switch(l){case 3:return!0;case 5:return M;case 6:return N;case 2:c.call(K,M)}else if(y)return!1}return _?-1:p||y?y:K}}var o=r("../internals/function-bind-context"),h=r("../internals/indexed-object"),d=r("../internals/to-object"),g=r("../internals/to-length"),m=r("../internals/array-species-create"),c=[].push;s.exports={forEach:a(0),map:a(1),filter:a(2),some:a(3),every:a(4),find:a(5),findIndex:a(6)}},{"../internals/array-species-create":25,"../internals/function-bind-context":54,"../internals/indexed-object":66,"../internals/to-length":134,"../internals/to-object":135}],20:[function(r,s,i){var a=r("../internals/to-indexed-object"),o=r("../internals/to-integer"),h=r("../internals/to-length"),d=r("../internals/array-method-is-strict"),g=r("../internals/array-method-uses-to-length"),m=Math.min,c=[].lastIndexOf,l=!!c&&1/[1].lastIndexOf(1,-0)<0,u=d("lastIndexOf"),f=g("indexOf",{ACCESSORS:!0,1:0}),p=l||!u||!f;s.exports=p?function(y,_){if(l)return c.apply(this,arguments)||0;var b=a(this),x=h(b.length),S=x-1;for(1<arguments.length&&(S=m(S,o(_))),S<0&&(S=x+S);0<=S;S--)if(S in b&&b[S]===y)return S||0;return-1}:c},{"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/to-indexed-object":132,"../internals/to-integer":133,"../internals/to-length":134}],21:[function(r,s,i){var a=r("../internals/fails"),o=r("../internals/well-known-symbol"),h=r("../internals/engine-v8-version"),d=o("species");s.exports=function(g){return 51<=h||!a(function(){var m=[];return(m.constructor={})[d]=function(){return{foo:1}},m[g](Boolean).foo!==1})}},{"../internals/engine-v8-version":47,"../internals/fails":50,"../internals/well-known-symbol":146}],22:[function(r,s,i){var a=r("../internals/fails");s.exports=function(o,h){var d=[][o];return!!d&&a(function(){d.call(null,h||function(){throw 1},1)})}},{"../internals/fails":50}],23:[function(r,s,i){function a(c){throw c}var o=r("../internals/descriptors"),h=r("../internals/fails"),d=r("../internals/has"),g=Object.defineProperty,m={};s.exports=function(c,l){if(d(m,c))return m[c];var u=[][c],f=!!d(l=l||{},"ACCESSORS")&&l.ACCESSORS,p=d(l,0)?l[0]:a,y=d(l,1)?l[1]:void 0;return m[c]=!!u&&!h(function(){if(f&&!o)return!0;var _={length:-1};f?g(_,1,{enumerable:!0,get:a}):_[1]=1,u.call(_,p,y)})}},{"../internals/descriptors":42,"../internals/fails":50,"../internals/has":60}],24:[function(r,s,i){function a(m){return function(c,l,u,f){o(l);var p=h(c),y=d(p),_=g(p.length),b=m?_-1:0,x=m?-1:1;if(u<2)for(;;){if(b in y){f=y[b],b+=x;break}if(b+=x,m?b<0:_<=b)throw TypeError("Reduce of empty array with no initial value")}for(;m?0<=b:b<_;b+=x)b in y&&(f=l(f,y[b],b,p));return f}}var o=r("../internals/a-function"),h=r("../internals/to-object"),d=r("../internals/indexed-object"),g=r("../internals/to-length");s.exports={left:a(!1),right:a(!0)}},{"../internals/a-function":5,"../internals/indexed-object":66,"../internals/to-length":134,"../internals/to-object":135}],25:[function(r,s,i){var a=r("../internals/is-object"),o=r("../internals/is-array"),h=r("../internals/well-known-symbol")("species");s.exports=function(d,g){var m;return o(d)&&(typeof(m=d.constructor)!="function"||m!==Array&&!o(m.prototype)?a(m)&&(m=m[h])===null&&(m=void 0):m=void 0),new(m===void 0?Array:m)(g===0?0:g)}},{"../internals/is-array":72,"../internals/is-object":74,"../internals/well-known-symbol":146}],26:[function(r,s,i){var a=r("../internals/an-object");s.exports=function(o,h,d,g){try{return g?h(a(d)[0],d[1]):h(d)}catch(c){var m=o.return;throw m!==void 0&&a(m.call(o)),c}}},{"../internals/an-object":10}],27:[function(r,s,i){var a=r("../internals/well-known-symbol")("iterator"),o=!1;try{var h=0,d={next:function(){return{done:!!h++}},return:function(){o=!0}};d[a]=function(){return this},Array.from(d,function(){throw 2})}catch{}s.exports=function(g,m){if(!m&&!o)return!1;var c=!1;try{var l={};l[a]=function(){return{next:function(){return{done:c=!0}}}},g(l)}catch{}return c}},{"../internals/well-known-symbol":146}],28:[function(r,s,i){var a={}.toString;s.exports=function(o){return a.call(o).slice(8,-1)}},{}],29:[function(r,s,i){var a=r("../internals/to-string-tag-support"),o=r("../internals/classof-raw"),h=r("../internals/well-known-symbol")("toStringTag"),d=o(function(){return arguments}())=="Arguments";s.exports=a?o:function(g){var m,c,l;return g===void 0?"Undefined":g===null?"Null":typeof(c=function(u,f){try{return u[f]}catch{}}(m=Object(g),h))=="string"?c:d?o(m):(l=o(m))=="Object"&&typeof m.callee=="function"?"Arguments":l}},{"../internals/classof-raw":28,"../internals/to-string-tag-support":139,"../internals/well-known-symbol":146}],30:[function(r,s,i){var a=r("../internals/object-define-property").f,o=r("../internals/object-create"),h=r("../internals/redefine-all"),d=r("../internals/function-bind-context"),g=r("../internals/an-instance"),m=r("../internals/iterate"),c=r("../internals/define-iterator"),l=r("../internals/set-species"),u=r("../internals/descriptors"),f=r("../internals/internal-metadata").fastKey,p=r("../internals/internal-state"),y=p.set,_=p.getterFor;s.exports={getConstructor:function(b,x,S,E){function C(D,L,O){var N,U,K=I(D),J=A(D,L);return J?J.value=O:(K.last=J={index:U=f(L,!0),key:L,value:O,previous:N=K.last,next:void 0,removed:!1},K.first||(K.first=J),N&&(N.next=J),u?K.size++:D.size++,U!=="F"&&(K.index[U]=J)),D}var M=b(function(D,L){g(D,M,x),y(D,{type:x,index:o(null),first:void 0,last:void 0,size:0}),u||(D.size=0),L!=null&&m(L,D[E],D,S)}),I=_(x),A=function(D,L){var O,N=I(D),U=f(L);if(U!=="F")return N.index[U];for(O=N.first;O;O=O.next)if(O.key==L)return O};return h(M.prototype,{clear:function(){for(var D=I(this),L=D.index,O=D.first;O;)O.removed=!0,O.previous&&(O.previous=O.previous.next=void 0),delete L[O.index],O=O.next;D.first=D.last=void 0,u?D.size=0:this.size=0},delete:function(D){var L=I(this),O=A(this,D);if(O){var N=O.next,U=O.previous;delete L.index[O.index],O.removed=!0,U&&(U.next=N),N&&(N.previous=U),L.first==O&&(L.first=N),L.last==O&&(L.last=U),u?L.size--:this.size--}return!!O},forEach:function(D,L){for(var O,N=I(this),U=d(D,1<arguments.length?L:void 0,3);O=O?O.next:N.first;)for(U(O.value,O.key,this);O&&O.removed;)O=O.previous},has:function(D){return!!A(this,D)}}),h(M.prototype,S?{get:function(D){var L=A(this,D);return L&&L.value},set:function(D,L){return C(this,D===0?0:D,L)}}:{add:function(D){return C(this,D=D===0?0:D,D)}}),u&&a(M.prototype,"size",{get:function(){return I(this).size}}),M},setStrong:function(b,x,S){var E=x+" Iterator",C=_(x),M=_(E);c(b,x,function(I,A){y(this,{type:E,target:I,state:C(I),kind:A,last:void 0})},function(){for(var I=M(this),A=I.kind,D=I.last;D&&D.removed;)D=D.previous;return I.target&&(I.last=D=D?D.next:I.state.first)?A=="keys"?{value:D.key,done:!1}:A=="values"?{value:D.value,done:!1}:{value:[D.key,D.value],done:!1}:{value:I.target=void 0,done:!0}},S?"entries":"values",!S,!0),l(x)}}},{"../internals/an-instance":9,"../internals/define-iterator":40,"../internals/descriptors":42,"../internals/function-bind-context":54,"../internals/internal-metadata":69,"../internals/internal-state":70,"../internals/iterate":77,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/redefine-all":107,"../internals/set-species":116}],31:[function(r,s,i){var a=r("../internals/export"),o=r("../internals/global"),h=r("../internals/is-forced"),d=r("../internals/redefine"),g=r("../internals/internal-metadata"),m=r("../internals/iterate"),c=r("../internals/an-instance"),l=r("../internals/is-object"),u=r("../internals/fails"),f=r("../internals/check-correctness-of-iteration"),p=r("../internals/set-to-string-tag"),y=r("../internals/inherit-if-required");s.exports=function(_,b,x){function S(z){var H=A[z];d(A,z,z=="add"?function($){return H.call(this,$===0?0:$),this}:z=="delete"?function($){return!(C&&!l($))&&H.call(this,$===0?0:$)}:z=="get"?function($){return C&&!l($)?void 0:H.call(this,$===0?0:$)}:z=="has"?function($){return!(C&&!l($))&&H.call(this,$===0?0:$)}:function($,ne){return H.call(this,$===0?0:$,ne),this})}var E=_.indexOf("Map")!==-1,C=_.indexOf("Weak")!==-1,M=E?"set":"add",I=o[_],A=I&&I.prototype,D=I,L={};if(h(_,typeof I!="function"||!(C||A.forEach&&!u(function(){new I().entries().next()}))))D=x.getConstructor(b,_,E,M),g.REQUIRED=!0;else if(h(_,!0)){var O=new D,N=O[M](C?{}:-0,1)!=O,U=u(function(){O.has(1)}),K=f(function(z){new I(z)}),J=!C&&u(function(){for(var z=new I,H=5;H--;)z[M](H,H);return!z.has(-0)});K||(((D=b(function(z,H){c(z,D,_);var $=y(new I,z,D);return H!=null&&m(H,$[M],$,E),$})).prototype=A).constructor=D),(U||J)&&(S("delete"),S("has"),E&&S("get")),(J||N)&&S(M),C&&A.clear&&delete A.clear}return L[_]=D,a({global:!0,forced:D!=I},L),p(D,_),C||x.setStrong(D,_,E),D}},{"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/export":49,"../internals/fails":50,"../internals/global":59,"../internals/inherit-if-required":67,"../internals/internal-metadata":69,"../internals/is-forced":73,"../internals/is-object":74,"../internals/iterate":77,"../internals/redefine":108,"../internals/set-to-string-tag":117}],32:[function(r,s,i){var a=r("../internals/has"),o=r("../internals/own-keys"),h=r("../internals/object-get-own-property-descriptor"),d=r("../internals/object-define-property");s.exports=function(g,m){for(var c=o(m),l=d.f,u=h.f,f=0;f<c.length;f++){var p=c[f];a(g,p)||l(g,p,u(m,p))}}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/own-keys":103}],33:[function(r,s,i){var a=r("../internals/well-known-symbol")("match");s.exports=function(o){var h=/./;try{"/./"[o](h)}catch{try{return h[a]=!1,"/./"[o](h)}catch{}}return!1}},{"../internals/well-known-symbol":146}],34:[function(r,s,i){var a=r("../internals/fails");s.exports=!a(function(){function o(){}return o.prototype.constructor=null,Object.getPrototypeOf(new o)!==o.prototype})},{"../internals/fails":50}],35:[function(r,s,i){var a=r("../internals/require-object-coercible"),o=/"/g;s.exports=function(h,d,g,m){var c=String(a(h)),l="<"+d;return g!==""&&(l+=" "+g+'="'+String(m).replace(o,"&quot;")+'"'),l+">"+c+"</"+d+">"}},{"../internals/require-object-coercible":113}],36:[function(r,s,i){function a(){return this}var o=r("../internals/iterators-core").IteratorPrototype,h=r("../internals/object-create"),d=r("../internals/create-property-descriptor"),g=r("../internals/set-to-string-tag"),m=r("../internals/iterators");s.exports=function(c,l,u){var f=l+" Iterator";return c.prototype=h(o,{next:d(1,u)}),g(c,f,!1,!0),m[f]=a,c}},{"../internals/create-property-descriptor":38,"../internals/iterators":79,"../internals/iterators-core":78,"../internals/object-create":90,"../internals/set-to-string-tag":117}],37:[function(r,s,i){var a=r("../internals/descriptors"),o=r("../internals/object-define-property"),h=r("../internals/create-property-descriptor");s.exports=a?function(d,g,m){return o.f(d,g,h(1,m))}:function(d,g,m){return d[g]=m,d}},{"../internals/create-property-descriptor":38,"../internals/descriptors":42,"../internals/object-define-property":92}],38:[function(r,s,i){s.exports=function(a,o){return{enumerable:!(1&a),configurable:!(2&a),writable:!(4&a),value:o}}},{}],39:[function(r,s,i){var a=r("../internals/to-primitive"),o=r("../internals/object-define-property"),h=r("../internals/create-property-descriptor");s.exports=function(d,g,m){var c=a(g);c in d?o.f(d,c,h(0,m)):d[c]=m}},{"../internals/create-property-descriptor":38,"../internals/object-define-property":92,"../internals/to-primitive":138}],40:[function(r,s,i){function a(){return this}var o=r("../internals/export"),h=r("../internals/create-iterator-constructor"),d=r("../internals/object-get-prototype-of"),g=r("../internals/object-set-prototype-of"),m=r("../internals/set-to-string-tag"),c=r("../internals/create-non-enumerable-property"),l=r("../internals/redefine"),u=r("../internals/well-known-symbol"),f=r("../internals/is-pure"),p=r("../internals/iterators"),y=r("../internals/iterators-core"),_=y.IteratorPrototype,b=y.BUGGY_SAFARI_ITERATORS,x=u("iterator"),S="values",E="entries";s.exports=function(C,M,I,A,D,L,O){h(I,M,A);function N(he){if(he===D&&oe)return oe;if(!b&&he in $)return $[he];switch(he){case"keys":case S:case E:return function(){return new I(this,he)}}return function(){return new I(this)}}var U,K,J,z=M+" Iterator",H=!1,$=C.prototype,ne=$[x]||$["@@iterator"]||D&&$[D],oe=!b&&ne||N(D),_e=M=="Array"&&$.entries||ne;if(_e&&(U=d(_e.call(new C)),_!==Object.prototype&&U.next&&(f||d(U)===_||(g?g(U,_):typeof U[x]!="function"&&c(U,x,a)),m(U,z,!0,!0),f&&(p[z]=a))),D==S&&ne&&ne.name!==S&&(H=!0,oe=function(){return ne.call(this)}),f&&!O||$[x]===oe||c($,x,oe),p[M]=oe,D)if(K={values:N(S),keys:L?oe:N("keys"),entries:N(E)},O)for(J in K)!b&&!H&&J in $||l($,J,K[J]);else o({target:M,proto:!0,forced:b||H},K);return K}},{"../internals/create-iterator-constructor":36,"../internals/create-non-enumerable-property":37,"../internals/export":49,"../internals/is-pure":75,"../internals/iterators":79,"../internals/iterators-core":78,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/well-known-symbol":146}],41:[function(r,s,i){var a=r("../internals/path"),o=r("../internals/has"),h=r("../internals/well-known-symbol-wrapped"),d=r("../internals/object-define-property").f;s.exports=function(g){var m=a.Symbol||(a.Symbol={});o(m,g)||d(m,g,{value:h.f(g)})}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/path":104,"../internals/well-known-symbol-wrapped":145}],42:[function(r,s,i){var a=r("../internals/fails");s.exports=!a(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},{"../internals/fails":50}],43:[function(r,s,i){var a=r("../internals/global"),o=r("../internals/is-object"),h=a.document,d=o(h)&&o(h.createElement);s.exports=function(g){return d?h.createElement(g):{}}},{"../internals/global":59,"../internals/is-object":74}],44:[function(r,s,i){s.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},{}],45:[function(r,s,i){var a=r("../internals/engine-user-agent");s.exports=/(iphone|ipod|ipad).*applewebkit/i.test(a)},{"../internals/engine-user-agent":46}],46:[function(r,s,i){var a=r("../internals/get-built-in");s.exports=a("navigator","userAgent")||""},{"../internals/get-built-in":56}],47:[function(r,s,i){var a,o,h=r("../internals/global"),d=r("../internals/engine-user-agent"),g=h.process,m=g&&g.versions,c=m&&m.v8;c?o=(a=c.split("."))[0]+a[1]:d&&(!(a=d.match(/Edge\/(\d+)/))||74<=a[1])&&(a=d.match(/Chrome\/(\d+)/))&&(o=a[1]),s.exports=o&&+o},{"../internals/engine-user-agent":46,"../internals/global":59}],48:[function(r,s,i){s.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],49:[function(r,s,i){var a=r("../internals/global"),o=r("../internals/object-get-own-property-descriptor").f,h=r("../internals/create-non-enumerable-property"),d=r("../internals/redefine"),g=r("../internals/set-global"),m=r("../internals/copy-constructor-properties"),c=r("../internals/is-forced");s.exports=function(l,u){var f,p,y,_,b,x=l.target,S=l.global,E=l.stat;if(f=S?a:E?a[x]||g(x,{}):(a[x]||{}).prototype)for(p in u){if(_=u[p],y=l.noTargetGet?(b=o(f,p))&&b.value:f[p],!c(S?p:x+(E?".":"#")+p,l.forced)&&y!==void 0){if(typeof _==typeof y)continue;m(_,y)}(l.sham||y&&y.sham)&&h(_,"sham",!0),d(f,p,_,l)}}},{"../internals/copy-constructor-properties":32,"../internals/create-non-enumerable-property":37,"../internals/global":59,"../internals/is-forced":73,"../internals/object-get-own-property-descriptor":93,"../internals/redefine":108,"../internals/set-global":115}],50:[function(r,s,i){s.exports=function(a){try{return!!a()}catch{return!0}}},{}],51:[function(r,s,i){r("../modules/es.regexp.exec");var a=r("../internals/redefine"),o=r("../internals/fails"),h=r("../internals/well-known-symbol"),d=r("../internals/regexp-exec"),g=r("../internals/create-non-enumerable-property"),m=h("species"),c=!o(function(){var y=/./;return y.exec=function(){var _=[];return _.groups={a:"7"},_},"".replace(y,"$<a>")!=="7"}),l="a".replace(/./,"$0")==="$0",u=h("replace"),f=!!/./[u]&&/./[u]("a","$0")==="",p=!o(function(){var y=/(?:)/,_=y.exec;y.exec=function(){return _.apply(this,arguments)};var b="ab".split(y);return b.length!==2||b[0]!=="a"||b[1]!=="b"});s.exports=function(y,_,b,x){var S=h(y),E=!o(function(){var L={};return L[S]=function(){return 7},""[y](L)!=7}),C=E&&!o(function(){var L=!1,O=/a/;return y==="split"&&((O={constructor:{}}).constructor[m]=function(){return O},O.flags="",O[S]=/./[S]),O.exec=function(){return L=!0,null},O[S](""),!L});if(!E||!C||y==="replace"&&(!c||!l||f)||y==="split"&&!p){var M=/./[S],I=b(S,""[y],function(L,O,N,U,K){return O.exec===d?E&&!K?{done:!0,value:M.call(O,N,U)}:{done:!0,value:L.call(N,O,U)}:{done:!1}},{REPLACE_KEEPS_$0:l,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:f}),A=I[0],D=I[1];a(String.prototype,y,A),a(RegExp.prototype,S,_==2?function(L,O){return D.call(L,this,O)}:function(L){return D.call(L,this)})}x&&g(RegExp.prototype[S],"sham",!0)}},{"../internals/create-non-enumerable-property":37,"../internals/fails":50,"../internals/redefine":108,"../internals/regexp-exec":110,"../internals/well-known-symbol":146,"../modules/es.regexp.exec":181}],52:[function(r,s,i){var a=r("../internals/is-array"),o=r("../internals/to-length"),h=r("../internals/function-bind-context"),d=function(g,m,c,l,u,f,p,y){for(var _,b=u,x=0,S=!!p&&h(p,y,3);x<l;){if(x in c){if(_=S?S(c[x],x,m):c[x],0<f&&a(_))b=d(g,m,_,o(_.length),b,f-1)-1;else{if(9007199254740991<=b)throw TypeError("Exceed the acceptable array length");g[b]=_}b++}x++}return b};s.exports=d},{"../internals/function-bind-context":54,"../internals/is-array":72,"../internals/to-length":134}],53:[function(r,s,i){var a=r("../internals/fails");s.exports=!a(function(){return Object.isExtensible(Object.preventExtensions({}))})},{"../internals/fails":50}],54:[function(r,s,i){var a=r("../internals/a-function");s.exports=function(o,h,d){if(a(o),h===void 0)return o;switch(d){case 0:return function(){return o.call(h)};case 1:return function(g){return o.call(h,g)};case 2:return function(g,m){return o.call(h,g,m)};case 3:return function(g,m,c){return o.call(h,g,m,c)}}return function(){return o.apply(h,arguments)}}},{"../internals/a-function":5}],55:[function(r,s,i){var a=r("../internals/a-function"),o=r("../internals/is-object"),h=[].slice,d={};s.exports=Function.bind||function(g){var m=a(this),c=h.call(arguments,1),l=function(){var u=c.concat(h.call(arguments));return this instanceof l?function(f,p,y){if(!(p in d)){for(var _=[],b=0;b<p;b++)_[b]="a["+b+"]";d[p]=Function("C,a","return new C("+_.join(",")+")")}return d[p](f,y)}(m,u.length,u):m.apply(g,u)};return o(m.prototype)&&(l.prototype=m.prototype),l}},{"../internals/a-function":5,"../internals/is-object":74}],56:[function(r,s,i){function a(d){return typeof d=="function"?d:void 0}var o=r("../internals/path"),h=r("../internals/global");s.exports=function(d,g){return arguments.length<2?a(o[d])||a(h[d]):o[d]&&o[d][g]||h[d]&&h[d][g]}},{"../internals/global":59,"../internals/path":104}],57:[function(r,s,i){var a=r("../internals/classof"),o=r("../internals/iterators"),h=r("../internals/well-known-symbol")("iterator");s.exports=function(d){if(d!=null)return d[h]||d["@@iterator"]||o[a(d)]}},{"../internals/classof":29,"../internals/iterators":79,"../internals/well-known-symbol":146}],58:[function(r,s,i){var a=r("../internals/an-object"),o=r("../internals/get-iterator-method");s.exports=function(h){var d=o(h);if(typeof d!="function")throw TypeError(String(h)+" is not iterable");return a(d.call(h))}},{"../internals/an-object":10,"../internals/get-iterator-method":57}],59:[function(r,s,i){(function(a){function o(h){return h&&h.Math==Math&&h}s.exports=o(typeof globalThis=="object"&&globalThis)||o(typeof window=="object"&&window)||o(typeof self=="object"&&self)||o(typeof a=="object"&&a)||Function("return this")()}).call(this,typeof Ih<"u"?Ih:typeof self<"u"?self:typeof window<"u"?window:{})},{}],60:[function(r,s,i){var a={}.hasOwnProperty;s.exports=function(o,h){return a.call(o,h)}},{}],61:[function(r,s,i){s.exports={}},{}],62:[function(r,s,i){var a=r("../internals/global");s.exports=function(o,h){var d=a.console;d&&d.error&&(arguments.length===1?d.error(o):d.error(o,h))}},{"../internals/global":59}],63:[function(r,s,i){var a=r("../internals/get-built-in");s.exports=a("document","documentElement")},{"../internals/get-built-in":56}],64:[function(r,s,i){var a=r("../internals/descriptors"),o=r("../internals/fails"),h=r("../internals/document-create-element");s.exports=!a&&!o(function(){return Object.defineProperty(h("div"),"a",{get:function(){return 7}}).a!=7})},{"../internals/descriptors":42,"../internals/document-create-element":43,"../internals/fails":50}],65:[function(r,s,i){var a=Math.abs,o=Math.pow,h=Math.floor,d=Math.log,g=Math.LN2;s.exports={pack:function(m,c,l){var u,f,p,y=new Array(l),_=8*l-c-1,b=(1<<_)-1,x=b>>1,S=c===23?o(2,-24)-o(2,-77):0,E=m<0||m===0&&1/m<0?1:0,C=0;for((m=a(m))!=m||m===1/0?(f=m!=m?1:0,u=b):(u=h(d(m)/g),m*(p=o(2,-u))<1&&(u--,p*=2),2<=(m+=1<=u+x?S/p:S*o(2,1-x))*p&&(u++,p/=2),b<=u+x?(f=0,u=b):1<=u+x?(f=(m*p-1)*o(2,c),u+=x):(f=m*o(2,x-1)*o(2,c),u=0));8<=c;y[C++]=255&f,f/=256,c-=8);for(u=u<<c|f,_+=c;0<_;y[C++]=255&u,u/=256,_-=8);return y[--C]|=128*E,y},unpack:function(m,c){var l,u=m.length,f=8*u-c-1,p=(1<<f)-1,y=p>>1,_=f-7,b=u-1,x=m[b--],S=127&x;for(x>>=7;0<_;S=256*S+m[b],b--,_-=8);for(l=S&(1<<-_)-1,S>>=-_,_+=c;0<_;l=256*l+m[b],b--,_-=8);if(S===0)S=1-y;else{if(S===p)return l?NaN:x?-1/0:1/0;l+=o(2,c),S-=y}return(x?-1:1)*l*o(2,S-c)}}},{}],66:[function(r,s,i){var a=r("../internals/fails"),o=r("../internals/classof-raw"),h="".split;s.exports=a(function(){return!Object("z").propertyIsEnumerable(0)})?function(d){return o(d)=="String"?h.call(d,""):Object(d)}:Object},{"../internals/classof-raw":28,"../internals/fails":50}],67:[function(r,s,i){var a=r("../internals/is-object"),o=r("../internals/object-set-prototype-of");s.exports=function(h,d,g){var m,c;return o&&typeof(m=d.constructor)=="function"&&m!==g&&a(c=m.prototype)&&c!==g.prototype&&o(h,c),h}},{"../internals/is-object":74,"../internals/object-set-prototype-of":101}],68:[function(r,s,i){var a=r("../internals/shared-store"),o=Function.toString;typeof a.inspectSource!="function"&&(a.inspectSource=function(h){return o.call(h)}),s.exports=a.inspectSource},{"../internals/shared-store":119}],69:[function(r,s,i){function a(y){g(y,l,{value:{objectID:"O"+ ++u,weakData:{}}})}var o=r("../internals/hidden-keys"),h=r("../internals/is-object"),d=r("../internals/has"),g=r("../internals/object-define-property").f,m=r("../internals/uid"),c=r("../internals/freezing"),l=m("meta"),u=0,f=Object.isExtensible||function(){return!0},p=s.exports={REQUIRED:!1,fastKey:function(y,_){if(!h(y))return typeof y=="symbol"?y:(typeof y=="string"?"S":"P")+y;if(!d(y,l)){if(!f(y))return"F";if(!_)return"E";a(y)}return y[l].objectID},getWeakData:function(y,_){if(!d(y,l)){if(!f(y))return!0;if(!_)return!1;a(y)}return y[l].weakData},onFreeze:function(y){return c&&p.REQUIRED&&f(y)&&!d(y,l)&&a(y),y}};o[l]=!0},{"../internals/freezing":53,"../internals/has":60,"../internals/hidden-keys":61,"../internals/is-object":74,"../internals/object-define-property":92,"../internals/uid":143}],70:[function(r,s,i){var a,o,h,d=r("../internals/native-weak-map"),g=r("../internals/global"),m=r("../internals/is-object"),c=r("../internals/create-non-enumerable-property"),l=r("../internals/has"),u=r("../internals/shared-key"),f=r("../internals/hidden-keys"),p=g.WeakMap;if(d){var y=new p,_=y.get,b=y.has,x=y.set;a=function(E,C){return x.call(y,E,C),C},o=function(E){return _.call(y,E)||{}},h=function(E){return b.call(y,E)}}else{var S=u("state");f[S]=!0,a=function(E,C){return c(E,S,C),C},o=function(E){return l(E,S)?E[S]:{}},h=function(E){return l(E,S)}}s.exports={set:a,get:o,has:h,enforce:function(E){return h(E)?o(E):a(E,{})},getterFor:function(E){return function(C){var M;if(!m(C)||(M=o(C)).type!==E)throw TypeError("Incompatible receiver, "+E+" required");return M}}}},{"../internals/create-non-enumerable-property":37,"../internals/global":59,"../internals/has":60,"../internals/hidden-keys":61,"../internals/is-object":74,"../internals/native-weak-map":85,"../internals/shared-key":118}],71:[function(r,s,i){var a=r("../internals/well-known-symbol"),o=r("../internals/iterators"),h=a("iterator"),d=Array.prototype;s.exports=function(g){return g!==void 0&&(o.Array===g||d[h]===g)}},{"../internals/iterators":79,"../internals/well-known-symbol":146}],72:[function(r,s,i){var a=r("../internals/classof-raw");s.exports=Array.isArray||function(o){return a(o)=="Array"}},{"../internals/classof-raw":28}],73:[function(r,s,i){function a(l,u){var f=g[d(l)];return f==c||f!=m&&(typeof u=="function"?o(u):!!u)}var o=r("../internals/fails"),h=/#|\.prototype\./,d=a.normalize=function(l){return String(l).replace(h,".").toLowerCase()},g=a.data={},m=a.NATIVE="N",c=a.POLYFILL="P";s.exports=a},{"../internals/fails":50}],74:[function(r,s,i){s.exports=function(a){return typeof a=="object"?a!==null:typeof a=="function"}},{}],75:[function(r,s,i){s.exports=!1},{}],76:[function(r,s,i){var a=r("../internals/is-object"),o=r("../internals/classof-raw"),h=r("../internals/well-known-symbol")("match");s.exports=function(d){var g;return a(d)&&((g=d[h])!==void 0?!!g:o(d)=="RegExp")}},{"../internals/classof-raw":28,"../internals/is-object":74,"../internals/well-known-symbol":146}],77:[function(r,s,i){function a(l,u){this.stopped=l,this.result=u}var o=r("../internals/an-object"),h=r("../internals/is-array-iterator-method"),d=r("../internals/to-length"),g=r("../internals/function-bind-context"),m=r("../internals/get-iterator-method"),c=r("../internals/call-with-safe-iteration-closing");(s.exports=function(l,u,f,p,y){var _,b,x,S,E,C,M,I=g(u,f,p?2:1);if(y)_=l;else{if(typeof(b=m(l))!="function")throw TypeError("Target is not iterable");if(h(b)){for(x=0,S=d(l.length);x<S;x++)if((E=p?I(o(M=l[x])[0],M[1]):I(l[x]))&&E instanceof a)return E;return new a(!1)}_=b.call(l)}for(C=_.next;!(M=C.call(_)).done;)if(typeof(E=c(_,I,M.value,p))=="object"&&E&&E instanceof a)return E;return new a(!1)}).stop=function(l){return new a(!0,l)}},{"../internals/an-object":10,"../internals/call-with-safe-iteration-closing":26,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":134}],78:[function(r,s,i){var a,o,h,d=r("../internals/object-get-prototype-of"),g=r("../internals/create-non-enumerable-property"),m=r("../internals/has"),c=r("../internals/well-known-symbol"),l=r("../internals/is-pure"),u=c("iterator"),f=!1;[].keys&&("next"in(h=[].keys())?(o=d(d(h)))!==Object.prototype&&(a=o):f=!0),a==null&&(a={}),l||m(a,u)||g(a,u,function(){return this}),s.exports={IteratorPrototype:a,BUGGY_SAFARI_ITERATORS:f}},{"../internals/create-non-enumerable-property":37,"../internals/has":60,"../internals/is-pure":75,"../internals/object-get-prototype-of":97,"../internals/well-known-symbol":146}],79:[function(r,s,i){arguments[4][61][0].apply(i,arguments)},{dup:61}],80:[function(r,s,i){s.exports=Math.sign||function(a){return(a=+a)==0||a!=a?a:a<0?-1:1}},{}],81:[function(r,s,i){var a,o,h,d,g,m,c,l,u=r("../internals/global"),f=r("../internals/object-get-own-property-descriptor").f,p=r("../internals/classof-raw"),y=r("../internals/task").set,_=r("../internals/engine-is-ios"),b=u.MutationObserver||u.WebKitMutationObserver,x=u.process,S=u.Promise,E=p(x)=="process",C=f(u,"queueMicrotask"),M=C&&C.value;M||(a=function(){var I,A;for(E&&(I=x.domain)&&I.exit();o;){A=o.fn,o=o.next;try{A()}catch(D){throw o?d():h=void 0,D}}h=void 0,I&&I.enter()},d=E?function(){x.nextTick(a)}:b&&!_?(g=!0,m=document.createTextNode(""),new b(a).observe(m,{characterData:!0}),function(){m.data=g=!g}):S&&S.resolve?(c=S.resolve(void 0),l=c.then,function(){l.call(c,a)}):function(){y.call(u,a)}),s.exports=M||function(I){var A={fn:I,next:void 0};h&&(h.next=A),o||(o=A,d()),h=A}},{"../internals/classof-raw":28,"../internals/engine-is-ios":45,"../internals/global":59,"../internals/object-get-own-property-descriptor":93,"../internals/task":128}],82:[function(r,s,i){var a=r("../internals/global");s.exports=a.Promise},{"../internals/global":59}],83:[function(r,s,i){var a=r("../internals/fails");s.exports=!!Object.getOwnPropertySymbols&&!a(function(){return!String(Symbol())})},{"../internals/fails":50}],84:[function(r,s,i){var a=r("../internals/fails"),o=r("../internals/well-known-symbol"),h=r("../internals/is-pure"),d=o("iterator");s.exports=!a(function(){var g=new URL("b?a=1&b=2&c=3","http://a"),m=g.searchParams,c="";return g.pathname="c%20d",m.forEach(function(l,u){m.delete("b"),c+=u+l}),h&&!g.toJSON||!m.sort||g.href!=="http://a/c%20d?a=1&c=3"||m.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!m[d]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://\u0442\u0435\u0441\u0442").host!=="xn--e1aybc"||new URL("http://a#\u0431").hash!=="#%D0%B1"||c!=="a1c3"||new URL("http://x",void 0).host!=="x"})},{"../internals/fails":50,"../internals/is-pure":75,"../internals/well-known-symbol":146}],85:[function(r,s,i){var a=r("../internals/global"),o=r("../internals/inspect-source"),h=a.WeakMap;s.exports=typeof h=="function"&&/native code/.test(o(h))},{"../internals/global":59,"../internals/inspect-source":68}],86:[function(r,s,i){function a(h){var d,g;this.promise=new h(function(m,c){if(d!==void 0||g!==void 0)throw TypeError("Bad Promise constructor");d=m,g=c}),this.resolve=o(d),this.reject=o(g)}var o=r("../internals/a-function");s.exports.f=function(h){return new a(h)}},{"../internals/a-function":5}],87:[function(r,s,i){var a=r("../internals/is-regexp");s.exports=function(o){if(a(o))throw TypeError("The method doesn't accept regular expressions");return o}},{"../internals/is-regexp":76}],88:[function(r,s,i){var a=r("../internals/global").isFinite;s.exports=Number.isFinite||function(o){return typeof o=="number"&&a(o)}},{"../internals/global":59}],89:[function(r,s,i){var a=r("../internals/descriptors"),o=r("../internals/fails"),h=r("../internals/object-keys"),d=r("../internals/object-get-own-property-symbols"),g=r("../internals/object-property-is-enumerable"),m=r("../internals/to-object"),c=r("../internals/indexed-object"),l=Object.assign,u=Object.defineProperty;s.exports=!l||o(function(){if(a&&l({b:1},l(u({},"a",{enumerable:!0,get:function(){u(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var f={},p={},y=Symbol(),_="abcdefghijklmnopqrst";return f[y]=7,_.split("").forEach(function(b){p[b]=b}),l({},f)[y]!=7||h(l({},p)).join("")!=_})?function(f,p){for(var y=m(f),_=arguments.length,b=1,x=d.f,S=g.f;b<_;)for(var E,C=c(arguments[b++]),M=x?h(C).concat(x(C)):h(C),I=M.length,A=0;A<I;)E=M[A++],a&&!S.call(C,E)||(y[E]=C[E]);return y}:l},{"../internals/descriptors":42,"../internals/fails":50,"../internals/indexed-object":66,"../internals/object-get-own-property-symbols":96,"../internals/object-keys":99,"../internals/object-property-is-enumerable":100,"../internals/to-object":135}],90:[function(r,s,i){function a(){}function o(x){return"<script>"+x+"</"+y+">"}var h,d=r("../internals/an-object"),g=r("../internals/object-define-properties"),m=r("../internals/enum-bug-keys"),c=r("../internals/hidden-keys"),l=r("../internals/html"),u=r("../internals/document-create-element"),f=r("../internals/shared-key"),p="prototype",y="script",_=f("IE_PROTO"),b=function(){try{h=document.domain&&new ActiveXObject("htmlfile")}catch{}var x,S;b=h?function(C){C.write(o("")),C.close();var M=C.parentWindow.Object;return C=null,M}(h):((S=u("iframe")).style.display="none",l.appendChild(S),S.src=String("javascript:"),(x=S.contentWindow.document).open(),x.write(o("document.F=Object")),x.close(),x.F);for(var E=m.length;E--;)delete b[p][m[E]];return b()};c[_]=!0,s.exports=Object.create||function(x,S){var E;return x!==null?(a[p]=d(x),E=new a,a[p]=null,E[_]=x):E=b(),S===void 0?E:g(E,S)}},{"../internals/an-object":10,"../internals/document-create-element":43,"../internals/enum-bug-keys":48,"../internals/hidden-keys":61,"../internals/html":63,"../internals/object-define-properties":91,"../internals/shared-key":118}],91:[function(r,s,i){var a=r("../internals/descriptors"),o=r("../internals/object-define-property"),h=r("../internals/an-object"),d=r("../internals/object-keys");s.exports=a?Object.defineProperties:function(g,m){h(g);for(var c,l=d(m),u=l.length,f=0;f<u;)o.f(g,c=l[f++],m[c]);return g}},{"../internals/an-object":10,"../internals/descriptors":42,"../internals/object-define-property":92,"../internals/object-keys":99}],92:[function(r,s,i){var a=r("../internals/descriptors"),o=r("../internals/ie8-dom-define"),h=r("../internals/an-object"),d=r("../internals/to-primitive"),g=Object.defineProperty;i.f=a?g:function(m,c,l){if(h(m),c=d(c,!0),h(l),o)try{return g(m,c,l)}catch{}if("get"in l||"set"in l)throw TypeError("Accessors not supported");return"value"in l&&(m[c]=l.value),m}},{"../internals/an-object":10,"../internals/descriptors":42,"../internals/ie8-dom-define":64,"../internals/to-primitive":138}],93:[function(r,s,i){var a=r("../internals/descriptors"),o=r("../internals/object-property-is-enumerable"),h=r("../internals/create-property-descriptor"),d=r("../internals/to-indexed-object"),g=r("../internals/to-primitive"),m=r("../internals/has"),c=r("../internals/ie8-dom-define"),l=Object.getOwnPropertyDescriptor;i.f=a?l:function(u,f){if(u=d(u),f=g(f,!0),c)try{return l(u,f)}catch{}if(m(u,f))return h(!o.f.call(u,f),u[f])}},{"../internals/create-property-descriptor":38,"../internals/descriptors":42,"../internals/has":60,"../internals/ie8-dom-define":64,"../internals/object-property-is-enumerable":100,"../internals/to-indexed-object":132,"../internals/to-primitive":138}],94:[function(r,s,i){var a=r("../internals/to-indexed-object"),o=r("../internals/object-get-own-property-names").f,h={}.toString,d=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];s.exports.f=function(g){return d&&h.call(g)=="[object Window]"?function(m){try{return o(m)}catch{return d.slice()}}(g):o(a(g))}},{"../internals/object-get-own-property-names":95,"../internals/to-indexed-object":132}],95:[function(r,s,i){var a=r("../internals/object-keys-internal"),o=r("../internals/enum-bug-keys").concat("length","prototype");i.f=Object.getOwnPropertyNames||function(h){return a(h,o)}},{"../internals/enum-bug-keys":48,"../internals/object-keys-internal":98}],96:[function(r,s,i){i.f=Object.getOwnPropertySymbols},{}],97:[function(r,s,i){var a=r("../internals/has"),o=r("../internals/to-object"),h=r("../internals/shared-key"),d=r("../internals/correct-prototype-getter"),g=h("IE_PROTO"),m=Object.prototype;s.exports=d?Object.getPrototypeOf:function(c){return c=o(c),a(c,g)?c[g]:typeof c.constructor=="function"&&c instanceof c.constructor?c.constructor.prototype:c instanceof Object?m:null}},{"../internals/correct-prototype-getter":34,"../internals/has":60,"../internals/shared-key":118,"../internals/to-object":135}],98:[function(r,s,i){var a=r("../internals/has"),o=r("../internals/to-indexed-object"),h=r("../internals/array-includes").indexOf,d=r("../internals/hidden-keys");s.exports=function(g,m){var c,l=o(g),u=0,f=[];for(c in l)!a(d,c)&&a(l,c)&&f.push(c);for(;m.length>u;)a(l,c=m[u++])&&(~h(f,c)||f.push(c));return f}},{"../internals/array-includes":18,"../internals/has":60,"../internals/hidden-keys":61,"../internals/to-indexed-object":132}],99:[function(r,s,i){var a=r("../internals/object-keys-internal"),o=r("../internals/enum-bug-keys");s.exports=Object.keys||function(h){return a(h,o)}},{"../internals/enum-bug-keys":48,"../internals/object-keys-internal":98}],100:[function(r,s,i){var a={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,h=o&&!a.call({1:2},1);i.f=h?function(d){var g=o(this,d);return!!g&&g.enumerable}:a},{}],101:[function(r,s,i){var a=r("../internals/an-object"),o=r("../internals/a-possible-prototype");s.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var h,d=!1,g={};try{(h=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(g,[]),d=g instanceof Array}catch{}return function(m,c){return a(m),o(c),d?h.call(m,c):m.__proto__=c,m}}():void 0)},{"../internals/a-possible-prototype":6,"../internals/an-object":10}],102:[function(r,s,i){var a=r("../internals/to-string-tag-support"),o=r("../internals/classof");s.exports=a?{}.toString:function(){return"[object "+o(this)+"]"}},{"../internals/classof":29,"../internals/to-string-tag-support":139}],103:[function(r,s,i){var a=r("../internals/get-built-in"),o=r("../internals/object-get-own-property-names"),h=r("../internals/object-get-own-property-symbols"),d=r("../internals/an-object");s.exports=a("Reflect","ownKeys")||function(g){var m=o.f(d(g)),c=h.f;return c?m.concat(c(g)):m}},{"../internals/an-object":10,"../internals/get-built-in":56,"../internals/object-get-own-property-names":95,"../internals/object-get-own-property-symbols":96}],104:[function(r,s,i){var a=r("../internals/global");s.exports=a},{"../internals/global":59}],105:[function(r,s,i){s.exports=function(a){try{return{error:!1,value:a()}}catch(o){return{error:!0,value:o}}}},{}],106:[function(r,s,i){var a=r("../internals/an-object"),o=r("../internals/is-object"),h=r("../internals/new-promise-capability");s.exports=function(d,g){if(a(d),o(g)&&g.constructor===d)return g;var m=h.f(d);return(0,m.resolve)(g),m.promise}},{"../internals/an-object":10,"../internals/is-object":74,"../internals/new-promise-capability":86}],107:[function(r,s,i){var a=r("../internals/redefine");s.exports=function(o,h,d){for(var g in h)a(o,g,h[g],d);return o}},{"../internals/redefine":108}],108:[function(r,s,i){var a=r("../internals/global"),o=r("../internals/create-non-enumerable-property"),h=r("../internals/has"),d=r("../internals/set-global"),g=r("../internals/inspect-source"),m=r("../internals/internal-state"),c=m.get,l=m.enforce,u=String(String).split("String");(s.exports=function(f,p,y,_){var b=!!_&&!!_.unsafe,x=!!_&&!!_.enumerable,S=!!_&&!!_.noTargetGet;typeof y=="function"&&(typeof p!="string"||h(y,"name")||o(y,"name",p),l(y).source=u.join(typeof p=="string"?p:"")),f!==a?(b?!S&&f[p]&&(x=!0):delete f[p],x?f[p]=y:o(f,p,y)):x?f[p]=y:d(p,y)})(Function.prototype,"toString",function(){return typeof this=="function"&&c(this).source||g(this)})},{"../internals/create-non-enumerable-property":37,"../internals/global":59,"../internals/has":60,"../internals/inspect-source":68,"../internals/internal-state":70,"../internals/set-global":115}],109:[function(r,s,i){var a=r("./classof-raw"),o=r("./regexp-exec");s.exports=function(h,d){var g=h.exec;if(typeof g=="function"){var m=g.call(h,d);if(typeof m!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return m}if(a(h)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return o.call(h,d)}},{"./classof-raw":28,"./regexp-exec":110}],110:[function(r,s,i){var a,o,h=r("./regexp-flags"),d=r("./regexp-sticky-helpers"),g=RegExp.prototype.exec,m=String.prototype.replace,c=g,l=(a=/a/,o=/b*/g,g.call(a,"a"),g.call(o,"a"),a.lastIndex!==0||o.lastIndex!==0),u=d.UNSUPPORTED_Y||d.BROKEN_CARET,f=/()??/.exec("")[1]!==void 0;(l||f||u)&&(c=function(p){var y,_,b,x,S=this,E=u&&S.sticky,C=h.call(S),M=S.source,I=0,A=p;return E&&((C=C.replace("y","")).indexOf("g")===-1&&(C+="g"),A=String(p).slice(S.lastIndex),0<S.lastIndex&&(!S.multiline||S.multiline&&p[S.lastIndex-1]!==`
`)&&(M="(?: "+M+")",A=" "+A,I++),_=new RegExp("^(?:"+M+")",C)),f&&(_=new RegExp("^"+M+"$(?!\\s)",C)),l&&(y=S.lastIndex),b=g.call(E?_:S,A),E?b?(b.input=b.input.slice(I),b[0]=b[0].slice(I),b.index=S.lastIndex,S.lastIndex+=b[0].length):S.lastIndex=0:l&&b&&(S.lastIndex=S.global?b.index+b[0].length:y),f&&b&&1<b.length&&m.call(b[0],_,function(){for(x=1;x<arguments.length-2;x++)arguments[x]===void 0&&(b[x]=void 0)}),b}),s.exports=c},{"./regexp-flags":111,"./regexp-sticky-helpers":112}],111:[function(r,s,i){var a=r("../internals/an-object");s.exports=function(){var o=a(this),h="";return o.global&&(h+="g"),o.ignoreCase&&(h+="i"),o.multiline&&(h+="m"),o.dotAll&&(h+="s"),o.unicode&&(h+="u"),o.sticky&&(h+="y"),h}},{"../internals/an-object":10}],112:[function(r,s,i){var a=r("./fails");function o(h,d){return RegExp(h,d)}i.UNSUPPORTED_Y=a(function(){var h=o("a","y");return h.lastIndex=2,h.exec("abcd")!=null}),i.BROKEN_CARET=a(function(){var h=o("^r","gy");return h.lastIndex=2,h.exec("str")!=null})},{"./fails":50}],113:[function(r,s,i){s.exports=function(a){if(a==null)throw TypeError("Can't call method on "+a);return a}},{}],114:[function(r,s,i){s.exports=Object.is||function(a,o){return a===o?a!==0||1/a==1/o:a!=a&&o!=o}},{}],115:[function(r,s,i){var a=r("../internals/global"),o=r("../internals/create-non-enumerable-property");s.exports=function(h,d){try{o(a,h,d)}catch{a[h]=d}return d}},{"../internals/create-non-enumerable-property":37,"../internals/global":59}],116:[function(r,s,i){var a=r("../internals/get-built-in"),o=r("../internals/object-define-property"),h=r("../internals/well-known-symbol"),d=r("../internals/descriptors"),g=h("species");s.exports=function(m){var c=a(m),l=o.f;d&&c&&!c[g]&&l(c,g,{configurable:!0,get:function(){return this}})}},{"../internals/descriptors":42,"../internals/get-built-in":56,"../internals/object-define-property":92,"../internals/well-known-symbol":146}],117:[function(r,s,i){var a=r("../internals/object-define-property").f,o=r("../internals/has"),h=r("../internals/well-known-symbol")("toStringTag");s.exports=function(d,g,m){d&&!o(d=m?d:d.prototype,h)&&a(d,h,{configurable:!0,value:g})}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/well-known-symbol":146}],118:[function(r,s,i){var a=r("../internals/shared"),o=r("../internals/uid"),h=a("keys");s.exports=function(d){return h[d]||(h[d]=o(d))}},{"../internals/shared":120,"../internals/uid":143}],119:[function(r,s,i){var a=r("../internals/global"),o=r("../internals/set-global"),h="__core-js_shared__",d=a[h]||o(h,{});s.exports=d},{"../internals/global":59,"../internals/set-global":115}],120:[function(r,s,i){var a=r("../internals/is-pure"),o=r("../internals/shared-store");(s.exports=function(h,d){return o[h]||(o[h]=d!==void 0?d:{})})("versions",[]).push({version:"3.6.5",mode:a?"pure":"global",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"})},{"../internals/is-pure":75,"../internals/shared-store":119}],121:[function(r,s,i){var a=r("../internals/an-object"),o=r("../internals/a-function"),h=r("../internals/well-known-symbol")("species");s.exports=function(d,g){var m,c=a(d).constructor;return c===void 0||(m=a(c)[h])==null?g:o(m)}},{"../internals/a-function":5,"../internals/an-object":10,"../internals/well-known-symbol":146}],122:[function(r,s,i){var a=r("../internals/fails");s.exports=function(o){return a(function(){var h=""[o]('"');return h!==h.toLowerCase()||3<h.split('"').length})}},{"../internals/fails":50}],123:[function(r,s,i){function a(d){return function(g,m){var c,l,u=String(h(g)),f=o(m),p=u.length;return f<0||p<=f?d?"":void 0:(c=u.charCodeAt(f))<55296||56319<c||f+1===p||(l=u.charCodeAt(f+1))<56320||57343<l?d?u.charAt(f):c:d?u.slice(f,f+2):l-56320+(c-55296<<10)+65536}}var o=r("../internals/to-integer"),h=r("../internals/require-object-coercible");s.exports={codeAt:a(!1),charAt:a(!0)}},{"../internals/require-object-coercible":113,"../internals/to-integer":133}],124:[function(r,s,i){function a(f){return f+22+75*(f<26)}function o(f,p,y){var _=0;for(f=y?l(f/700):f>>1,f+=l(f/p);455<f;_+=36)f=l(f/35);return l(_+36*f/(f+38))}function h(f){var p,y,_=[],b=(f=function(K){for(var J=[],z=0,H=K.length;z<H;){var $=K.charCodeAt(z++);if(55296<=$&&$<=56319&&z<H){var ne=K.charCodeAt(z++);(64512&ne)==56320?J.push(((1023&$)<<10)+(1023&ne)+65536):(J.push($),z--)}else J.push($)}return J}(f)).length,x=128,S=0,E=72;for(p=0;p<f.length;p++)(y=f[p])<128&&_.push(u(y));var C=_.length,M=C;for(C&&_.push("-");M<b;){var I=d;for(p=0;p<f.length;p++)x<=(y=f[p])&&y<I&&(I=y);var A=M+1;if(I-x>l((d-S)/A))throw RangeError(c);for(S+=(I-x)*A,x=I,p=0;p<f.length;p++){if((y=f[p])<x&&++S>d)throw RangeError(c);if(y==x){for(var D=S,L=36;;L+=36){var O=L<=E?1:E+26<=L?26:L-E;if(D<O)break;var N=D-O,U=36-O;_.push(u(a(O+N%U))),D=l(N/U)}_.push(u(a(D))),E=o(S,A,M==C),S=0,++M}}++S,++x}return _.join("")}var d=2147483647,g=/[^\0-\u007E]/,m=/[.\u3002\uFF0E\uFF61]/g,c="Overflow: input needs wider integers to process",l=Math.floor,u=String.fromCharCode;s.exports=function(f){var p,y,_=[],b=f.toLowerCase().replace(m,".").split(".");for(p=0;p<b.length;p++)y=b[p],_.push(g.test(y)?"xn--"+h(y):y);return _.join(".")}},{}],125:[function(r,s,i){var a=r("../internals/to-integer"),o=r("../internals/require-object-coercible");s.exports="".repeat||function(h){var d=String(o(this)),g="",m=a(h);if(m<0||m==1/0)throw RangeError("Wrong number of repetitions");for(;0<m;(m>>>=1)&&(d+=d))1&m&&(g+=d);return g}},{"../internals/require-object-coercible":113,"../internals/to-integer":133}],126:[function(r,s,i){var a=r("../internals/fails"),o=r("../internals/whitespaces");s.exports=function(h){return a(function(){return!!o[h]()||"\u200B\x85\u180E"[h]()!="\u200B\x85\u180E"||o[h].name!==h})}},{"../internals/fails":50,"../internals/whitespaces":147}],127:[function(r,s,i){function a(m){return function(c){var l=String(o(c));return 1&m&&(l=l.replace(d,"")),2&m&&(l=l.replace(g,"")),l}}var o=r("../internals/require-object-coercible"),h="["+r("../internals/whitespaces")+"]",d=RegExp("^"+h+h+"*"),g=RegExp(h+h+"*$");s.exports={start:a(1),end:a(2),trim:a(3)}},{"../internals/require-object-coercible":113,"../internals/whitespaces":147}],128:[function(r,s,i){function a(O){if(D.hasOwnProperty(O)){var N=D[O];delete D[O],N()}}function o(O){return function(){a(O)}}function h(O){a(O.data)}function d(O){l.postMessage(O+"",x.protocol+"//"+x.host)}var g,m,c,l=r("../internals/global"),u=r("../internals/fails"),f=r("../internals/classof-raw"),p=r("../internals/function-bind-context"),y=r("../internals/html"),_=r("../internals/document-create-element"),b=r("../internals/engine-is-ios"),x=l.location,S=l.setImmediate,E=l.clearImmediate,C=l.process,M=l.MessageChannel,I=l.Dispatch,A=0,D={},L="onreadystatechange";S&&E||(S=function(O){for(var N=[],U=1;U<arguments.length;)N.push(arguments[U++]);return D[++A]=function(){(typeof O=="function"?O:Function(O)).apply(void 0,N)},g(A),A},E=function(O){delete D[O]},f(C)=="process"?g=function(O){C.nextTick(o(O))}:I&&I.now?g=function(O){I.now(o(O))}:M&&!b?(c=(m=new M).port2,m.port1.onmessage=h,g=p(c.postMessage,c,1)):!l.addEventListener||typeof postMessage!="function"||l.importScripts||u(d)||x.protocol==="file:"?g=L in _("script")?function(O){y.appendChild(_("script"))[L]=function(){y.removeChild(this),a(O)}}:function(O){setTimeout(o(O),0)}:(g=d,l.addEventListener("message",h,!1))),s.exports={set:S,clear:E}},{"../internals/classof-raw":28,"../internals/document-create-element":43,"../internals/engine-is-ios":45,"../internals/fails":50,"../internals/function-bind-context":54,"../internals/global":59,"../internals/html":63}],129:[function(r,s,i){var a=r("../internals/classof-raw");s.exports=function(o){if(typeof o!="number"&&a(o)!="Number")throw TypeError("Incorrect invocation");return+o}},{"../internals/classof-raw":28}],130:[function(r,s,i){var a=r("../internals/to-integer"),o=Math.max,h=Math.min;s.exports=function(d,g){var m=a(d);return m<0?o(m+g,0):h(m,g)}},{"../internals/to-integer":133}],131:[function(r,s,i){var a=r("../internals/to-integer"),o=r("../internals/to-length");s.exports=function(h){if(h===void 0)return 0;var d=a(h),g=o(d);if(d!==g)throw RangeError("Wrong length or index");return g}},{"../internals/to-integer":133,"../internals/to-length":134}],132:[function(r,s,i){var a=r("../internals/indexed-object"),o=r("../internals/require-object-coercible");s.exports=function(h){return a(o(h))}},{"../internals/indexed-object":66,"../internals/require-object-coercible":113}],133:[function(r,s,i){var a=Math.ceil,o=Math.floor;s.exports=function(h){return isNaN(h=+h)?0:(0<h?o:a)(h)}},{}],134:[function(r,s,i){var a=r("../internals/to-integer"),o=Math.min;s.exports=function(h){return 0<h?o(a(h),9007199254740991):0}},{"../internals/to-integer":133}],135:[function(r,s,i){var a=r("../internals/require-object-coercible");s.exports=function(o){return Object(a(o))}},{"../internals/require-object-coercible":113}],136:[function(r,s,i){var a=r("../internals/to-positive-integer");s.exports=function(o,h){var d=a(o);if(d%h)throw RangeError("Wrong offset");return d}},{"../internals/to-positive-integer":137}],137:[function(r,s,i){var a=r("../internals/to-integer");s.exports=function(o){var h=a(o);if(h<0)throw RangeError("The argument can't be less than 0");return h}},{"../internals/to-integer":133}],138:[function(r,s,i){var a=r("../internals/is-object");s.exports=function(o,h){if(!a(o))return o;var d,g;if(h&&typeof(d=o.toString)=="function"&&!a(g=d.call(o))||typeof(d=o.valueOf)=="function"&&!a(g=d.call(o))||!h&&typeof(d=o.toString)=="function"&&!a(g=d.call(o)))return g;throw TypeError("Can't convert object to primitive value")}},{"../internals/is-object":74}],139:[function(r,s,i){var a={};a[r("../internals/well-known-symbol")("toStringTag")]="z",s.exports=String(a)==="[object z]"},{"../internals/well-known-symbol":146}],140:[function(r,s,i){function a(ae,Se){for(var ke=0,Ee=Se.length,Fe=new(xe(ae))(Ee);ke<Ee;)Fe[ke]=Se[ke++];return Fe}function o(ae,Se){he(ae,Se,{get:function(){return oe(this)[Se]}})}function h(ae){var Se;return ae instanceof R||(Se=A(ae))=="ArrayBuffer"||Se=="SharedArrayBuffer"}function d(ae,Se){return Q(ae)&&typeof Se!="symbol"&&Se in ae&&String(+Se)==String(Se)}function g(ae,Se){return d(ae,Se=M(Se,!0))?b(2,ae[Se]):Te(ae,Se)}function m(ae,Se,ke){return!(d(ae,Se=M(Se,!0))&&D(ke)&&I(ke,"value"))||I(ke,"get")||I(ke,"set")||ke.configurable||I(ke,"writable")&&!ke.writable||I(ke,"enumerable")&&!ke.enumerable?he(ae,Se,ke):(ae[Se]=ke.value,ae)}var c=r("../internals/export"),l=r("../internals/global"),u=r("../internals/descriptors"),f=r("../internals/typed-array-constructors-require-wrappers"),p=r("../internals/array-buffer-view-core"),y=r("../internals/array-buffer"),_=r("../internals/an-instance"),b=r("../internals/create-property-descriptor"),x=r("../internals/create-non-enumerable-property"),S=r("../internals/to-length"),E=r("../internals/to-index"),C=r("../internals/to-offset"),M=r("../internals/to-primitive"),I=r("../internals/has"),A=r("../internals/classof"),D=r("../internals/is-object"),L=r("../internals/object-create"),O=r("../internals/object-set-prototype-of"),N=r("../internals/object-get-own-property-names").f,U=r("../internals/typed-array-from"),K=r("../internals/array-iteration").forEach,J=r("../internals/set-species"),z=r("../internals/object-define-property"),H=r("../internals/object-get-own-property-descriptor"),$=r("../internals/internal-state"),ne=r("../internals/inherit-if-required"),oe=$.get,_e=$.set,he=z.f,Te=H.f,fe=Math.round,pe=l.RangeError,R=y.ArrayBuffer,V=y.DataView,q=p.NATIVE_ARRAY_BUFFER_VIEWS,ee=p.TYPED_ARRAY_TAG,se=p.TypedArray,re=p.TypedArrayPrototype,xe=p.aTypedArrayConstructor,Q=p.isTypedArray,ce="BYTES_PER_ELEMENT",de="Wrong length";u?(q||(H.f=g,z.f=m,o(re,"buffer"),o(re,"byteOffset"),o(re,"byteLength"),o(re,"length")),c({target:"Object",stat:!0,forced:!q},{getOwnPropertyDescriptor:g,defineProperty:m}),s.exports=function(ae,Se,ke){function Ee(Xe,ve){he(Xe,ve,{get:function(){return tt=ve,(B=oe(this)).view[Ye](tt*Fe+B.byteOffset,!0);var tt,B},set:function(tt){return B=ve,X=tt,G=oe(this),ke&&(X=(X=fe(X))<0?0:255<X?255:255&X),void G.view[Ve](B*Fe+G.byteOffset,X,!0);var B,X,G},enumerable:!0})}var Fe=ae.match(/\d+$/)[0]/8,Qe=ae+(ke?"Clamped":"")+"Array",Ye="get"+ae,Ve="set"+ae,pt=l[Qe],Oe=pt,De=Oe&&Oe.prototype,He={};q?f&&(Oe=Se(function(Xe,ve,tt,B){return _(Xe,Oe,Qe),ne(D(ve)?h(ve)?B!==void 0?new pt(ve,C(tt,Fe),B):tt!==void 0?new pt(ve,C(tt,Fe)):new pt(ve):Q(ve)?a(Oe,ve):U.call(Oe,ve):new pt(E(ve)),Xe,Oe)}),O&&O(Oe,se),K(N(pt),function(Xe){Xe in Oe||x(Oe,Xe,pt[Xe])}),Oe.prototype=De):(Oe=Se(function(Xe,ve,tt,B){_(Xe,Oe,Qe);var X,G,Y,le=0,we=0;if(D(ve)){if(!h(ve))return Q(ve)?a(Oe,ve):U.call(Oe,ve);X=ve,we=C(tt,Fe);var je=ve.byteLength;if(B===void 0){if(je%Fe||(G=je-we)<0)throw pe(de)}else if(je<(G=S(B)*Fe)+we)throw pe(de);Y=G/Fe}else Y=E(ve),X=new R(G=Y*Fe);for(_e(Xe,{buffer:X,byteOffset:we,byteLength:G,length:Y,view:new V(X)});le<Y;)Ee(Xe,le++)}),O&&O(Oe,se),De=Oe.prototype=L(re)),De.constructor!==Oe&&x(De,"constructor",Oe),ee&&x(De,ee,Qe),He[Qe]=Oe,c({global:!0,forced:Oe!=pt,sham:!q},He),ce in Oe||x(Oe,ce,Fe),ce in De||x(De,ce,Fe),J(Qe)}):s.exports=function(){}},{"../internals/an-instance":9,"../internals/array-buffer":13,"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/classof":29,"../internals/create-non-enumerable-property":37,"../internals/create-property-descriptor":38,"../internals/descriptors":42,"../internals/export":49,"../internals/global":59,"../internals/has":60,"../internals/inherit-if-required":67,"../internals/internal-state":70,"../internals/is-object":74,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/object-set-prototype-of":101,"../internals/set-species":116,"../internals/to-index":131,"../internals/to-length":134,"../internals/to-offset":136,"../internals/to-primitive":138,"../internals/typed-array-constructors-require-wrappers":141,"../internals/typed-array-from":142}],141:[function(r,s,i){var a=r("../internals/global"),o=r("../internals/fails"),h=r("../internals/check-correctness-of-iteration"),d=r("../internals/array-buffer-view-core").NATIVE_ARRAY_BUFFER_VIEWS,g=a.ArrayBuffer,m=a.Int8Array;s.exports=!d||!o(function(){m(1)})||!o(function(){new m(-1)})||!h(function(c){new m,new m(null),new m(1.5),new m(c)},!0)||o(function(){return new m(new g(2),1,void 0).length!==1})},{"../internals/array-buffer-view-core":12,"../internals/check-correctness-of-iteration":27,"../internals/fails":50,"../internals/global":59}],142:[function(r,s,i){var a=r("../internals/to-object"),o=r("../internals/to-length"),h=r("../internals/get-iterator-method"),d=r("../internals/is-array-iterator-method"),g=r("../internals/function-bind-context"),m=r("../internals/array-buffer-view-core").aTypedArrayConstructor;s.exports=function(c,l,u){var f,p,y,_,b,x,S=a(c),E=arguments.length,C=1<E?l:void 0,M=C!==void 0,I=h(S);if(I!=null&&!d(I))for(x=(b=I.call(S)).next,S=[];!(_=x.call(b)).done;)S.push(_.value);for(M&&2<E&&(C=g(C,u,2)),p=o(S.length),y=new(m(this))(p),f=0;f<p;f++)y[f]=M?C(S[f],f):S[f];return y}},{"../internals/array-buffer-view-core":12,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":134,"../internals/to-object":135}],143:[function(r,s,i){var a=0,o=Math.random();s.exports=function(h){return"Symbol("+String(h===void 0?"":h)+")_"+(++a+o).toString(36)}},{}],144:[function(r,s,i){var a=r("../internals/native-symbol");s.exports=a&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},{"../internals/native-symbol":83}],145:[function(r,s,i){var a=r("../internals/well-known-symbol");i.f=a},{"../internals/well-known-symbol":146}],146:[function(r,s,i){var a=r("../internals/global"),o=r("../internals/shared"),h=r("../internals/has"),d=r("../internals/uid"),g=r("../internals/native-symbol"),m=r("../internals/use-symbol-as-uid"),c=o("wks"),l=a.Symbol,u=m?l:l&&l.withoutSetter||d;s.exports=function(f){return h(c,f)||(g&&h(l,f)?c[f]=l[f]:c[f]=u("Symbol."+f)),c[f]}},{"../internals/global":59,"../internals/has":60,"../internals/native-symbol":83,"../internals/shared":120,"../internals/uid":143,"../internals/use-symbol-as-uid":144}],147:[function(r,s,i){s.exports=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`},{}],148:[function(r,s,i){var a=r("../internals/export"),o=r("../internals/global"),h=r("../internals/array-buffer"),d=r("../internals/set-species"),g="ArrayBuffer",m=h[g];a({global:!0,forced:o[g]!==m},{ArrayBuffer:m}),d(g)},{"../internals/array-buffer":13,"../internals/export":49,"../internals/global":59,"../internals/set-species":116}],149:[function(r,s,i){function a(C){if(!g(C))return!1;var M=C[_];return M!==void 0?!!M:d(C)}var o=r("../internals/export"),h=r("../internals/fails"),d=r("../internals/is-array"),g=r("../internals/is-object"),m=r("../internals/to-object"),c=r("../internals/to-length"),l=r("../internals/create-property"),u=r("../internals/array-species-create"),f=r("../internals/array-method-has-species-support"),p=r("../internals/well-known-symbol"),y=r("../internals/engine-v8-version"),_=p("isConcatSpreadable"),b=9007199254740991,x="Maximum allowed index exceeded",S=51<=y||!h(function(){var C=[];return C[_]=!1,C.concat()[0]!==C}),E=f("concat");o({target:"Array",proto:!0,forced:!S||!E},{concat:function(C){var M,I,A,D,L,O=m(this),N=u(O,0),U=0;for(M=-1,A=arguments.length;M<A;M++)if(a(L=M===-1?O:arguments[M])){if(D=c(L.length),b<U+D)throw TypeError(x);for(I=0;I<D;I++,U++)I in L&&l(N,U,L[I])}else{if(b<=U)throw TypeError(x);l(N,U++,L)}return N.length=U,N}})},{"../internals/array-method-has-species-support":21,"../internals/array-species-create":25,"../internals/create-property":39,"../internals/engine-v8-version":47,"../internals/export":49,"../internals/fails":50,"../internals/is-array":72,"../internals/is-object":74,"../internals/to-length":134,"../internals/to-object":135,"../internals/well-known-symbol":146}],150:[function(r,s,i){var a=r("../internals/export"),o=r("../internals/array-iteration").every,h=r("../internals/array-method-is-strict"),d=r("../internals/array-method-uses-to-length"),g=h("every"),m=d("every");a({target:"Array",proto:!0,forced:!g||!m},{every:function(c,l){return o(this,c,1<arguments.length?l:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":49}],151:[function(r,s,i){var a=r("../internals/export"),o=r("../internals/array-fill"),h=r("../internals/add-to-unscopables");a({target:"Array",proto:!0},{fill:o}),h("fill")},{"../internals/add-to-unscopables":7,"../internals/array-fill":15,"../internals/export":49}],152:[function(r,s,i){var a=r("../internals/export"),o=r("../internals/array-iteration").filter,h=r("../internals/array-method-has-species-support"),d=r("../internals/array-method-uses-to-length"),g=h("filter"),m=d("filter");a({target:"Array",proto:!0,forced:!g||!m},{filter:function(c,l){return o(this,c,1<arguments.length?l:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":49}],153:[function(r,s,i){var a=r("../internals/export"),o=r("../internals/flatten-into-array"),h=r("../internals/to-object"),d=r("../internals/to-length"),g=r("../internals/a-function"),m=r("../internals/array-species-create");a({target:"Array",proto:!0},{flatMap:function(c,l){var u,f=h(this),p=d(f.length);return g(c),(u=m(f,0)).length=o(u,f,f,p,0,1,c,1<arguments.length?l:void 0),u}})},{"../internals/a-function":5,"../internals/array-species-create":25,"../internals/export":49,"../internals/flatten-into-array":52,"../internals/to-length":134,"../internals/to-object":135}],154:[function(r,s,i){var a=r("../internals/export"),o=r("../internals/array-for-each");a({target:"Array",proto:!0,forced:[].forEach!=o},{forEach:o})},{"../internals/array-for-each":16,"../internals/export":49}],155:[function(r,s,i){var a=r("../internals/export"),o=r("../internals/array-from");a({target:"Array",stat:!0,forced:!r("../internals/check-correctness-of-iteration")(function(h){Array.from(h)})},{from:o})},{"../internals/array-from":17,"../internals/check-correctness-of-iteration":27,"../internals/export":49}],156:[function(r,s,i){var a=r("../internals/export"),o=r("../internals/array-includes").includes,h=r("../internals/add-to-unscopables");a({target:"Array",proto:!0,forced:!r("../internals/array-method-uses-to-length")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(d,g){return o(this,d,1<arguments.length?g:void 0)}}),h("includes")},{"../internals/add-to-unscopables":7,"../internals/array-includes":18,"../internals/array-method-uses-to-length":23,"../internals/export":49}],157:[function(r,s,i){var a=r("../internals/export"),o=r("../internals/array-includes").indexOf,h=r("../internals/array-method-is-strict"),d=r("../internals/array-method-uses-to-length"),g=[].indexOf,m=!!g&&1/[1].indexOf(1,-0)<0,c=h("indexOf"),l=d("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:m||!c||!l},{indexOf:function(u,f){return m?g.apply(this,arguments)||0:o(this,u,1<arguments.length?f:void 0)}})},{"../internals/array-includes":18,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":49}],158:[function(r,s,i){var a=r("../internals/to-indexed-object"),o=r("../internals/add-to-unscopables"),h=r("../internals/iterators"),d=r("../internals/internal-state"),g=r("../internals/define-iterator"),m="Array Iterator",c=d.set,l=d.getterFor(m);s.exports=g(Array,"Array",function(u,f){c(this,{type:m,target:a(u),index:0,kind:f})},function(){var u=l(this),f=u.target,p=u.kind,y=u.index++;return!f||y>=f.length?{value:u.target=void 0,done:!0}:p=="keys"?{value:y,done:!1}:p=="values"?{value:f[y],done:!1}:{value:[y,f[y]],done:!1}},"values"),h.Arguments=h.Array,o("keys"),o("values"),o("entries")},{"../internals/add-to-unscopables":7,"../internals/define-iterator":40,"../internals/internal-state":70,"../internals/iterators":79,"../internals/to-indexed-object":132}],159:[function(r,s,i){var a=r("../internals/export"),o=r("../internals/indexed-object"),h=r("../internals/to-indexed-object"),d=r("../internals/array-method-is-strict"),g=[].join,m=o!=Object,c=d("join",",");a({target:"Array",proto:!0,forced:m||!c},{join:function(l){return g.call(h(this),l===void 0?",":l)}})},{"../internals/array-method-is-strict":22,"../internals/export":49,"../internals/indexed-object":66,"../internals/to-indexed-object":132}],160:[function(r,s,i){var a=r("../internals/export"),o=r("../internals/array-last-index-of");a({target:"Array",proto:!0,forced:o!==[].lastIndexOf},{lastIndexOf:o})},{"../internals/array-last-index-of":20,"../internals/export":49}],161:[function(r,s,i){var a=r("../internals/export"),o=r("../internals/array-iteration").map,h=r("../internals/array-method-has-species-support"),d=r("../internals/array-method-uses-to-length"),g=h("map"),m=d("map");a({target:"Array",proto:!0,forced:!g||!m},{map:function(c,l){return o(this,c,1<arguments.length?l:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":49}],162:[function(r,s,i){var a=r("../internals/export"),o=r("../internals/is-object"),h=r("../internals/is-array"),d=r("../internals/to-absolute-index"),g=r("../internals/to-length"),m=r("../internals/to-indexed-object"),c=r("../internals/create-property"),l=r("../internals/well-known-symbol"),u=r("../internals/array-method-has-species-support"),f=r("../internals/array-method-uses-to-length"),p=u("slice"),y=f("slice",{ACCESSORS:!0,0:0,1:2}),_=l("species"),b=[].slice,x=Math.max;a({target:"Array",proto:!0,forced:!p||!y},{slice:function(S,E){var C,M,I,A=m(this),D=g(A.length),L=d(S,D),O=d(E===void 0?D:E,D);if(h(A)&&(typeof(C=A.constructor)!="function"||C!==Array&&!h(C.prototype)?o(C)&&(C=C[_])===null&&(C=void 0):C=void 0,C===Array||C===void 0))return b.call(A,L,O);for(M=new(C===void 0?Array:C)(x(O-L,0)),I=0;L<O;L++,I++)L in A&&c(M,I,A[L]);return M.length=I,M}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/create-property":39,"../internals/export":49,"../internals/is-array":72,"../internals/is-object":74,"../internals/to-absolute-index":130,"../internals/to-indexed-object":132,"../internals/to-length":134,"../internals/well-known-symbol":146}],163:[function(r,s,i){var a=r("../internals/export"),o=r("../internals/array-iteration").some,h=r("../internals/array-method-is-strict"),d=r("../internals/array-method-uses-to-length"),g=h("some"),m=d("some");a({target:"Array",proto:!0,forced:!g||!m},{some:function(c,l){return o(this,c,1<arguments.length?l:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":49}],164:[function(r,s,i){var a=r("../internals/export"),o=r("../internals/to-absolute-index"),h=r("../internals/to-integer"),d=r("../internals/to-length"),g=r("../internals/to-object"),m=r("../internals/array-species-create"),c=r("../internals/create-property"),l=r("../internals/array-method-has-species-support"),u=r("../internals/array-method-uses-to-length"),f=l("splice"),p=u("splice",{ACCESSORS:!0,0:0,1:2}),y=Math.max,_=Math.min;a({target:"Array",proto:!0,forced:!f||!p},{splice:function(b,x){var S,E,C,M,I,A,D=g(this),L=d(D.length),O=o(b,L),N=arguments.length;if(N===0?S=E=0:E=N===1?(S=0,L-O):(S=N-2,_(y(h(x),0),L-O)),9007199254740991<L+S-E)throw TypeError("Maximum allowed length exceeded");for(C=m(D,E),M=0;M<E;M++)(I=O+M)in D&&c(C,M,D[I]);if(S<(C.length=E)){for(M=O;M<L-E;M++)A=M+S,(I=M+E)in D?D[A]=D[I]:delete D[A];for(M=L;L-E+S<M;M--)delete D[M-1]}else if(E<S)for(M=L-E;O<M;M--)A=M+S-1,(I=M+E-1)in D?D[A]=D[I]:delete D[A];for(M=0;M<S;M++)D[M+O]=arguments[M+2];return D.length=L-E+S,C}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/array-species-create":25,"../internals/create-property":39,"../internals/export":49,"../internals/to-absolute-index":130,"../internals/to-integer":133,"../internals/to-length":134,"../internals/to-object":135}],165:[function(r,s,i){r("../internals/add-to-unscopables")("flatMap")},{"../internals/add-to-unscopables":7}],166:[function(r,s,i){var a=r("../internals/descriptors"),o=r("../internals/object-define-property").f,h=Function.prototype,d=h.toString,g=/^\s*function ([^ (]*)/;!a||"name"in h||o(h,"name",{configurable:!0,get:function(){try{return d.call(this).match(g)[1]}catch{return""}}})},{"../internals/descriptors":42,"../internals/object-define-property":92}],167:[function(r,s,i){var a=r("../internals/collection"),o=r("../internals/collection-strong");s.exports=a("Map",function(h){return function(d){return h(this,arguments.length?d:void 0)}},o)},{"../internals/collection":31,"../internals/collection-strong":30}],168:[function(r,s,i){var a=r("../internals/export"),o=Math.hypot,h=Math.abs,d=Math.sqrt;a({target:"Math",stat:!0,forced:!!o&&o(1/0,NaN)!==1/0},{hypot:function(g,m){for(var c,l,u=0,f=0,p=arguments.length,y=0;f<p;)y<(c=h(arguments[f++]))?(u=u*(l=y/c)*l+1,y=c):u+=0<c?(l=c/y)*l:c;return y===1/0?1/0:y*d(u)}})},{"../internals/export":49}],169:[function(r,s,i){r("../internals/export")({target:"Math",stat:!0},{sign:r("../internals/math-sign")})},{"../internals/export":49,"../internals/math-sign":80}],170:[function(r,s,i){function a(O){var N,U,K,J,z,H,$,ne,oe=u(O,!1);if(typeof oe=="string"&&2<oe.length){if((N=(oe=x(oe)).charCodeAt(0))===43||N===45){if((U=oe.charCodeAt(2))===88||U===120)return NaN}else if(N===48){switch(oe.charCodeAt(1)){case 66:case 98:K=2,J=49;break;case 79:case 111:K=8,J=55;break;default:return+oe}for(H=(z=oe.slice(2)).length,$=0;$<H;$++)if((ne=z.charCodeAt($))<48||J<ne)return NaN;return parseInt(z,K)}}return+oe}var o=r("../internals/descriptors"),h=r("../internals/global"),d=r("../internals/is-forced"),g=r("../internals/redefine"),m=r("../internals/has"),c=r("../internals/classof-raw"),l=r("../internals/inherit-if-required"),u=r("../internals/to-primitive"),f=r("../internals/fails"),p=r("../internals/object-create"),y=r("../internals/object-get-own-property-names").f,_=r("../internals/object-get-own-property-descriptor").f,b=r("../internals/object-define-property").f,x=r("../internals/string-trim").trim,S="Number",E=h[S],C=E.prototype,M=c(p(C))==S;if(d(S,!E(" 0o1")||!E("0b1")||E("+0x1"))){for(var I,A=function(O){var N=arguments.length<1?0:O,U=this;return U instanceof A&&(M?f(function(){C.valueOf.call(U)}):c(U)!=S)?l(new E(a(N)),U,A):a(N)},D=o?y(E):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),L=0;D.length>L;L++)m(E,I=D[L])&&!m(A,I)&&b(A,I,_(E,I));(A.prototype=C).constructor=A,g(h,S,A)}},{"../internals/classof-raw":28,"../internals/descriptors":42,"../internals/fails":50,"../internals/global":59,"../internals/has":60,"../internals/inherit-if-required":67,"../internals/is-forced":73,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/redefine":108,"../internals/string-trim":127,"../internals/to-primitive":138}],171:[function(r,s,i){r("../internals/export")({target:"Number",stat:!0},{isFinite:r("../internals/number-is-finite")})},{"../internals/export":49,"../internals/number-is-finite":88}],172:[function(r,s,i){var a=r("../internals/export"),o=r("../internals/to-integer"),h=r("../internals/this-number-value"),d=r("../internals/string-repeat"),g=r("../internals/fails"),m=1 .toFixed,c=Math.floor,l=function(u,f,p){return f===0?p:f%2==1?l(u,f-1,p*u):l(u*u,f/2,p)};a({target:"Number",proto:!0,forced:m&&(8e-5 .toFixed(3)!=="0.000"||.9 .toFixed(0)!=="1"||1.255 .toFixed(2)!=="1.25"||0xde0b6b3a7640080 .toFixed(0)!=="1000000000000000128")||!g(function(){m.call({})})},{toFixed:function(u){function f(D,L){for(var O=-1,N=L;++O<6;)N+=D*M[O],M[O]=N%1e7,N=c(N/1e7)}function p(D){for(var L=6,O=0;0<=--L;)O+=M[L],M[L]=c(O/D),O=O%D*1e7}function y(){for(var D=6,L="";0<=--D;)if(L!==""||D===0||M[D]!==0){var O=String(M[D]);L=L===""?O:L+d.call("0",7-O.length)+O}return L}var _,b,x,S,E=h(this),C=o(u),M=[0,0,0,0,0,0],I="",A="0";if(C<0||20<C)throw RangeError("Incorrect fraction digits");if(E!=E)return"NaN";if(E<=-1e21||1e21<=E)return String(E);if(E<0&&(I="-",E=-E),1e-21<E)if(b=(_=function(D){for(var L=0,O=D;4096<=O;)L+=12,O/=4096;for(;2<=O;)L+=1,O/=2;return L}(E*l(2,69,1))-69)<0?E*l(2,-_,1):E/l(2,_,1),b*=4503599627370496,0<(_=52-_)){for(f(0,b),x=C;7<=x;)f(1e7,0),x-=7;for(f(l(10,x,1),0),x=_-1;23<=x;)p(1<<23),x-=23;p(1<<x),f(1,1),p(2),A=y()}else f(0,b),f(1<<-_,0),A=y()+d.call("0",C);return A=0<C?I+((S=A.length)<=C?"0."+d.call("0",C-S)+A:A.slice(0,S-C)+"."+A.slice(S-C)):I+A}})},{"../internals/export":49,"../internals/fails":50,"../internals/string-repeat":125,"../internals/this-number-value":129,"../internals/to-integer":133}],173:[function(r,s,i){var a=r("../internals/export"),o=r("../internals/object-assign");a({target:"Object",stat:!0,forced:Object.assign!==o},{assign:o})},{"../internals/export":49,"../internals/object-assign":89}],174:[function(r,s,i){var a=r("../internals/export"),o=r("../internals/fails"),h=r("../internals/object-get-own-property-names-external").f;a({target:"Object",stat:!0,forced:o(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:h})},{"../internals/export":49,"../internals/fails":50,"../internals/object-get-own-property-names-external":94}],175:[function(r,s,i){var a=r("../internals/export"),o=r("../internals/fails"),h=r("../internals/to-object"),d=r("../internals/object-get-prototype-of"),g=r("../internals/correct-prototype-getter");a({target:"Object",stat:!0,forced:o(function(){d(1)}),sham:!g},{getPrototypeOf:function(m){return d(h(m))}})},{"../internals/correct-prototype-getter":34,"../internals/export":49,"../internals/fails":50,"../internals/object-get-prototype-of":97,"../internals/to-object":135}],176:[function(r,s,i){var a=r("../internals/export"),o=r("../internals/to-object"),h=r("../internals/object-keys");a({target:"Object",stat:!0,forced:r("../internals/fails")(function(){h(1)})},{keys:function(d){return h(o(d))}})},{"../internals/export":49,"../internals/fails":50,"../internals/object-keys":99,"../internals/to-object":135}],177:[function(r,s,i){var a=r("../internals/to-string-tag-support"),o=r("../internals/redefine"),h=r("../internals/object-to-string");a||o(Object.prototype,"toString",h,{unsafe:!0})},{"../internals/object-to-string":102,"../internals/redefine":108,"../internals/to-string-tag-support":139}],178:[function(r,s,i){function a(Oe){var De;return!(!M(Oe)||typeof(De=Oe.then)!="function")&&De}function o(Oe,De,He){if(!De.notified){De.notified=!0;var Xe=De.reactions;J(function(){for(var ve=De.value,tt=De.state==1,B=0;Xe.length>B;){var X,G,Y,le=Xe[B++],we=tt?le.ok:le.fail,je=le.resolve,Pe=le.reject,ge=le.domain;try{we?(tt||(De.rejection===2&&Ve(Oe,De),De.rejection=1),we===!0?X=ve:(ge&&ge.enter(),X=we(ve),ge&&(ge.exit(),Y=!0)),X===le.promise?Pe(se("Promise-chain cycle")):(G=a(X))?G.call(X,je,Pe):je(X)):Pe(ve)}catch(qe){ge&&!Y&&ge.exit(),Pe(qe)}}De.reactions=[],De.notified=!1,He&&!De.rejection&&Qe(Oe,De)})}}function h(Oe,De,He){var Xe,ve;Se?((Xe=re.createEvent("Event")).promise=De,Xe.reason=He,Xe.initEvent(Oe,!1,!0),y.dispatchEvent(Xe)):Xe={promise:De,reason:He},(ve=y["on"+Oe])?ve(Xe):Oe===ke&&H("Unhandled promise rejection",He)}function d(Oe,De,He,Xe){return function(ve){Oe(De,He,ve,Xe)}}function g(Oe,De,He,Xe){De.done||(De.done=!0,Xe&&(De=Xe),De.value=He,De.state=2,o(Oe,De,!0))}var m,c,l,u,f=r("../internals/export"),p=r("../internals/is-pure"),y=r("../internals/global"),_=r("../internals/get-built-in"),b=r("../internals/native-promise-constructor"),x=r("../internals/redefine"),S=r("../internals/redefine-all"),E=r("../internals/set-to-string-tag"),C=r("../internals/set-species"),M=r("../internals/is-object"),I=r("../internals/a-function"),A=r("../internals/an-instance"),D=r("../internals/classof-raw"),L=r("../internals/inspect-source"),O=r("../internals/iterate"),N=r("../internals/check-correctness-of-iteration"),U=r("../internals/species-constructor"),K=r("../internals/task").set,J=r("../internals/microtask"),z=r("../internals/promise-resolve"),H=r("../internals/host-report-errors"),$=r("../internals/new-promise-capability"),ne=r("../internals/perform"),oe=r("../internals/internal-state"),_e=r("../internals/is-forced"),he=r("../internals/well-known-symbol"),Te=r("../internals/engine-v8-version"),fe=he("species"),pe="Promise",R=oe.get,V=oe.set,q=oe.getterFor(pe),ee=b,se=y.TypeError,re=y.document,xe=y.process,Q=_("fetch"),ce=$.f,de=ce,ae=D(xe)=="process",Se=!!(re&&re.createEvent&&y.dispatchEvent),ke="unhandledrejection",Ee=_e(pe,function(){if(L(ee)===String(ee)&&(Te===66||!ae&&typeof PromiseRejectionEvent!="function")||p&&!ee.prototype.finally)return!0;if(51<=Te&&/native code/.test(ee))return!1;function Oe(He){He(function(){},function(){})}var De=ee.resolve(1);return(De.constructor={})[fe]=Oe,!(De.then(function(){})instanceof Oe)}),Fe=Ee||!N(function(Oe){ee.all(Oe).catch(function(){})}),Qe=function(Oe,De){K.call(y,function(){var He,Xe=De.value;if(Ye(De)&&(He=ne(function(){ae?xe.emit("unhandledRejection",Xe,Oe):h(ke,Oe,Xe)}),De.rejection=ae||Ye(De)?2:1,He.error))throw He.value})},Ye=function(Oe){return Oe.rejection!==1&&!Oe.parent},Ve=function(Oe,De){K.call(y,function(){ae?xe.emit("rejectionHandled",Oe):h("rejectionhandled",Oe,De.value)})},pt=function(Oe,De,He,Xe){if(!De.done){De.done=!0,Xe&&(De=Xe);try{if(Oe===He)throw se("Promise can't be resolved itself");var ve=a(He);ve?J(function(){var tt={done:!1};try{ve.call(He,d(pt,Oe,tt,De),d(g,Oe,tt,De))}catch(B){g(Oe,tt,B,De)}}):(De.value=He,De.state=1,o(Oe,De,!1))}catch(tt){g(Oe,{done:!1},tt,De)}}};Ee&&(ee=function(Oe){A(this,ee,pe),I(Oe),m.call(this);var De=R(this);try{Oe(d(pt,this,De),d(g,this,De))}catch(He){g(this,De,He)}},(m=function(){V(this,{type:pe,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=S(ee.prototype,{then:function(Oe,De){var He=q(this),Xe=ce(U(this,ee));return Xe.ok=typeof Oe!="function"||Oe,Xe.fail=typeof De=="function"&&De,Xe.domain=ae?xe.domain:void 0,He.parent=!0,He.reactions.push(Xe),He.state!=0&&o(this,He,!1),Xe.promise},catch:function(Oe){return this.then(void 0,Oe)}}),c=function(){var Oe=new m,De=R(Oe);this.promise=Oe,this.resolve=d(pt,Oe,De),this.reject=d(g,Oe,De)},$.f=ce=function(Oe){return Oe===ee||Oe===l?new c(Oe):de(Oe)},p||typeof b!="function"||(u=b.prototype.then,x(b.prototype,"then",function(Oe,De){var He=this;return new ee(function(Xe,ve){u.call(He,Xe,ve)}).then(Oe,De)},{unsafe:!0}),typeof Q=="function"&&f({global:!0,enumerable:!0,forced:!0},{fetch:function(Oe){return z(ee,Q.apply(y,arguments))}}))),f({global:!0,wrap:!0,forced:Ee},{Promise:ee}),E(ee,pe,!1,!0),C(pe),l=_(pe),f({target:pe,stat:!0,forced:Ee},{reject:function(Oe){var De=ce(this);return De.reject.call(void 0,Oe),De.promise}}),f({target:pe,stat:!0,forced:p||Ee},{resolve:function(Oe){return z(p&&this===l?ee:this,Oe)}}),f({target:pe,stat:!0,forced:Fe},{all:function(Oe){var De=this,He=ce(De),Xe=He.resolve,ve=He.reject,tt=ne(function(){var B=I(De.resolve),X=[],G=0,Y=1;O(Oe,function(le){var we=G++,je=!1;X.push(void 0),Y++,B.call(De,le).then(function(Pe){je||(je=!0,X[we]=Pe,--Y||Xe(X))},ve)}),--Y||Xe(X)});return tt.error&&ve(tt.value),He.promise},race:function(Oe){var De=this,He=ce(De),Xe=He.reject,ve=ne(function(){var tt=I(De.resolve);O(Oe,function(B){tt.call(De,B).then(He.resolve,Xe)})});return ve.error&&Xe(ve.value),He.promise}})},{"../internals/a-function":5,"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/classof-raw":28,"../internals/engine-v8-version":47,"../internals/export":49,"../internals/get-built-in":56,"../internals/global":59,"../internals/host-report-errors":62,"../internals/inspect-source":68,"../internals/internal-state":70,"../internals/is-forced":73,"../internals/is-object":74,"../internals/is-pure":75,"../internals/iterate":77,"../internals/microtask":81,"../internals/native-promise-constructor":82,"../internals/new-promise-capability":86,"../internals/perform":105,"../internals/promise-resolve":106,"../internals/redefine":108,"../internals/redefine-all":107,"../internals/set-species":116,"../internals/set-to-string-tag":117,"../internals/species-constructor":121,"../internals/task":128,"../internals/well-known-symbol":146}],179:[function(r,s,i){var a=r("../internals/export"),o=r("../internals/get-built-in"),h=r("../internals/a-function"),d=r("../internals/an-object"),g=r("../internals/is-object"),m=r("../internals/object-create"),c=r("../internals/function-bind"),l=r("../internals/fails"),u=o("Reflect","construct"),f=l(function(){function _(){}return!(u(function(){},[],_)instanceof _)}),p=!l(function(){u(function(){})}),y=f||p;a({target:"Reflect",stat:!0,forced:y,sham:y},{construct:function(_,b,x){h(_),d(b);var S=arguments.length<3?_:h(x);if(p&&!f)return u(_,b,S);if(_==S){switch(b.length){case 0:return new _;case 1:return new _(b[0]);case 2:return new _(b[0],b[1]);case 3:return new _(b[0],b[1],b[2]);case 4:return new _(b[0],b[1],b[2],b[3])}var E=[null];return E.push.apply(E,b),new(c.apply(_,E))}var C=S.prototype,M=m(g(C)?C:Object.prototype),I=Function.apply.call(_,M,b);return g(I)?I:M}})},{"../internals/a-function":5,"../internals/an-object":10,"../internals/export":49,"../internals/fails":50,"../internals/function-bind":55,"../internals/get-built-in":56,"../internals/is-object":74,"../internals/object-create":90}],180:[function(r,s,i){var a=r("../internals/descriptors"),o=r("../internals/global"),h=r("../internals/is-forced"),d=r("../internals/inherit-if-required"),g=r("../internals/object-define-property").f,m=r("../internals/object-get-own-property-names").f,c=r("../internals/is-regexp"),l=r("../internals/regexp-flags"),u=r("../internals/regexp-sticky-helpers"),f=r("../internals/redefine"),p=r("../internals/fails"),y=r("../internals/internal-state").set,_=r("../internals/set-species"),b=r("../internals/well-known-symbol")("match"),x=o.RegExp,S=x.prototype,E=/a/g,C=/a/g,M=new x(E)!==E,I=u.UNSUPPORTED_Y;if(a&&h("RegExp",!M||I||p(function(){return C[b]=!1,x(E)!=E||x(C)==C||x(E,"i")!="/a/i"}))){let N=function(U){U in A||g(A,U,{configurable:!0,get:function(){return x[U]},set:function(K){x[U]=K}})};for(var O=N,A=function(U,K){var J,z=this instanceof A,H=c(U),$=K===void 0;if(!z&&H&&U.constructor===A&&$)return U;M?H&&!$&&(U=U.source):U instanceof A&&($&&(K=l.call(U)),U=U.source),I&&(J=!!K&&-1<K.indexOf("y"))&&(K=K.replace(/y/g,""));var ne=d(M?new x(U,K):x(U,K),z?this:S,A);return I&&J&&y(ne,{sticky:J}),ne},D=m(x),L=0;D.length>L;)N(D[L++]);(S.constructor=A).prototype=S,f(o,"RegExp",A)}_("RegExp")},{"../internals/descriptors":42,"../internals/fails":50,"../internals/global":59,"../internals/inherit-if-required":67,"../internals/internal-state":70,"../internals/is-forced":73,"../internals/is-regexp":76,"../internals/object-define-property":92,"../internals/object-get-own-property-names":95,"../internals/redefine":108,"../internals/regexp-flags":111,"../internals/regexp-sticky-helpers":112,"../internals/set-species":116,"../internals/well-known-symbol":146}],181:[function(r,s,i){var a=r("../internals/export"),o=r("../internals/regexp-exec");a({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},{"../internals/export":49,"../internals/regexp-exec":110}],182:[function(r,s,i){var a=r("../internals/redefine"),o=r("../internals/an-object"),h=r("../internals/fails"),d=r("../internals/regexp-flags"),g="toString",m=RegExp.prototype,c=m[g],l=h(function(){return c.call({source:"a",flags:"b"})!="/a/b"}),u=c.name!=g;(l||u)&&a(RegExp.prototype,g,function(){var f=o(this),p=String(f.source),y=f.flags;return"/"+p+"/"+String(y===void 0&&f instanceof RegExp&&!("flags"in m)?d.call(f):y)},{unsafe:!0})},{"../internals/an-object":10,"../internals/fails":50,"../internals/redefine":108,"../internals/regexp-flags":111}],183:[function(r,s,i){var a=r("../internals/collection"),o=r("../internals/collection-strong");s.exports=a("Set",function(h){return function(d){return h(this,arguments.length?d:void 0)}},o)},{"../internals/collection":31,"../internals/collection-strong":30}],184:[function(r,s,i){var a,o=r("../internals/export"),h=r("../internals/object-get-own-property-descriptor").f,d=r("../internals/to-length"),g=r("../internals/not-a-regexp"),m=r("../internals/require-object-coercible"),c=r("../internals/correct-is-regexp-logic"),l=r("../internals/is-pure"),u="".endsWith,f=Math.min,p=c("endsWith");o({target:"String",proto:!0,forced:!!(l||p||!(a=h(String.prototype,"endsWith"))||a.writable)&&!p},{endsWith:function(y,_){var b=String(m(this));g(y);var x=1<arguments.length?_:void 0,S=d(b.length),E=x===void 0?S:f(d(x),S),C=String(y);return u?u.call(b,C,E):b.slice(E-C.length,E)===C}})},{"../internals/correct-is-regexp-logic":33,"../internals/export":49,"../internals/is-pure":75,"../internals/not-a-regexp":87,"../internals/object-get-own-property-descriptor":93,"../internals/require-object-coercible":113,"../internals/to-length":134}],185:[function(r,s,i){var a=r("../internals/export"),o=r("../internals/not-a-regexp"),h=r("../internals/require-object-coercible");a({target:"String",proto:!0,forced:!r("../internals/correct-is-regexp-logic")("includes")},{includes:function(d,g){return!!~String(h(this)).indexOf(o(d),1<arguments.length?g:void 0)}})},{"../internals/correct-is-regexp-logic":33,"../internals/export":49,"../internals/not-a-regexp":87,"../internals/require-object-coercible":113}],186:[function(r,s,i){var a=r("../internals/string-multibyte").charAt,o=r("../internals/internal-state"),h=r("../internals/define-iterator"),d="String Iterator",g=o.set,m=o.getterFor(d);h(String,"String",function(c){g(this,{type:d,string:String(c),index:0})},function(){var c,l=m(this),u=l.string,f=l.index;return f>=u.length?{value:void 0,done:!0}:(c=a(u,f),l.index+=c.length,{value:c,done:!1})})},{"../internals/define-iterator":40,"../internals/internal-state":70,"../internals/string-multibyte":123}],187:[function(r,s,i){var a=r("../internals/fix-regexp-well-known-symbol-logic"),o=r("../internals/an-object"),h=r("../internals/to-length"),d=r("../internals/require-object-coercible"),g=r("../internals/advance-string-index"),m=r("../internals/regexp-exec-abstract");a("match",1,function(c,l,u){return[function(f){var p=d(this),y=f==null?void 0:f[c];return y!==void 0?y.call(f,p):new RegExp(f)[c](String(p))},function(f){var p=u(l,f,this);if(p.done)return p.value;var y=o(f),_=String(this);if(!y.global)return m(y,_);for(var b,x=y.unicode,S=[],E=y.lastIndex=0;(b=m(y,_))!==null;){var C=String(b[0]);(S[E]=C)===""&&(y.lastIndex=g(_,h(y.lastIndex),x)),E++}return E===0?null:S}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":51,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/to-length":134}],188:[function(r,s,i){r("../internals/export")({target:"String",proto:!0},{repeat:r("../internals/string-repeat")})},{"../internals/export":49,"../internals/string-repeat":125}],189:[function(r,s,i){var a=r("../internals/fix-regexp-well-known-symbol-logic"),o=r("../internals/an-object"),h=r("../internals/to-object"),d=r("../internals/to-length"),g=r("../internals/to-integer"),m=r("../internals/require-object-coercible"),c=r("../internals/advance-string-index"),l=r("../internals/regexp-exec-abstract"),u=Math.max,f=Math.min,p=Math.floor,y=/\$([$&'`]|\d\d?|<[^>]*>)/g,_=/\$([$&'`]|\d\d?)/g;a("replace",2,function(b,x,S,E){var C=E.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,M=E.REPLACE_KEEPS_$0,I=C?"$":"$0";return[function(D,L){var O=m(this),N=D==null?void 0:D[b];return N!==void 0?N.call(D,O,L):x.call(String(O),D,L)},function(D,L){if(!C&&M||typeof L=="string"&&L.indexOf(I)===-1){var O=S(x,D,this,L);if(O.done)return O.value}var N=o(D),U=String(this),K=typeof L=="function";K||(L=String(L));var J=N.global;if(J){var z=N.unicode;N.lastIndex=0}for(var H=[];;){var $=l(N,U);if($===null||(H.push($),!J))break;String($[0])===""&&(N.lastIndex=c(U,d(N.lastIndex),z))}for(var ne,oe="",_e=0,he=0;he<H.length;he++){$=H[he];for(var Te=String($[0]),fe=u(f(g($.index),U.length),0),pe=[],R=1;R<$.length;R++)pe.push((ne=$[R])===void 0?ne:String(ne));var V=$.groups;if(K){var q=[Te].concat(pe,fe,U);V!==void 0&&q.push(V);var ee=String(L.apply(void 0,q))}else ee=A(Te,U,fe,pe,V,L);_e<=fe&&(oe+=U.slice(_e,fe)+ee,_e=fe+Te.length)}return oe+U.slice(_e)}];function A(D,L,O,N,U,K){var J=O+D.length,z=N.length,H=_;return U!==void 0&&(U=h(U),H=y),x.call(K,H,function($,ne){var oe;switch(ne.charAt(0)){case"$":return"$";case"&":return D;case"`":return L.slice(0,O);case"'":return L.slice(J);case"<":oe=U[ne.slice(1,-1)];break;default:var _e=+ne;if(_e==0)return $;if(z<_e){var he=p(_e/10);return he===0?$:he<=z?N[he-1]===void 0?ne.charAt(1):N[he-1]+ne.charAt(1):$}oe=N[_e-1]}return oe===void 0?"":oe})}})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":51,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/to-integer":133,"../internals/to-length":134,"../internals/to-object":135}],190:[function(r,s,i){var a=r("../internals/fix-regexp-well-known-symbol-logic"),o=r("../internals/an-object"),h=r("../internals/require-object-coercible"),d=r("../internals/same-value"),g=r("../internals/regexp-exec-abstract");a("search",1,function(m,c,l){return[function(u){var f=h(this),p=u==null?void 0:u[m];return p!==void 0?p.call(u,f):new RegExp(u)[m](String(f))},function(u){var f=l(c,u,this);if(f.done)return f.value;var p=o(u),y=String(this),_=p.lastIndex;d(_,0)||(p.lastIndex=0);var b=g(p,y);return d(p.lastIndex,_)||(p.lastIndex=_),b===null?-1:b.index}]})},{"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":51,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/same-value":114}],191:[function(r,s,i){var a=r("../internals/fix-regexp-well-known-symbol-logic"),o=r("../internals/is-regexp"),h=r("../internals/an-object"),d=r("../internals/require-object-coercible"),g=r("../internals/species-constructor"),m=r("../internals/advance-string-index"),c=r("../internals/to-length"),l=r("../internals/regexp-exec-abstract"),u=r("../internals/regexp-exec"),f=r("../internals/fails"),p=[].push,y=Math.min,_=4294967295,b=!f(function(){return!RegExp(_,"y")});a("split",2,function(x,S,E){var C;return C="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||1<".".split(/()()/).length||"".split(/.?/).length?function(M,I){var A=String(d(this)),D=I===void 0?_:I>>>0;if(D==0)return[];if(M===void 0)return[A];if(!o(M))return S.call(A,M,D);for(var L,O,N,U=[],K=(M.ignoreCase?"i":"")+(M.multiline?"m":"")+(M.unicode?"u":"")+(M.sticky?"y":""),J=0,z=new RegExp(M.source,K+"g");(L=u.call(z,A))&&!(J<(O=z.lastIndex)&&(U.push(A.slice(J,L.index)),1<L.length&&L.index<A.length&&p.apply(U,L.slice(1)),N=L[0].length,J=O,U.length>=D));)z.lastIndex===L.index&&z.lastIndex++;return J===A.length?!N&&z.test("")||U.push(""):U.push(A.slice(J)),U.length>D?U.slice(0,D):U}:"0".split(void 0,0).length?function(M,I){return M===void 0&&I===0?[]:S.call(this,M,I)}:S,[function(M,I){var A=d(this),D=M==null?void 0:M[x];return D!==void 0?D.call(M,A,I):C.call(String(A),M,I)},function(M,I){var A=E(C,M,this,I,C!==S);if(A.done)return A.value;var D=h(M),L=String(this),O=g(D,RegExp),N=D.unicode,U=(D.ignoreCase?"i":"")+(D.multiline?"m":"")+(D.unicode?"u":"")+(b?"y":"g"),K=new O(b?D:"^(?:"+D.source+")",U),J=I===void 0?_:I>>>0;if(J==0)return[];if(L.length===0)return l(K,L)===null?[L]:[];for(var z=0,H=0,$=[];H<L.length;){K.lastIndex=b?H:0;var ne,oe=l(K,b?L:L.slice(H));if(oe===null||(ne=y(c(K.lastIndex+(b?0:H)),L.length))===z)H=m(L,H,N);else{if($.push(L.slice(z,H)),$.length===J)return $;for(var _e=1;_e<=oe.length-1;_e++)if($.push(oe[_e]),$.length===J)return $;H=z=ne}}return $.push(L.slice(z)),$}]},!b)},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fails":50,"../internals/fix-regexp-well-known-symbol-logic":51,"../internals/is-regexp":76,"../internals/regexp-exec":110,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/species-constructor":121,"../internals/to-length":134}],192:[function(r,s,i){var a=r("../internals/export"),o=r("../internals/create-html");a({target:"String",proto:!0,forced:r("../internals/string-html-forced")("sub")},{sub:function(){return o(this,"sub","","")}})},{"../internals/create-html":35,"../internals/export":49,"../internals/string-html-forced":122}],193:[function(r,s,i){var a=r("../internals/export"),o=r("../internals/string-trim").trim;a({target:"String",proto:!0,forced:r("../internals/string-trim-forced")("trim")},{trim:function(){return o(this)}})},{"../internals/export":49,"../internals/string-trim":127,"../internals/string-trim-forced":126}],194:[function(r,s,i){var a=r("../internals/export"),o=r("../internals/descriptors"),h=r("../internals/global"),d=r("../internals/has"),g=r("../internals/is-object"),m=r("../internals/object-define-property").f,c=r("../internals/copy-constructor-properties"),l=h.Symbol;if(o&&typeof l=="function"&&(!("description"in l.prototype)||l().description!==void 0)){var u={},f=function(x){var S=arguments.length<1||x===void 0?void 0:String(x),E=this instanceof f?new l(S):S===void 0?l():l(S);return S===""&&(u[E]=!0),E};c(f,l);var p=f.prototype=l.prototype;p.constructor=f;var y=p.toString,_=String(l("test"))=="Symbol(test)",b=/^Symbol\((.*)\)[^)]+$/;m(p,"description",{configurable:!0,get:function(){var x=g(this)?this.valueOf():this,S=y.call(x);if(d(u,x))return"";var E=_?S.slice(7,-1):S.replace(b,"$1");return E===""?void 0:E}}),a({global:!0,forced:!0},{Symbol:f})}},{"../internals/copy-constructor-properties":32,"../internals/descriptors":42,"../internals/export":49,"../internals/global":59,"../internals/has":60,"../internals/is-object":74,"../internals/object-define-property":92}],195:[function(r,s,i){r("../internals/define-well-known-symbol")("iterator")},{"../internals/define-well-known-symbol":41}],196:[function(r,s,i){function a(G,Y){var le=Qe[G]=A(de[se]);return xe(le,{type:ee,tag:G,description:Y}),u||(le.description=Y),le}function o(G,Y){S(G);var le=C(Y),we=D(le).concat(X(le));return V(we,function(je){u&&!B.call(le,je)||tt(G,je,le[je])}),G}function h(G,Y){var le=C(G),we=M(Y,!0);if(le!==ce||!_(Qe,we)||_(Ye,we)){var je=Se(le,we);return!je||!_(Qe,we)||_(le,q)&&le[q][we]||(je.enumerable=!0),je}}function d(G){var Y=Ee(C(G)),le=[];return V(Y,function(we){_(Qe,we)||_(oe,we)||le.push(we)}),le}var g=r("../internals/export"),m=r("../internals/global"),c=r("../internals/get-built-in"),l=r("../internals/is-pure"),u=r("../internals/descriptors"),f=r("../internals/native-symbol"),p=r("../internals/use-symbol-as-uid"),y=r("../internals/fails"),_=r("../internals/has"),b=r("../internals/is-array"),x=r("../internals/is-object"),S=r("../internals/an-object"),E=r("../internals/to-object"),C=r("../internals/to-indexed-object"),M=r("../internals/to-primitive"),I=r("../internals/create-property-descriptor"),A=r("../internals/object-create"),D=r("../internals/object-keys"),L=r("../internals/object-get-own-property-names"),O=r("../internals/object-get-own-property-names-external"),N=r("../internals/object-get-own-property-symbols"),U=r("../internals/object-get-own-property-descriptor"),K=r("../internals/object-define-property"),J=r("../internals/object-property-is-enumerable"),z=r("../internals/create-non-enumerable-property"),H=r("../internals/redefine"),$=r("../internals/shared"),ne=r("../internals/shared-key"),oe=r("../internals/hidden-keys"),_e=r("../internals/uid"),he=r("../internals/well-known-symbol"),Te=r("../internals/well-known-symbol-wrapped"),fe=r("../internals/define-well-known-symbol"),pe=r("../internals/set-to-string-tag"),R=r("../internals/internal-state"),V=r("../internals/array-iteration").forEach,q=ne("hidden"),ee="Symbol",se="prototype",re=he("toPrimitive"),xe=R.set,Q=R.getterFor(ee),ce=Object[se],de=m.Symbol,ae=c("JSON","stringify"),Se=U.f,ke=K.f,Ee=O.f,Fe=J.f,Qe=$("symbols"),Ye=$("op-symbols"),Ve=$("string-to-symbol-registry"),pt=$("symbol-to-string-registry"),Oe=$("wks"),De=m.QObject,He=!De||!De[se]||!De[se].findChild,Xe=u&&y(function(){return A(ke({},"a",{get:function(){return ke(this,"a",{value:7}).a}})).a!=7})?function(G,Y,le){var we=Se(ce,Y);we&&delete ce[Y],ke(G,Y,le),we&&G!==ce&&ke(ce,Y,we)}:ke,ve=p?function(G){return typeof G=="symbol"}:function(G){return Object(G)instanceof de},tt=function(G,Y,le){G===ce&&tt(Ye,Y,le),S(G);var we=M(Y,!0);return S(le),_(Qe,we)?(le.enumerable?(_(G,q)&&G[q][we]&&(G[q][we]=!1),le=A(le,{enumerable:I(0,!1)})):(_(G,q)||ke(G,q,I(1,{})),G[q][we]=!0),Xe(G,we,le)):ke(G,we,le)},B=function(G){var Y=M(G,!0),le=Fe.call(this,Y);return!(this===ce&&_(Qe,Y)&&!_(Ye,Y))&&(!(le||!_(this,Y)||!_(Qe,Y)||_(this,q)&&this[q][Y])||le)},X=function(G){var Y=G===ce,le=Ee(Y?Ye:C(G)),we=[];return V(le,function(je){!_(Qe,je)||Y&&!_(ce,je)||we.push(Qe[je])}),we};f||(H((de=function(G){if(this instanceof de)throw TypeError("Symbol is not a constructor");var Y=arguments.length&&G!==void 0?String(G):void 0,le=_e(Y),we=function(je){this===ce&&we.call(Ye,je),_(this,q)&&_(this[q],le)&&(this[q][le]=!1),Xe(this,le,I(1,je))};return u&&He&&Xe(ce,le,{configurable:!0,set:we}),a(le,Y)})[se],"toString",function(){return Q(this).tag}),H(de,"withoutSetter",function(G){return a(_e(G),G)}),J.f=B,K.f=tt,U.f=h,L.f=O.f=d,N.f=X,Te.f=function(G){return a(he(G),G)},u&&(ke(de[se],"description",{configurable:!0,get:function(){return Q(this).description}}),l||H(ce,"propertyIsEnumerable",B,{unsafe:!0}))),g({global:!0,wrap:!0,forced:!f,sham:!f},{Symbol:de}),V(D(Oe),function(G){fe(G)}),g({target:ee,stat:!0,forced:!f},{for:function(G){var Y=String(G);if(_(Ve,Y))return Ve[Y];var le=de(Y);return Ve[Y]=le,pt[le]=Y,le},keyFor:function(G){if(!ve(G))throw TypeError(G+" is not a symbol");if(_(pt,G))return pt[G]},useSetter:function(){He=!0},useSimple:function(){He=!1}}),g({target:"Object",stat:!0,forced:!f,sham:!u},{create:function(G,Y){return Y===void 0?A(G):o(A(G),Y)},defineProperty:tt,defineProperties:o,getOwnPropertyDescriptor:h}),g({target:"Object",stat:!0,forced:!f},{getOwnPropertyNames:d,getOwnPropertySymbols:X}),g({target:"Object",stat:!0,forced:y(function(){N.f(1)})},{getOwnPropertySymbols:function(G){return N.f(E(G))}}),ae&&g({target:"JSON",stat:!0,forced:!f||y(function(){var G=de();return ae([G])!="[null]"||ae({a:G})!="{}"||ae(Object(G))!="{}"})},{stringify:function(G,Y,le){for(var we,je=[G],Pe=1;Pe<arguments.length;)je.push(arguments[Pe++]);if((x(we=Y)||G!==void 0)&&!ve(G))return b(Y)||(Y=function(ge,qe){if(typeof we=="function"&&(qe=we.call(this,ge,qe)),!ve(qe))return qe}),je[1]=Y,ae.apply(null,je)}}),de[se][re]||z(de[se],re,de[se].valueOf),pe(de,ee),oe[q]=!0},{"../internals/an-object":10,"../internals/array-iteration":19,"../internals/create-non-enumerable-property":37,"../internals/create-property-descriptor":38,"../internals/define-well-known-symbol":41,"../internals/descriptors":42,"../internals/export":49,"../internals/fails":50,"../internals/get-built-in":56,"../internals/global":59,"../internals/has":60,"../internals/hidden-keys":61,"../internals/internal-state":70,"../internals/is-array":72,"../internals/is-object":74,"../internals/is-pure":75,"../internals/native-symbol":83,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/object-get-own-property-names-external":94,"../internals/object-get-own-property-symbols":96,"../internals/object-keys":99,"../internals/object-property-is-enumerable":100,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/shared":120,"../internals/shared-key":118,"../internals/to-indexed-object":132,"../internals/to-object":135,"../internals/to-primitive":138,"../internals/uid":143,"../internals/use-symbol-as-uid":144,"../internals/well-known-symbol":146,"../internals/well-known-symbol-wrapped":145}],197:[function(r,s,i){var a=r("../internals/array-buffer-view-core"),o=r("../internals/array-copy-within"),h=a.aTypedArray;(0,a.exportTypedArrayMethod)("copyWithin",function(d,g,m){return o.call(h(this),d,g,2<arguments.length?m:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-copy-within":14}],198:[function(r,s,i){var a=r("../internals/array-buffer-view-core"),o=r("../internals/array-iteration").every,h=a.aTypedArray;(0,a.exportTypedArrayMethod)("every",function(d,g){return o(h(this),d,1<arguments.length?g:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],199:[function(r,s,i){var a=r("../internals/array-buffer-view-core"),o=r("../internals/array-fill"),h=a.aTypedArray;(0,a.exportTypedArrayMethod)("fill",function(d){return o.apply(h(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-fill":15}],200:[function(r,s,i){var a=r("../internals/array-buffer-view-core"),o=r("../internals/array-iteration").filter,h=r("../internals/species-constructor"),d=a.aTypedArray,g=a.aTypedArrayConstructor;(0,a.exportTypedArrayMethod)("filter",function(m,c){for(var l=o(d(this),m,1<arguments.length?c:void 0),u=h(this,this.constructor),f=0,p=l.length,y=new(g(u))(p);f<p;)y[f]=l[f++];return y})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":121}],201:[function(r,s,i){var a=r("../internals/array-buffer-view-core"),o=r("../internals/array-iteration").findIndex,h=a.aTypedArray;(0,a.exportTypedArrayMethod)("findIndex",function(d,g){return o(h(this),d,1<arguments.length?g:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],202:[function(r,s,i){var a=r("../internals/array-buffer-view-core"),o=r("../internals/array-iteration").find,h=a.aTypedArray;(0,a.exportTypedArrayMethod)("find",function(d,g){return o(h(this),d,1<arguments.length?g:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],203:[function(r,s,i){r("../internals/typed-array-constructor")("Float32",function(a){return function(o,h,d){return a(this,o,h,d)}})},{"../internals/typed-array-constructor":140}],204:[function(r,s,i){r("../internals/typed-array-constructor")("Float64",function(a){return function(o,h,d){return a(this,o,h,d)}})},{"../internals/typed-array-constructor":140}],205:[function(r,s,i){var a=r("../internals/array-buffer-view-core"),o=r("../internals/array-iteration").forEach,h=a.aTypedArray;(0,a.exportTypedArrayMethod)("forEach",function(d,g){o(h(this),d,1<arguments.length?g:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],206:[function(r,s,i){var a=r("../internals/array-buffer-view-core"),o=r("../internals/array-includes").includes,h=a.aTypedArray;(0,a.exportTypedArrayMethod)("includes",function(d,g){return o(h(this),d,1<arguments.length?g:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],207:[function(r,s,i){var a=r("../internals/array-buffer-view-core"),o=r("../internals/array-includes").indexOf,h=a.aTypedArray;(0,a.exportTypedArrayMethod)("indexOf",function(d,g){return o(h(this),d,1<arguments.length?g:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],208:[function(r,s,i){r("../internals/typed-array-constructor")("Int16",function(a){return function(o,h,d){return a(this,o,h,d)}})},{"../internals/typed-array-constructor":140}],209:[function(r,s,i){r("../internals/typed-array-constructor")("Int32",function(a){return function(o,h,d){return a(this,o,h,d)}})},{"../internals/typed-array-constructor":140}],210:[function(r,s,i){function a(){return c.call(f(this))}var o=r("../internals/global"),h=r("../internals/array-buffer-view-core"),d=r("../modules/es.array.iterator"),g=r("../internals/well-known-symbol")("iterator"),m=o.Uint8Array,c=d.values,l=d.keys,u=d.entries,f=h.aTypedArray,p=h.exportTypedArrayMethod,y=m&&m.prototype[g],_=!!y&&(y.name=="values"||y.name==null);p("entries",function(){return u.call(f(this))}),p("keys",function(){return l.call(f(this))}),p("values",a,!_),p(g,a,!_)},{"../internals/array-buffer-view-core":12,"../internals/global":59,"../internals/well-known-symbol":146,"../modules/es.array.iterator":158}],211:[function(r,s,i){var a=r("../internals/array-buffer-view-core"),o=a.aTypedArray,h=a.exportTypedArrayMethod,d=[].join;h("join",function(g){return d.apply(o(this),arguments)})},{"../internals/array-buffer-view-core":12}],212:[function(r,s,i){var a=r("../internals/array-buffer-view-core"),o=r("../internals/array-last-index-of"),h=a.aTypedArray;(0,a.exportTypedArrayMethod)("lastIndexOf",function(d){return o.apply(h(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-last-index-of":20}],213:[function(r,s,i){var a=r("../internals/array-buffer-view-core"),o=r("../internals/array-iteration").map,h=r("../internals/species-constructor"),d=a.aTypedArray,g=a.aTypedArrayConstructor;(0,a.exportTypedArrayMethod)("map",function(m,c){return o(d(this),m,1<arguments.length?c:void 0,function(l,u){return new(g(h(l,l.constructor)))(u)})})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":121}],214:[function(r,s,i){var a=r("../internals/array-buffer-view-core"),o=r("../internals/array-reduce").right,h=a.aTypedArray;(0,a.exportTypedArrayMethod)("reduceRight",function(d,g){return o(h(this),d,arguments.length,1<arguments.length?g:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],215:[function(r,s,i){var a=r("../internals/array-buffer-view-core"),o=r("../internals/array-reduce").left,h=a.aTypedArray;(0,a.exportTypedArrayMethod)("reduce",function(d,g){return o(h(this),d,arguments.length,1<arguments.length?g:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],216:[function(r,s,i){var a=r("../internals/array-buffer-view-core"),o=a.aTypedArray,h=a.exportTypedArrayMethod,d=Math.floor;h("reverse",function(){for(var g,m=o(this).length,c=d(m/2),l=0;l<c;)g=this[l],this[l++]=this[--m],this[m]=g;return this})},{"../internals/array-buffer-view-core":12}],217:[function(r,s,i){var a=r("../internals/array-buffer-view-core"),o=r("../internals/to-length"),h=r("../internals/to-offset"),d=r("../internals/to-object"),g=r("../internals/fails"),m=a.aTypedArray;(0,a.exportTypedArrayMethod)("set",function(c,l){m(this);var u=h(1<arguments.length?l:void 0,1),f=this.length,p=d(c),y=o(p.length),_=0;if(f<y+u)throw RangeError("Wrong length");for(;_<y;)this[u+_]=p[_++]},g(function(){new Int8Array(1).set({})}))},{"../internals/array-buffer-view-core":12,"../internals/fails":50,"../internals/to-length":134,"../internals/to-object":135,"../internals/to-offset":136}],218:[function(r,s,i){var a=r("../internals/array-buffer-view-core"),o=r("../internals/species-constructor"),h=r("../internals/fails"),d=a.aTypedArray,g=a.aTypedArrayConstructor,m=a.exportTypedArrayMethod,c=[].slice;m("slice",function(l,u){for(var f=c.call(d(this),l,u),p=o(this,this.constructor),y=0,_=f.length,b=new(g(p))(_);y<_;)b[y]=f[y++];return b},h(function(){new Int8Array(1).slice()}))},{"../internals/array-buffer-view-core":12,"../internals/fails":50,"../internals/species-constructor":121}],219:[function(r,s,i){var a=r("../internals/array-buffer-view-core"),o=r("../internals/array-iteration").some,h=a.aTypedArray;(0,a.exportTypedArrayMethod)("some",function(d,g){return o(h(this),d,1<arguments.length?g:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],220:[function(r,s,i){var a=r("../internals/array-buffer-view-core"),o=a.aTypedArray,h=a.exportTypedArrayMethod,d=[].sort;h("sort",function(g){return d.call(o(this),g)})},{"../internals/array-buffer-view-core":12}],221:[function(r,s,i){var a=r("../internals/array-buffer-view-core"),o=r("../internals/to-length"),h=r("../internals/to-absolute-index"),d=r("../internals/species-constructor"),g=a.aTypedArray;(0,a.exportTypedArrayMethod)("subarray",function(m,c){var l=g(this),u=l.length,f=h(m,u);return new(d(l,l.constructor))(l.buffer,l.byteOffset+f*l.BYTES_PER_ELEMENT,o((c===void 0?u:h(c,u))-f))})},{"../internals/array-buffer-view-core":12,"../internals/species-constructor":121,"../internals/to-absolute-index":130,"../internals/to-length":134}],222:[function(r,s,i){var a=r("../internals/global"),o=r("../internals/array-buffer-view-core"),h=r("../internals/fails"),d=a.Int8Array,g=o.aTypedArray,m=o.exportTypedArrayMethod,c=[].toLocaleString,l=[].slice,u=!!d&&h(function(){c.call(new d(1))});m("toLocaleString",function(){return c.apply(u?l.call(g(this)):g(this),arguments)},h(function(){return[1,2].toLocaleString()!=new d([1,2]).toLocaleString()})||!h(function(){d.prototype.toLocaleString.call([1,2])}))},{"../internals/array-buffer-view-core":12,"../internals/fails":50,"../internals/global":59}],223:[function(r,s,i){var a=r("../internals/array-buffer-view-core").exportTypedArrayMethod,o=r("../internals/fails"),h=r("../internals/global").Uint8Array,d=h&&h.prototype||{},g=[].toString,m=[].join;o(function(){g.call({})})&&(g=function(){return m.call(this)}),a("toString",g,d.toString!=g)},{"../internals/array-buffer-view-core":12,"../internals/fails":50,"../internals/global":59}],224:[function(r,s,i){r("../internals/typed-array-constructor")("Uint16",function(a){return function(o,h,d){return a(this,o,h,d)}})},{"../internals/typed-array-constructor":140}],225:[function(r,s,i){r("../internals/typed-array-constructor")("Uint32",function(a){return function(o,h,d){return a(this,o,h,d)}})},{"../internals/typed-array-constructor":140}],226:[function(r,s,i){r("../internals/typed-array-constructor")("Uint8",function(a){return function(o,h,d){return a(this,o,h,d)}})},{"../internals/typed-array-constructor":140}],227:[function(r,s,i){r("../internals/typed-array-constructor")("Uint8",function(a){return function(o,h,d){return a(this,o,h,d)}},!0)},{"../internals/typed-array-constructor":140}],228:[function(r,s,i){var a=r("../internals/global"),o=r("../internals/dom-iterables"),h=r("../internals/array-for-each"),d=r("../internals/create-non-enumerable-property");for(var g in o){var m=a[g],c=m&&m.prototype;if(c&&c.forEach!==h)try{d(c,"forEach",h)}catch{c.forEach=h}}},{"../internals/array-for-each":16,"../internals/create-non-enumerable-property":37,"../internals/dom-iterables":44,"../internals/global":59}],229:[function(r,s,i){var a=r("../internals/global"),o=r("../internals/dom-iterables"),h=r("../modules/es.array.iterator"),d=r("../internals/create-non-enumerable-property"),g=r("../internals/well-known-symbol"),m=g("iterator"),c=g("toStringTag"),l=h.values;for(var u in o){var f=a[u],p=f&&f.prototype;if(p){if(p[m]!==l)try{d(p,m,l)}catch{p[m]=l}if(p[c]||d(p,c,u),o[u]){for(var y in h)if(p[y]!==h[y])try{d(p,y,h[y])}catch{p[y]=h[y]}}}}},{"../internals/create-non-enumerable-property":37,"../internals/dom-iterables":44,"../internals/global":59,"../internals/well-known-symbol":146,"../modules/es.array.iterator":158}],230:[function(r,s,i){r("../modules/es.array.iterator");function a(ee){try{return decodeURIComponent(ee)}catch{return ee}}function o(ee){var se,re=ee.replace(he," "),xe=4;try{return decodeURIComponent(re)}catch{for(;xe;)re=re.replace((se=xe--,Te[se-1]||(Te[se-1]=RegExp("((?:%[\\da-f]{2}){"+se+"})","gi"))),a);return re}}function h(ee){return pe[ee]}function d(ee){return encodeURIComponent(ee).replace(fe,h)}function g(ee,se){if(se)for(var re,xe,Q=se.split("&"),ce=0;ce<Q.length;)(re=Q[ce++]).length&&(xe=re.split("="),ee.push({key:o(xe.shift()),value:o(xe.join("="))}))}function m(ee){this.entries.length=0,g(this.entries,ee)}function c(ee,se){if(ee<se)throw TypeError("Not enough arguments")}var l=r("../internals/export"),u=r("../internals/get-built-in"),f=r("../internals/native-url"),p=r("../internals/redefine"),y=r("../internals/redefine-all"),_=r("../internals/set-to-string-tag"),b=r("../internals/create-iterator-constructor"),x=r("../internals/internal-state"),S=r("../internals/an-instance"),E=r("../internals/has"),C=r("../internals/function-bind-context"),M=r("../internals/classof"),I=r("../internals/an-object"),A=r("../internals/is-object"),D=r("../internals/object-create"),L=r("../internals/create-property-descriptor"),O=r("../internals/get-iterator"),N=r("../internals/get-iterator-method"),U=r("../internals/well-known-symbol"),K=u("fetch"),J=u("Headers"),z=U("iterator"),H="URLSearchParams",$=H+"Iterator",ne=x.set,oe=x.getterFor(H),_e=x.getterFor($),he=/\+/g,Te=Array(4),fe=/[!'()~]|%20/g,pe={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},R=b(function(ee,se){ne(this,{type:$,iterator:O(oe(ee).entries),kind:se})},"Iterator",function(){var ee=_e(this),se=ee.kind,re=ee.iterator.next(),xe=re.value;return re.done||(re.value=se==="keys"?xe.key:se==="values"?xe.value:[xe.key,xe.value]),re}),V=function(ee){S(this,V,H);var se,re,xe,Q,ce,de,ae,Se,ke,Ee=0<arguments.length?ee:void 0,Fe=[];if(ne(this,{type:H,entries:Fe,updateURL:function(){},updateSearchParams:m}),Ee!==void 0)if(A(Ee))if(typeof(se=N(Ee))=="function")for(xe=(re=se.call(Ee)).next;!(Q=xe.call(re)).done;){if((ae=(de=(ce=O(I(Q.value))).next).call(ce)).done||(Se=de.call(ce)).done||!de.call(ce).done)throw TypeError("Expected sequence with length 2");Fe.push({key:ae.value+"",value:Se.value+""})}else for(ke in Ee)E(Ee,ke)&&Fe.push({key:ke,value:Ee[ke]+""});else g(Fe,typeof Ee=="string"?Ee.charAt(0)==="?"?Ee.slice(1):Ee:Ee+"")},q=V.prototype;y(q,{append:function(ee,se){c(arguments.length,2);var re=oe(this);re.entries.push({key:ee+"",value:se+""}),re.updateURL()},delete:function(ee){c(arguments.length,1);for(var se=oe(this),re=se.entries,xe=ee+"",Q=0;Q<re.length;)re[Q].key===xe?re.splice(Q,1):Q++;se.updateURL()},get:function(ee){c(arguments.length,1);for(var se=oe(this).entries,re=ee+"",xe=0;xe<se.length;xe++)if(se[xe].key===re)return se[xe].value;return null},getAll:function(ee){c(arguments.length,1);for(var se=oe(this).entries,re=ee+"",xe=[],Q=0;Q<se.length;Q++)se[Q].key===re&&xe.push(se[Q].value);return xe},has:function(ee){c(arguments.length,1);for(var se=oe(this).entries,re=ee+"",xe=0;xe<se.length;)if(se[xe++].key===re)return!0;return!1},set:function(ee,se){c(arguments.length,1);for(var re,xe=oe(this),Q=xe.entries,ce=!1,de=ee+"",ae=se+"",Se=0;Se<Q.length;Se++)(re=Q[Se]).key===de&&(ce?Q.splice(Se--,1):(ce=!0,re.value=ae));ce||Q.push({key:de,value:ae}),xe.updateURL()},sort:function(){var ee,se,re,xe=oe(this),Q=xe.entries,ce=Q.slice();for(re=Q.length=0;re<ce.length;re++){for(ee=ce[re],se=0;se<re;se++)if(Q[se].key>ee.key){Q.splice(se,0,ee);break}se===re&&Q.push(ee)}xe.updateURL()},forEach:function(ee,se){for(var re,xe=oe(this).entries,Q=C(ee,1<arguments.length?se:void 0,3),ce=0;ce<xe.length;)Q((re=xe[ce++]).value,re.key,this)},keys:function(){return new R(this,"keys")},values:function(){return new R(this,"values")},entries:function(){return new R(this,"entries")}},{enumerable:!0}),p(q,z,q.entries),p(q,"toString",function(){for(var ee,se=oe(this).entries,re=[],xe=0;xe<se.length;)ee=se[xe++],re.push(d(ee.key)+"="+d(ee.value));return re.join("&")},{enumerable:!0}),_(V,H),l({global:!0,forced:!f},{URLSearchParams:V}),f||typeof K!="function"||typeof J!="function"||l({global:!0,enumerable:!0,forced:!0},{fetch:function(ee,se){var re,xe,Q,ce=[ee];return 1<arguments.length&&(A(re=se)&&(xe=re.body,M(xe)===H&&((Q=re.headers?new J(re.headers):new J).has("content-type")||Q.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),re=D(re,{body:L(0,String(xe)),headers:L(0,Q)}))),ce.push(re)),K.apply(this,ce)}}),s.exports={URLSearchParams:V,getState:oe}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/classof":29,"../internals/create-iterator-constructor":36,"../internals/create-property-descriptor":38,"../internals/export":49,"../internals/function-bind-context":54,"../internals/get-built-in":56,"../internals/get-iterator":58,"../internals/get-iterator-method":57,"../internals/has":60,"../internals/internal-state":70,"../internals/is-object":74,"../internals/native-url":84,"../internals/object-create":90,"../internals/redefine":108,"../internals/redefine-all":107,"../internals/set-to-string-tag":117,"../internals/well-known-symbol":146,"../modules/es.array.iterator":158}],231:[function(r,s,i){r("../modules/es.string.iterator");function a(ue,Re){var We,Le,Ze;if(Re.charAt(0)=="["){if(Re.charAt(Re.length-1)!="]"||!(We=de(Re.slice(1,-1))))return _e;ue.host=We}else if(Ye(ue)){if(Re=D(Re),se.test(Re)||(We=ce(Re))===null)return _e;ue.host=We}else{if(re.test(Re))return _e;for(We="",Le=I(Re),Ze=0;Ze<Le.length;Ze++)We+=Fe(Le[Ze],ae);ue.host=We}}function o(ue){var Re,We,Le,Ze;if(typeof ue=="number"){for(Re=[],We=0;We<4;We++)Re.unshift(ue%256),ue=$(ue/256);return Re.join(".")}if(typeof ue!="object")return ue;for(Re="",Le=function(Ie){for(var Dt=null,Vt=1,qt=null,kt=0,Ke=0;Ke<8;Ke++)Ie[Ke]!==0?(Vt<kt&&(Dt=qt,Vt=kt),qt=null,kt=0):(qt===null&&(qt=Ke),++kt);return Vt<kt&&(Dt=qt,Vt=kt),Dt}(ue),We=0;We<8;We++)Ze&&ue[We]===0||(Ze=Ze&&!1,Le===We?(Re+=We?":":"::",Ze=!0):(Re+=ue[We].toString(16),We<7&&(Re+=":")));return"["+Re+"]"}function h(ue){return ue.username!=""||ue.password!=""}function d(ue){return!ue.host||ue.cannotBeABaseURL||ue.scheme=="file"}function g(ue,Re){var We;return ue.length==2&&Te.test(ue.charAt(0))&&((We=ue.charAt(1))==":"||!Re&&We=="|")}function m(ue){var Re;return 1<ue.length&&g(ue.slice(0,2))&&(ue.length==2||(Re=ue.charAt(2))==="/"||Re==="\\"||Re==="?"||Re==="#")}function c(ue){var Re=ue.path,We=Re.length;!We||ue.scheme=="file"&&We==1&&g(Re[0],!0)||Re.pop()}function l(ue,Re,We,Le){var Ze,Ie,Dt,Vt,qt,kt,Ke=We||Ve,or=0,ht="",wu=!1,Po=!1,xu=!1;for(We||(ue.scheme="",ue.username="",ue.password="",ue.host=null,ue.port=null,ue.path=[],ue.query=null,ue.fragment=null,ue.cannotBeABaseURL=!1,Re=Re.replace(xe,"")),Re=Re.replace(Q,""),Ze=I(Re);or<=Ze.length;){switch(Ie=Ze[or],Ke){case Ve:if(!Ie||!Te.test(Ie)){if(We)return oe;Ke=Oe;continue}ht+=Ie.toLowerCase(),Ke=pt;break;case pt:if(Ie&&(fe.test(Ie)||Ie=="+"||Ie=="-"||Ie=="."))ht+=Ie.toLowerCase();else{if(Ie!=":"){if(We)return oe;ht="",Ke=Oe,or=0;continue}if(We&&(Ye(ue)!=C(Qe,ht)||ht=="file"&&(h(ue)||ue.port!==null)||ue.scheme=="file"&&!ue.host))return;if(ue.scheme=ht,We)return void(Ye(ue)&&Qe[ue.scheme]==ue.port&&(ue.port=null));ht="",ue.scheme=="file"?Ke=we:Ye(ue)&&Le&&Le.scheme==ue.scheme?Ke=De:Ye(ue)?Ke=tt:Ze[or+1]=="/"?(Ke=He,or++):(ue.cannotBeABaseURL=!0,ue.path.push(""),Ke=ot)}break;case Oe:if(!Le||Le.cannotBeABaseURL&&Ie!="#")return oe;if(Le.cannotBeABaseURL&&Ie=="#"){ue.scheme=Le.scheme,ue.path=Le.path.slice(),ue.query=Le.query,ue.fragment="",ue.cannotBeABaseURL=!0,Ke=wt;break}Ke=Le.scheme=="file"?we:Xe;continue;case De:if(Ie!="/"||Ze[or+1]!="/"){Ke=Xe;continue}Ke=B,or++;break;case He:if(Ie=="/"){Ke=X;break}Ke=qe;continue;case Xe:if(ue.scheme=Le.scheme,Ie==f)ue.username=Le.username,ue.password=Le.password,ue.host=Le.host,ue.port=Le.port,ue.path=Le.path.slice(),ue.query=Le.query;else if(Ie=="/"||Ie=="\\"&&Ye(ue))Ke=ve;else if(Ie=="?")ue.username=Le.username,ue.password=Le.password,ue.host=Le.host,ue.port=Le.port,ue.path=Le.path.slice(),ue.query="",Ke=mt;else{if(Ie!="#"){ue.username=Le.username,ue.password=Le.password,ue.host=Le.host,ue.port=Le.port,ue.path=Le.path.slice(),ue.path.pop(),Ke=qe;continue}ue.username=Le.username,ue.password=Le.password,ue.host=Le.host,ue.port=Le.port,ue.path=Le.path.slice(),ue.query=Le.query,ue.fragment="",Ke=wt}break;case ve:if(!Ye(ue)||Ie!="/"&&Ie!="\\"){if(Ie!="/"){ue.username=Le.username,ue.password=Le.password,ue.host=Le.host,ue.port=Le.port,Ke=qe;continue}Ke=X}else Ke=B;break;case tt:if(Ke=B,Ie!="/"||ht.charAt(or+1)!="/")continue;or++;break;case B:if(Ie=="/"||Ie=="\\")break;Ke=X;continue;case X:if(Ie=="@"){wu&&(ht="%40"+ht),wu=!0,Dt=I(ht);for(var Su=0;Su<Dt.length;Su++){var Tu=Dt[Su];if(Tu!=":"||xu){var Da=Fe(Tu,Ee);xu?ue.password+=Da:ue.username+=Da}else xu=!0}ht=""}else if(Ie==f||Ie=="/"||Ie=="?"||Ie=="#"||Ie=="\\"&&Ye(ue)){if(wu&&ht=="")return"Invalid authority";or-=I(ht).length+1,ht="",Ke=G}else ht+=Ie;break;case G:case Y:if(We&&ue.scheme=="file"){Ke=Pe;continue}if(Ie!=":"||Po){if(Ie==f||Ie=="/"||Ie=="?"||Ie=="#"||Ie=="\\"&&Ye(ue)){if(Ye(ue)&&ht=="")return _e;if(We&&ht==""&&(h(ue)||ue.port!==null))return;if(Vt=a(ue,ht))return Vt;if(ht="",Ke=ge,We)return;continue}Ie=="["?Po=!0:Ie=="]"&&(Po=!1),ht+=Ie}else{if(ht=="")return _e;if(Vt=a(ue,ht))return Vt;if(ht="",Ke=le,We==Y)return}break;case le:if(!pe.test(Ie)){if(Ie==f||Ie=="/"||Ie=="?"||Ie=="#"||Ie=="\\"&&Ye(ue)||We){if(ht!=""){var Oa=parseInt(ht,10);if(65535<Oa)return he;ue.port=Ye(ue)&&Oa===Qe[ue.scheme]?null:Oa,ht=""}if(We)return;Ke=ge;continue}return he}ht+=Ie;break;case we:if(ue.scheme="file",Ie=="/"||Ie=="\\")Ke=je;else{if(!Le||Le.scheme!="file"){Ke=qe;continue}if(Ie==f)ue.host=Le.host,ue.path=Le.path.slice(),ue.query=Le.query;else if(Ie=="?")ue.host=Le.host,ue.path=Le.path.slice(),ue.query="",Ke=mt;else{if(Ie!="#"){m(Ze.slice(or).join(""))||(ue.host=Le.host,ue.path=Le.path.slice(),c(ue)),Ke=qe;continue}ue.host=Le.host,ue.path=Le.path.slice(),ue.query=Le.query,ue.fragment="",Ke=wt}}break;case je:if(Ie=="/"||Ie=="\\"){Ke=Pe;break}Le&&Le.scheme=="file"&&!m(Ze.slice(or).join(""))&&(g(Le.path[0],!0)?ue.path.push(Le.path[0]):ue.host=Le.host),Ke=qe;continue;case Pe:if(Ie==f||Ie=="/"||Ie=="\\"||Ie=="?"||Ie=="#"){if(!We&&g(ht))Ke=qe;else if(ht==""){if(ue.host="",We)return;Ke=ge}else{if(Vt=a(ue,ht))return Vt;if(ue.host=="localhost"&&(ue.host=""),We)return;ht="",Ke=ge}continue}ht+=Ie;break;case ge:if(Ye(ue)){if(Ke=qe,Ie!="/"&&Ie!="\\")continue}else if(We||Ie!="?")if(We||Ie!="#"){if(Ie!=f&&(Ke=qe,Ie!="/"))continue}else ue.fragment="",Ke=wt;else ue.query="",Ke=mt;break;case qe:if(Ie==f||Ie=="/"||Ie=="\\"&&Ye(ue)||!We&&(Ie=="?"||Ie=="#")){if((kt=(kt=ht).toLowerCase())===".."||kt==="%2e."||kt===".%2e"||kt==="%2e%2e"?(c(ue),Ie=="/"||Ie=="\\"&&Ye(ue)||ue.path.push("")):(qt=ht)==="."||qt.toLowerCase()==="%2e"?Ie=="/"||Ie=="\\"&&Ye(ue)||ue.path.push(""):(ue.scheme=="file"&&!ue.path.length&&g(ht)&&(ue.host&&(ue.host=""),ht=ht.charAt(0)+":"),ue.path.push(ht)),ht="",ue.scheme=="file"&&(Ie==f||Ie=="?"||Ie=="#"))for(;1<ue.path.length&&ue.path[0]==="";)ue.path.shift();Ie=="?"?(ue.query="",Ke=mt):Ie=="#"&&(ue.fragment="",Ke=wt)}else ht+=Fe(Ie,ke);break;case ot:Ie=="?"?(ue.query="",Ke=mt):Ie=="#"?(ue.fragment="",Ke=wt):Ie!=f&&(ue.path[0]+=Fe(Ie,ae));break;case mt:We||Ie!="#"?Ie!=f&&(Ie=="'"&&Ye(ue)?ue.query+="%27":ue.query+=Ie=="#"?"%23":Fe(Ie,ae)):(ue.fragment="",Ke=wt);break;case wt:Ie!=f&&(ue.fragment+=Fe(Ie,Se))}or++}}function u(ue,Re){return{get:ue,set:Re,configurable:!0,enumerable:!0}}var f,p=r("../internals/export"),y=r("../internals/descriptors"),_=r("../internals/native-url"),b=r("../internals/global"),x=r("../internals/object-define-properties"),S=r("../internals/redefine"),E=r("../internals/an-instance"),C=r("../internals/has"),M=r("../internals/object-assign"),I=r("../internals/array-from"),A=r("../internals/string-multibyte").codeAt,D=r("../internals/string-punycode-to-ascii"),L=r("../internals/set-to-string-tag"),O=r("../modules/web.url-search-params"),N=r("../internals/internal-state"),U=b.URL,K=O.URLSearchParams,J=O.getState,z=N.set,H=N.getterFor("URL"),$=Math.floor,ne=Math.pow,oe="Invalid scheme",_e="Invalid host",he="Invalid port",Te=/[A-Za-z]/,fe=/[\d+-.A-Za-z]/,pe=/\d/,R=/^(0x|0X)/,V=/^[0-7]+$/,q=/^\d+$/,ee=/^[\dA-Fa-f]+$/,se=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,re=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,xe=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,Q=/[\u0009\u000A\u000D]/g,ce=function(ue){var Re,We,Le,Ze,Ie,Dt,Vt,qt=ue.split(".");if(qt.length&&qt[qt.length-1]==""&&qt.pop(),4<(Re=qt.length))return ue;for(We=[],Le=0;Le<Re;Le++){if((Ze=qt[Le])=="")return ue;if(Ie=10,1<Ze.length&&Ze.charAt(0)=="0"&&(Ie=R.test(Ze)?16:8,Ze=Ze.slice(Ie==8?1:2)),Ze==="")Dt=0;else{if(!(Ie==10?q:Ie==8?V:ee).test(Ze))return ue;Dt=parseInt(Ze,Ie)}We.push(Dt)}for(Le=0;Le<Re;Le++)if(Dt=We[Le],Le==Re-1){if(Dt>=ne(256,5-Re))return null}else if(255<Dt)return null;for(Vt=We.pop(),Le=0;Le<We.length;Le++)Vt+=We[Le]*ne(256,3-Le);return Vt},de=function(ue){function Re(){return ue.charAt(ht)}var We,Le,Ze,Ie,Dt,Vt,qt,kt=[0,0,0,0,0,0,0,0],Ke=0,or=null,ht=0;if(Re()==":"){if(ue.charAt(1)!=":")return;ht+=2,or=++Ke}for(;Re();){if(Ke==8)return;if(Re()!=":"){for(We=Le=0;Le<4&&ee.test(Re());)We=16*We+parseInt(Re(),16),ht++,Le++;if(Re()=="."){if(Le==0||(ht-=Le,6<Ke))return;for(Ze=0;Re();){if(Ie=null,0<Ze){if(!(Re()=="."&&Ze<4))return;ht++}if(!pe.test(Re()))return;for(;pe.test(Re());){if(Dt=parseInt(Re(),10),Ie===null)Ie=Dt;else{if(Ie==0)return;Ie=10*Ie+Dt}if(255<Ie)return;ht++}kt[Ke]=256*kt[Ke]+Ie,++Ze!=2&&Ze!=4||Ke++}if(Ze!=4)return;break}if(Re()==":"){if(ht++,!Re())return}else if(Re())return;kt[Ke++]=We}else{if(or!==null)return;ht++,or=++Ke}}if(or!==null)for(Vt=Ke-or,Ke=7;Ke!=0&&0<Vt;)qt=kt[Ke],kt[Ke--]=kt[or+Vt-1],kt[or+--Vt]=qt;else if(Ke!=8)return;return kt},ae={},Se=M({},ae,{" ":1,'"':1,"<":1,">":1,"`":1}),ke=M({},Se,{"#":1,"?":1,"{":1,"}":1}),Ee=M({},ke,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Fe=function(ue,Re){var We=A(ue,0);return 32<We&&We<127&&!C(Re,ue)?ue:encodeURIComponent(ue)},Qe={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Ye=function(ue){return C(Qe,ue.scheme)},Ve={},pt={},Oe={},De={},He={},Xe={},ve={},tt={},B={},X={},G={},Y={},le={},we={},je={},Pe={},ge={},qe={},ot={},mt={},wt={},gt=function(ue,Re){var We,Le,Ze=E(this,gt,"URL"),Ie=1<arguments.length?Re:void 0,Dt=String(ue),Vt=z(Ze,{type:"URL"});if(Ie!==void 0){if(Ie instanceof gt)We=H(Ie);else if(Le=l(We={},String(Ie)))throw TypeError(Le)}if(Le=l(Vt,Dt,null,We))throw TypeError(Le);var qt=Vt.searchParams=new K,kt=J(qt);kt.updateSearchParams(Vt.query),kt.updateURL=function(){Vt.query=String(qt)||null},y||(Ze.href=Nt.call(Ze),Ze.origin=Ls.call(Ze),Ze.protocol=wn.call(Ze),Ze.username=Mo.call(Ze),Ze.password=si.call(Ze),Ze.host=Ns.call(Ze),Ze.hostname=Ao.call(Ze),Ze.port=Do.call(Ze),Ze.pathname=Oo.call(Ze),Ze.search=Io.call(Ze),Ze.searchParams=Ro.call(Ze),Ze.hash=Aa.call(Ze))},vt=gt.prototype,Nt=function(){var ue=H(this),Re=ue.scheme,We=ue.username,Le=ue.password,Ze=ue.host,Ie=ue.port,Dt=ue.path,Vt=ue.query,qt=ue.fragment,kt=Re+":";return Ze!==null?(kt+="//",h(ue)&&(kt+=We+(Le?":"+Le:"")+"@"),kt+=o(Ze),Ie!==null&&(kt+=":"+Ie)):Re=="file"&&(kt+="//"),kt+=ue.cannotBeABaseURL?Dt[0]:Dt.length?"/"+Dt.join("/"):"",Vt!==null&&(kt+="?"+Vt),qt!==null&&(kt+="#"+qt),kt},Ls=function(){var ue=H(this),Re=ue.scheme,We=ue.port;if(Re=="blob")try{return new URL(Re.path[0]).origin}catch{return"null"}return Re!="file"&&Ye(ue)?Re+"://"+o(ue.host)+(We!==null?":"+We:""):"null"},wn=function(){return H(this).scheme+":"},Mo=function(){return H(this).username},si=function(){return H(this).password},Ns=function(){var ue=H(this),Re=ue.host,We=ue.port;return Re===null?"":We===null?o(Re):o(Re)+":"+We},Ao=function(){var ue=H(this).host;return ue===null?"":o(ue)},Do=function(){var ue=H(this).port;return ue===null?"":String(ue)},Oo=function(){var ue=H(this),Re=ue.path;return ue.cannotBeABaseURL?Re[0]:Re.length?"/"+Re.join("/"):""},Io=function(){var ue=H(this).query;return ue?"?"+ue:""},Ro=function(){return H(this).searchParams},Aa=function(){var ue=H(this).fragment;return ue?"#"+ue:""};if(y&&x(vt,{href:u(Nt,function(ue){var Re=H(this),We=String(ue),Le=l(Re,We);if(Le)throw TypeError(Le);J(Re.searchParams).updateSearchParams(Re.query)}),origin:u(Ls),protocol:u(wn,function(ue){var Re=H(this);l(Re,String(ue)+":",Ve)}),username:u(Mo,function(ue){var Re=H(this),We=I(String(ue));if(!d(Re)){Re.username="";for(var Le=0;Le<We.length;Le++)Re.username+=Fe(We[Le],Ee)}}),password:u(si,function(ue){var Re=H(this),We=I(String(ue));if(!d(Re)){Re.password="";for(var Le=0;Le<We.length;Le++)Re.password+=Fe(We[Le],Ee)}}),host:u(Ns,function(ue){var Re=H(this);Re.cannotBeABaseURL||l(Re,String(ue),G)}),hostname:u(Ao,function(ue){var Re=H(this);Re.cannotBeABaseURL||l(Re,String(ue),Y)}),port:u(Do,function(ue){var Re=H(this);d(Re)||((ue=String(ue))==""?Re.port=null:l(Re,ue,le))}),pathname:u(Oo,function(ue){var Re=H(this);Re.cannotBeABaseURL||(Re.path=[],l(Re,ue+"",ge))}),search:u(Io,function(ue){var Re=H(this);(ue=String(ue))==""?Re.query=null:(ue.charAt(0)=="?"&&(ue=ue.slice(1)),Re.query="",l(Re,ue,mt)),J(Re.searchParams).updateSearchParams(Re.query)}),searchParams:u(Ro),hash:u(Aa,function(ue){var Re=H(this);(ue=String(ue))!=""?(ue.charAt(0)=="#"&&(ue=ue.slice(1)),Re.fragment="",l(Re,ue,wt)):Re.fragment=null})}),S(vt,"toJSON",function(){return Nt.call(this)},{enumerable:!0}),S(vt,"toString",function(){return Nt.call(this)},{enumerable:!0}),U){var Pi=U.createObjectURL,Li=U.revokeObjectURL;Pi&&S(gt,"createObjectURL",function(ue){return Pi.apply(U,arguments)}),Li&&S(gt,"revokeObjectURL",function(ue){return Li.apply(U,arguments)})}L(gt,"URL"),p({global:!0,forced:!_,sham:!y},{URL:gt})},{"../internals/an-instance":9,"../internals/array-from":17,"../internals/descriptors":42,"../internals/export":49,"../internals/global":59,"../internals/has":60,"../internals/internal-state":70,"../internals/native-url":84,"../internals/object-assign":89,"../internals/object-define-properties":91,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/string-multibyte":123,"../internals/string-punycode-to-ascii":124,"../modules/es.string.iterator":186,"../modules/web.url-search-params":230}],232:[function(r,s,i){s.exports=r("./").polyfill()},{"./":233}],233:[function(r,s,i){(function(a,o){var h,d;h=this,d=function(){function g(Q){return typeof Q=="function"}var m=Array.isArray?Array.isArray:function(Q){return Object.prototype.toString.call(Q)==="[object Array]"},c=0,l=void 0,u=void 0,f=function(Q,ce){E[c]=Q,E[c+1]=ce,(c+=2)===2&&(u?u(C):L())},p=typeof window<"u"?window:void 0,y=p||{},_=y.MutationObserver||y.WebKitMutationObserver,b=typeof self>"u"&&a!==void 0&&{}.toString.call(a)==="[object process]",x=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function S(){var Q=setTimeout;return function(){return Q(C,1)}}var E=new Array(1e3);function C(){for(var Q=0;Q<c;Q+=2)(0,E[Q])(E[Q+1]),E[Q]=void 0,E[Q+1]=void 0;c=0}var M,I,A,D,L=void 0;function O(Q,ce){var de=this,ae=new this.constructor(K);ae[U]===void 0&&q(ae);var Se=de._state;if(Se){var ke=arguments[Se-1];f(function(){return R(Se,ae,ke,de._result)})}else fe(de,ae,Q,ce);return ae}function N(Q){if(Q&&typeof Q=="object"&&Q.constructor===this)return Q;var ce=new this(K);return oe(ce,Q),ce}L=b?function(){return a.nextTick(C)}:_?(I=0,A=new _(C),D=document.createTextNode(""),A.observe(D,{characterData:!0}),function(){D.data=I=++I%2}):x?((M=new MessageChannel).port1.onmessage=C,function(){return M.port2.postMessage(0)}):p===void 0&&typeof r=="function"?function(){try{var Q=Function("return this")().require("vertx");return(l=Q.runOnLoop||Q.runOnContext)!==void 0?function(){l(C)}:S()}catch{return S()}}():S();var U=Math.random().toString(36).substring(2);function K(){}var J=void 0,z=1,H=2;function $(Q,ce,de){f(function(ae){var Se=!1,ke=function(Ee,Fe,Qe,Ye){try{Ee.call(Fe,Qe,Ye)}catch(Ve){return Ve}}(de,ce,function(Ee){Se||(Se=!0,ce!==Ee?oe(ae,Ee):he(ae,Ee))},function(Ee){Se||(Se=!0,Te(ae,Ee))},ae._label);!Se&&ke&&(Se=!0,Te(ae,ke))},Q)}function ne(Q,ce,de){var ae,Se;ce.constructor===Q.constructor&&de===O&&ce.constructor.resolve===N?(ae=Q,(Se=ce)._state===z?he(ae,Se._result):Se._state===H?Te(ae,Se._result):fe(Se,void 0,function(ke){return oe(ae,ke)},function(ke){return Te(ae,ke)})):de===void 0?he(Q,ce):g(de)?$(Q,ce,de):he(Q,ce)}function oe(Q,ce){if(Q===ce)Te(Q,new TypeError("You cannot resolve a promise with itself"));else if(Se=typeof(ae=ce),ae===null||Se!="object"&&Se!="function")he(Q,ce);else{var de=void 0;try{de=ce.then}catch(ke){return void Te(Q,ke)}ne(Q,ce,de)}var ae,Se}function _e(Q){Q._onerror&&Q._onerror(Q._result),pe(Q)}function he(Q,ce){Q._state===J&&(Q._result=ce,Q._state=z,Q._subscribers.length!==0&&f(pe,Q))}function Te(Q,ce){Q._state===J&&(Q._state=H,Q._result=ce,f(_e,Q))}function fe(Q,ce,de,ae){var Se=Q._subscribers,ke=Se.length;Q._onerror=null,Se[ke]=ce,Se[ke+z]=de,Se[ke+H]=ae,ke===0&&Q._state&&f(pe,Q)}function pe(Q){var ce=Q._subscribers,de=Q._state;if(ce.length!==0){for(var ae=void 0,Se=void 0,ke=Q._result,Ee=0;Ee<ce.length;Ee+=3)ae=ce[Ee],Se=ce[Ee+de],ae?R(de,ae,Se,ke):Se(ke);Q._subscribers.length=0}}function R(Q,ce,de,ae){var Se=g(de),ke=void 0,Ee=void 0,Fe=!0;if(Se){try{ke=de(ae)}catch(Qe){Fe=!1,Ee=Qe}if(ce===ke)return void Te(ce,new TypeError("A promises callback cannot return that same promise."))}else ke=ae;ce._state!==J||(Se&&Fe?oe(ce,ke):Fe===!1?Te(ce,Ee):Q===z?he(ce,ke):Q===H&&Te(ce,ke))}var V=0;function q(Q){Q[U]=V++,Q._state=void 0,Q._result=void 0,Q._subscribers=[]}var ee=(se.prototype._enumerate=function(Q){for(var ce=0;this._state===J&&ce<Q.length;ce++)this._eachEntry(Q[ce],ce)},se.prototype._eachEntry=function(Q,ce){var de=this._instanceConstructor,ae=de.resolve;if(ae===N){var Se=void 0,ke=void 0,Ee=!1;try{Se=Q.then}catch(Qe){Ee=!0,ke=Qe}if(Se===O&&Q._state!==J)this._settledAt(Q._state,ce,Q._result);else if(typeof Se!="function")this._remaining--,this._result[ce]=Q;else if(de===re){var Fe=new de(K);Ee?Te(Fe,ke):ne(Fe,Q,Se),this._willSettleAt(Fe,ce)}else this._willSettleAt(new de(function(Qe){return Qe(Q)}),ce)}else this._willSettleAt(ae(Q),ce)},se.prototype._settledAt=function(Q,ce,de){var ae=this.promise;ae._state===J&&(this._remaining--,Q===H?Te(ae,de):this._result[ce]=de),this._remaining===0&&he(ae,this._result)},se.prototype._willSettleAt=function(Q,ce){var de=this;fe(Q,void 0,function(ae){return de._settledAt(z,ce,ae)},function(ae){return de._settledAt(H,ce,ae)})},se);function se(Q,ce){this._instanceConstructor=Q,this.promise=new Q(K),this.promise[U]||q(this.promise),m(ce)?(this.length=ce.length,this._remaining=ce.length,this._result=new Array(this.length),this.length===0?he(this.promise,this._result):(this.length=this.length||0,this._enumerate(ce),this._remaining===0&&he(this.promise,this._result))):Te(this.promise,new Error("Array Methods must be provided an Array"))}var re=(xe.prototype.catch=function(Q){return this.then(null,Q)},xe.prototype.finally=function(Q){var ce=this.constructor;return g(Q)?this.then(function(de){return ce.resolve(Q()).then(function(){return de})},function(de){return ce.resolve(Q()).then(function(){throw de})}):this.then(Q,Q)},xe);function xe(Q){this[U]=V++,this._result=this._state=void 0,this._subscribers=[],K!==Q&&(typeof Q!="function"&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof xe?function(ce,de){try{de(function(ae){oe(ce,ae)},function(ae){Te(ce,ae)})}catch(ae){Te(ce,ae)}}(this,Q):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return re.prototype.then=O,re.all=function(Q){return new ee(this,Q).promise},re.race=function(Q){var ce=this;return m(Q)?new ce(function(de,ae){for(var Se=Q.length,ke=0;ke<Se;ke++)ce.resolve(Q[ke]).then(de,ae)}):new ce(function(de,ae){return ae(new TypeError("You must pass an array to race."))})},re.resolve=N,re.reject=function(Q){var ce=new this(K);return Te(ce,Q),ce},re._setScheduler=function(Q){u=Q},re._setAsap=function(Q){f=Q},re._asap=f,re.polyfill=function(){var Q=void 0;if(o!==void 0)Q=o;else if(typeof self<"u")Q=self;else try{Q=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var ce=Q.Promise;if(ce){var de=null;try{de=Object.prototype.toString.call(ce.resolve())}catch{}if(de==="[object Promise]"&&!ce.cast)return}Q.Promise=re},re.Promise=re},typeof i=="object"&&s!==void 0?s.exports=d():h.ES6Promise=d()}).call(this,r("_process"),typeof Ih<"u"?Ih:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:241}],234:[function(r,s,i){(function(a,o){if(i!==void 0&&s!==void 0)o(i,s);else{var h={exports:{}};o(h.exports,h),a.fetchJsonp=h.exports}})(this,function(a,o){var h=5e3,d="callback";function g(c){try{delete window[c]}catch{window[c]=void 0}}function m(c){var l=document.getElementById(c);l&&document.getElementsByTagName("head")[0].removeChild(l)}o.exports=function(c){var l=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],u=c,f=l.timeout||h,p=l.jsonpCallback||d,y=void 0;return new Promise(function(_,b){var x=l.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),S=p+"_"+x;window[x]=function(C){_({ok:!0,json:function(){return Promise.resolve(C)}}),y&&clearTimeout(y),m(S),g(x)},u+=u.indexOf("?")===-1?"?":"&";var E=document.createElement("script");E.setAttribute("src",""+u+p+"="+x),l.charset&&E.setAttribute("charset",l.charset),E.id=S,document.getElementsByTagName("head")[0].appendChild(E),y=setTimeout(function(){b(new Error("JSONP request to "+c+" timed out")),g(x),m(S),window[x]=function(){g(x)}},f),E.onerror=function(){b(new Error("JSONP request to "+c+" failed")),g(x),m(S),y&&clearTimeout(y)}})}})},{}],235:[function(r,s,i){var a=a||function(o){if(!(o===void 0||typeof navigator<"u"&&/MSIE [1-9]\./.test(navigator.userAgent))){var h=o.document,d=function(){return o.URL||o.webkitURL||o},g=h.createElementNS("http://www.w3.org/1999/xhtml","a"),m="download"in g,c=/constructor/i.test(o.HTMLElement)||o.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent),u=function(b){(o.setImmediate||o.setTimeout)(function(){throw b},0)},f=function(b){setTimeout(function(){typeof b=="string"?d().revokeObjectURL(b):b.remove()},4e4)},p=function(b){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(b.type)?new Blob([String.fromCharCode(65279),b],{type:b.type}):b},y=function(b,x,S){S||(b=p(b));function E(){(function(A,D,L){for(var O=(D=[].concat(D)).length;O--;){var N=A["on"+D[O]];if(typeof N=="function")try{N.call(A,L||A)}catch(U){u(U)}}})(M,"writestart progress write writeend".split(" "))}var C,M=this,I=b.type==="application/octet-stream";if(M.readyState=M.INIT,m)return C=d().createObjectURL(b),void setTimeout(function(){var A,D;g.href=C,g.download=x,A=g,D=new MouseEvent("click"),A.dispatchEvent(D),E(),f(C),M.readyState=M.DONE});(function(){if((l||I&&c)&&o.FileReader){var A=new FileReader;return A.onloadend=function(){var D=l?A.result:A.result.replace(/^data:[^;]*;/,"data:attachment/file;");o.open(D,"_blank")||(o.location.href=D),D=void 0,M.readyState=M.DONE,E()},A.readAsDataURL(b),M.readyState=M.INIT}C=C||d().createObjectURL(b),I?o.location.href=C:o.open(C,"_blank")||(o.location.href=C),M.readyState=M.DONE,E(),f(C)})()},_=y.prototype;return typeof navigator<"u"&&navigator.msSaveOrOpenBlob?function(b,x,S){return x=x||b.name||"download",S||(b=p(b)),navigator.msSaveOrOpenBlob(b,x)}:(_.abort=function(){},_.readyState=_.INIT=0,_.WRITING=1,_.DONE=2,_.error=_.onwritestart=_.onprogress=_.onwrite=_.onabort=_.onerror=_.onwriteend=null,function(b,x,S){return new y(b,x||b.name||"download",S)})}}(typeof self<"u"&&self||typeof window<"u"&&window||this.content);s!==void 0&&s.exports?s.exports.saveAs=a:n!=null},{}],236:[function(r,s,i){i.read=function(a,o,h,d,g){var m,c,l=8*g-d-1,u=(1<<l)-1,f=u>>1,p=-7,y=h?g-1:0,_=h?-1:1,b=a[o+y];for(y+=_,m=b&(1<<-p)-1,b>>=-p,p+=l;0<p;m=256*m+a[o+y],y+=_,p-=8);for(c=m&(1<<-p)-1,m>>=-p,p+=d;0<p;c=256*c+a[o+y],y+=_,p-=8);if(m===0)m=1-f;else{if(m===u)return c?NaN:1/0*(b?-1:1);c+=Math.pow(2,d),m-=f}return(b?-1:1)*c*Math.pow(2,m-d)},i.write=function(a,o,h,d,g,m){var c,l,u,f=8*m-g-1,p=(1<<f)-1,y=p>>1,_=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=d?0:m-1,x=d?1:-1,S=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(l=isNaN(o)?1:0,c=p):(c=Math.floor(Math.log(o)/Math.LN2),o*(u=Math.pow(2,-c))<1&&(c--,u*=2),2<=(o+=1<=c+y?_/u:_*Math.pow(2,1-y))*u&&(c++,u/=2),p<=c+y?(l=0,c=p):1<=c+y?(l=(o*u-1)*Math.pow(2,g),c+=y):(l=o*Math.pow(2,y-1)*Math.pow(2,g),c=0));8<=g;a[h+b]=255&l,b+=x,l/=256,g-=8);for(c=c<<g|l,f+=g;0<f;a[h+b]=255&c,b+=x,c/=256,f-=8);a[h+b-x]|=128*S}},{}],237:[function(r,s,i){var a;function o(B,X){return B.b===X.b&&B.a===X.a}function h(B,X){return B.b<X.b||B.b===X.b&&B.a<=X.a}function d(B,X,G){var Y=X.b-B.b,le=G.b-X.b;return 0<Y+le?Y<le?X.a-B.a+Y/(Y+le)*(B.a-G.a):X.a-G.a+le/(Y+le)*(G.a-B.a):0}function g(B,X,G){var Y=X.b-B.b,le=G.b-X.b;return 0<Y+le?(X.a-G.a)*Y+(X.a-B.a)*le:0}function m(B,X){return B.a<X.a||B.a===X.a&&B.b<=X.b}function c(B,X,G){var Y=X.a-B.a,le=G.a-X.a;return 0<Y+le?Y<le?X.b-B.b+Y/(Y+le)*(B.b-G.b):X.b-G.b+le/(Y+le)*(G.b-B.b):0}function l(B,X,G){var Y=X.a-B.a,le=G.a-X.a;return 0<Y+le?(X.b-G.b)*Y+(X.b-B.b)*le:0}function u(B,X,G,Y){return(B=B<0?0:B)<=(G=G<0?0:G)?G===0?(X+Y)/2:X+B/(B+G)*(Y-X):Y+G/(B+G)*(X-Y)}function f(B){var X=x(B.b);return E(X,B.c),E(X.b,B.c),C(X,B.a),X}function p(B,X){var G=!1,Y=!1;B!==X&&(X.a!==B.a&&(Y=!0,I(X.a,B.a)),X.d!==B.d&&(G=!0,A(X.d,B.d)),S(X,B),Y||(E(X,B.a),B.a.c=B),G||(C(X,B.d),B.d.a=B))}function y(B){var X=B.b,G=!1;B.d!==B.b.d&&(G=!0,A(B.d,B.b.d)),B.c===B?I(B.a,null):(B.b.d.a=ae(B),B.a.c=B.c,S(B,ae(B)),G||C(B,B.d)),X.c===X?(I(X.a,null),A(X.d,null)):(B.d.a=ae(X),X.a.c=X.c,S(X,ae(X))),M(B)}function _(B){var X=x(B),G=X.b;return S(X,B.e),X.a=B.b.a,E(G,X.a),X.d=G.d=B.d,X=X.b,S(B.b,ae(B.b)),S(B.b,X),B.b.a=X.a,X.b.a.c=X.b,X.b.d=B.b.d,X.f=B.f,X.b.f=B.b.f,X}function b(B,X){var G=!1,Y=x(B),le=Y.b;return X.d!==B.d&&(G=!0,A(X.d,B.d)),S(Y,B.e),S(le,X),Y.a=B.b.a,le.a=X.a,Y.d=le.d=B.d,B.d.a=le,G||C(Y,B.d),Y}function x(B){var X=new de,G=new de,Y=B.b.h;return(((G.h=Y).b.h=X).h=B).b.h=G,X.b=G,((X.c=X).e=G).b=X,(G.c=G).e=X}function S(B,X){var G=B.c,Y=X.c;G.b.e=X,(Y.b.e=B).c=Y,X.c=G}function E(B,X){var G=X.f,Y=new ke(X,G);for(G.e=Y,G=(X.f=Y).c=B;G.a=Y,(G=G.c)!==B;);}function C(B,X){var G=X.d,Y=new ce(X,G);for(G.b=Y,(X.d=Y).a=B,Y.c=X.c,G=B;G.d=Y,(G=G.e)!==B;);}function M(B){var X=B.h;B=B.b.h,(X.b.h=B).b.h=X}function I(B,X){for(var G=B.c,Y=G;Y.a=X,(Y=Y.c)!==G;);G=B.f,((Y=B.e).f=G).e=Y}function A(B,X){for(var G=B.a,Y=G;Y.d=X,(Y=Y.e)!==G;);G=B.d,((Y=B.b).d=G).b=Y}function D(B){var X=0;return Math.abs(B[1])>Math.abs(B[0])&&(X=1),Math.abs(B[2])>Math.abs(B[X])&&(X=2),X}function L(B,X){B.f+=X.f,B.b.f+=X.b.f}function O(B,X,G){return B=B.a,X=X.a,G=G.a,X.b.a===B?G.b.a===B?h(X.a,G.a)?g(G.b.a,X.a,G.a)<=0:0<=g(X.b.a,G.a,X.a):g(G.b.a,B,G.a)<=0:G.b.a===B?0<=g(X.b.a,B,X.a):(X=d(X.b.a,B,X.a),(B=d(G.b.a,B,G.a))<=X)}function N(B){B.a.i=null;var X=B.e;X.a.c=X.c,X.c.a=X.a,B.e=null}function U(B,X){y(B.a),B.c=!1,(B.a=X).i=B}function K(B){for(var X=B.a.a;(B=tt(B)).a.a===X;);return B.c&&(U(B,X=b(ve(B).a.b,B.a.e)),B=tt(B)),B}function J(B,X,G){var Y=new Xe;return Y.a=G,Y.e=ee(B.f,X.e,Y),G.i=Y}function z(B,X){switch(B.s){case 100130:return(1&X)!=0;case 100131:return X!==0;case 100132:return 0<X;case 100133:return X<0;case 100134:return 2<=X||X<=-2}return!1}function H(B){var X=B.a,G=X.d;G.c=B.d,G.a=X,N(B)}function $(B,X,G){for(X=(B=X).a;B!==G;){B.c=!1;var Y=ve(B),le=Y.a;if(le.a!==X.a){if(!Y.c){H(B);break}U(Y,le=b(X.c.b,le.b))}X.c!==le&&(p(ae(le),le),p(X,le)),H(B),X=Y.a,B=Y}return X}function ne(B,X,G,Y,le,we){for(var je=!0;J(B,X,G.b),(G=G.c)!==Y;);for(le===null&&(le=ve(X).a.b.c);(G=(Y=ve(X)).a.b).a===le.a;)G.c!==le&&(p(ae(G),G),p(ae(le),G)),Y.f=X.f-G.f,Y.d=z(B,Y.f),X.b=!0,!je&&Te(B,X)&&(L(G,le),N(X),y(le)),je=!1,X=Y,le=G;X.b=!0,we&&pe(B,X)}function oe(B,X,G,Y,le){var we=[X.g[0],X.g[1],X.g[2]];X.d=null,X.d=B.o&&B.o(we,G,Y,B.c)||null,X.d===null&&(le?B.n||(Q(B,100156),B.n=!0):X.d=G[0])}function _e(B,X,G){var Y=[null,null,null,null];Y[0]=X.a.d,Y[1]=G.a.d,oe(B,X.a,Y,[.5,.5,0,0],!1),p(X,G)}function he(B,X,G,Y,le){var we=Math.abs(X.b-B.b)+Math.abs(X.a-B.a),je=Math.abs(G.b-B.b)+Math.abs(G.a-B.a),Pe=le+1;Y[le]=.5*je/(we+je),Y[Pe]=.5*we/(we+je),B.g[0]+=Y[le]*X.g[0]+Y[Pe]*G.g[0],B.g[1]+=Y[le]*X.g[1]+Y[Pe]*G.g[1],B.g[2]+=Y[le]*X.g[2]+Y[Pe]*G.g[2]}function Te(B,X){var G=ve(X),Y=X.a,le=G.a;if(h(Y.a,le.a)){if(0<g(le.b.a,Y.a,le.a))return!1;if(o(Y.a,le.a)){if(Y.a!==le.a){G=B.e;var we=Y.a.h;if(0<=we){var je=(G=G.b).d,Pe=G.e,ge=G.c,qe=ge[we];je[qe]=je[G.a],(ge[je[qe]]=qe)<=--G.a&&(qe<=1||h(Pe[je[qe>>1]],Pe[je[qe]])?De(G,qe):He(G,qe)),Pe[we]=null,ge[we]=G.b,G.b=we}else for(G.c[-(we+1)]=null;0<G.a&&G.c[G.d[G.a-1]]===null;)--G.a;_e(B,ae(le),Y)}}else _(le.b),p(Y,ae(le)),X.b=G.b=!0}else{if(g(Y.b.a,le.a,Y.a)<0)return!1;tt(X).b=X.b=!0,_(Y.b),p(ae(le),Y)}return!0}function fe(B,X){var G=ve(X),Y=X.a,le=G.a,we=Y.a,je=le.a,Pe=Y.b.a,ge=le.b.a,qe=new ke;if(g(Pe,B.a,we),g(ge,B.a,je),we===je||Math.min(we.a,Pe.a)>Math.max(je.a,ge.a))return!1;if(h(we,je)){if(0<g(ge,we,je))return!1}else if(g(Pe,je,we)<0)return!1;var ot,mt,wt=Pe,gt=we,vt=ge,Nt=je;if(h(wt,gt)||(ot=wt,wt=gt,gt=ot),h(vt,Nt)||(ot=vt,vt=Nt,Nt=ot),h(wt,vt)||(ot=wt,wt=vt,vt=ot,ot=gt,gt=Nt,Nt=ot),h(vt,gt)?h(gt,Nt)?((ot=d(wt,vt,gt))+(mt=d(vt,gt,Nt))<0&&(ot=-ot,mt=-mt),qe.b=u(ot,vt.b,mt,gt.b)):((ot=g(wt,vt,gt))+(mt=-g(wt,Nt,gt))<0&&(ot=-ot,mt=-mt),qe.b=u(ot,vt.b,mt,Nt.b)):qe.b=(vt.b+gt.b)/2,m(wt,gt)||(ot=wt,wt=gt,gt=ot),m(vt,Nt)||(ot=vt,vt=Nt,Nt=ot),m(wt,vt)||(ot=wt,wt=vt,vt=ot,ot=gt,gt=Nt,Nt=ot),m(vt,gt)?m(gt,Nt)?((ot=c(wt,vt,gt))+(mt=c(vt,gt,Nt))<0&&(ot=-ot,mt=-mt),qe.a=u(ot,vt.a,mt,gt.a)):((ot=l(wt,vt,gt))+(mt=-l(wt,Nt,gt))<0&&(ot=-ot,mt=-mt),qe.a=u(ot,vt.a,mt,Nt.a)):qe.a=(vt.a+gt.a)/2,h(qe,B.a)&&(qe.b=B.a.b,qe.a=B.a.a),wt=h(we,je)?we:je,h(wt,qe)&&(qe.b=wt.b,qe.a=wt.a),o(qe,we)||o(qe,je))return Te(B,X),!1;if(!o(Pe,B.a)&&0<=g(Pe,B.a,qe)||!o(ge,B.a)&&g(ge,B.a,qe)<=0){if(ge===B.a)return _(Y.b),p(le.b,Y),Y=ve(X=K(X)).a,$(B,ve(X),G),ne(B,X,ae(Y),Y,Y,!0),!0;if(Pe!==B.a)return 0<=g(Pe,B.a,qe)&&(tt(X).b=X.b=!0,_(Y.b),Y.a.b=B.a.b,Y.a.a=B.a.a),g(ge,B.a,qe)<=0&&(X.b=G.b=!0,_(le.b),le.a.b=B.a.b,le.a.a=B.a.a),!1;for(_(le.b),p(Y.e,ae(le)),je=(we=G=X).a.b.a;(we=tt(we)).a.b.a===je;);return we=ve(X=we).a.b.c,G.a=ae(le),ne(B,X,(le=$(B,G,null)).c,Y.b.c,we,!0),!0}return _(Y.b),_(le.b),p(ae(le),Y),Y.a.b=qe.b,Y.a.a=qe.a,Y.a.h=Fe(B.e,Y.a),Y=Y.a,le=[0,0,0,0],qe=[we.d,Pe.d,je.d,ge.d],Y.g[0]=Y.g[1]=Y.g[2]=0,he(Y,we,Pe,le,0),he(Y,je,ge,le,2),oe(B,Y,qe,le,!0),tt(X).b=X.b=G.b=!0,!1}function pe(B,X){for(var G=ve(X);;){for(;G.b;)G=ve(X=G);if(!X.b&&((X=tt(G=X))===null||!X.b))break;X.b=!1;var Y,le=X.a,we=G.a;if(Y=le.b.a!==we.b.a)e:{var je=ve(Y=X),Pe=Y.a,ge=je.a,qe=void 0;if(h(Pe.b.a,ge.b.a)){if(g(Pe.b.a,ge.b.a,Pe.a)<0){Y=!1;break e}tt(Y).b=Y.b=!0,qe=_(Pe),p(ge.b,qe),qe.d.c=Y.d}else{if(0<g(ge.b.a,Pe.b.a,ge.a)){Y=!1;break e}Y.b=je.b=!0,qe=_(ge),p(Pe.e,ge.b),qe.b.d.c=Y.d}Y=!0}if(Y&&(G.c?(N(G),y(we),we=(G=ve(X)).a):X.c&&(N(X),y(le),le=(X=tt(G)).a)),le.a!==we.a){if(le.b.a===we.b.a||X.c||G.c||le.b.a!==B.a&&we.b.a!==B.a)Te(B,X);else if(fe(B,X))break}le.a===we.a&&le.b.a===we.b.a&&(L(we,le),N(X),y(le),X=tt(G))}}function R(B,X){for(var G=(B.a=X).c;G.i===null;)if((G=G.c)===X.c){G=B;var Y=X;(je=new Xe).a=Y.c.b;for(var le=(ge=G.f).a;(le=le.a).b!==null&&!ge.c(ge.b,je,le.b););var we=ve(ge=le.b),je=ge.a;if(le=we.a,g(je.b.a,Y,je.a)===0)o((je=ge.a).a,Y)||o(je.b.a,Y)||(_(je.b),ge.c&&(y(je.c),ge.c=!1),p(Y.c,je),R(G,Y));else{var Pe=h(le.b.a,je.b.a)?ge:we;we=void 0,ge.d||Pe.c?(we=Pe===ge?b(Y.c.b,je.e):b(le.b.c.b,Y.c).b,Pe.c?U(Pe,we):((ge=J(je=G,ge,we)).f=tt(ge).f+ge.a.f,ge.d=z(je,ge.f)),R(G,Y)):ne(G,ge,Y.c,Y.c,null,!0)}return}if(ge=(je=ve(G=K(G.i))).a,(je=$(B,je,null)).c===ge){je=(ge=je).c,le=ve(G),we=G.a,Pe=le.a;var ge,qe=!1;we.b.a!==Pe.b.a&&fe(B,G),o(we.a,B.a)&&(p(ae(je),we),je=ve(G=K(G)).a,$(B,ve(G),le),qe=!0),o(Pe.a,B.a)&&(p(ge,ae(Pe)),ge=$(B,le,null),qe=!0),qe?ne(B,G,ge.c,je,je,!0):(Y=h(Pe.a,we.a)?ae(Pe):we,ne(B,G,Y=b(ge.c.b,Y),Y.c,Y.c,!1),Y.b.i.c=!0,pe(B,G))}else ne(B,G,je.c,ge,ge,!0)}function V(B,X){var G=new Xe,Y=f(B.b);Y.a.b=4e150,Y.a.a=X,Y.b.a.b=-4e150,Y.b.a.a=X,B.a=Y.b.a,G.a=Y,G.f=0,G.d=!1,G.c=!1,G.h=!0,G.b=!1,Y=ee(Y=B.f,Y.a,G),G.e=Y}function q(B){this.a=new se,this.b=B,this.c=O}function ee(B,X,G){for(;(X=X.c).b!==null&&!B.c(B.b,X.b,G););return B=new se(G,X.a,X),X.a.c=B,X.a=B}function se(B,X,G){this.b=B||null,this.a=X||this,this.c=G||this}function re(){this.d=0,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}function xe(B,X){if(B.d!==X)for(;B.d!==X;)if(B.d<X)switch(B.d){case 0:Q(B,100151),B.u(null);break;case 1:Q(B,100152),B.t()}else switch(B.d){case 2:Q(B,100154),B.v();break;case 1:Q(B,100153),B.w()}}function Q(B,X){B.p&&B.p(X,B.c)}function ce(B,X){this.b=B||this,this.d=X||this,this.a=null,this.c=!1}function de(){(this.h=this).i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function ae(B){return B.b.e}function Se(){this.c=new ke,this.a=new ce,this.b=new de,this.d=new de,this.b.b=this.d,this.d.b=this.b}function ke(B,X){this.e=B||this,this.f=X||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function Ee(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new Ye}function Fe(B,X){if(B.e){var G,Y=B.b,le=++Y.a;return 2*le>Y.f&&(Y.f*=2,Y.c=Ve(Y.c,Y.f+1)),Y.b===0?G=le:(G=Y.b,Y.b=Y.c[Y.b]),Y.e[G]=X,Y.c[G]=le,Y.d[le]=G,Y.h&&He(Y,le),G}return Y=B.a++,B.c[Y]=X,-(Y+1)}function Qe(B){if(B.a===0)return Oe(B.b);var X=B.c[B.d[B.a-1]];if(B.b.a!==0&&h(pt(B.b),X))return Oe(B.b);for(;--B.a,0<B.a&&B.c[B.d[B.a-1]]===null;);return X}function Ye(){this.d=Ve([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function Ve(B,X){for(var G=Array(X),Y=0;Y<B.length;Y++)G[Y]=B[Y];for(;Y<X;Y++)G[Y]=0;return G}function pt(B){return B.e[B.d[1]]}function Oe(B){var X=B.d,G=B.e,Y=B.c,le=X[1],we=G[le];return 0<B.a&&(X[1]=X[B.a],Y[X[1]]=1,G[le]=null,Y[le]=B.b,B.b=le,0<--B.a&&De(B,1)),we}function De(B,X){for(var G=B.d,Y=B.e,le=B.c,we=X,je=G[we];;){var Pe=we<<1;Pe<B.a&&h(Y[G[Pe+1]],Y[G[Pe]])&&(Pe+=1);var ge=G[Pe];if(Pe>B.a||h(Y[je],Y[ge])){le[G[we]=je]=we;break}le[G[we]=ge]=we,we=Pe}}function He(B,X){for(var G=B.d,Y=B.e,le=B.c,we=X,je=G[we];;){var Pe=we>>1,ge=G[Pe];if(Pe==0||h(Y[ge],Y[je])){le[G[we]=je]=we;break}le[G[we]=ge]=we,we=Pe}}function Xe(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function ve(B){return B.e.c.b}function tt(B){return B.e.a.b}(a=re.prototype).x=function(){xe(this,0)},a.B=function(B,X){switch(B){case 100142:return;case 100140:switch(X){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=X)}break;case 100141:return void(this.m=!!X);default:return void Q(this,100900)}Q(this,100901)},a.y=function(B){switch(B){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:Q(this,100900)}return!1},a.A=function(B,X,G){this.j[0]=B,this.j[1]=X,this.j[2]=G},a.z=function(B,X){var G=X||null;switch(B){case 100100:case 100106:this.h=G;break;case 100104:case 100110:this.l=G;break;case 100101:case 100107:this.k=G;break;case 100102:case 100108:this.i=G;break;case 100103:case 100109:this.p=G;break;case 100105:case 100111:this.o=G;break;case 100112:this.r=G;break;default:Q(this,100900)}},a.C=function(B,X){var G=!1,Y=[0,0,0];xe(this,2);for(var le=0;le<3;++le){var we=B[le];we<-1e150&&(we=-1e150,G=!0),1e150<we&&(we=1e150,G=!0),Y[le]=we}G&&Q(this,100155),(G=this.q)===null?p(G=f(this.b),G.b):(_(G),G=G.e),G.a.d=X,G.a.g[0]=Y[0],G.a.g[1]=Y[1],G.a.g[2]=Y[2],G.f=1,G.b.f=-1,this.q=G},a.u=function(B){xe(this,0),this.d=1,this.b=new Se,this.c=B},a.t=function(){xe(this,1),this.d=2,this.q=null},a.v=function(){xe(this,2),this.d=1},a.w=function(){xe(this,1),this.d=0;var B,X,G=!1,Y=[ge=this.j[0],le=this.j[1],je=this.j[2]];if(ge===0&&le===0&&je===0){for(var le=[-2e150,-2e150,-2e150],we=[2e150,2e150,2e150],je=[],Pe=[],ge=(G=this.b.c).e;ge!==G;ge=ge.e)for(var qe=0;qe<3;++qe){var ot=ge.g[qe];ot<we[qe]&&(we[qe]=ot,Pe[qe]=ge),ot>le[qe]&&(le[qe]=ot,je[qe]=ge)}if(ge=0,le[1]-we[1]>le[0]-we[0]&&(ge=1),le[2]-we[2]>le[ge]-we[ge]&&(ge=2),we[ge]>=le[ge])Y[0]=0,Y[1]=0,Y[2]=1;else{for(le=0,we=Pe[ge],je=je[ge],Pe=[0,0,0],we=[we.g[0]-je.g[0],we.g[1]-je.g[1],we.g[2]-je.g[2]],qe=[0,0,0],ge=G.e;ge!==G;ge=ge.e)qe[0]=ge.g[0]-je.g[0],qe[1]=ge.g[1]-je.g[1],qe[2]=ge.g[2]-je.g[2],Pe[0]=we[1]*qe[2]-we[2]*qe[1],Pe[1]=we[2]*qe[0]-we[0]*qe[2],Pe[2]=we[0]*qe[1]-we[1]*qe[0],le<(ot=Pe[0]*Pe[0]+Pe[1]*Pe[1]+Pe[2]*Pe[2])&&(le=ot,Y[0]=Pe[0],Y[1]=Pe[1],Y[2]=Pe[2]);le<=0&&(Y[0]=Y[1]=Y[2]=0,Y[D(we)]=1)}G=!0}for(Pe=D(Y),ge=this.b.c,le=(Pe+1)%3,je=(Pe+2)%3,Pe=0<Y[Pe]?1:-1,Y=ge.e;Y!==ge;Y=Y.e)Y.b=Y.g[le],Y.a=Pe*Y.g[je];if(G){for(Y=0,ge=(G=this.b.a).b;ge!==G;ge=ge.b)if(!((le=ge.a).f<=0))for(;Y+=(le.a.b-le.b.a.b)*(le.a.a+le.b.a.a),(le=le.e)!==ge.a;);if(Y<0)for(G=(Y=this.b.c).e;G!==Y;G=G.e)G.a=-G.a}for(this.n=!1,ge=(Y=this.b.b).h;ge!==Y;ge=G)G=ge.h,le=ge.e,o(ge.a,ge.b.a)&&ge.e.e!==ge&&(_e(this,le,ge),y(ge),le=(ge=le).e),le.e===ge&&(le!==ge&&(le!==G&&le!==G.b||(G=G.h),y(le)),ge!==G&&ge!==G.b||(G=G.h),y(ge));for(this.e=Y=new Ee,ge=(G=this.b.c).e;ge!==G;ge=ge.e)ge.h=Fe(Y,ge);for(function(mt){mt.d=[];for(var wt=0;wt<mt.a;wt++)mt.d[wt]=wt;mt.d.sort(function(gt){return function(vt,Nt){return h(gt[vt],gt[Nt])?1:-1}}(mt.c)),mt.e=!0,function(gt){for(var vt=gt.a;1<=vt;--vt)De(gt,vt);gt.h=!0}(mt.b)}(Y),this.f=new q(this),V(this,-4e150),V(this,4e150);(Y=Qe(this.e))!==null;){for(;;){e:if(ge=this.e,ge.a===0)G=pt(ge.b);else if(G=ge.c[ge.d[ge.a-1]],ge.b.a!==0&&(ge=pt(ge.b),h(ge,G))){G=ge;break e}if(G===null||!o(G,Y))break;G=Qe(this.e),_e(this,Y.c,G.c)}R(this,Y)}for(this.a=this.f.a.a.b.a.a,Y=0;(G=this.f.a.a.b)!==null;)G.h||++Y,N(G);for(this.f=null,(Y=this.e).b=null,Y.d=null,this.e=Y.c=null,ge=(Y=this.b).a.b;ge!==Y.a;ge=G)G=ge.b,(ge=ge.a).e.e===ge&&(L(ge.c,ge),y(ge));if(!this.n){if(Y=this.b,this.m)for(ge=Y.b.h;ge!==Y.b;ge=G)G=ge.h,ge.b.d.c!==ge.d.c?ge.f=ge.d.c?1:-1:y(ge);else for(ge=Y.a.b;ge!==Y.a;ge=G)if(G=ge.b,ge.c){for(ge=ge.a;h(ge.b.a,ge.a);ge=ge.c.b);for(;h(ge.a,ge.b.a);ge=ge.e);for(le=ge.c.b,je=void 0;ge.e!==le;)if(h(ge.b.a,le.a)){for(;le.e!==ge&&(h((X=le.e).b.a,X.a)||g(le.a,le.b.a,le.e.b.a)<=0);)le=(je=b(le.e,le)).b;le=le.c.b}else{for(;le.e!==ge&&(h((B=ge.c.b).a,B.b.a)||0<=g(ge.b.a,ge.a,ge.c.b.a));)ge=(je=b(ge,ge.c.b)).b;ge=ge.e}for(;le.e.e!==ge;)le=(je=b(le.e,le)).b}if(this.h||this.i||this.k||this.l)if(this.m){for(G=(Y=this.b).a.b;G!==Y.a;G=G.b)if(G.c){for(this.h&&this.h(2,this.c),ge=G.a;this.k&&this.k(ge.a.d,this.c),(ge=ge.e)!==G.a;);this.i&&this.i(this.c)}}else{for(Y=this.b,G=!!this.l,ge=!1,le=-1,je=Y.a.d;je!==Y.a;je=je.d)if(je.c)for(ge||(this.h&&this.h(4,this.c),ge=!0),Pe=je.a;G&&le!==(we=Pe.b.d.c?0:1)&&(le=we,this.l&&this.l(!!le,this.c)),this.k&&this.k(Pe.a.d,this.c),(Pe=Pe.e)!==je.a;);ge&&this.i&&this.i(this.c)}if(this.r){for(ge=(Y=this.b).a.b;ge!==Y.a;ge=G)if(G=ge.b,!ge.c){for(je=(le=ge.a).e,Pe=void 0;je=(Pe=je).e,(Pe.d=null)===Pe.b.d&&(Pe.c===Pe?I(Pe.a,null):(Pe.a.c=Pe.c,S(Pe,ae(Pe))),(we=Pe.b).c===we?I(we.a,null):(we.a.c=we.c,S(we,ae(we))),M(Pe)),Pe!==le;);le=ge.d,((ge=ge.b).d=le).b=ge}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:re,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},re.prototype.gluDeleteTess=re.prototype.x,re.prototype.gluTessProperty=re.prototype.B,re.prototype.gluGetTessProperty=re.prototype.y,re.prototype.gluTessNormal=re.prototype.A,re.prototype.gluTessCallback=re.prototype.z,re.prototype.gluTessVertex=re.prototype.C,re.prototype.gluTessBeginPolygon=re.prototype.u,re.prototype.gluTessBeginContour=re.prototype.t,re.prototype.gluTessEndContour=re.prototype.v,re.prototype.gluTessEndPolygon=re.prototype.w,s!==void 0&&(s.exports=this.libtess)},{}],238:[function(r,s,i){function a(o,h,d,g){for(var m=o[h++],c=1<<m,l=1+c,u=1+l,f=m+1,p=(1<<f)-1,y=0,_=0,b=0,x=o[h++],S=new Int32Array(4096),E=null;;){for(;y<16&&x!==0;)_|=o[h++]<<y,y+=8,x===1?x=o[h++]:--x;if(y<f)break;var C=_&p;if(_>>=f,y-=f,C!=c){if(C==l)break;for(var M=C<u?C:E,I=0,A=M;c<A;)A=S[A]>>8,++I;var D=A;if(g<b+I+(M!==C?1:0))return void console.log("Warning, gif stream longer than expected.");d[b++]=D;var L=b+=I;for(M!==C&&(d[b++]=D),A=M;I--;)A=S[A],d[--L]=255&A,A>>=8;E!==null&&u<4096&&(S[u++]=E<<8|D,p+1<=u&&f<12&&(++f,p=p<<1|1)),E=C}else u=1+l,p=(1<<(f=m+1))-1,E=null}return b!==g&&console.log("Warning, gif stream shorter than expected."),d}try{i.GifWriter=function(o,h,d,g){var m=0,c=(g=g===void 0?{}:g).loop===void 0?null:g.loop,l=g.palette===void 0?null:g.palette;if(h<=0||d<=0||65535<h||65535<d)throw new Error("Width/Height invalid.");function u(E){var C=E.length;if(C<2||256<C||C&C-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return C}o[m++]=71,o[m++]=73,o[m++]=70,o[m++]=56,o[m++]=57,o[m++]=97;var f=0,p=0;if(l!==null){for(var y=u(l);y>>=1;)++f;if(y=1<<f,--f,g.background!==void 0){if(y<=(p=g.background))throw new Error("Background index out of range.");if(p===0)throw new Error("Background index explicitly passed as 0.")}}if(o[m++]=255&h,o[m++]=h>>8&255,o[m++]=255&d,o[m++]=d>>8&255,o[m++]=(l!==null?128:0)|f,o[m++]=p,o[m++]=0,l!==null)for(var _=0,b=l.length;_<b;++_){var x=l[_];o[m++]=x>>16&255,o[m++]=x>>8&255,o[m++]=255&x}if(c!==null){if(c<0||65535<c)throw new Error("Loop count invalid.");o[m++]=33,o[m++]=255,o[m++]=11,o[m++]=78,o[m++]=69,o[m++]=84,o[m++]=83,o[m++]=67,o[m++]=65,o[m++]=80,o[m++]=69,o[m++]=50,o[m++]=46,o[m++]=48,o[m++]=3,o[m++]=1,o[m++]=255&c,o[m++]=c>>8&255,o[m++]=0}var S=!1;this.addFrame=function(E,C,M,I,A,D){if(S===!0&&(--m,S=!1),D=D===void 0?{}:D,E<0||C<0||65535<E||65535<C)throw new Error("x/y invalid.");if(M<=0||I<=0||65535<M||65535<I)throw new Error("Width/Height invalid.");if(A.length<M*I)throw new Error("Not enough pixels for the frame size.");var L=!0,O=D.palette;if(O==null&&(L=!1,O=l),O==null)throw new Error("Must supply either a local or global palette.");for(var N=u(O),U=0;N>>=1;)++U;N=1<<U;var K=D.delay===void 0?0:D.delay,J=D.disposal===void 0?0:D.disposal;if(J<0||3<J)throw new Error("Disposal out of range.");var z=!1,H=0;if(D.transparent!==void 0&&D.transparent!==null&&(z=!0,(H=D.transparent)<0||N<=H))throw new Error("Transparent color index.");if(J===0&&!z&&K===0||(o[m++]=33,o[m++]=249,o[m++]=4,o[m++]=J<<2|(z===!0?1:0),o[m++]=255&K,o[m++]=K>>8&255,o[m++]=H,o[m++]=0),o[m++]=44,o[m++]=255&E,o[m++]=E>>8&255,o[m++]=255&C,o[m++]=C>>8&255,o[m++]=255&M,o[m++]=M>>8&255,o[m++]=255&I,o[m++]=I>>8&255,o[m++]=L===!0?128|U-1:0,L===!0)for(var $=0,ne=O.length;$<ne;++$){var oe=O[$];o[m++]=oe>>16&255,o[m++]=oe>>8&255,o[m++]=255&oe}return m=function(_e,he,Te,fe){_e[he++]=Te;var pe=he++,R=1<<Te,V=R-1,q=1+R,ee=1+q,se=Te+1,re=0,xe=0;function Q(Ye){for(;Ye<=re;)_e[he++]=255&xe,xe>>=8,re-=8,he===pe+256&&(_e[pe]=255,pe=he++)}function ce(Ye){xe|=Ye<<re,re+=se,Q(8)}var de=fe[0]&V,ae={};ce(R);for(var Se=1,ke=fe.length;Se<ke;++Se){var Ee=fe[Se]&V,Fe=de<<8|Ee,Qe=ae[Fe];if(Qe===void 0){for(xe|=de<<re,re+=se;8<=re;)_e[he++]=255&xe,xe>>=8,re-=8,he===pe+256&&(_e[pe]=255,pe=he++);ee===4096?(ce(R),ee=1+q,se=Te+1,ae={}):(1<<se<=ee&&++se,ae[Fe]=ee++),de=Ee}else de=Qe}return ce(de),ce(q),Q(1),pe+1===he?_e[pe]=0:(_e[pe]=he-pe-1,_e[he++]=0),he}(o,m,U<2?2:U,A)},this.end=function(){return S===!1&&(o[m++]=59,S=!0),m},this.getOutputBuffer=function(){return o},this.setOutputBuffer=function(E){o=E},this.getOutputBufferPosition=function(){return m},this.setOutputBufferPosition=function(E){m=E}},i.GifReader=function(o){var h=0;if(o[h++]!==71||o[h++]!==73||o[h++]!==70||o[h++]!==56||(o[h++]+1&253)!=56||o[h++]!==97)throw new Error("Invalid GIF 87a/89a header.");var d=o[h++]|o[h++]<<8,g=o[h++]|o[h++]<<8,m=o[h++],c=m>>7,l=1<<1+(7&m);o[h++],o[h++];var u=null,f=null;c&&(u=h,h+=3*(f=l));var p=!0,y=[],_=0,b=null,x=0,S=null;for(this.width=d,this.height=g;p&&h<o.length;)switch(o[h++]){case 33:switch(o[h++]){case 255:if(o[h]!==11||o[h+1]==78&&o[h+2]==69&&o[h+3]==84&&o[h+4]==83&&o[h+5]==67&&o[h+6]==65&&o[h+7]==80&&o[h+8]==69&&o[h+9]==50&&o[h+10]==46&&o[h+11]==48&&o[h+12]==3&&o[h+13]==1&&o[h+16]==0)h+=14,S=o[h++]|o[h++]<<8,h++;else for(h+=12;;){if(!(0<=(z=o[h++])))throw Error("Invalid block size");if(z===0)break;h+=z}break;case 249:if(o[h++]!==4||o[h+4]!==0)throw new Error("Invalid graphics extension block.");var E=o[h++];_=o[h++]|o[h++]<<8,b=o[h++],(1&E)==0&&(b=null),x=E>>2&7,h++;break;case 254:for(;;){if(!(0<=(z=o[h++])))throw Error("Invalid block size");if(z===0)break;h+=z}break;default:throw new Error("Unknown graphic control label: 0x"+o[h-1].toString(16))}break;case 44:var C=o[h++]|o[h++]<<8,M=o[h++]|o[h++]<<8,I=o[h++]|o[h++]<<8,A=o[h++]|o[h++]<<8,D=o[h++],L=D>>6&1,O=1<<1+(7&D),N=u,U=f,K=!1;D>>7&&(K=!0,N=h,h+=3*(U=O));var J=h;for(h++;;){var z;if(!(0<=(z=o[h++])))throw Error("Invalid block size");if(z===0)break;h+=z}y.push({x:C,y:M,width:I,height:A,has_local_palette:K,palette_offset:N,palette_size:U,data_offset:J,data_length:h-J,transparent_index:b,interlaced:!!L,delay:_,disposal:x});break;case 59:p=!1;break;default:throw new Error("Unknown gif block: 0x"+o[h-1].toString(16))}this.numFrames=function(){return y.length},this.loopCount=function(){return S},this.frameInfo=function(H){if(H<0||H>=y.length)throw new Error("Frame index out of range.");return y[H]},this.decodeAndBlitFrameBGRA=function(H,$){var ne=this.frameInfo(H),oe=ne.width*ne.height,_e=new Uint8Array(oe);a(o,ne.data_offset,_e,oe);var he=ne.palette_offset,Te=ne.transparent_index;Te===null&&(Te=256);var fe=ne.width,pe=d-fe,R=fe,V=4*(ne.y*d+ne.x),q=4*((ne.y+ne.height)*d+ne.x),ee=V,se=4*pe;ne.interlaced===!0&&(se+=4*d*7);for(var re=8,xe=0,Q=_e.length;xe<Q;++xe){var ce=_e[xe];if(R===0&&(R=fe,q<=(ee+=se)&&(se=4*pe+4*d*(re-1),ee=V+(fe+pe)*(re<<1),re>>=1)),ce===Te)ee+=4;else{var de=o[he+3*ce],ae=o[he+3*ce+1],Se=o[he+3*ce+2];$[ee++]=Se,$[ee++]=ae,$[ee++]=de,$[ee++]=255}--R}},this.decodeAndBlitFrameRGBA=function(H,$){var ne=this.frameInfo(H),oe=ne.width*ne.height,_e=new Uint8Array(oe);a(o,ne.data_offset,_e,oe);var he=ne.palette_offset,Te=ne.transparent_index;Te===null&&(Te=256);var fe=ne.width,pe=d-fe,R=fe,V=4*(ne.y*d+ne.x),q=4*((ne.y+ne.height)*d+ne.x),ee=V,se=4*pe;ne.interlaced===!0&&(se+=4*d*7);for(var re=8,xe=0,Q=_e.length;xe<Q;++xe){var ce=_e[xe];if(R===0&&(R=fe,q<=(ee+=se)&&(se=4*pe+4*d*(re-1),ee=V+(fe+pe)*(re<<1),re>>=1)),ce===Te)ee+=4;else{var de=o[he+3*ce],ae=o[he+3*ce+1],Se=o[he+3*ce+2];$[ee++]=de,$[ee++]=ae,$[ee++]=Se,$[ee++]=255}--R}}}}catch{}},{}],239:[function(r,s,i){(function(a){var o,h;o=this,h=function(d){function g(v){if(this==null)throw TypeError();var w=String(this),T=w.length,k=v?Number(v):0;if(k!=k&&(k=0),!(k<0||T<=k)){var j,P=w.charCodeAt(k);return 55296<=P&&P<=56319&&k+1<T&&56320<=(j=w.charCodeAt(k+1))&&j<=57343?1024*(P-55296)+j-56320+65536:P}}var m;String.prototype.codePointAt||((m=function(){try{var v={},w=Object.defineProperty,T=w(v,v,v)&&w}catch{}return T}())?m(String.prototype,"codePointAt",{value:g,configurable:!0,writable:!0}):String.prototype.codePointAt=g);var c=0,l=-3;function u(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function f(v,w){this.source=v,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=w,this.destLen=0,this.ltree=new u,this.dtree=new u}var p=new u,y=new u,_=new Uint8Array(30),b=new Uint16Array(30),x=new Uint8Array(30),S=new Uint16Array(30),E=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),C=new u,M=new Uint8Array(320);function I(v,w,T,k){var j,P;for(j=0;j<T;++j)v[j]=0;for(j=0;j<30-T;++j)v[j+T]=j/T|0;for(P=k,j=0;j<30;++j)w[j]=P,P+=1<<v[j]}var A=new Uint16Array(16);function D(v,w,T,k){var j,P;for(j=0;j<16;++j)v.table[j]=0;for(j=0;j<k;++j)v.table[w[T+j]]++;for(j=P=v.table[0]=0;j<16;++j)A[j]=P,P+=v.table[j];for(j=0;j<k;++j)w[T+j]&&(v.trans[A[w[T+j]]++]=j)}function L(v){v.bitcount--||(v.tag=v.source[v.sourceIndex++],v.bitcount=7);var w=1&v.tag;return v.tag>>>=1,w}function O(v,w,T){if(!w)return T;for(;v.bitcount<24;)v.tag|=v.source[v.sourceIndex++]<<v.bitcount,v.bitcount+=8;var k=v.tag&65535>>>16-w;return v.tag>>>=w,v.bitcount-=w,k+T}function N(v,w){for(;v.bitcount<24;)v.tag|=v.source[v.sourceIndex++]<<v.bitcount,v.bitcount+=8;for(var T=0,k=0,j=0,P=v.tag;k=2*k+(1&P),P>>>=1,++j,T+=w.table[j],0<=(k-=w.table[j]););return v.tag=P,v.bitcount-=j,w.trans[T+k]}function U(v,w,T){var k,j,P,F,W,Z;for(k=O(v,5,257),j=O(v,5,1),P=O(v,4,4),F=0;F<19;++F)M[F]=0;for(F=0;F<P;++F){var ie=O(v,3,0);M[E[F]]=ie}for(D(C,M,0,19),W=0;W<k+j;){var me=N(v,C);switch(me){case 16:var be=M[W-1];for(Z=O(v,2,3);Z;--Z)M[W++]=be;break;case 17:for(Z=O(v,3,3);Z;--Z)M[W++]=0;break;case 18:for(Z=O(v,7,11);Z;--Z)M[W++]=0;break;default:M[W++]=me}}D(w,M,0,k),D(T,M,k,j)}function K(v,w,T){for(;;){var k,j,P,F,W=N(v,w);if(W===256)return c;if(W<256)v.dest[v.destLen++]=W;else for(k=O(v,_[W-=257],b[W]),j=N(v,T),F=P=v.destLen-O(v,x[j],S[j]);F<P+k;++F)v.dest[v.destLen++]=v.dest[F]}}function J(v){for(var w,T;8<v.bitcount;)v.sourceIndex--,v.bitcount-=8;if((w=256*(w=v.source[v.sourceIndex+1])+v.source[v.sourceIndex])!==(65535&~(256*v.source[v.sourceIndex+3]+v.source[v.sourceIndex+2])))return l;for(v.sourceIndex+=4,T=w;T;--T)v.dest[v.destLen++]=v.source[v.sourceIndex++];return v.bitcount=0,c}(function(v,w){var T;for(T=0;T<7;++T)v.table[T]=0;for(v.table[7]=24,v.table[8]=152,v.table[9]=112,T=0;T<24;++T)v.trans[T]=256+T;for(T=0;T<144;++T)v.trans[24+T]=T;for(T=0;T<8;++T)v.trans[168+T]=280+T;for(T=0;T<112;++T)v.trans[176+T]=144+T;for(T=0;T<5;++T)w.table[T]=0;for(w.table[5]=32,T=0;T<32;++T)w.trans[T]=T})(p,y),I(_,b,4,3),I(x,S,2,1),_[28]=0,b[28]=258;var z=function(v,w){var T,k,j=new f(v,w);do{switch(T=L(j),O(j,2,0)){case 0:k=J(j);break;case 1:k=K(j,p,y);break;case 2:U(j,j.ltree,j.dtree),k=K(j,j.ltree,j.dtree);break;default:k=l}if(k!==c)throw new Error("Data error")}while(!T);return j.destLen<j.dest.length?typeof j.dest.slice=="function"?j.dest.slice(0,j.destLen):j.dest.subarray(0,j.destLen):j.dest};function H(v,w,T,k,j){return Math.pow(1-j,3)*v+3*Math.pow(1-j,2)*j*w+3*(1-j)*Math.pow(j,2)*T+Math.pow(j,3)*k}function $(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function ne(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function oe(v){throw new Error(v)}function _e(v,w){v||oe(w)}$.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},$.prototype.addPoint=function(v,w){typeof v=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=v,this.x2=v),v<this.x1&&(this.x1=v),v>this.x2&&(this.x2=v)),typeof w=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=w,this.y2=w),w<this.y1&&(this.y1=w),w>this.y2&&(this.y2=w))},$.prototype.addX=function(v){this.addPoint(v,null)},$.prototype.addY=function(v){this.addPoint(null,v)},$.prototype.addBezier=function(v,w,T,k,j,P,F,W){var Z=[v,w],ie=[T,k],me=[j,P],be=[F,W];this.addPoint(v,w),this.addPoint(F,W);for(var te=0;te<=1;te++){var Ge=6*Z[te]-12*ie[te]+6*me[te],Ne=-3*Z[te]+9*ie[te]-9*me[te]+3*be[te],Ae=3*ie[te]-3*Z[te];if(Ne!=0){var Ce=Math.pow(Ge,2)-4*Ae*Ne;if(!(Ce<0)){var Me=(-Ge+Math.sqrt(Ce))/(2*Ne);0<Me&&Me<1&&(te===0&&this.addX(H(Z[te],ie[te],me[te],be[te],Me)),te===1&&this.addY(H(Z[te],ie[te],me[te],be[te],Me)));var et=(-Ge-Math.sqrt(Ce))/(2*Ne);0<et&&et<1&&(te===0&&this.addX(H(Z[te],ie[te],me[te],be[te],et)),te===1&&this.addY(H(Z[te],ie[te],me[te],be[te],et)))}}else{if(Ge==0)continue;var Je=-Ae/Ge;0<Je&&Je<1&&(te===0&&this.addX(H(Z[te],ie[te],me[te],be[te],Je)),te===1&&this.addY(H(Z[te],ie[te],me[te],be[te],Je)))}}},$.prototype.addQuad=function(v,w,T,k,j,P){var F=v+.6666666666666666*(T-v),W=w+2/3*(k-w),Z=F+1/3*(j-v),ie=W+1/3*(P-w);this.addBezier(v,w,F,W,Z,ie,j,P)},ne.prototype.moveTo=function(v,w){this.commands.push({type:"M",x:v,y:w})},ne.prototype.lineTo=function(v,w){this.commands.push({type:"L",x:v,y:w})},ne.prototype.curveTo=ne.prototype.bezierCurveTo=function(v,w,T,k,j,P){this.commands.push({type:"C",x1:v,y1:w,x2:T,y2:k,x:j,y:P})},ne.prototype.quadTo=ne.prototype.quadraticCurveTo=function(v,w,T,k){this.commands.push({type:"Q",x1:v,y1:w,x:T,y:k})},ne.prototype.close=ne.prototype.closePath=function(){this.commands.push({type:"Z"})},ne.prototype.extend=function(v){if(v.commands)v=v.commands;else if(v instanceof $){var w=v;return this.moveTo(w.x1,w.y1),this.lineTo(w.x2,w.y1),this.lineTo(w.x2,w.y2),this.lineTo(w.x1,w.y2),void this.close()}Array.prototype.push.apply(this.commands,v)},ne.prototype.getBoundingBox=function(){for(var v=new $,w=0,T=0,k=0,j=0,P=0;P<this.commands.length;P++){var F=this.commands[P];switch(F.type){case"M":v.addPoint(F.x,F.y),w=k=F.x,T=j=F.y;break;case"L":v.addPoint(F.x,F.y),k=F.x,j=F.y;break;case"Q":v.addQuad(k,j,F.x1,F.y1,F.x,F.y),k=F.x,j=F.y;break;case"C":v.addBezier(k,j,F.x1,F.y1,F.x2,F.y2,F.x,F.y),k=F.x,j=F.y;break;case"Z":k=w,j=T;break;default:throw new Error("Unexpected path command "+F.type)}}return v.isEmpty()&&v.addPoint(0,0),v},ne.prototype.draw=function(v){v.beginPath();for(var w=0;w<this.commands.length;w+=1){var T=this.commands[w];T.type==="M"?v.moveTo(T.x,T.y):T.type==="L"?v.lineTo(T.x,T.y):T.type==="C"?v.bezierCurveTo(T.x1,T.y1,T.x2,T.y2,T.x,T.y):T.type==="Q"?v.quadraticCurveTo(T.x1,T.y1,T.x,T.y):T.type==="Z"&&v.closePath()}this.fill&&(v.fillStyle=this.fill,v.fill()),this.stroke&&(v.strokeStyle=this.stroke,v.lineWidth=this.strokeWidth,v.stroke())},ne.prototype.toPathData=function(v){function w(){for(var P,F=arguments,W="",Z=0;Z<arguments.length;Z+=1){var ie=F[Z];0<=ie&&0<Z&&(W+=" "),W+=(P=ie,Math.round(P)===P?""+Math.round(P):P.toFixed(v))}return W}v=v!==void 0?v:2;for(var T="",k=0;k<this.commands.length;k+=1){var j=this.commands[k];j.type==="M"?T+="M"+w(j.x,j.y):j.type==="L"?T+="L"+w(j.x,j.y):j.type==="C"?T+="C"+w(j.x1,j.y1,j.x2,j.y2,j.x,j.y):j.type==="Q"?T+="Q"+w(j.x1,j.y1,j.x,j.y):j.type==="Z"&&(T+="Z")}return T},ne.prototype.toSVG=function(v){var w='<path d="';return w+=this.toPathData(v),w+='"',this.fill&&this.fill!=="black"&&(this.fill===null?w+=' fill="none"':w+=' fill="'+this.fill+'"'),this.stroke&&(w+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),w+="/>"},ne.prototype.toDOMElement=function(v){var w=this.toPathData(v),T=document.createElementNS("http://www.w3.org/2000/svg","path");return T.setAttribute("d",w),T};var he={fail:oe,argument:_e,assert:_e},Te={},fe={},pe={};function R(v){return function(){return v}}fe.BYTE=function(v){return he.argument(0<=v&&v<=255,"Byte value should be between 0 and 255."),[v]},pe.BYTE=R(1),fe.CHAR=function(v){return[v.charCodeAt(0)]},pe.CHAR=R(1),fe.CHARARRAY=function(v){for(var w=[],T=0;T<v.length;T+=1)w[T]=v.charCodeAt(T);return w},pe.CHARARRAY=function(v){return v.length},fe.USHORT=function(v){return[v>>8&255,255&v]},pe.USHORT=R(2),fe.SHORT=function(v){return 32768<=v&&(v=-(65536-v)),[v>>8&255,255&v]},pe.SHORT=R(2),fe.UINT24=function(v){return[v>>16&255,v>>8&255,255&v]},pe.UINT24=R(3),fe.ULONG=function(v){return[v>>24&255,v>>16&255,v>>8&255,255&v]},pe.ULONG=R(4),fe.LONG=function(v){return 2147483648<=v&&(v=-(4294967296-v)),[v>>24&255,v>>16&255,v>>8&255,255&v]},pe.LONG=R(4),fe.FIXED=fe.ULONG,pe.FIXED=pe.ULONG,fe.FWORD=fe.SHORT,pe.FWORD=pe.SHORT,fe.UFWORD=fe.USHORT,pe.UFWORD=pe.USHORT,fe.LONGDATETIME=function(v){return[0,0,0,0,v>>24&255,v>>16&255,v>>8&255,255&v]},pe.LONGDATETIME=R(8),fe.TAG=function(v){return he.argument(v.length===4,"Tag should be exactly 4 ASCII characters."),[v.charCodeAt(0),v.charCodeAt(1),v.charCodeAt(2),v.charCodeAt(3)]},pe.TAG=R(4),fe.Card8=fe.BYTE,pe.Card8=pe.BYTE,fe.Card16=fe.USHORT,pe.Card16=pe.USHORT,fe.OffSize=fe.BYTE,pe.OffSize=pe.BYTE,fe.SID=fe.USHORT,pe.SID=pe.USHORT,fe.NUMBER=function(v){return-107<=v&&v<=107?[v+139]:108<=v&&v<=1131?[247+((v-=108)>>8),255&v]:-1131<=v&&v<=-108?[251+((v=-v-108)>>8),255&v]:-32768<=v&&v<=32767?fe.NUMBER16(v):fe.NUMBER32(v)},pe.NUMBER=function(v){return fe.NUMBER(v).length},fe.NUMBER16=function(v){return[28,v>>8&255,255&v]},pe.NUMBER16=R(3),fe.NUMBER32=function(v){return[29,v>>24&255,v>>16&255,v>>8&255,255&v]},pe.NUMBER32=R(5),fe.REAL=function(v){var w=v.toString(),T=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(w);if(T){var k=parseFloat("1e"+((T[2]?+T[2]:0)+T[1].length));w=(Math.round(v*k)/k).toString()}for(var j="",P=0,F=w.length;P<F;P+=1){var W=w[P];j+=W==="e"?w[++P]==="-"?"c":"b":W==="."?"a":W==="-"?"e":W}for(var Z=[30],ie=0,me=(j+=1&j.length?"f":"ff").length;ie<me;ie+=2)Z.push(parseInt(j.substr(ie,2),16));return Z},pe.REAL=function(v){return fe.REAL(v).length},fe.NAME=fe.CHARARRAY,pe.NAME=pe.CHARARRAY,fe.STRING=fe.CHARARRAY,pe.STRING=pe.CHARARRAY,Te.UTF8=function(v,w,T){for(var k=[],j=T,P=0;P<j;P++,w+=1)k[P]=v.getUint8(w);return String.fromCharCode.apply(null,k)},Te.UTF16=function(v,w,T){for(var k=[],j=T/2,P=0;P<j;P++,w+=2)k[P]=v.getUint16(w);return String.fromCharCode.apply(null,k)},fe.UTF16=function(v){for(var w=[],T=0;T<v.length;T+=1){var k=v.charCodeAt(T);w[w.length]=k>>8&255,w[w.length]=255&k}return w},pe.UTF16=function(v){return 2*v.length};var V={"x-mac-croatian":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\u0160\u2122\xB4\xA8\u2260\u017D\xD8\u221E\xB1\u2264\u2265\u2206\xB5\u2202\u2211\u220F\u0161\u222B\xAA\xBA\u03A9\u017E\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u0106\xAB\u010C\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u0110\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\uF8FF\xA9\u2044\u20AC\u2039\u203A\xC6\xBB\u2013\xB7\u201A\u201E\u2030\xC2\u0107\xC1\u010D\xC8\xCD\xCE\xCF\xCC\xD3\xD4\u0111\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u03C0\xCB\u02DA\xB8\xCA\xE6\u02C7","x-mac-cyrillic":"\u0410\u0411\u0412\u0413\u0414\u0415\u0416\u0417\u0418\u0419\u041A\u041B\u041C\u041D\u041E\u041F\u0420\u0421\u0422\u0423\u0424\u0425\u0426\u0427\u0428\u0429\u042A\u042B\u042C\u042D\u042E\u042F\u2020\xB0\u0490\xA3\xA7\u2022\xB6\u0406\xAE\xA9\u2122\u0402\u0452\u2260\u0403\u0453\u221E\xB1\u2264\u2265\u0456\xB5\u0491\u0408\u0404\u0454\u0407\u0457\u0409\u0459\u040A\u045A\u0458\u0405\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\u040B\u045B\u040C\u045C\u0455\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u201E\u040E\u045E\u040F\u045F\u2116\u0401\u0451\u044F\u0430\u0431\u0432\u0433\u0434\u0435\u0436\u0437\u0438\u0439\u043A\u043B\u043C\u043D\u043E\u043F\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u0447\u0448\u0449\u044A\u044B\u044C\u044D\u044E","x-mac-gaelic":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u1E02\xB1\u2264\u2265\u1E03\u010A\u010B\u1E0A\u1E0B\u1E1E\u1E1F\u0120\u0121\u1E40\xE6\xF8\u1E41\u1E56\u1E57\u027C\u0192\u017F\u1E60\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\u1E61\u1E9B\xFF\u0178\u1E6A\u20AC\u2039\u203A\u0176\u0177\u1E6B\xB7\u1EF2\u1EF3\u204A\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\u2663\xD2\xDA\xDB\xD9\u0131\xDD\xFD\u0174\u0175\u1E84\u1E85\u1E80\u1E81\u1E82\u1E83","x-mac-greek":"\xC4\xB9\xB2\xC9\xB3\xD6\xDC\u0385\xE0\xE2\xE4\u0384\xA8\xE7\xE9\xE8\xEA\xEB\xA3\u2122\xEE\xEF\u2022\xBD\u2030\xF4\xF6\xA6\u20AC\xF9\xFB\xFC\u2020\u0393\u0394\u0398\u039B\u039E\u03A0\xDF\xAE\xA9\u03A3\u03AA\xA7\u2260\xB0\xB7\u0391\xB1\u2264\u2265\xA5\u0392\u0395\u0396\u0397\u0399\u039A\u039C\u03A6\u03AB\u03A8\u03A9\u03AC\u039D\xAC\u039F\u03A1\u2248\u03A4\xAB\xBB\u2026\xA0\u03A5\u03A7\u0386\u0388\u0153\u2013\u2015\u201C\u201D\u2018\u2019\xF7\u0389\u038A\u038C\u038E\u03AD\u03AE\u03AF\u03CC\u038F\u03CD\u03B1\u03B2\u03C8\u03B4\u03B5\u03C6\u03B3\u03B7\u03B9\u03BE\u03BA\u03BB\u03BC\u03BD\u03BF\u03C0\u03CE\u03C1\u03C3\u03C4\u03B8\u03C9\u03C2\u03C7\u03C5\u03B6\u03CA\u03CB\u0390\u03B0\xAD","x-mac-icelandic":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\xDD\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\xD0\xF0\xDE\xFE\xFD\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-inuit":"\u1403\u1404\u1405\u1406\u140A\u140B\u1431\u1432\u1433\u1434\u1438\u1439\u1449\u144E\u144F\u1450\u1451\u1455\u1456\u1466\u146D\u146E\u146F\u1470\u1472\u1473\u1483\u148B\u148C\u148D\u148E\u1490\u1491\xB0\u14A1\u14A5\u14A6\u2022\xB6\u14A7\xAE\xA9\u2122\u14A8\u14AA\u14AB\u14BB\u14C2\u14C3\u14C4\u14C5\u14C7\u14C8\u14D0\u14EF\u14F0\u14F1\u14F2\u14F4\u14F5\u1505\u14D5\u14D6\u14D7\u14D8\u14DA\u14DB\u14EA\u1528\u1529\u152A\u152B\u152D\u2026\xA0\u152E\u153E\u1555\u1556\u1557\u2013\u2014\u201C\u201D\u2018\u2019\u1558\u1559\u155A\u155D\u1546\u1547\u1548\u1549\u154B\u154C\u1550\u157F\u1580\u1581\u1582\u1583\u1584\u1585\u158F\u1590\u1591\u1592\u1593\u1594\u1595\u1671\u1672\u1673\u1674\u1675\u1676\u1596\u15A0\u15A1\u15A2\u15A3\u15A4\u15A5\u15A6\u157C\u0141\u0142","x-mac-ce":"\xC4\u0100\u0101\xC9\u0104\xD6\xDC\xE1\u0105\u010C\xE4\u010D\u0106\u0107\xE9\u0179\u017A\u010E\xED\u010F\u0112\u0113\u0116\xF3\u0117\xF4\xF6\xF5\xFA\u011A\u011B\xFC\u2020\xB0\u0118\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\u0119\xA8\u2260\u0123\u012E\u012F\u012A\u2264\u2265\u012B\u0136\u2202\u2211\u0142\u013B\u013C\u013D\u013E\u0139\u013A\u0145\u0146\u0143\xAC\u221A\u0144\u0147\u2206\xAB\xBB\u2026\xA0\u0148\u0150\xD5\u0151\u014C\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\u014D\u0154\u0155\u0158\u2039\u203A\u0159\u0156\u0157\u0160\u201A\u201E\u0161\u015A\u015B\xC1\u0164\u0165\xCD\u017D\u017E\u016A\xD3\xD4\u016B\u016E\xDA\u016F\u0170\u0171\u0172\u0173\xDD\xFD\u0137\u017B\u0141\u017C\u0122\u02C7",macintosh:"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\u2039\u203A\uFB01\uFB02\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-romanian":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\u0102\u0218\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\u0103\u0219\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\u2039\u203A\u021A\u021B\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-turkish":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u011E\u011F\u0130\u0131\u015E\u015F\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\uF8A0\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7"};Te.MACSTRING=function(v,w,T,k){var j=V[k];if(j!==void 0){for(var P="",F=0;F<T;F++){var W=v.getUint8(w+F);P+=W<=127?String.fromCharCode(W):j[127&W]}return P}};var q,ee=typeof WeakMap=="function"&&new WeakMap;function se(v){return-128<=v&&v<=127}function re(v,w,T){for(var k=0,j=v.length;w<j&&k<64&&v[w]===0;)++w,++k;return T.push(128|k-1),w}function xe(v,w,T){for(var k=0,j=v.length,P=w;P<j&&k<64;){var F=v[P];if(!se(F)||F===0&&P+1<j&&v[P+1]===0)break;++P,++k}T.push(k-1);for(var W=w;W<P;++W)T.push(v[W]+256&255);return P}function Q(v,w,T){for(var k=0,j=v.length,P=w;P<j&&k<64;){var F=v[P];if(F===0||se(F)&&P+1<j&&se(v[P+1]))break;++P,++k}T.push(64|k-1);for(var W=w;W<P;++W){var Z=v[W];T.push(Z+65536>>8&255,Z+256&255)}return P}fe.MACSTRING=function(v,w){var T=function(F){if(!q)for(var W in q={},V)q[W]=new String(W);var Z=q[F];if(Z!==void 0){if(ee){var ie=ee.get(Z);if(ie!==void 0)return ie}var me=V[F];if(me!==void 0){for(var be={},te=0;te<me.length;te++)be[me.charCodeAt(te)]=te+128;return ee&&ee.set(Z,be),be}}}(w);if(T!==void 0){for(var k=[],j=0;j<v.length;j++){var P=v.charCodeAt(j);if(128<=P&&(P=T[P])===void 0)return;k[j]=P}return k}},pe.MACSTRING=function(v,w){var T=fe.MACSTRING(v,w);return T!==void 0?T.length:0},fe.VARDELTAS=function(v){for(var w=0,T=[];w<v.length;){var k=v[w];w=k===0?re(v,w,T):-128<=k&&k<=127?xe(v,w,T):Q(v,w,T)}return T},fe.INDEX=function(v){for(var w=1,T=[w],k=[],j=0;j<v.length;j+=1){var P=fe.OBJECT(v[j]);Array.prototype.push.apply(k,P),w+=P.length,T.push(w)}if(k.length===0)return[0,0];for(var F=[],W=1+Math.floor(Math.log(w)/Math.log(2))/8|0,Z=[void 0,fe.BYTE,fe.USHORT,fe.UINT24,fe.ULONG][W],ie=0;ie<T.length;ie+=1){var me=Z(T[ie]);Array.prototype.push.apply(F,me)}return Array.prototype.concat(fe.Card16(v.length),fe.OffSize(W),F,k)},pe.INDEX=function(v){return fe.INDEX(v).length},fe.DICT=function(v){for(var w=[],T=Object.keys(v),k=T.length,j=0;j<k;j+=1){var P=parseInt(T[j],0),F=v[P];w=(w=w.concat(fe.OPERAND(F.value,F.type))).concat(fe.OPERATOR(P))}return w},pe.DICT=function(v){return fe.DICT(v).length},fe.OPERATOR=function(v){return v<1200?[v]:[12,v-1200]},fe.OPERAND=function(v,w){var T=[];if(Array.isArray(w))for(var k=0;k<w.length;k+=1)he.argument(v.length===w.length,"Not enough arguments given for type"+w),T=T.concat(fe.OPERAND(v[k],w[k]));else if(w==="SID")T=T.concat(fe.NUMBER(v));else if(w==="offset")T=T.concat(fe.NUMBER32(v));else if(w==="number")T=T.concat(fe.NUMBER(v));else{if(w!=="real")throw new Error("Unknown operand type "+w);T=T.concat(fe.REAL(v))}return T},fe.OP=fe.BYTE,pe.OP=pe.BYTE;var ce=typeof WeakMap=="function"&&new WeakMap;function de(v,w,T){for(var k=0;k<w.length;k+=1){var j=w[k];this[j.name]=j.value}if(this.tableName=v,this.fields=w,T)for(var P=Object.keys(T),F=0;F<P.length;F+=1){var W=P[F],Z=T[W];this[W]!==void 0&&(this[W]=Z)}}function ae(v,w,T){T===void 0&&(T=w.length);var k=new Array(w.length+1);k[0]={name:v+"Count",type:"USHORT",value:T};for(var j=0;j<w.length;j++)k[j+1]={name:v+j,type:"USHORT",value:w[j]};return k}function Se(v,w,T){var k=w.length,j=new Array(k+1);j[0]={name:v+"Count",type:"USHORT",value:k};for(var P=0;P<k;P++)j[P+1]={name:v+P,type:"TABLE",value:T(w[P],P)};return j}function ke(v,w,T){var k=w.length,j=[];j[0]={name:v+"Count",type:"USHORT",value:k};for(var P=0;P<k;P++)j=j.concat(T(w[P],P));return j}function Ee(v){v.format===1?de.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(ae("glyph",v.glyphs))):he.assert(!1,"Can't create coverage table format 2 yet.")}function Fe(v){de.call(this,"scriptListTable",ke("scriptRecord",v,function(w,T){var k=w.script,j=k.defaultLangSys;return he.assert(!!j,"Unable to write GSUB: script "+w.tag+" has no default language system."),[{name:"scriptTag"+T,type:"TAG",value:w.tag},{name:"script"+T,type:"TABLE",value:new de("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new de("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:j.reqFeatureIndex}].concat(ae("featureIndex",j.featureIndexes)))}].concat(ke("langSys",k.langSysRecords,function(P,F){var W=P.langSys;return[{name:"langSysTag"+F,type:"TAG",value:P.tag},{name:"langSys"+F,type:"TABLE",value:new de("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:W.reqFeatureIndex}].concat(ae("featureIndex",W.featureIndexes)))}]})))}]}))}function Qe(v){de.call(this,"featureListTable",ke("featureRecord",v,function(w,T){var k=w.feature;return[{name:"featureTag"+T,type:"TAG",value:w.tag},{name:"feature"+T,type:"TABLE",value:new de("featureTable",[{name:"featureParams",type:"USHORT",value:k.featureParams}].concat(ae("lookupListIndex",k.lookupListIndexes)))}]}))}function Ye(v,w){de.call(this,"lookupListTable",Se("lookup",v,function(T){var k=w[T.lookupType];return he.assert(!!k,"Unable to write GSUB lookup type "+T.lookupType+" tables."),new de("lookupTable",[{name:"lookupType",type:"USHORT",value:T.lookupType},{name:"lookupFlag",type:"USHORT",value:T.lookupFlag}].concat(Se("subtable",T.subtables,k)))}))}fe.CHARSTRING=function(v){if(ce){var w=ce.get(v);if(w!==void 0)return w}for(var T=[],k=v.length,j=0;j<k;j+=1){var P=v[j];T=T.concat(fe[P.type](P.value))}return ce&&ce.set(v,T),T},pe.CHARSTRING=function(v){return fe.CHARSTRING(v).length},fe.OBJECT=function(v){var w=fe[v.type];return he.argument(w!==void 0,"No encoding function for type "+v.type),w(v.value)},pe.OBJECT=function(v){var w=pe[v.type];return he.argument(w!==void 0,"No sizeOf function for type "+v.type),w(v.value)},fe.TABLE=function(v){for(var w=[],T=v.fields.length,k=[],j=[],P=0;P<T;P+=1){var F=v.fields[P],W=fe[F.type];he.argument(W!==void 0,"No encoding function for field type "+F.type+" ("+F.name+")");var Z=v[F.name];Z===void 0&&(Z=F.value);var ie=W(Z);F.type==="TABLE"?(j.push(w.length),w=w.concat([0,0]),k.push(ie)):w=w.concat(ie)}for(var me=0;me<k.length;me+=1){var be=j[me],te=w.length;he.argument(te<65536,"Table "+v.tableName+" too big."),w[be]=te>>8,w[be+1]=255&te,w=w.concat(k[me])}return w},pe.TABLE=function(v){for(var w=0,T=v.fields.length,k=0;k<T;k+=1){var j=v.fields[k],P=pe[j.type];he.argument(P!==void 0,"No sizeOf function for field type "+j.type+" ("+j.name+")");var F=v[j.name];F===void 0&&(F=j.value),w+=P(F),j.type==="TABLE"&&(w+=2)}return w},fe.RECORD=fe.TABLE,pe.RECORD=pe.TABLE,fe.LITERAL=function(v){return v},pe.LITERAL=function(v){return v.length},de.prototype.encode=function(){return fe.TABLE(this)},de.prototype.sizeOf=function(){return pe.TABLE(this)};var Ve={Table:de,Record:de,Coverage:(Ee.prototype=Object.create(de.prototype)).constructor=Ee,ScriptList:(Fe.prototype=Object.create(de.prototype)).constructor=Fe,FeatureList:(Qe.prototype=Object.create(de.prototype)).constructor=Qe,LookupList:(Ye.prototype=Object.create(de.prototype)).constructor=Ye,ushortList:ae,tableList:Se,recordList:ke};function pt(v,w){return v.getUint8(w)}function Oe(v,w){return v.getUint16(w,!1)}function De(v,w){return v.getUint32(w,!1)}function He(v,w){return v.getInt16(w,!1)+v.getUint16(w+2,!1)/65535}var Xe={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function ve(v,w){this.data=v,this.offset=w,this.relativeOffset=0}ve.prototype.parseByte=function(){var v=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,v},ve.prototype.parseChar=function(){var v=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,v},ve.prototype.parseCard8=ve.prototype.parseByte,ve.prototype.parseCard16=ve.prototype.parseUShort=function(){var v=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,v},ve.prototype.parseSID=ve.prototype.parseUShort,ve.prototype.parseOffset16=ve.prototype.parseUShort,ve.prototype.parseShort=function(){var v=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,v},ve.prototype.parseF2Dot14=function(){var v=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,v},ve.prototype.parseOffset32=ve.prototype.parseULong=function(){var v=De(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,v},ve.prototype.parseFixed=function(){var v=He(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,v},ve.prototype.parseString=function(v){var w=this.data,T=this.offset+this.relativeOffset,k="";this.relativeOffset+=v;for(var j=0;j<v;j++)k+=String.fromCharCode(w.getUint8(T+j));return k},ve.prototype.parseTag=function(){return this.parseString(4)},ve.prototype.parseLongDateTime=function(){var v=De(this.data,this.offset+this.relativeOffset+4);return v-=2082844800,this.relativeOffset+=8,v},ve.prototype.parseVersion=function(v){var w=Oe(this.data,this.offset+this.relativeOffset),T=Oe(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,v===void 0&&(v=4096),w+T/v/10},ve.prototype.skip=function(v,w){w===void 0&&(w=1),this.relativeOffset+=Xe[v]*w},ve.prototype.parseULongList=function(v){v===void 0&&(v=this.parseULong());for(var w=new Array(v),T=this.data,k=this.offset+this.relativeOffset,j=0;j<v;j++)w[j]=T.getUint32(k),k+=4;return this.relativeOffset+=4*v,w},ve.prototype.parseOffset16List=ve.prototype.parseUShortList=function(v){v===void 0&&(v=this.parseUShort());for(var w=new Array(v),T=this.data,k=this.offset+this.relativeOffset,j=0;j<v;j++)w[j]=T.getUint16(k),k+=2;return this.relativeOffset+=2*v,w},ve.prototype.parseShortList=function(v){for(var w=new Array(v),T=this.data,k=this.offset+this.relativeOffset,j=0;j<v;j++)w[j]=T.getInt16(k),k+=2;return this.relativeOffset+=2*v,w},ve.prototype.parseByteList=function(v){for(var w=new Array(v),T=this.data,k=this.offset+this.relativeOffset,j=0;j<v;j++)w[j]=T.getUint8(k++);return this.relativeOffset+=v,w},ve.prototype.parseList=function(v,w){w||(w=v,v=this.parseUShort());for(var T=new Array(v),k=0;k<v;k++)T[k]=w.call(this);return T},ve.prototype.parseList32=function(v,w){w||(w=v,v=this.parseULong());for(var T=new Array(v),k=0;k<v;k++)T[k]=w.call(this);return T},ve.prototype.parseRecordList=function(v,w){w||(w=v,v=this.parseUShort());for(var T=new Array(v),k=Object.keys(w),j=0;j<v;j++){for(var P={},F=0;F<k.length;F++){var W=k[F],Z=w[W];P[W]=Z.call(this)}T[j]=P}return T},ve.prototype.parseRecordList32=function(v,w){w||(w=v,v=this.parseULong());for(var T=new Array(v),k=Object.keys(w),j=0;j<v;j++){for(var P={},F=0;F<k.length;F++){var W=k[F],Z=w[W];P[W]=Z.call(this)}T[j]=P}return T},ve.prototype.parseStruct=function(v){if(typeof v=="function")return v.call(this);for(var w=Object.keys(v),T={},k=0;k<w.length;k++){var j=w[k],P=v[j];T[j]=P.call(this)}return T},ve.prototype.parseValueRecord=function(v){if(v===void 0&&(v=this.parseUShort()),v!==0){var w={};return 1&v&&(w.xPlacement=this.parseShort()),2&v&&(w.yPlacement=this.parseShort()),4&v&&(w.xAdvance=this.parseShort()),8&v&&(w.yAdvance=this.parseShort()),16&v&&(w.xPlaDevice=void 0,this.parseShort()),32&v&&(w.yPlaDevice=void 0,this.parseShort()),64&v&&(w.xAdvDevice=void 0,this.parseShort()),128&v&&(w.yAdvDevice=void 0,this.parseShort()),w}},ve.prototype.parseValueRecordList=function(){for(var v=this.parseUShort(),w=this.parseUShort(),T=new Array(w),k=0;k<w;k++)T[k]=this.parseValueRecord(v);return T},ve.prototype.parsePointer=function(v){var w=this.parseOffset16();if(0<w)return new ve(this.data,this.offset+w).parseStruct(v)},ve.prototype.parsePointer32=function(v){var w=this.parseOffset32();if(0<w)return new ve(this.data,this.offset+w).parseStruct(v)},ve.prototype.parseListOfLists=function(v){for(var w=this.parseOffset16List(),T=w.length,k=this.relativeOffset,j=new Array(T),P=0;P<T;P++){var F=w[P];if(F!==0)if(this.relativeOffset=F,v){for(var W=this.parseOffset16List(),Z=new Array(W.length),ie=0;ie<W.length;ie++)this.relativeOffset=F+W[ie],Z[ie]=v.call(this);j[P]=Z}else j[P]=this.parseUShortList();else j[P]=void 0}return this.relativeOffset=k,j},ve.prototype.parseCoverage=function(){var v=this.offset+this.relativeOffset,w=this.parseUShort(),T=this.parseUShort();if(w===1)return{format:1,glyphs:this.parseUShortList(T)};if(w!==2)throw new Error("0x"+v.toString(16)+": Coverage format must be 1 or 2.");for(var k=new Array(T),j=0;j<T;j++)k[j]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:k}},ve.prototype.parseClassDef=function(){var v=this.offset+this.relativeOffset,w=this.parseUShort();if(w===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(w===2)return{format:2,ranges:this.parseRecordList({start:ve.uShort,end:ve.uShort,classId:ve.uShort})};throw new Error("0x"+v.toString(16)+": ClassDef format must be 1 or 2.")},ve.list=function(v,w){return function(){return this.parseList(v,w)}},ve.list32=function(v,w){return function(){return this.parseList32(v,w)}},ve.recordList=function(v,w){return function(){return this.parseRecordList(v,w)}},ve.recordList32=function(v,w){return function(){return this.parseRecordList32(v,w)}},ve.pointer=function(v){return function(){return this.parsePointer(v)}},ve.pointer32=function(v){return function(){return this.parsePointer32(v)}},ve.tag=ve.prototype.parseTag,ve.byte=ve.prototype.parseByte,ve.uShort=ve.offset16=ve.prototype.parseUShort,ve.uShortList=ve.prototype.parseUShortList,ve.uLong=ve.offset32=ve.prototype.parseULong,ve.uLongList=ve.prototype.parseULongList,ve.struct=ve.prototype.parseStruct,ve.coverage=ve.prototype.parseCoverage,ve.classDef=ve.prototype.parseClassDef;var tt={reserved:ve.uShort,reqFeatureIndex:ve.uShort,featureIndexes:ve.uShortList};ve.prototype.parseScriptList=function(){return this.parsePointer(ve.recordList({tag:ve.tag,script:ve.pointer({defaultLangSys:ve.pointer(tt),langSysRecords:ve.recordList({tag:ve.tag,langSys:ve.pointer(tt)})})}))||[]},ve.prototype.parseFeatureList=function(){return this.parsePointer(ve.recordList({tag:ve.tag,feature:ve.pointer({featureParams:ve.offset16,lookupListIndexes:ve.uShortList})}))||[]},ve.prototype.parseLookupList=function(v){return this.parsePointer(ve.list(ve.pointer(function(){var w=this.parseUShort();he.argument(1<=w&&w<=9,"GPOS/GSUB lookup type "+w+" unknown.");var T=this.parseUShort(),k=16&T;return{lookupType:w,lookupFlag:T,subtables:this.parseList(ve.pointer(v[w])),markFilteringSet:k?this.parseUShort():void 0}})))||[]},ve.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var v=this.parseUShort(),w=this.parseUShort();return he.argument(v===1&&w<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:ve.offset32,featureTableSubstitutionOffset:ve.offset32})})||[]};var B={getByte:pt,getCard8:pt,getUShort:Oe,getCard16:Oe,getShort:function(v,w){return v.getInt16(w,!1)},getULong:De,getFixed:He,getTag:function(v,w){for(var T="",k=w;k<w+4;k+=1)T+=String.fromCharCode(v.getInt8(k));return T},getOffset:function(v,w,T){for(var k=0,j=0;j<T;j+=1)k<<=8,k+=v.getUint8(w+j);return k},getBytes:function(v,w,T){for(var k=[],j=w;j<T;j+=1)k.push(v.getUint8(j));return k},bytesToString:function(v){for(var w="",T=0;T<v.length;T+=1)w+=String.fromCharCode(v[T]);return w},Parser:ve},X={parse:function(v,w){var T={};T.version=B.getUShort(v,w),he.argument(T.version===0,"cmap table version should be 0."),T.numTables=B.getUShort(v,w+2);for(var k=-1,j=T.numTables-1;0<=j;--j){var P=B.getUShort(v,w+4+8*j),F=B.getUShort(v,w+4+8*j+2);if(P===3&&(F===0||F===1||F===10)||P===0&&(F===0||F===1||F===2||F===3||F===4)){k=B.getULong(v,w+4+8*j+4);break}}if(k===-1)throw new Error("No valid cmap sub-tables found.");var W=new B.Parser(v,w+k);if(T.format=W.parseUShort(),T.format===12)(function(Z,ie){var me;ie.parseUShort(),Z.length=ie.parseULong(),Z.language=ie.parseULong(),Z.groupCount=me=ie.parseULong(),Z.glyphIndexMap={};for(var be=0;be<me;be+=1)for(var te=ie.parseULong(),Ge=ie.parseULong(),Ne=ie.parseULong(),Ae=te;Ae<=Ge;Ae+=1)Z.glyphIndexMap[Ae]=Ne,Ne++})(T,W);else{if(T.format!==4)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+T.format+").");(function(Z,ie,me,be,te){var Ge;Z.length=ie.parseUShort(),Z.language=ie.parseUShort(),Z.segCount=Ge=ie.parseUShort()>>1,ie.skip("uShort",3),Z.glyphIndexMap={};for(var Ne=new B.Parser(me,be+te+14),Ae=new B.Parser(me,be+te+16+2*Ge),Ce=new B.Parser(me,be+te+16+4*Ge),Me=new B.Parser(me,be+te+16+6*Ge),et=be+te+16+8*Ge,Je=0;Je<Ge-1;Je+=1)for(var Ct=void 0,lt=Ne.parseUShort(),dt=Ae.parseUShort(),mr=Ce.parseShort(),Ot=Me.parseUShort(),At=dt;At<=lt;At+=1)Ot!==0?(et=Me.offset+Me.relativeOffset-2,et+=Ot,et+=2*(At-dt),(Ct=B.getUShort(me,et))!==0&&(Ct=Ct+mr&65535)):Ct=At+mr&65535,Z.glyphIndexMap[At]=Ct})(T,W,v,w,k)}return T},make:function(v){var w,T=!0;for(w=v.length-1;0<w;--w)if(65535<v.get(w).unicode){console.log("Adding CMAP format 12 (needed!)"),T=!1;break}var k=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:T?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:T?12:20}];T||(k=k.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])),k=k.concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);var j,P,F,W=new Ve.Table("cmap",k);for(W.segments=[],w=0;w<v.length;w+=1){for(var Z=v.get(w),ie=0;ie<Z.unicodes.length;ie+=1)j=W,P=Z.unicodes[ie],F=w,j.segments.push({end:P,start:P,delta:-(P-F),offset:0,glyphIndex:F});W.segments=W.segments.sort(function(Ct,lt){return Ct.start-lt.start})}W.segments.push({end:65535,start:65535,delta:1,offset:0});var me=W.segments.length,be=0,te=[],Ge=[],Ne=[],Ae=[],Ce=[],Me=[];for(w=0;w<me;w+=1){var et=W.segments[w];et.end<=65535&&et.start<=65535?(te=te.concat({name:"end_"+w,type:"USHORT",value:et.end}),Ge=Ge.concat({name:"start_"+w,type:"USHORT",value:et.start}),Ne=Ne.concat({name:"idDelta_"+w,type:"SHORT",value:et.delta}),Ae=Ae.concat({name:"idRangeOffset_"+w,type:"USHORT",value:et.offset}),et.glyphId!==void 0&&(Ce=Ce.concat({name:"glyph_"+w,type:"USHORT",value:et.glyphId}))):be+=1,T||et.glyphIndex===void 0||(Me=(Me=(Me=Me.concat({name:"cmap12Start_"+w,type:"ULONG",value:et.start})).concat({name:"cmap12End_"+w,type:"ULONG",value:et.end})).concat({name:"cmap12Glyph_"+w,type:"ULONG",value:et.glyphIndex}))}if(W.segCountX2=2*(me-be),W.searchRange=2*Math.pow(2,Math.floor(Math.log(me-be)/Math.log(2))),W.entrySelector=Math.log(W.searchRange/2)/Math.log(2),W.rangeShift=W.segCountX2-W.searchRange,W.fields=W.fields.concat(te),W.fields.push({name:"reservedPad",type:"USHORT",value:0}),W.fields=W.fields.concat(Ge),W.fields=W.fields.concat(Ne),W.fields=W.fields.concat(Ae),W.fields=W.fields.concat(Ce),W.cmap4Length=14+2*te.length+2+2*Ge.length+2*Ne.length+2*Ae.length+2*Ce.length,!T){var Je=16+4*Me.length;W.cmap12Offset=20+W.cmap4Length,W.fields=W.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:Je},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:Me.length/3}]),W.fields=W.fields.concat(Me)}return W}},G=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],Y=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],le=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],we=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function je(v){this.font=v}function Pe(v){this.cmap=v}function ge(v,w){this.encoding=v,this.charset=w}function qe(v){switch(v.version){case 1:this.names=we.slice();break;case 2:this.names=new Array(v.numberOfGlyphs);for(var w=0;w<v.numberOfGlyphs;w++)v.glyphNameIndex[w]<we.length?this.names[w]=we[v.glyphNameIndex[w]]:this.names[w]=v.names[v.glyphNameIndex[w]-we.length];break;case 2.5:this.names=new Array(v.numberOfGlyphs);for(var T=0;T<v.numberOfGlyphs;T++)this.names[T]=we[T+v.glyphNameIndex[T]];break;case 3:default:this.names=[]}}je.prototype.charToGlyphIndex=function(v){var w=v.codePointAt(0),T=this.font.glyphs;if(T){for(var k=0;k<T.length;k+=1)for(var j=T.get(k),P=0;P<j.unicodes.length;P+=1)if(j.unicodes[P]===w)return k}return null},Pe.prototype.charToGlyphIndex=function(v){return this.cmap.glyphIndexMap[v.codePointAt(0)]||0},ge.prototype.charToGlyphIndex=function(v){var w=v.codePointAt(0),T=this.encoding[w];return this.charset.indexOf(T)},qe.prototype.nameToGlyphIndex=function(v){return this.names.indexOf(v)},qe.prototype.glyphIndexToName=function(v){return this.names[v]};var ot={line:function(v,w,T,k,j){v.beginPath(),v.moveTo(w,T),v.lineTo(k,j),v.stroke()}};function mt(v){this.bindConstructorValues(v)}function wt(v,w,T){Object.defineProperty(v,w,{get:function(){return v.path,v[T]},set:function(k){v[T]=k},enumerable:!0,configurable:!0})}function gt(v,w){if(this.font=v,this.glyphs={},Array.isArray(w))for(var T=0;T<w.length;T++)this.glyphs[T]=w[T];this.length=w&&w.length||0}mt.prototype.bindConstructorValues=function(v){var w,T;this.index=v.index||0,this.name=v.name||null,this.unicode=v.unicode||void 0,this.unicodes=v.unicodes||v.unicode!==void 0?[v.unicode]:[],v.xMin&&(this.xMin=v.xMin),v.yMin&&(this.yMin=v.yMin),v.xMax&&(this.xMax=v.xMax),v.yMax&&(this.yMax=v.yMax),v.advanceWidth&&(this.advanceWidth=v.advanceWidth),Object.defineProperty(this,"path",(w=v.path,T=w||new ne,{configurable:!0,get:function(){return typeof T=="function"&&(T=T()),T},set:function(k){T=k}}))},mt.prototype.addUnicode=function(v){this.unicodes.length===0&&(this.unicode=v),this.unicodes.push(v)},mt.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},mt.prototype.getPath=function(v,w,T,k,j){var P,F;v=v!==void 0?v:0,w=w!==void 0?w:0,T=T!==void 0?T:72;var W=(k=k||{}).xScale,Z=k.yScale;if(k.hinting&&j&&j.hinting&&(F=this.path&&j.hinting.exec(this,T)),F)P=j.hinting.getCommands(F),v=Math.round(v),w=Math.round(w),W=Z=1;else{P=this.path.commands;var ie=1/this.path.unitsPerEm*T;W===void 0&&(W=ie),Z===void 0&&(Z=ie)}for(var me=new ne,be=0;be<P.length;be+=1){var te=P[be];te.type==="M"?me.moveTo(v+te.x*W,w+-te.y*Z):te.type==="L"?me.lineTo(v+te.x*W,w+-te.y*Z):te.type==="Q"?me.quadraticCurveTo(v+te.x1*W,w+-te.y1*Z,v+te.x*W,w+-te.y*Z):te.type==="C"?me.curveTo(v+te.x1*W,w+-te.y1*Z,v+te.x2*W,w+-te.y2*Z,v+te.x*W,w+-te.y*Z):te.type==="Z"&&me.closePath()}return me},mt.prototype.getContours=function(){if(this.points===void 0)return[];for(var v=[],w=[],T=0;T<this.points.length;T+=1){var k=this.points[T];w.push(k),k.lastPointOfContour&&(v.push(w),w=[])}return he.argument(w.length===0,"There are still points left in the current contour."),v},mt.prototype.getMetrics=function(){for(var v=this.path.commands,w=[],T=[],k=0;k<v.length;k+=1){var j=v[k];j.type!=="Z"&&(w.push(j.x),T.push(j.y)),j.type!=="Q"&&j.type!=="C"||(w.push(j.x1),T.push(j.y1)),j.type==="C"&&(w.push(j.x2),T.push(j.y2))}var P={xMin:Math.min.apply(null,w),yMin:Math.min.apply(null,T),xMax:Math.max.apply(null,w),yMax:Math.max.apply(null,T),leftSideBearing:this.leftSideBearing};return isFinite(P.xMin)||(P.xMin=0),isFinite(P.xMax)||(P.xMax=this.advanceWidth),isFinite(P.yMin)||(P.yMin=0),isFinite(P.yMax)||(P.yMax=0),P.rightSideBearing=this.advanceWidth-P.leftSideBearing-(P.xMax-P.xMin),P},mt.prototype.draw=function(v,w,T,k,j){this.getPath(w,T,k,j).draw(v)},mt.prototype.drawPoints=function(v,w,T,k){function j(be,te,Ge,Ne){var Ae=2*Math.PI;v.beginPath();for(var Ce=0;Ce<be.length;Ce+=1)v.moveTo(te+be[Ce].x*Ne,Ge+be[Ce].y*Ne),v.arc(te+be[Ce].x*Ne,Ge+be[Ce].y*Ne,2,0,Ae,!1);v.closePath(),v.fill()}w=w!==void 0?w:0,T=T!==void 0?T:0,k=k!==void 0?k:24;for(var P=1/this.path.unitsPerEm*k,F=[],W=[],Z=this.path,ie=0;ie<Z.commands.length;ie+=1){var me=Z.commands[ie];me.x!==void 0&&F.push({x:me.x,y:-me.y}),me.x1!==void 0&&W.push({x:me.x1,y:-me.y1}),me.x2!==void 0&&W.push({x:me.x2,y:-me.y2})}v.fillStyle="blue",j(F,w,T,P),v.fillStyle="red",j(W,w,T,P)},mt.prototype.drawMetrics=function(v,w,T,k){var j;w=w!==void 0?w:0,T=T!==void 0?T:0,k=k!==void 0?k:24,j=1/this.path.unitsPerEm*k,v.lineWidth=1,v.strokeStyle="black",ot.line(v,w,-1e4,w,1e4),ot.line(v,-1e4,T,1e4,T);var P=this.xMin||0,F=this.yMin||0,W=this.xMax||0,Z=this.yMax||0,ie=this.advanceWidth||0;v.strokeStyle="blue",ot.line(v,w+P*j,-1e4,w+P*j,1e4),ot.line(v,w+W*j,-1e4,w+W*j,1e4),ot.line(v,-1e4,T+-F*j,1e4,T+-F*j),ot.line(v,-1e4,T+-Z*j,1e4,T+-Z*j),v.strokeStyle="green",ot.line(v,w+ie*j,-1e4,w+ie*j,1e4)},gt.prototype.get=function(v){return typeof this.glyphs[v]=="function"&&(this.glyphs[v]=this.glyphs[v]()),this.glyphs[v]},gt.prototype.push=function(v,w){this.glyphs[v]=w,this.length++};var vt={GlyphSet:gt,glyphLoader:function(v,w){return new mt({index:w,font:v})},ttfGlyphLoader:function(v,w,T,k,j,P){return function(){var F=new mt({index:w,font:v});return F.path=function(){T(F,k,j);var W=P(v.glyphs,F);return W.unitsPerEm=v.unitsPerEm,W},wt(F,"xMin","_xMin"),wt(F,"xMax","_xMax"),wt(F,"yMin","_yMin"),wt(F,"yMax","_yMax"),F}},cffGlyphLoader:function(v,w,T,k){return function(){var j=new mt({index:w,font:v});return j.path=function(){var P=T(v,j,k);return P.unitsPerEm=v.unitsPerEm,P},j}}};function Nt(v,w){if(v===w)return!0;if(Array.isArray(v)&&Array.isArray(w)){if(v.length!==w.length)return!1;for(var T=0;T<v.length;T+=1)if(!Nt(v[T],w[T]))return!1;return!0}return!1}function Ls(v){return v.length<1240?107:v.length<33900?1131:32768}function wn(v,w,T){var k,j,P=[],F=[],W=B.getCard16(v,w);if(W!==0){var Z=B.getByte(v,w+2);k=w+(W+1)*Z+2;for(var ie=w+3,me=0;me<W+1;me+=1)P.push(B.getOffset(v,ie,Z)),ie+=Z;j=k+P[W]}else j=w+2;for(var be=0;be<P.length-1;be+=1){var te=B.getBytes(v,k+P[be],k+P[be+1]);T&&(te=T(te)),F.push(te)}return{objects:F,startOffset:w,endOffset:j}}function Mo(v,w){if(w===28)return v.parseByte()<<8|v.parseByte();if(w===29)return v.parseByte()<<24|v.parseByte()<<16|v.parseByte()<<8|v.parseByte();if(w===30)return function(T){for(var k="",j=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var P=T.parseByte(),F=P>>4,W=15&P;if(F==15||(k+=j[F],W==15))break;k+=j[W]}return parseFloat(k)}(v);if(32<=w&&w<=246)return w-139;if(247<=w&&w<=250)return 256*(w-247)+v.parseByte()+108;if(251<=w&&w<=254)return 256*-(w-251)-v.parseByte()-108;throw new Error("Invalid b0 "+w)}function si(v,w,T){w=w!==void 0?w:0;var k=new B.Parser(v,w),j=[],P=[];for(T=T!==void 0?T:v.length;k.relativeOffset<T;){var F=k.parseByte();F<=21?(F===12&&(F=1200+k.parseByte()),j.push([F,P]),P=[]):P.push(Mo(k,F))}return function(W){for(var Z={},ie=0;ie<W.length;ie+=1){var me=W[ie][0],be=W[ie][1],te=void 0;if(te=be.length===1?be[0]:be,Z.hasOwnProperty(me)&&!isNaN(Z[me]))throw new Error("Object "+Z+" already has key "+me);Z[me]=te}return Z}(j)}function Ns(v,w){return w=w<=390?G[w]:v[w-391]}function Ao(v,w,T){for(var k,j={},P=0;P<w.length;P+=1){var F=w[P];if(Array.isArray(F.type)){var W=[];W.length=F.type.length;for(var Z=0;Z<F.type.length;Z++)(k=v[F.op]!==void 0?v[F.op][Z]:void 0)===void 0&&(k=F.value!==void 0&&F.value[Z]!==void 0?F.value[Z]:null),F.type[Z]==="SID"&&(k=Ns(T,k)),W[Z]=k;j[F.name]=W}else(k=v[F.op])===void 0&&(k=F.value!==void 0?F.value:null),F.type==="SID"&&(k=Ns(T,k)),j[F.name]=k}return j}var Do=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],Oo=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function Io(v,w,T,k){return Ao(si(v,w,T),Oo,k)}function Ro(v,w,T,k){for(var j,P,F=[],W=0;W<T.length;W+=1){var Z=new DataView(new Uint8Array(T[W]).buffer),ie=(P=k,Ao(si(j=Z,0,j.byteLength),Do,P));ie._subrs=[],ie._subrsBias=0;var me=ie.private[0],be=ie.private[1];if(me!==0&&be!==0){var te=Io(v,be+w,me,k);if(ie._defaultWidthX=te.defaultWidthX,ie._nominalWidthX=te.nominalWidthX,te.subrs!==0){var Ge=wn(v,be+te.subrs+w);ie._subrs=Ge.objects,ie._subrsBias=Ls(ie._subrs)}ie._privateDict=te}F.push(ie)}return F}function Aa(v,w,T){var k,j,P,F,W,Z,ie,me,be=new ne,te=[],Ge=0,Ne=!1,Ae=!1,Ce=0,Me=0;if(v.isCIDFont){var et=v.tables.cff.topDict._fdSelect[w.index],Je=v.tables.cff.topDict._fdArray[et];W=Je._subrs,Z=Je._subrsBias,ie=Je._defaultWidthX,me=Je._nominalWidthX}else W=v.tables.cff.topDict._subrs,Z=v.tables.cff.topDict._subrsBias,ie=v.tables.cff.topDict._defaultWidthX,me=v.tables.cff.topDict._nominalWidthX;var Ct=ie;function lt(mr,Ot){Ae&&be.closePath(),be.moveTo(mr,Ot),Ae=!0}function dt(){te.length%2==0||Ne||(Ct=te.shift()+me),Ge+=te.length>>1,te.length=0,Ne=!0}return function mr(Ot){for(var At,It,Wt,Gt,ar,$t,zt,lr,Yt,Sr,Ft,jr,Jt=0;Jt<Ot.length;){var rr=Ot[Jt];switch(Jt+=1,rr){case 1:case 3:dt();break;case 4:1<te.length&&!Ne&&(Ct=te.shift()+me,Ne=!0),Me+=te.pop(),lt(Ce,Me);break;case 5:for(;0<te.length;)Ce+=te.shift(),Me+=te.shift(),be.lineTo(Ce,Me);break;case 6:for(;0<te.length&&(Ce+=te.shift(),be.lineTo(Ce,Me),te.length!==0);)Me+=te.shift(),be.lineTo(Ce,Me);break;case 7:for(;0<te.length&&(Me+=te.shift(),be.lineTo(Ce,Me),te.length!==0);)Ce+=te.shift(),be.lineTo(Ce,Me);break;case 8:for(;0<te.length;)k=Ce+te.shift(),j=Me+te.shift(),P=k+te.shift(),F=j+te.shift(),Ce=P+te.shift(),Me=F+te.shift(),be.curveTo(k,j,P,F,Ce,Me);break;case 10:ar=te.pop()+Z,($t=W[ar])&&mr($t);break;case 11:return;case 12:switch(rr=Ot[Jt],Jt+=1,rr){case 35:k=Ce+te.shift(),j=Me+te.shift(),P=k+te.shift(),F=j+te.shift(),zt=P+te.shift(),lr=F+te.shift(),Yt=zt+te.shift(),Sr=lr+te.shift(),Ft=Yt+te.shift(),jr=Sr+te.shift(),Ce=Ft+te.shift(),Me=jr+te.shift(),te.shift(),be.curveTo(k,j,P,F,zt,lr),be.curveTo(Yt,Sr,Ft,jr,Ce,Me);break;case 34:k=Ce+te.shift(),j=Me,P=k+te.shift(),F=j+te.shift(),zt=P+te.shift(),lr=F,Yt=zt+te.shift(),Sr=F,Ft=Yt+te.shift(),jr=Me,Ce=Ft+te.shift(),be.curveTo(k,j,P,F,zt,lr),be.curveTo(Yt,Sr,Ft,jr,Ce,Me);break;case 36:k=Ce+te.shift(),j=Me+te.shift(),P=k+te.shift(),F=j+te.shift(),zt=P+te.shift(),lr=F,Yt=zt+te.shift(),Sr=F,Ft=Yt+te.shift(),jr=Sr+te.shift(),Ce=Ft+te.shift(),be.curveTo(k,j,P,F,zt,lr),be.curveTo(Yt,Sr,Ft,jr,Ce,Me);break;case 37:k=Ce+te.shift(),j=Me+te.shift(),P=k+te.shift(),F=j+te.shift(),zt=P+te.shift(),lr=F+te.shift(),Yt=zt+te.shift(),Sr=lr+te.shift(),Ft=Yt+te.shift(),jr=Sr+te.shift(),Math.abs(Ft-Ce)>Math.abs(jr-Me)?Ce=Ft+te.shift():Me=jr+te.shift(),be.curveTo(k,j,P,F,zt,lr),be.curveTo(Yt,Sr,Ft,jr,Ce,Me);break;default:console.log("Glyph "+w.index+": unknown operator 1200"+rr),te.length=0}break;case 14:0<te.length&&!Ne&&(Ct=te.shift()+me,Ne=!0),Ae&&(be.closePath(),Ae=!1);break;case 18:dt();break;case 19:case 20:dt(),Jt+=Ge+7>>3;break;case 21:2<te.length&&!Ne&&(Ct=te.shift()+me,Ne=!0),Me+=te.pop(),lt(Ce+=te.pop(),Me);break;case 22:1<te.length&&!Ne&&(Ct=te.shift()+me,Ne=!0),lt(Ce+=te.pop(),Me);break;case 23:dt();break;case 24:for(;2<te.length;)k=Ce+te.shift(),j=Me+te.shift(),P=k+te.shift(),F=j+te.shift(),Ce=P+te.shift(),Me=F+te.shift(),be.curveTo(k,j,P,F,Ce,Me);Ce+=te.shift(),Me+=te.shift(),be.lineTo(Ce,Me);break;case 25:for(;6<te.length;)Ce+=te.shift(),Me+=te.shift(),be.lineTo(Ce,Me);k=Ce+te.shift(),j=Me+te.shift(),P=k+te.shift(),F=j+te.shift(),Ce=P+te.shift(),Me=F+te.shift(),be.curveTo(k,j,P,F,Ce,Me);break;case 26:for(te.length%2&&(Ce+=te.shift());0<te.length;)k=Ce,j=Me+te.shift(),P=k+te.shift(),F=j+te.shift(),Ce=P,Me=F+te.shift(),be.curveTo(k,j,P,F,Ce,Me);break;case 27:for(te.length%2&&(Me+=te.shift());0<te.length;)k=Ce+te.shift(),j=Me,P=k+te.shift(),F=j+te.shift(),Ce=P+te.shift(),Me=F,be.curveTo(k,j,P,F,Ce,Me);break;case 28:At=Ot[Jt],It=Ot[Jt+1],te.push((At<<24|It<<16)>>16),Jt+=2;break;case 29:ar=te.pop()+v.gsubrsBias,($t=v.gsubrs[ar])&&mr($t);break;case 30:for(;0<te.length&&(k=Ce,j=Me+te.shift(),P=k+te.shift(),F=j+te.shift(),Ce=P+te.shift(),Me=F+(te.length===1?te.shift():0),be.curveTo(k,j,P,F,Ce,Me),te.length!==0);)k=Ce+te.shift(),j=Me,P=k+te.shift(),F=j+te.shift(),Me=F+te.shift(),Ce=P+(te.length===1?te.shift():0),be.curveTo(k,j,P,F,Ce,Me);break;case 31:for(;0<te.length&&(k=Ce+te.shift(),j=Me,P=k+te.shift(),F=j+te.shift(),Me=F+te.shift(),Ce=P+(te.length===1?te.shift():0),be.curveTo(k,j,P,F,Ce,Me),te.length!==0);)k=Ce,j=Me+te.shift(),P=k+te.shift(),F=j+te.shift(),Ce=P+te.shift(),Me=F+(te.length===1?te.shift():0),be.curveTo(k,j,P,F,Ce,Me);break;default:rr<32?console.log("Glyph "+w.index+": unknown operator "+rr):rr<247?te.push(rr-139):rr<251?(At=Ot[Jt],Jt+=1,te.push(256*(rr-247)+At+108)):rr<255?(At=Ot[Jt],Jt+=1,te.push(256*-(rr-251)-At-108)):(At=Ot[Jt],It=Ot[Jt+1],Wt=Ot[Jt+2],Gt=Ot[Jt+3],Jt+=4,te.push((At<<24|It<<16|Wt<<8|Gt)/65536))}}}(T),w.advanceWidth=Ct,be}function Pi(v,w){var T,k=G.indexOf(v);return 0<=k&&(T=k),0<=(k=w.indexOf(v))?T=k+G.length:(T=G.length+w.length,w.push(v)),T}function Li(v,w,T){for(var k={},j=0;j<v.length;j+=1){var P=v[j],F=w[P.name];F===void 0||Nt(F,P.value)||(P.type==="SID"&&(F=Pi(F,T)),k[P.op]={name:P.name,type:P.type,value:F})}return k}function ue(v,w){var T=new Ve.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return T.dict=Li(Do,v,w),T}function Re(v){var w=new Ve.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return w.topDicts=[{name:"topDict_0",type:"TABLE",value:v}],w}function We(v){var w=[],T=v.path;w.push({name:"width",type:"NUMBER",value:v.advanceWidth});for(var k=0,j=0,P=0;P<T.commands.length;P+=1){var F=void 0,W=void 0,Z=T.commands[P];if(Z.type==="Q"&&(Z={type:"C",x:Z.x,y:Z.y,x1:1/3*k+2/3*Z.x1,y1:1/3*j+2/3*Z.y1,x2:1/3*Z.x+2/3*Z.x1,y2:1/3*Z.y+2/3*Z.y1}),Z.type==="M")F=Math.round(Z.x-k),W=Math.round(Z.y-j),w.push({name:"dx",type:"NUMBER",value:F}),w.push({name:"dy",type:"NUMBER",value:W}),w.push({name:"rmoveto",type:"OP",value:21}),k=Math.round(Z.x),j=Math.round(Z.y);else if(Z.type==="L")F=Math.round(Z.x-k),W=Math.round(Z.y-j),w.push({name:"dx",type:"NUMBER",value:F}),w.push({name:"dy",type:"NUMBER",value:W}),w.push({name:"rlineto",type:"OP",value:5}),k=Math.round(Z.x),j=Math.round(Z.y);else if(Z.type==="C"){var ie=Math.round(Z.x1-k),me=Math.round(Z.y1-j),be=Math.round(Z.x2-Z.x1),te=Math.round(Z.y2-Z.y1);F=Math.round(Z.x-Z.x2),W=Math.round(Z.y-Z.y2),w.push({name:"dx1",type:"NUMBER",value:ie}),w.push({name:"dy1",type:"NUMBER",value:me}),w.push({name:"dx2",type:"NUMBER",value:be}),w.push({name:"dy2",type:"NUMBER",value:te}),w.push({name:"dx",type:"NUMBER",value:F}),w.push({name:"dy",type:"NUMBER",value:W}),w.push({name:"rrcurveto",type:"OP",value:8}),k=Math.round(Z.x),j=Math.round(Z.y)}}return w.push({name:"endchar",type:"OP",value:14}),w}var Le={parse:function(v,w,T){T.tables.cff={};var k,j,P,F=wn(v,(k=v,j=w,(P={}).formatMajor=B.getCard8(k,j),P.formatMinor=B.getCard8(k,j+1),P.size=B.getCard8(k,j+2),P.offsetSize=B.getCard8(k,j+3),P.startOffset=j,P.endOffset=j+4,P).endOffset,B.bytesToString),W=wn(v,F.endOffset),Z=wn(v,W.endOffset,B.bytesToString),ie=wn(v,Z.endOffset);T.gsubrs=ie.objects,T.gsubrsBias=Ls(T.gsubrs);var me=Ro(v,w,W.objects,Z.objects);if(me.length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+me.length);var be=me[0];if((T.tables.cff.topDict=be)._privateDict&&(T.defaultWidthX=be._privateDict.defaultWidthX,T.nominalWidthX=be._privateDict.nominalWidthX),be.ros[0]!==void 0&&be.ros[1]!==void 0&&(T.isCIDFont=!0),T.isCIDFont){var te=be.fdArray,Ge=be.fdSelect;if(te===0||Ge===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");var Ne=Ro(v,w,wn(v,te+=w).objects,Z.objects);be._fdArray=Ne,Ge+=w,be._fdSelect=function(dt,mr,Ot,At){var It,Wt=[],Gt=new B.Parser(dt,mr),ar=Gt.parseCard8();if(ar===0)for(var $t=0;$t<Ot;$t++){if(At<=(It=Gt.parseCard8()))throw new Error("CFF table CID Font FDSelect has bad FD index value "+It+" (FD count "+At+")");Wt.push(It)}else{if(ar!==3)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+ar);var zt,lr=Gt.parseCard16(),Yt=Gt.parseCard16();if(Yt!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+Yt);for(var Sr=0;Sr<lr;Sr++){if(It=Gt.parseCard8(),zt=Gt.parseCard16(),At<=It)throw new Error("CFF table CID Font FDSelect has bad FD index value "+It+" (FD count "+At+")");if(Ot<zt)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+zt);for(;Yt<zt;Yt++)Wt.push(It);Yt=zt}if(zt!==Ot)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+zt)}return Wt}(v,Ge,T.numGlyphs,Ne.length)}var Ae=w+be.private[1],Ce=Io(v,Ae,be.private[0],Z.objects);if(T.defaultWidthX=Ce.defaultWidthX,T.nominalWidthX=Ce.nominalWidthX,Ce.subrs!==0){var Me=wn(v,Ae+Ce.subrs);T.subrs=Me.objects,T.subrsBias=Ls(T.subrs)}else T.subrs=[],T.subrsBias=0;var et=wn(v,w+be.charStrings);T.nGlyphs=et.objects.length;var Je=function(dt,mr,Ot,At){var It,Wt,Gt=new B.Parser(dt,mr);--Ot;var ar=[".notdef"],$t=Gt.parseCard8();if($t===0)for(var zt=0;zt<Ot;zt+=1)It=Gt.parseSID(),ar.push(Ns(At,It));else if($t===1)for(;ar.length<=Ot;){It=Gt.parseSID(),Wt=Gt.parseCard8();for(var lr=0;lr<=Wt;lr+=1)ar.push(Ns(At,It)),It+=1}else{if($t!==2)throw new Error("Unknown charset format "+$t);for(;ar.length<=Ot;){It=Gt.parseSID(),Wt=Gt.parseCard16();for(var Yt=0;Yt<=Wt;Yt+=1)ar.push(Ns(At,It)),It+=1}}return ar}(v,w+be.charset,T.nGlyphs,Z.objects);be.encoding===0?T.cffEncoding=new ge(Y,Je):be.encoding===1?T.cffEncoding=new ge(le,Je):T.cffEncoding=function(dt,mr,Ot){var At,It={},Wt=new B.Parser(dt,mr),Gt=Wt.parseCard8();if(Gt===0)for(var ar=Wt.parseCard8(),$t=0;$t<ar;$t+=1)It[At=Wt.parseCard8()]=$t;else{if(Gt!==1)throw new Error("Unknown encoding format "+Gt);var zt=Wt.parseCard8();At=1;for(var lr=0;lr<zt;lr+=1)for(var Yt=Wt.parseCard8(),Sr=Wt.parseCard8(),Ft=Yt;Ft<=Yt+Sr;Ft+=1)It[Ft]=At,At+=1}return new ge(It,Ot)}(v,w+be.encoding,Je),T.encoding=T.encoding||T.cffEncoding,T.glyphs=new vt.GlyphSet(T);for(var Ct=0;Ct<T.nGlyphs;Ct+=1){var lt=et.objects[Ct];T.glyphs.push(Ct,vt.cffGlyphLoader(T,Ct,Aa,lt))}},make:function(v,w){for(var T,k=new Ve.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),j=1/w.unitsPerEm,P={version:w.version,fullName:w.fullName,familyName:w.familyName,weight:w.weightName,fontBBox:w.fontBBox||[0,0,0,0],fontMatrix:[j,0,0,j,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},F=[],W=1;W<v.length;W+=1)T=v.get(W),F.push(T.name);var Z=[];k.header=new Ve.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),k.nameIndex=function(Ne){var Ae=new Ve.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);Ae.names=[];for(var Ce=0;Ce<Ne.length;Ce+=1)Ae.names.push({name:"name_"+Ce,type:"NAME",value:Ne[Ce]});return Ae}([w.postScriptName]);var ie,me,be,te=ue(P,Z);k.topDictIndex=Re(te),k.globalSubrIndex=new Ve.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),k.charsets=function(Ne,Ae){for(var Ce=new Ve.Record("Charsets",[{name:"format",type:"Card8",value:0}]),Me=0;Me<Ne.length;Me+=1){var et=Pi(Ne[Me],Ae);Ce.fields.push({name:"glyph_"+Me,type:"SID",value:et})}return Ce}(F,Z),k.charStringsIndex=function(Ne){for(var Ae=new Ve.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),Ce=0;Ce<Ne.length;Ce+=1){var Me=Ne.get(Ce),et=We(Me);Ae.charStrings.push({name:Me.name,type:"CHARSTRING",value:et})}return Ae}(v),k.privateDict=(ie={},me=Z,(be=new Ve.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}])).dict=Li(Oo,ie,me),be),k.stringIndex=function(Ne){var Ae=new Ve.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);Ae.strings=[];for(var Ce=0;Ce<Ne.length;Ce+=1)Ae.strings.push({name:"string_"+Ce,type:"STRING",value:Ne[Ce]});return Ae}(Z);var Ge=k.header.sizeOf()+k.nameIndex.sizeOf()+k.topDictIndex.sizeOf()+k.stringIndex.sizeOf()+k.globalSubrIndex.sizeOf();return P.charset=Ge,P.encoding=0,P.charStrings=P.charset+k.charsets.sizeOf(),P.private[1]=P.charStrings+k.charStringsIndex.sizeOf(),te=ue(P,Z),k.topDictIndex=Re(te),k}},Ze={parse:function(v,w){var T={},k=new B.Parser(v,w);return T.version=k.parseVersion(),T.fontRevision=Math.round(1e3*k.parseFixed())/1e3,T.checkSumAdjustment=k.parseULong(),T.magicNumber=k.parseULong(),he.argument(T.magicNumber===1594834165,"Font header has wrong magic number."),T.flags=k.parseUShort(),T.unitsPerEm=k.parseUShort(),T.created=k.parseLongDateTime(),T.modified=k.parseLongDateTime(),T.xMin=k.parseShort(),T.yMin=k.parseShort(),T.xMax=k.parseShort(),T.yMax=k.parseShort(),T.macStyle=k.parseUShort(),T.lowestRecPPEM=k.parseUShort(),T.fontDirectionHint=k.parseShort(),T.indexToLocFormat=k.parseShort(),T.glyphDataFormat=k.parseShort(),T},make:function(v){var w=Math.round(new Date().getTime()/1e3)+2082844800,T=w;return v.createdTimestamp&&(T=v.createdTimestamp+2082844800),new Ve.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:T},{name:"modified",type:"LONGDATETIME",value:w},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],v)}},Ie={parse:function(v,w){var T={},k=new B.Parser(v,w);return T.version=k.parseVersion(),T.ascender=k.parseShort(),T.descender=k.parseShort(),T.lineGap=k.parseShort(),T.advanceWidthMax=k.parseUShort(),T.minLeftSideBearing=k.parseShort(),T.minRightSideBearing=k.parseShort(),T.xMaxExtent=k.parseShort(),T.caretSlopeRise=k.parseShort(),T.caretSlopeRun=k.parseShort(),T.caretOffset=k.parseShort(),k.relativeOffset+=8,T.metricDataFormat=k.parseShort(),T.numberOfHMetrics=k.parseUShort(),T},make:function(v){return new Ve.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],v)}},Dt={parse:function(v,w,T,k,j){for(var P,F,W=new B.Parser(v,w),Z=0;Z<k;Z+=1){Z<T&&(P=W.parseUShort(),F=W.parseShort());var ie=j.get(Z);ie.advanceWidth=P,ie.leftSideBearing=F}},make:function(v){for(var w=new Ve.Table("hmtx",[]),T=0;T<v.length;T+=1){var k=v.get(T),j=k.advanceWidth||0,P=k.leftSideBearing||0;w.fields.push({name:"advanceWidth_"+T,type:"USHORT",value:j}),w.fields.push({name:"leftSideBearing_"+T,type:"SHORT",value:P})}return w}},Vt={make:function(v){for(var w=new Ve.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:v.length}]),T="",k=12+4*v.length,j=0;j<v.length;++j){var P=T.indexOf(v[j]);P<0&&(P=T.length,T+=v[j]),w.fields.push({name:"offset "+j,type:"USHORT",value:k+P}),w.fields.push({name:"length "+j,type:"USHORT",value:v[j].length})}return w.fields.push({name:"stringPool",type:"CHARARRAY",value:T}),w},parse:function(v,w){var T=new B.Parser(v,w),k=T.parseULong();he.argument(k===1,"Unsupported ltag table version."),T.skip("uLong",1);for(var j=T.parseULong(),P=[],F=0;F<j;F++){for(var W="",Z=w+T.parseUShort(),ie=T.parseUShort(),me=Z;me<Z+ie;++me)W+=String.fromCharCode(v.getInt8(me));P.push(W)}return P}},qt={parse:function(v,w){var T={},k=new B.Parser(v,w);return T.version=k.parseVersion(),T.numGlyphs=k.parseUShort(),T.version===1&&(T.maxPoints=k.parseUShort(),T.maxContours=k.parseUShort(),T.maxCompositePoints=k.parseUShort(),T.maxCompositeContours=k.parseUShort(),T.maxZones=k.parseUShort(),T.maxTwilightPoints=k.parseUShort(),T.maxStorage=k.parseUShort(),T.maxFunctionDefs=k.parseUShort(),T.maxInstructionDefs=k.parseUShort(),T.maxStackElements=k.parseUShort(),T.maxSizeOfInstructions=k.parseUShort(),T.maxComponentElements=k.parseUShort(),T.maxComponentDepth=k.parseUShort()),T},make:function(v){return new Ve.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:v}])}},kt=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],Ke={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},or={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},ht={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function wu(v,w,T){switch(v){case 0:if(w===65535)return"und";if(T)return T[w];break;case 1:return Ke[w];case 3:return ht[w]}}var Po="utf-16",xu={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},Su={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function Tu(v,w,T){switch(v){case 0:return Po;case 1:return Su[T]||xu[w];case 3:if(w===1||w===10)return Po}}function Da(v){var w={};for(var T in v)w[v[T]]=parseInt(T);return w}function Oa(v,w,T,k,j,P){return new Ve.Record("NameRecord",[{name:"platformID",type:"USHORT",value:v},{name:"encodingID",type:"USHORT",value:w},{name:"languageID",type:"USHORT",value:T},{name:"nameID",type:"USHORT",value:k},{name:"length",type:"USHORT",value:j},{name:"offset",type:"USHORT",value:P}])}function M1(v,w){var T=function(P,F){var W=P.length,Z=F.length-W+1;e:for(var ie=0;ie<Z;ie++)for(;ie<Z;ie++){for(var me=0;me<W;me++)if(F[ie+me]!==P[me])continue e;return ie}return-1}(v,w);if(T<0){T=w.length;for(var k=0,j=v.length;k<j;++k)w.push(v[k])}return T}var A1={parse:function(v,w,T){for(var k={},j=new B.Parser(v,w),P=j.parseUShort(),F=j.parseUShort(),W=j.offset+j.parseUShort(),Z=0;Z<F;Z++){var ie=j.parseUShort(),me=j.parseUShort(),be=j.parseUShort(),te=j.parseUShort(),Ge=kt[te]||te,Ne=j.parseUShort(),Ae=j.parseUShort(),Ce=wu(ie,be,T),Me=Tu(ie,me,be);if(Me!==void 0&&Ce!==void 0){var et=void 0;if(et=Me===Po?Te.UTF16(v,W+Ae,Ne):Te.MACSTRING(v,W+Ae,Ne,Me)){var Je=k[Ge];Je===void 0&&(Je=k[Ge]={}),Je[Ce]=et}}}return P===1&&j.parseUShort(),k},make:function(v,w){var T,k=[],j={},P=Da(kt);for(var F in v){var W=P[F];if(W===void 0&&(W=F),T=parseInt(W),isNaN(T))throw new Error('Name table entry "'+F+'" does not exist, see nameTableNames for complete list.');j[T]=v[F],k.push(T)}for(var Z=Da(Ke),ie=Da(ht),me=[],be=[],te=0;te<k.length;te++){var Ge=j[T=k[te]];for(var Ne in Ge){var Ae=Ge[Ne],Ce=1,Me=Z[Ne],et=or[Me],Je=Tu(Ce,et,Me),Ct=fe.MACSTRING(Ae,Je);Ct===void 0&&(Ce=0,(Me=w.indexOf(Ne))<0&&(Me=w.length,w.push(Ne)),et=4,Ct=fe.UTF16(Ae));var lt=M1(Ct,be);me.push(Oa(Ce,et,Me,T,Ct.length,lt));var dt=ie[Ne];if(dt!==void 0){var mr=fe.UTF16(Ae),Ot=M1(mr,be);me.push(Oa(3,1,dt,T,mr.length,Ot))}}}me.sort(function(Wt,Gt){return Wt.platformID-Gt.platformID||Wt.encodingID-Gt.encodingID||Wt.languageID-Gt.languageID||Wt.nameID-Gt.nameID});for(var At=new Ve.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:me.length},{name:"stringOffset",type:"USHORT",value:6+12*me.length}]),It=0;It<me.length;It++)At.fields.push({name:"record_"+It,type:"RECORD",value:me[It]});return At.fields.push({name:"strings",type:"LITERAL",value:be}),At}},wm=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],xm={parse:function(v,w){var T={},k=new B.Parser(v,w);T.version=k.parseUShort(),T.xAvgCharWidth=k.parseShort(),T.usWeightClass=k.parseUShort(),T.usWidthClass=k.parseUShort(),T.fsType=k.parseUShort(),T.ySubscriptXSize=k.parseShort(),T.ySubscriptYSize=k.parseShort(),T.ySubscriptXOffset=k.parseShort(),T.ySubscriptYOffset=k.parseShort(),T.ySuperscriptXSize=k.parseShort(),T.ySuperscriptYSize=k.parseShort(),T.ySuperscriptXOffset=k.parseShort(),T.ySuperscriptYOffset=k.parseShort(),T.yStrikeoutSize=k.parseShort(),T.yStrikeoutPosition=k.parseShort(),T.sFamilyClass=k.parseShort(),T.panose=[];for(var j=0;j<10;j++)T.panose[j]=k.parseByte();return T.ulUnicodeRange1=k.parseULong(),T.ulUnicodeRange2=k.parseULong(),T.ulUnicodeRange3=k.parseULong(),T.ulUnicodeRange4=k.parseULong(),T.achVendID=String.fromCharCode(k.parseByte(),k.parseByte(),k.parseByte(),k.parseByte()),T.fsSelection=k.parseUShort(),T.usFirstCharIndex=k.parseUShort(),T.usLastCharIndex=k.parseUShort(),T.sTypoAscender=k.parseShort(),T.sTypoDescender=k.parseShort(),T.sTypoLineGap=k.parseShort(),T.usWinAscent=k.parseUShort(),T.usWinDescent=k.parseUShort(),1<=T.version&&(T.ulCodePageRange1=k.parseULong(),T.ulCodePageRange2=k.parseULong()),2<=T.version&&(T.sxHeight=k.parseShort(),T.sCapHeight=k.parseShort(),T.usDefaultChar=k.parseUShort(),T.usBreakChar=k.parseUShort(),T.usMaxContent=k.parseUShort()),T},make:function(v){return new Ve.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],v)},unicodeRanges:wm,getUnicodeRange:function(v){for(var w=0;w<wm.length;w+=1){var T=wm[w];if(v>=T.begin&&v<T.end)return w}return-1}},D1={parse:function(v,w){var T={},k=new B.Parser(v,w);switch(T.version=k.parseVersion(),T.italicAngle=k.parseFixed(),T.underlinePosition=k.parseShort(),T.underlineThickness=k.parseShort(),T.isFixedPitch=k.parseULong(),T.minMemType42=k.parseULong(),T.maxMemType42=k.parseULong(),T.minMemType1=k.parseULong(),T.maxMemType1=k.parseULong(),T.version){case 1:T.names=we.slice();break;case 2:T.numberOfGlyphs=k.parseUShort(),T.glyphNameIndex=new Array(T.numberOfGlyphs);for(var j=0;j<T.numberOfGlyphs;j++)T.glyphNameIndex[j]=k.parseUShort();T.names=[];for(var P=0;P<T.numberOfGlyphs;P++)if(T.glyphNameIndex[P]>=we.length){var F=k.parseChar();T.names.push(k.parseString(F))}break;case 2.5:T.numberOfGlyphs=k.parseUShort(),T.offset=new Array(T.numberOfGlyphs);for(var W=0;W<T.numberOfGlyphs;W++)T.offset[W]=k.parseChar()}return T},make:function(){return new Ve.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}},bs=new Array(9);bs[1]=function(){var v=this.offset+this.relativeOffset,w=this.parseUShort();return w===1?{substFormat:1,coverage:this.parsePointer(ve.coverage),deltaGlyphId:this.parseUShort()}:w===2?{substFormat:2,coverage:this.parsePointer(ve.coverage),substitute:this.parseOffset16List()}:void he.assert(!1,"0x"+v.toString(16)+": lookup type 1 format must be 1 or 2.")},bs[2]=function(){var v=this.parseUShort();return he.argument(v===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:v,coverage:this.parsePointer(ve.coverage),sequences:this.parseListOfLists()}},bs[3]=function(){var v=this.parseUShort();return he.argument(v===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:v,coverage:this.parsePointer(ve.coverage),alternateSets:this.parseListOfLists()}},bs[4]=function(){var v=this.parseUShort();return he.argument(v===1,"GSUB ligature table identifier-format must be 1"),{substFormat:v,coverage:this.parsePointer(ve.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}};var Ia={sequenceIndex:ve.uShort,lookupListIndex:ve.uShort};bs[5]=function(){var v=this.offset+this.relativeOffset,w=this.parseUShort();if(w===1)return{substFormat:w,coverage:this.parsePointer(ve.coverage),ruleSets:this.parseListOfLists(function(){var j=this.parseUShort(),P=this.parseUShort();return{input:this.parseUShortList(j-1),lookupRecords:this.parseRecordList(P,Ia)}})};if(w===2)return{substFormat:w,coverage:this.parsePointer(ve.coverage),classDef:this.parsePointer(ve.classDef),classSets:this.parseListOfLists(function(){var j=this.parseUShort(),P=this.parseUShort();return{classes:this.parseUShortList(j-1),lookupRecords:this.parseRecordList(P,Ia)}})};if(w===3){var T=this.parseUShort(),k=this.parseUShort();return{substFormat:w,coverages:this.parseList(T,ve.pointer(ve.coverage)),lookupRecords:this.parseRecordList(k,Ia)}}he.assert(!1,"0x"+v.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},bs[6]=function(){var v=this.offset+this.relativeOffset,w=this.parseUShort();return w===1?{substFormat:1,coverage:this.parsePointer(ve.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Ia)}})}:w===2?{substFormat:2,coverage:this.parsePointer(ve.coverage),backtrackClassDef:this.parsePointer(ve.classDef),inputClassDef:this.parsePointer(ve.classDef),lookaheadClassDef:this.parsePointer(ve.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Ia)}})}:w===3?{substFormat:3,backtrackCoverage:this.parseList(ve.pointer(ve.coverage)),inputCoverage:this.parseList(ve.pointer(ve.coverage)),lookaheadCoverage:this.parseList(ve.pointer(ve.coverage)),lookupRecords:this.parseRecordList(Ia)}:void he.assert(!1,"0x"+v.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},bs[7]=function(){var v=this.parseUShort();he.argument(v===1,"GSUB Extension Substitution subtable identifier-format must be 1");var w=this.parseUShort(),T=new ve(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:w,extension:bs[w].call(T)}},bs[8]=function(){var v=this.parseUShort();return he.argument(v===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:v,coverage:this.parsePointer(ve.coverage),backtrackCoverage:this.parseList(ve.pointer(ve.coverage)),lookaheadCoverage:this.parseList(ve.pointer(ve.coverage)),substitutes:this.parseUShortList()}};var jh=new Array(9);jh[1]=function(v){return v.substFormat===1?new Ve.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Ve.Coverage(v.coverage)},{name:"deltaGlyphID",type:"USHORT",value:v.deltaGlyphId}]):new Ve.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new Ve.Coverage(v.coverage)}].concat(Ve.ushortList("substitute",v.substitute)))},jh[3]=function(v){return he.assert(v.substFormat===1,"Lookup type 3 substFormat must be 1."),new Ve.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Ve.Coverage(v.coverage)}].concat(Ve.tableList("altSet",v.alternateSets,function(w){return new Ve.Table("alternateSetTable",Ve.ushortList("alternate",w))})))},jh[4]=function(v){return he.assert(v.substFormat===1,"Lookup type 4 substFormat must be 1."),new Ve.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Ve.Coverage(v.coverage)}].concat(Ve.tableList("ligSet",v.ligatureSets,function(w){return new Ve.Table("ligatureSetTable",Ve.tableList("ligature",w,function(T){return new Ve.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:T.ligGlyph}].concat(Ve.ushortList("component",T.components,T.components.length+1)))}))})))};var O1={parse:function(v,w){var T=new ve(v,w=w||0),k=T.parseVersion(1);return he.argument(k===1||k===1.1,"Unsupported GSUB table version."),k===1?{version:k,scripts:T.parseScriptList(),features:T.parseFeatureList(),lookups:T.parseLookupList(bs)}:{version:k,scripts:T.parseScriptList(),features:T.parseFeatureList(),lookups:T.parseLookupList(bs),variations:T.parseFeatureVariationsList()}},make:function(v){return new Ve.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Ve.ScriptList(v.scripts)},{name:"features",type:"TABLE",value:new Ve.FeatureList(v.features)},{name:"lookups",type:"TABLE",value:new Ve.LookupList(v.lookups,jh)}])}},I1={parse:function(v,w){var T=new B.Parser(v,w),k=T.parseULong();he.argument(k===1,"Unsupported META table version."),T.parseULong(),T.parseULong();for(var j=T.parseULong(),P={},F=0;F<j;F++){var W=T.parseTag(),Z=T.parseULong(),ie=T.parseULong(),me=Te.UTF8(v,w+Z,ie);P[W]=me}return P},make:function(v){var w=Object.keys(v).length,T="",k=16+12*w,j=new Ve.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:k},{name:"numTags",type:"ULONG",value:w}]);for(var P in v){var F=T.length;T+=v[P],j.fields.push({name:"tag "+P,type:"TAG",value:P}),j.fields.push({name:"offset "+P,type:"ULONG",value:k+F}),j.fields.push({name:"length "+P,type:"ULONG",value:v[P].length})}return j.fields.push({name:"stringPool",type:"CHARARRAY",value:T}),j}};function R1(v){return Math.log(v)/Math.log(2)|0}function Sm(v){for(;v.length%4!=0;)v.push(0);for(var w=0,T=0;T<v.length;T+=4)w+=(v[T]<<24)+(v[T+1]<<16)+(v[T+2]<<8)+v[T+3];return w%=Math.pow(2,32)}function P1(v,w,T,k){return new Ve.Record("Table Record",[{name:"tag",type:"TAG",value:v!==void 0?v:""},{name:"checkSum",type:"ULONG",value:w!==void 0?w:0},{name:"offset",type:"ULONG",value:T!==void 0?T:0},{name:"length",type:"ULONG",value:k!==void 0?k:0}])}function L1(v){var w=new Ve.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);w.tables=v,w.numTables=v.length;var T=Math.pow(2,R1(w.numTables));w.searchRange=16*T,w.entrySelector=R1(T),w.rangeShift=16*w.numTables-w.searchRange;for(var k=[],j=[],P=w.sizeOf()+P1().sizeOf()*w.numTables;P%4!=0;)P+=1,j.push({name:"padding",type:"BYTE",value:0});for(var F=0;F<v.length;F+=1){var W=v[F];he.argument(W.tableName.length===4,"Table name"+W.tableName+" is invalid.");var Z=W.sizeOf(),ie=P1(W.tableName,Sm(W.encode()),P,Z);for(k.push({name:ie.tag+" Table Record",type:"RECORD",value:ie}),j.push({name:W.tableName+" table",type:"RECORD",value:W}),P+=Z,he.argument(!isNaN(P),"Something went wrong calculating the offset.");P%4!=0;)P+=1,j.push({name:"padding",type:"BYTE",value:0})}return k.sort(function(me,be){return me.value.tag>be.value.tag?1:-1}),w.fields=w.fields.concat(k),w.fields=w.fields.concat(j),w}function N1(v,w,T){for(var k=0;k<w.length;k+=1){var j=v.charToGlyphIndex(w[k]);if(0<j)return v.glyphs.get(j).getMetrics()}return T}var wC={make:L1,fontToTable:function(v){for(var w,T=[],k=[],j=[],P=[],F=[],W=[],Z=[],ie=0,me=0,be=0,te=0,Ge=0,Ne=0;Ne<v.glyphs.length;Ne+=1){var Ae=v.glyphs.get(Ne),Ce=0|Ae.unicode;if(isNaN(Ae.advanceWidth))throw new Error("Glyph "+Ae.name+" ("+Ne+"): advanceWidth is not a number.");(Ce<w||w===void 0)&&0<Ce&&(w=Ce),ie<Ce&&(ie=Ce);var Me=xm.getUnicodeRange(Ce);if(Me<32)me|=1<<Me;else if(Me<64)be|=1<<Me-32;else if(Me<96)te|=1<<Me-64;else{if(!(Me<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");Ge|=1<<Me-96}if(Ae.name!==".notdef"){var et=Ae.getMetrics();T.push(et.xMin),k.push(et.yMin),j.push(et.xMax),P.push(et.yMax),W.push(et.leftSideBearing),Z.push(et.rightSideBearing),F.push(Ae.advanceWidth)}}var Je={xMin:Math.min.apply(null,T),yMin:Math.min.apply(null,k),xMax:Math.max.apply(null,j),yMax:Math.max.apply(null,P),advanceWidthMax:Math.max.apply(null,F),advanceWidthAvg:function(La){for(var p_=0,Dm=0;Dm<La.length;Dm+=1)p_+=La[Dm];return p_/La.length}(F),minLeftSideBearing:Math.min.apply(null,W),maxLeftSideBearing:Math.max.apply(null,W),minRightSideBearing:Math.min.apply(null,Z)};Je.ascender=v.ascender,Je.descender=v.descender;var Ct=Ze.make({flags:3,unitsPerEm:v.unitsPerEm,xMin:Je.xMin,yMin:Je.yMin,xMax:Je.xMax,yMax:Je.yMax,lowestRecPPEM:3,createdTimestamp:v.createdTimestamp}),lt=Ie.make({ascender:Je.ascender,descender:Je.descender,advanceWidthMax:Je.advanceWidthMax,minLeftSideBearing:Je.minLeftSideBearing,minRightSideBearing:Je.minRightSideBearing,xMaxExtent:Je.maxLeftSideBearing+(Je.xMax-Je.xMin),numberOfHMetrics:v.glyphs.length}),dt=qt.make(v.glyphs.length),mr=xm.make({xAvgCharWidth:Math.round(Je.advanceWidthAvg),usWeightClass:v.tables.os2.usWeightClass,usWidthClass:v.tables.os2.usWidthClass,usFirstCharIndex:w,usLastCharIndex:ie,ulUnicodeRange1:me,ulUnicodeRange2:be,ulUnicodeRange3:te,ulUnicodeRange4:Ge,fsSelection:v.tables.os2.fsSelection,sTypoAscender:Je.ascender,sTypoDescender:Je.descender,sTypoLineGap:0,usWinAscent:Je.yMax,usWinDescent:Math.abs(Je.yMin),ulCodePageRange1:1,sxHeight:N1(v,"xyvw",{yMax:Math.round(Je.ascender/2)}).yMax,sCapHeight:N1(v,"HIKLEFJMNTZBDPRAGOQSUVWXY",Je).yMax,usDefaultChar:v.hasChar(" ")?32:0,usBreakChar:v.hasChar(" ")?32:0}),Ot=Dt.make(v.glyphs),At=X.make(v.glyphs),It=v.getEnglishName("fontFamily"),Wt=v.getEnglishName("fontSubfamily"),Gt=It+" "+Wt,ar=v.getEnglishName("postScriptName");ar=ar||It.replace(/\s/g,"")+"-"+Wt;var $t={};for(var zt in v.names)$t[zt]=v.names[zt];$t.uniqueID||($t.uniqueID={en:v.getEnglishName("manufacturer")+":"+Gt}),$t.postScriptName||($t.postScriptName={en:ar}),$t.preferredFamily||($t.preferredFamily=v.names.fontFamily),$t.preferredSubfamily||($t.preferredSubfamily=v.names.fontSubfamily);var lr=[],Yt=A1.make($t,lr),Sr=0<lr.length?Vt.make(lr):void 0,Ft=D1.make(),jr=Le.make(v.glyphs,{version:v.getEnglishName("version"),fullName:Gt,familyName:It,weightName:Wt,postScriptName:ar,unitsPerEm:v.unitsPerEm,fontBBox:[0,Je.yMin,Je.ascender,Je.advanceWidthMax]}),Jt=v.metas&&0<Object.keys(v.metas).length?I1.make(v.metas):void 0,rr=[Ct,lt,dt,mr,Yt,At,Ft,jr,Ot];Sr&&rr.push(Sr),v.tables.gsub&&rr.push(O1.make(v.tables.gsub)),Jt&&rr.push(Jt);for(var Vs=L1(rr),Pa=Sm(Vs.encode()),No=Vs.fields,is=!1,Fo=0;Fo<No.length;Fo+=1)if(No[Fo].name==="head table"){No[Fo].value.checkSumAdjustment=2981146554-Pa,is=!0;break}if(!is)throw new Error("Could not find head table with checkSum to adjust.");return Vs},computeCheckSum:Sm};function Tm(v,w){for(var T=0,k=v.length-1;T<=k;){var j=T+k>>>1,P=v[j].tag;if(P===w)return j;P<w?T=1+j:k=j-1}return-T-1}function F1(v,w){for(var T=0,k=v.length-1;T<=k;){var j=T+k>>>1,P=v[j];if(P===w)return j;P<w?T=1+j:k=j-1}return-T-1}function U1(v,w){for(var T,k=0,j=v.length-1;k<=j;){var P=k+j>>>1,F=(T=v[P]).start;if(F===w)return T;F<w?k=1+P:j=P-1}if(0<k)return w>(T=v[k-1]).end?0:T}function Mh(v,w){this.font=v,this.tableName=w}function Ah(v){Mh.call(this,v,"gpos")}function Fs(v){Mh.call(this,v,"gsub")}function xC(v,w){var T=v.length;if(T!==w.length)return!1;for(var k=0;k<T;k++)if(v[k]!==w[k])return!1;return!0}function V1(v,w,T){for(var k=v.subtables,j=0;j<k.length;j++){var P=k[j];if(P.substFormat===w)return P}if(T)return k.push(T),T}function B1(v){for(var w=new ArrayBuffer(v.length),T=new Uint8Array(w),k=0;k<v.length;++k)T[k]=v[k];return w}function Ra(v,w){if(!v)throw w}function G1(v,w,T,k,j){var P;return P=0<(w&k)?(P=v.parseByte(),(w&j)==0&&(P=-P),T+P):0<(w&j)?T:T+v.parseShort()}function SC(v,w,T){var k,j,P=new B.Parser(w,T);if(v.numberOfContours=P.parseShort(),v._xMin=P.parseShort(),v._yMin=P.parseShort(),v._xMax=P.parseShort(),v._yMax=P.parseShort(),0<v.numberOfContours){for(var F=v.endPointIndices=[],W=0;W<v.numberOfContours;W+=1)F.push(P.parseUShort());v.instructionLength=P.parseUShort(),v.instructions=[];for(var Z=0;Z<v.instructionLength;Z+=1)v.instructions.push(P.parseByte());var ie=F[F.length-1]+1;k=[];for(var me=0;me<ie;me+=1)if(j=P.parseByte(),k.push(j),0<(8&j))for(var be=P.parseByte(),te=0;te<be;te+=1)k.push(j),me+=1;if(he.argument(k.length===ie,"Bad flags."),0<F.length){var Ge,Ne=[];if(0<ie){for(var Ae=0;Ae<ie;Ae+=1)j=k[Ae],(Ge={}).onCurve=!!(1&j),Ge.lastPointOfContour=0<=F.indexOf(Ae),Ne.push(Ge);for(var Ce=0,Me=0;Me<ie;Me+=1)j=k[Me],(Ge=Ne[Me]).x=G1(P,j,Ce,2,16),Ce=Ge.x;for(var et=0,Je=0;Je<ie;Je+=1)j=k[Je],(Ge=Ne[Je]).y=G1(P,j,et,4,32),et=Ge.y}v.points=Ne}else v.points=[]}else if(v.numberOfContours===0)v.points=[];else{v.isComposite=!0,v.points=[],v.components=[];for(var Ct=!0;Ct;){k=P.parseUShort();var lt={glyphIndex:P.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};0<(1&k)?0<(2&k)?(lt.dx=P.parseShort(),lt.dy=P.parseShort()):lt.matchedPoints=[P.parseUShort(),P.parseUShort()]:0<(2&k)?(lt.dx=P.parseChar(),lt.dy=P.parseChar()):lt.matchedPoints=[P.parseByte(),P.parseByte()],0<(8&k)?lt.xScale=lt.yScale=P.parseF2Dot14():0<(64&k)?(lt.xScale=P.parseF2Dot14(),lt.yScale=P.parseF2Dot14()):0<(128&k)&&(lt.xScale=P.parseF2Dot14(),lt.scale01=P.parseF2Dot14(),lt.scale10=P.parseF2Dot14(),lt.yScale=P.parseF2Dot14()),v.components.push(lt),Ct=!!(32&k)}if(256&k){v.instructionLength=P.parseUShort(),v.instructions=[];for(var dt=0;dt<v.instructionLength;dt+=1)v.instructions.push(P.parseByte())}}}function Em(v,w){for(var T=[],k=0;k<v.length;k+=1){var j=v[k],P={x:w.xScale*j.x+w.scale01*j.y+w.dx,y:w.scale10*j.x+w.yScale*j.y+w.dy,onCurve:j.onCurve,lastPointOfContour:j.lastPointOfContour};T.push(P)}return T}function z1(v){var w=new ne;if(!v)return w;for(var T=function(be){for(var te=[],Ge=[],Ne=0;Ne<be.length;Ne+=1){var Ae=be[Ne];Ge.push(Ae),Ae.lastPointOfContour&&(te.push(Ge),Ge=[])}return he.argument(Ge.length===0,"There are still points left in the current contour."),te}(v),k=0;k<T.length;++k){var j=T[k],P=null,F=j[j.length-1],W=j[0];if(F.onCurve)w.moveTo(F.x,F.y);else if(W.onCurve)w.moveTo(W.x,W.y);else{var Z={x:.5*(F.x+W.x),y:.5*(F.y+W.y)};w.moveTo(Z.x,Z.y)}for(var ie=0;ie<j.length;++ie)if(P=F,F=W,W=j[(ie+1)%j.length],F.onCurve)w.lineTo(F.x,F.y);else{var me=W;P.onCurve||(.5*(F.x+P.x),.5*(F.y+P.y)),W.onCurve||(me={x:.5*(F.x+W.x),y:.5*(F.y+W.y)}),w.quadraticCurveTo(F.x,F.y,me.x,me.y)}w.closePath()}return w}function TC(v,w){if(w.isComposite)for(var T=0;T<w.components.length;T+=1){var k=w.components[T],j=v.get(k.glyphIndex);if(j.getPath(),j.points){var P=void 0;if(k.matchedPoints===void 0)P=Em(j.points,k);else{if(k.matchedPoints[0]>w.points.length-1||k.matchedPoints[1]>j.points.length-1)throw Error("Matched points out of range in "+w.name);var F=w.points[k.matchedPoints[0]],W=j.points[k.matchedPoints[1]],Z={xScale:k.xScale,scale01:k.scale01,scale10:k.scale10,yScale:k.yScale,dx:0,dy:0};W=Em([W],Z)[0],Z.dx=F.x-W.x,Z.dy=F.y-W.y,P=Em(j.points,Z)}w.points=w.points.concat(P)}}return z1(w.points)}(Ah.prototype=Mh.prototype={searchTag:Tm,binSearch:F1,getTable:function(v){var w=this.font.tables[this.tableName];return!w&&v&&(w=this.font.tables[this.tableName]=this.createDefaultTable()),w},getScriptNames:function(){var v=this.getTable();return v?v.scripts.map(function(w){return w.tag}):[]},getDefaultScriptName:function(){var v=this.getTable();if(v){for(var w=!1,T=0;T<v.scripts.length;T++){var k=v.scripts[T].tag;if(k==="DFLT")return k;k==="latn"&&(w=!0)}return w?"latn":void 0}},getScriptTable:function(v,w){var T=this.getTable(w);if(T){v=v||"DFLT";var k=T.scripts,j=Tm(T.scripts,v);if(0<=j)return k[j].script;if(w){var P={tag:v,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};return k.splice(-1-j,0,P),P.script}}},getLangSysTable:function(v,w,T){var k=this.getScriptTable(v,T);if(k){if(!w||w==="dflt"||w==="DFLT")return k.defaultLangSys;var j=Tm(k.langSysRecords,w);if(0<=j)return k.langSysRecords[j].langSys;if(T){var P={tag:w,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};return k.langSysRecords.splice(-1-j,0,P),P.langSys}}},getFeatureTable:function(v,w,T,k){var j=this.getLangSysTable(v,w,k);if(j){for(var P,F=j.featureIndexes,W=this.font.tables[this.tableName].features,Z=0;Z<F.length;Z++)if((P=W[F[Z]]).tag===T)return P.feature;if(k){var ie=W.length;return he.assert(ie===0||T>=W[ie-1].tag,"Features must be added in alphabetical order."),P={tag:T,feature:{params:0,lookupListIndexes:[]}},W.push(P),F.push(ie),P.feature}}},getLookupTables:function(v,w,T,k,j){var P=this.getFeatureTable(v,w,T,j),F=[];if(P){for(var W,Z=P.lookupListIndexes,ie=this.font.tables[this.tableName].lookups,me=0;me<Z.length;me++)(W=ie[Z[me]]).lookupType===k&&F.push(W);if(F.length===0&&j){W={lookupType:k,lookupFlag:0,subtables:[],markFilteringSet:void 0};var be=ie.length;return ie.push(W),Z.push(be),[W]}}return F},getGlyphClass:function(v,w){switch(v.format){case 1:return v.startGlyph<=w&&w<v.startGlyph+v.classes.length?v.classes[w-v.startGlyph]:0;case 2:var T=U1(v.ranges,w);return T?T.classId:0}},getCoverageIndex:function(v,w){switch(v.format){case 1:var T=F1(v.glyphs,w);return 0<=T?T:-1;case 2:var k=U1(v.ranges,w);return k?k.index+w-k.start:-1}},expandCoverage:function(v){if(v.format===1)return v.glyphs;for(var w=[],T=v.ranges,k=0;k<T.length;k++)for(var j=T[k],P=j.start,F=j.end,W=P;W<=F;W++)w.push(W);return w}}).init=function(){var v=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(v)},Ah.prototype.getKerningValue=function(v,w,T){for(var k=0;k<v.length;k++)for(var j=v[k].subtables,P=0;P<j.length;P++){var F=j[P],W=this.getCoverageIndex(F.coverage,w);if(!(W<0))switch(F.posFormat){case 1:for(var Z=F.pairSets[W],ie=0;ie<Z.length;ie++){var me=Z[ie];if(me.secondGlyph===T)return me.value1&&me.value1.xAdvance||0}break;case 2:var be=this.getGlyphClass(F.classDef1,w),te=this.getGlyphClass(F.classDef2,T),Ge=F.classRecords[be][te];return Ge.value1&&Ge.value1.xAdvance||0}}return 0},Ah.prototype.getKerningTables=function(v,w){if(this.font.tables.gpos)return this.getLookupTables(v,w,"kern",2)},(Fs.prototype=Mh.prototype).createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},Fs.prototype.getSingle=function(v,w,T){for(var k=[],j=this.getLookupTables(w,T,v,1),P=0;P<j.length;P++)for(var F=j[P].subtables,W=0;W<F.length;W++){var Z=F[W],ie=this.expandCoverage(Z.coverage),me=void 0;if(Z.substFormat===1){var be=Z.deltaGlyphId;for(me=0;me<ie.length;me++){var te=ie[me];k.push({sub:te,by:te+be})}}else{var Ge=Z.substitute;for(me=0;me<ie.length;me++)k.push({sub:ie[me],by:Ge[me]})}}return k},Fs.prototype.getAlternates=function(v,w,T){for(var k=[],j=this.getLookupTables(w,T,v,3),P=0;P<j.length;P++)for(var F=j[P].subtables,W=0;W<F.length;W++)for(var Z=F[W],ie=this.expandCoverage(Z.coverage),me=Z.alternateSets,be=0;be<ie.length;be++)k.push({sub:ie[be],by:me[be]});return k},Fs.prototype.getLigatures=function(v,w,T){for(var k=[],j=this.getLookupTables(w,T,v,4),P=0;P<j.length;P++)for(var F=j[P].subtables,W=0;W<F.length;W++)for(var Z=F[W],ie=this.expandCoverage(Z.coverage),me=Z.ligatureSets,be=0;be<ie.length;be++)for(var te=ie[be],Ge=me[be],Ne=0;Ne<Ge.length;Ne++){var Ae=Ge[Ne];k.push({sub:[te].concat(Ae.components),by:Ae.ligGlyph})}return k},Fs.prototype.addSingle=function(v,w,T,k){var j=V1(this.getLookupTables(T,k,v,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});he.assert(j.coverage.format===1,"Ligature: unable to modify coverage table format "+j.coverage.format);var P=w.sub,F=this.binSearch(j.coverage.glyphs,P);F<0&&(F=-1-F,j.coverage.glyphs.splice(F,0,P),j.substitute.splice(F,0,0)),j.substitute[F]=w.by},Fs.prototype.addAlternate=function(v,w,T,k){var j=V1(this.getLookupTables(T,k,v,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});he.assert(j.coverage.format===1,"Ligature: unable to modify coverage table format "+j.coverage.format);var P=w.sub,F=this.binSearch(j.coverage.glyphs,P);F<0&&(F=-1-F,j.coverage.glyphs.splice(F,0,P),j.alternateSets.splice(F,0,0)),j.alternateSets[F]=w.by},Fs.prototype.addLigature=function(v,w,T,k){var j=this.getLookupTables(T,k,v,4,!0)[0],P=j.subtables[0];P||(P={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]},j.subtables[0]=P),he.assert(P.coverage.format===1,"Ligature: unable to modify coverage table format "+P.coverage.format);var F=w.sub[0],W=w.sub.slice(1),Z={ligGlyph:w.by,components:W},ie=this.binSearch(P.coverage.glyphs,F);if(0<=ie){for(var me=P.ligatureSets[ie],be=0;be<me.length;be++)if(xC(me[be].components,W))return;me.push(Z)}else ie=-1-ie,P.coverage.glyphs.splice(ie,0,F),P.ligatureSets.splice(ie,0,[Z])},Fs.prototype.getFeature=function(v,w,T){if(/ss\d\d/.test(v))return this.getSingle(v,w,T);switch(v){case"aalt":case"salt":return this.getSingle(v,w,T).concat(this.getAlternates(v,w,T));case"dlig":case"liga":case"rlig":return this.getLigatures(v,w,T)}},Fs.prototype.add=function(v,w,T,k){if(/ss\d\d/.test(v))return this.addSingle(v,w,T,k);switch(v){case"aalt":case"salt":return typeof w.by=="number"?this.addSingle(v,w,T,k):this.addAlternate(v,w,T,k);case"dlig":case"liga":case"rlig":return this.addLigature(v,w,T,k)}};var q1,Lo,W1,km,$1={getPath:z1,parse:function(v,w,T,k){for(var j=new vt.GlyphSet(k),P=0;P<T.length-1;P+=1){var F=T[P];F!==T[P+1]?j.push(P,vt.ttfGlyphLoader(k,P,SC,v,w+F,TC)):j.push(P,vt.glyphLoader(k,P))}return j}};function H1(v){this.font=v,this.getCommands=function(w){return $1.getPath(w).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function EC(v){return v}function X1(v){return Math.sign(v)*Math.round(Math.abs(v))}function kC(v){return Math.sign(v)*Math.round(Math.abs(2*v))/2}function CC(v){return Math.sign(v)*(Math.round(Math.abs(v)+.5)-.5)}function jC(v){return Math.sign(v)*Math.ceil(Math.abs(v))}function MC(v){return Math.sign(v)*Math.floor(Math.abs(v))}function Y1(v){var w=this.srPeriod,T=this.srPhase,k=1;return v<0&&(v=-v,k=-1),v+=this.srThreshold-T,v=Math.trunc(v/w)*w,(v+=T)<0?T*k:v*k}var Us={x:1,y:0,axis:"x",distance:function(v,w,T,k){return(T?v.xo:v.x)-(k?w.xo:w.x)},interpolate:function(v,w,T,k){var j,P,F,W,Z,ie,me;if(!k||k===this)return j=v.xo-w.xo,P=v.xo-T.xo,Z=w.x-w.xo,ie=T.x-T.xo,(me=(F=Math.abs(j))+(W=Math.abs(P)))===0?void(v.x=v.xo+(Z+ie)/2):void(v.x=v.xo+(Z*W+ie*F)/me);j=k.distance(v,w,!0,!0),P=k.distance(v,T,!0,!0),Z=k.distance(w,w,!1,!0),ie=k.distance(T,T,!1,!0),(me=(F=Math.abs(j))+(W=Math.abs(P)))!==0?Us.setRelative(v,v,(Z*W+ie*F)/me,k,!0):Us.setRelative(v,v,(Z+ie)/2,k,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(v,w,T,k,j){if(k&&k!==this){var P=j?w.xo:w.x,F=j?w.yo:w.y,W=P+T*k.x,Z=F+T*k.y;v.x=W+(v.y-Z)/k.normalSlope}else v.x=(j?w.xo:w.x)+T},slope:0,touch:function(v){v.xTouched=!0},touched:function(v){return v.xTouched},untouch:function(v){v.xTouched=!1}},ii={x:0,y:1,axis:"y",distance:function(v,w,T,k){return(T?v.yo:v.y)-(k?w.yo:w.y)},interpolate:function(v,w,T,k){var j,P,F,W,Z,ie,me;if(!k||k===this)return j=v.yo-w.yo,P=v.yo-T.yo,Z=w.y-w.yo,ie=T.y-T.yo,(me=(F=Math.abs(j))+(W=Math.abs(P)))===0?void(v.y=v.yo+(Z+ie)/2):void(v.y=v.yo+(Z*W+ie*F)/me);j=k.distance(v,w,!0,!0),P=k.distance(v,T,!0,!0),Z=k.distance(w,w,!1,!0),ie=k.distance(T,T,!1,!0),(me=(F=Math.abs(j))+(W=Math.abs(P)))!==0?ii.setRelative(v,v,(Z*W+ie*F)/me,k,!0):ii.setRelative(v,v,(Z+ie)/2,k,!0)},normalSlope:0,setRelative:function(v,w,T,k,j){if(k&&k!==this){var P=j?w.xo:w.x,F=j?w.yo:w.y,W=P+T*k.x,Z=F+T*k.y;v.y=Z+k.normalSlope*(v.x-W)}else v.y=(j?w.yo:w.y)+T},slope:Number.POSITIVE_INFINITY,touch:function(v){v.yTouched=!0},touched:function(v){return v.yTouched},untouch:function(v){v.yTouched=!1}};function Eu(v,w){this.x=v,this.y=w,this.axis=void 0,this.slope=w/v,this.normalSlope=-v/w,Object.freeze(this)}function ku(v,w){var T=Math.sqrt(v*v+w*w);return w/=T,(v/=T)===1&&w===0?Us:v===0&&w===1?ii:new Eu(v,w)}function oi(v,w,T,k){this.x=this.xo=Math.round(64*v)/64,this.y=this.yo=Math.round(64*w)/64,this.lastPointOfContour=T,this.onCurve=k,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(Us),Object.freeze(ii),Eu.prototype.distance=function(v,w,T,k){return this.x*Us.distance(v,w,T,k)+this.y*ii.distance(v,w,T,k)},Eu.prototype.interpolate=function(v,w,T,k){var j,P,F,W,Z,ie,me;F=k.distance(v,w,!0,!0),W=k.distance(v,T,!0,!0),j=k.distance(w,w,!1,!0),P=k.distance(T,T,!1,!0),(me=(Z=Math.abs(F))+(ie=Math.abs(W)))!==0?this.setRelative(v,v,(j*ie+P*Z)/me,k,!0):this.setRelative(v,v,(j+P)/2,k,!0)},Eu.prototype.setRelative=function(v,w,T,k,j){k=k||this;var P=j?w.xo:w.x,F=j?w.yo:w.y,W=P+T*k.x,Z=F+T*k.y,ie=k.normalSlope,me=this.slope,be=v.x,te=v.y;v.x=(me*be-ie*W+Z-te)/(me-ie),v.y=me*(v.x-be)+te},Eu.prototype.touch=function(v){v.xTouched=!0,v.yTouched=!0},oi.prototype.nextTouched=function(v){for(var w=this.nextPointOnContour;!v.touched(w)&&w!==this;)w=w.nextPointOnContour;return w},oi.prototype.prevTouched=function(v){for(var w=this.prevPointOnContour;!v.touched(w)&&w!==this;)w=w.prevPointOnContour;return w};var Cu=Object.freeze(new oi(0,0)),AC={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function Ni(v,w){switch(this.env=v,this.stack=[],this.prog=w,v){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=Us,this.round=X1}}function Dh(v){for(var w=v.tZone=new Array(v.gZone.length),T=0;T<w.length;T++)w[T]=new oi(0,0)}function Q1(v,w){var T,k=v.prog,j=v.ip,P=1;do if((T=k[++j])===88)P++;else if(T===89)P--;else if(T===64)j+=k[j+1]+1;else if(T===65)j+=2*k[j+1]+1;else if(176<=T&&T<=183)j+=T-176+1;else if(184<=T&&T<=191)j+=2*(T-184+1);else if(w&&P===1&&T===27)break;while(0<P);v.ip=j}function K1(v,w){d.DEBUG&&console.log(w.step,"SVTCA["+v.axis+"]"),w.fv=w.pv=w.dpv=v}function Z1(v,w){d.DEBUG&&console.log(w.step,"SPVTCA["+v.axis+"]"),w.pv=w.dpv=v}function J1(v,w){d.DEBUG&&console.log(w.step,"SFVTCA["+v.axis+"]"),w.fv=v}function e_(v,w){var T,k,j=w.stack,P=j.pop(),F=j.pop(),W=w.z2[P],Z=w.z1[F];d.DEBUG&&console.log("SPVTL["+v+"]",P,F),k=v?(T=W.y-Z.y,Z.x-W.x):(T=Z.x-W.x,Z.y-W.y),w.pv=w.dpv=ku(T,k)}function t_(v,w){var T,k,j=w.stack,P=j.pop(),F=j.pop(),W=w.z2[P],Z=w.z1[F];d.DEBUG&&console.log("SFVTL["+v+"]",P,F),k=v?(T=W.y-Z.y,Z.x-W.x):(T=Z.x-W.x,Z.y-W.y),w.fv=ku(T,k)}function Cm(v){d.DEBUG&&console.log(v.step,"POP[]"),v.stack.pop()}function r_(v,w){var T=w.stack.pop(),k=w.z0[T],j=w.fv,P=w.pv;d.DEBUG&&console.log(w.step,"MDAP["+v+"]",T);var F=P.distance(k,Cu);v&&(F=w.round(F)),j.setRelative(k,Cu,F,P),j.touch(k),w.rp0=w.rp1=T}function n_(v,w){var T,k,j,P=w.z2,F=P.length-2;d.DEBUG&&console.log(w.step,"IUP["+v.axis+"]");for(var W=0;W<F;W++)T=P[W],v.touched(T)||(k=T.prevTouched(v))!==T&&(k===(j=T.nextTouched(v))&&v.setRelative(T,T,v.distance(k,k,!1,!0),v,!0),v.interpolate(T,k,j,v))}function s_(v,w){for(var T=w.stack,k=v?w.rp1:w.rp2,j=(v?w.z0:w.z1)[k],P=w.fv,F=w.pv,W=w.loop,Z=w.z2;W--;){var ie=T.pop(),me=Z[ie],be=F.distance(j,j,!1,!0);P.setRelative(me,me,be,F),P.touch(me),d.DEBUG&&console.log(w.step,(1<w.loop?"loop "+(w.loop-W)+": ":"")+"SHP["+(v?"rp1":"rp2")+"]",ie)}w.loop=1}function i_(v,w){var T=w.stack,k=v?w.rp1:w.rp2,j=(v?w.z0:w.z1)[k],P=w.fv,F=w.pv,W=T.pop(),Z=w.z2[w.contours[W]],ie=Z;d.DEBUG&&console.log(w.step,"SHC["+v+"]",W);for(var me=F.distance(j,j,!1,!0);ie!==j&&P.setRelative(ie,ie,me,F),(ie=ie.nextPointOnContour)!==Z;);}function o_(v,w){var T,k,j=w.stack,P=v?w.rp1:w.rp2,F=(v?w.z0:w.z1)[P],W=w.fv,Z=w.pv,ie=j.pop();switch(d.DEBUG&&console.log(w.step,"SHZ["+v+"]",ie),ie){case 0:T=w.tZone;break;case 1:T=w.gZone;break;default:throw new Error("Invalid zone")}for(var me=Z.distance(F,F,!1,!0),be=T.length-2,te=0;te<be;te++)k=T[te],W.setRelative(k,k,me,Z)}function a_(v,w){var T=w.stack,k=T.pop()/64,j=T.pop(),P=w.z1[j],F=w.z0[w.rp0],W=w.fv,Z=w.pv;W.setRelative(P,F,k,Z),W.touch(P),d.DEBUG&&console.log(w.step,"MSIRP["+v+"]",k,j),w.rp1=w.rp0,w.rp2=j,v&&(w.rp0=j)}function l_(v,w){var T=w.stack,k=T.pop(),j=T.pop(),P=w.z0[j],F=w.fv,W=w.pv,Z=w.cvt[k];d.DEBUG&&console.log(w.step,"MIAP["+v+"]",k,"(",Z,")",j);var ie=W.distance(P,Cu);v&&(Math.abs(ie-Z)<w.cvCutIn&&(ie=Z),ie=w.round(ie)),F.setRelative(P,Cu,ie,W),w.zp0===0&&(P.xo=P.x,P.yo=P.y),F.touch(P),w.rp0=w.rp1=j}function u_(v,w){var T=w.stack,k=T.pop(),j=w.z2[k];d.DEBUG&&console.log(w.step,"GC["+v+"]",k),T.push(64*w.dpv.distance(j,Cu,v,!1))}function c_(v,w){var T=w.stack,k=T.pop(),j=T.pop(),P=w.z1[k],F=w.z0[j],W=w.dpv.distance(F,P,v,v);d.DEBUG&&console.log(w.step,"MD["+v+"]",k,j,"->",W),w.stack.push(Math.round(64*W))}function jm(v,w){var T=w.stack,k=T.pop(),j=w.fv,P=w.pv,F=w.ppem,W=w.deltaBase+16*(v-1),Z=w.deltaShift,ie=w.z0;d.DEBUG&&console.log(w.step,"DELTAP["+v+"]",k,T);for(var me=0;me<k;me++){var be=T.pop(),te=T.pop();if(W+((240&te)>>4)===F){var Ge=(15&te)-8;0<=Ge&&Ge++,d.DEBUG&&console.log(w.step,"DELTAPFIX",be,"by",Ge*Z);var Ne=ie[be];j.setRelative(Ne,Ne,Ge*Z,P)}}}function Oh(v,w){var T=w.stack,k=T.pop();d.DEBUG&&console.log(w.step,"ROUND[]"),T.push(64*w.round(k/64))}function Mm(v,w){var T=w.stack,k=T.pop(),j=w.ppem,P=w.deltaBase+16*(v-1),F=w.deltaShift;d.DEBUG&&console.log(w.step,"DELTAC["+v+"]",k,T);for(var W=0;W<k;W++){var Z=T.pop(),ie=T.pop();if(P+((240&ie)>>4)===j){var me=(15&ie)-8;0<=me&&me++;var be=me*F;d.DEBUG&&console.log(w.step,"DELTACFIX",Z,"by",be),w.cvt[Z]+=be}}}function h_(v,w){var T,k,j=w.stack,P=j.pop(),F=j.pop(),W=w.z2[P],Z=w.z1[F];d.DEBUG&&console.log(w.step,"SDPVTL["+v+"]",P,F),k=v?(T=W.y-Z.y,Z.x-W.x):(T=Z.x-W.x,Z.y-W.y),w.dpv=ku(T,k)}function Fi(v,w){var T=w.stack,k=w.prog,j=w.ip;d.DEBUG&&console.log(w.step,"PUSHB["+v+"]");for(var P=0;P<v;P++)T.push(k[++j]);w.ip=j}function Ui(v,w){var T=w.ip,k=w.prog,j=w.stack;d.DEBUG&&console.log(w.ip,"PUSHW["+v+"]");for(var P=0;P<v;P++){var F=k[++T]<<8|k[++T];32768&F&&(F=-(1+(65535^F))),j.push(F)}w.ip=T}function st(v,w,T,k,j,P){var F,W,Z,ie,me=P.stack,be=v&&me.pop(),te=me.pop(),Ge=P.rp0,Ne=P.z0[Ge],Ae=P.z1[te],Ce=P.minDis,Me=P.fv,et=P.dpv;Z=0<=(W=F=et.distance(Ae,Ne,!0,!0))?1:-1,W=Math.abs(W),v&&(ie=P.cvt[be],k&&Math.abs(W-ie)<P.cvCutIn&&(W=ie)),T&&W<Ce&&(W=Ce),k&&(W=P.round(W)),Me.setRelative(Ae,Ne,Z*W,et),Me.touch(Ae),d.DEBUG&&console.log(P.step,(v?"MIRP[":"MDRP[")+(w?"M":"m")+(T?">":"_")+(k?"R":"_")+(j===0?"Gr":j===1?"Bl":j===2?"Wh":"")+"]",v?be+"("+P.cvt[be]+","+ie+")":"",te,"(d =",F,"->",Z*W,")"),P.rp1=P.rp0,P.rp2=te,w&&(P.rp0=te)}H1.prototype.exec=function(v,w){if(typeof w!="number")throw new Error("Point size is not a number!");if(!(2<this._errorState)){var T=this.font,k=this._prepState;if(!k||k.ppem!==w){var j=this._fpgmState;if(!j){Ni.prototype=AC,(j=this._fpgmState=new Ni("fpgm",T.tables.fpgm)).funcs=[],j.font=T,d.DEBUG&&(console.log("---EXEC FPGM---"),j.step=-1);try{Lo(j)}catch(ie){return console.log("Hinting error in FPGM:"+ie),void(this._errorState=3)}}Ni.prototype=j,(k=this._prepState=new Ni("prep",T.tables.prep)).ppem=w;var P=T.tables.cvt;if(P)for(var F=k.cvt=new Array(P.length),W=w/T.unitsPerEm,Z=0;Z<P.length;Z++)F[Z]=P[Z]*W;else k.cvt=[];d.DEBUG&&(console.log("---EXEC PREP---"),k.step=-1);try{Lo(k)}catch(ie){this._errorState<2&&console.log("Hinting error in PREP:"+ie),this._errorState=2}}if(!(1<this._errorState))try{return W1(v,k)}catch(ie){return this._errorState<1&&(console.log("Hinting error:"+ie),console.log("Note: further hinting errors are silenced")),void(this._errorState=1)}}},W1=function(v,w){var T,k,j,P=w.ppem/w.font.unitsPerEm,F=P,W=v.components;if(Ni.prototype=w,W){var Z=w.font;k=[],T=[];for(var ie=0;ie<W.length;ie++){var me=W[ie],be=Z.glyphs.get(me.glyphIndex);j=new Ni("glyf",be.instructions),d.DEBUG&&(console.log("---EXEC COMP "+ie+"---"),j.step=-1),km(be,j,P,F);for(var te=Math.round(me.dx*P),Ge=Math.round(me.dy*F),Ne=j.gZone,Ae=j.contours,Ce=0;Ce<Ne.length;Ce++){var Me=Ne[Ce];Me.xTouched=Me.yTouched=!1,Me.xo=Me.x=Me.x+te,Me.yo=Me.y=Me.y+Ge}var et=k.length;k.push.apply(k,Ne);for(var Je=0;Je<Ae.length;Je++)T.push(Ae[Je]+et)}v.instructions&&!j.inhibitGridFit&&((j=new Ni("glyf",v.instructions)).gZone=j.z0=j.z1=j.z2=k,j.contours=T,k.push(new oi(0,0),new oi(Math.round(v.advanceWidth*P),0)),d.DEBUG&&(console.log("---EXEC COMPOSITE---"),j.step=-1),Lo(j),k.length-=2)}else j=new Ni("glyf",v.instructions),d.DEBUG&&(console.log("---EXEC GLYPH---"),j.step=-1),km(v,j,P,F),k=j.gZone;return k},km=function(v,w,T,k){for(var j,P,F,W=v.points||[],Z=W.length,ie=w.gZone=w.z0=w.z1=w.z2=[],me=w.contours=[],be=0;be<Z;be++)j=W[be],ie[be]=new oi(j.x*T,j.y*k,j.lastPointOfContour,j.onCurve);for(var te=0;te<Z;te++)j=ie[te],P||(P=j,me.push(te)),j.lastPointOfContour?((j.nextPointOnContour=P).prevPointOnContour=j,P=void 0):(F=ie[te+1],(j.nextPointOnContour=F).prevPointOnContour=j);if(!w.inhibitGridFit){if(d.DEBUG){console.log("PROCESSING GLYPH",w.stack);for(var Ge=0;Ge<Z;Ge++)console.log(Ge,ie[Ge].x,ie[Ge].y)}if(ie.push(new oi(0,0),new oi(Math.round(v.advanceWidth*T),0)),Lo(w),ie.length-=2,d.DEBUG){console.log("FINISHED GLYPH",w.stack);for(var Ne=0;Ne<Z;Ne++)console.log(Ne,ie[Ne].x,ie[Ne].y)}}},Lo=function(v){var w=v.prog;if(w){var T,k=w.length;for(v.ip=0;v.ip<k;v.ip++){if(d.DEBUG&&v.step++,!(T=q1[w[v.ip]]))throw new Error("unknown instruction: 0x"+Number(w[v.ip]).toString(16));T(v)}}},q1=[K1.bind(void 0,ii),K1.bind(void 0,Us),Z1.bind(void 0,ii),Z1.bind(void 0,Us),J1.bind(void 0,ii),J1.bind(void 0,Us),e_.bind(void 0,0),e_.bind(void 0,1),t_.bind(void 0,0),t_.bind(void 0,1),function(v){var w=v.stack,T=w.pop(),k=w.pop();d.DEBUG&&console.log(v.step,"SPVFS[]",T,k),v.pv=v.dpv=ku(k,T)},function(v){var w=v.stack,T=w.pop(),k=w.pop();d.DEBUG&&console.log(v.step,"SPVFS[]",T,k),v.fv=ku(k,T)},function(v){var w=v.stack,T=v.pv;d.DEBUG&&console.log(v.step,"GPV[]"),w.push(16384*T.x),w.push(16384*T.y)},function(v){var w=v.stack,T=v.fv;d.DEBUG&&console.log(v.step,"GFV[]"),w.push(16384*T.x),w.push(16384*T.y)},function(v){v.fv=v.pv,d.DEBUG&&console.log(v.step,"SFVTPV[]")},function(v){var w=v.stack,T=w.pop(),k=w.pop(),j=w.pop(),P=w.pop(),F=w.pop(),W=v.z0,Z=v.z1,ie=W[T],me=W[k],be=Z[j],te=Z[P],Ge=v.z2[F];d.DEBUG&&console.log("ISECT[], ",T,k,j,P,F);var Ne=ie.x,Ae=ie.y,Ce=me.x,Me=me.y,et=be.x,Je=be.y,Ct=te.x,lt=te.y,dt=(Ne-Ce)*(Je-lt)-(Ae-Me)*(et-Ct),mr=Ne*Me-Ae*Ce,Ot=et*lt-Je*Ct;Ge.x=(mr*(et-Ct)-Ot*(Ne-Ce))/dt,Ge.y=(mr*(Je-lt)-Ot*(Ae-Me))/dt},function(v){v.rp0=v.stack.pop(),d.DEBUG&&console.log(v.step,"SRP0[]",v.rp0)},function(v){v.rp1=v.stack.pop(),d.DEBUG&&console.log(v.step,"SRP1[]",v.rp1)},function(v){v.rp2=v.stack.pop(),d.DEBUG&&console.log(v.step,"SRP2[]",v.rp2)},function(v){var w=v.stack.pop();switch(d.DEBUG&&console.log(v.step,"SZP0[]",w),v.zp0=w){case 0:v.tZone||Dh(v),v.z0=v.tZone;break;case 1:v.z0=v.gZone;break;default:throw new Error("Invalid zone pointer")}},function(v){var w=v.stack.pop();switch(d.DEBUG&&console.log(v.step,"SZP1[]",w),v.zp1=w){case 0:v.tZone||Dh(v),v.z1=v.tZone;break;case 1:v.z1=v.gZone;break;default:throw new Error("Invalid zone pointer")}},function(v){var w=v.stack.pop();switch(d.DEBUG&&console.log(v.step,"SZP2[]",w),v.zp2=w){case 0:v.tZone||Dh(v),v.z2=v.tZone;break;case 1:v.z2=v.gZone;break;default:throw new Error("Invalid zone pointer")}},function(v){var w=v.stack.pop();switch(d.DEBUG&&console.log(v.step,"SZPS[]",w),v.zp0=v.zp1=v.zp2=w,w){case 0:v.tZone||Dh(v),v.z0=v.z1=v.z2=v.tZone;break;case 1:v.z0=v.z1=v.z2=v.gZone;break;default:throw new Error("Invalid zone pointer")}},function(v){v.loop=v.stack.pop(),d.DEBUG&&console.log(v.step,"SLOOP[]",v.loop)},function(v){d.DEBUG&&console.log(v.step,"RTG[]"),v.round=X1},function(v){d.DEBUG&&console.log(v.step,"RTHG[]"),v.round=CC},function(v){var w=v.stack.pop();d.DEBUG&&console.log(v.step,"SMD[]",w),v.minDis=w/64},function(v){d.DEBUG&&console.log(v.step,"ELSE[]"),Q1(v,!1)},function(v){var w=v.stack.pop();d.DEBUG&&console.log(v.step,"JMPR[]",w),v.ip+=w-1},function(v){var w=v.stack.pop();d.DEBUG&&console.log(v.step,"SCVTCI[]",w),v.cvCutIn=w/64},void 0,void 0,function(v){var w=v.stack;d.DEBUG&&console.log(v.step,"DUP[]"),w.push(w[w.length-1])},Cm,function(v){d.DEBUG&&console.log(v.step,"CLEAR[]"),v.stack.length=0},function(v){var w=v.stack,T=w.pop(),k=w.pop();d.DEBUG&&console.log(v.step,"SWAP[]"),w.push(T),w.push(k)},function(v){var w=v.stack;d.DEBUG&&console.log(v.step,"DEPTH[]"),w.push(w.length)},function(v){var w=v.stack,T=w.pop();d.DEBUG&&console.log(v.step,"CINDEX[]",T),w.push(w[w.length-T])},function(v){var w=v.stack,T=w.pop();d.DEBUG&&console.log(v.step,"MINDEX[]",T),w.push(w.splice(w.length-T,1)[0])},void 0,void 0,void 0,function(v){var w=v.stack,T=w.pop(),k=w.pop();d.DEBUG&&console.log(v.step,"LOOPCALL[]",T,k);var j=v.ip,P=v.prog;v.prog=v.funcs[T];for(var F=0;F<k;F++)Lo(v),d.DEBUG&&console.log(++v.step,F+1<k?"next loopcall":"done loopcall",F);v.ip=j,v.prog=P},function(v){var w=v.stack.pop();d.DEBUG&&console.log(v.step,"CALL[]",w);var T=v.ip,k=v.prog;v.prog=v.funcs[w],Lo(v),v.ip=T,v.prog=k,d.DEBUG&&console.log(++v.step,"returning from",w)},function(v){if(v.env!=="fpgm")throw new Error("FDEF not allowed here");var w=v.stack,T=v.prog,k=v.ip,j=w.pop(),P=k;for(d.DEBUG&&console.log(v.step,"FDEF[]",j);T[++k]!==45;);v.ip=k,v.funcs[j]=T.slice(P+1,k)},void 0,r_.bind(void 0,0),r_.bind(void 0,1),n_.bind(void 0,ii),n_.bind(void 0,Us),s_.bind(void 0,0),s_.bind(void 0,1),i_.bind(void 0,0),i_.bind(void 0,1),o_.bind(void 0,0),o_.bind(void 0,1),function(v){for(var w=v.stack,T=v.loop,k=v.fv,j=w.pop()/64,P=v.z2;T--;){var F=w.pop(),W=P[F];d.DEBUG&&console.log(v.step,(1<v.loop?"loop "+(v.loop-T)+": ":"")+"SHPIX[]",F,j),k.setRelative(W,W,j),k.touch(W)}v.loop=1},function(v){for(var w=v.stack,T=v.rp1,k=v.rp2,j=v.loop,P=v.z0[T],F=v.z1[k],W=v.fv,Z=v.dpv,ie=v.z2;j--;){var me=w.pop(),be=ie[me];d.DEBUG&&console.log(v.step,(1<v.loop?"loop "+(v.loop-j)+": ":"")+"IP[]",me,T,"<->",k),W.interpolate(be,P,F,Z),W.touch(be)}v.loop=1},a_.bind(void 0,0),a_.bind(void 0,1),function(v){for(var w=v.stack,T=v.rp0,k=v.z0[T],j=v.loop,P=v.fv,F=v.pv,W=v.z1;j--;){var Z=w.pop(),ie=W[Z];d.DEBUG&&console.log(v.step,(1<v.loop?"loop "+(v.loop-j)+": ":"")+"ALIGNRP[]",Z),P.setRelative(ie,k,0,F),P.touch(ie)}v.loop=1},function(v){d.DEBUG&&console.log(v.step,"RTDG[]"),v.round=kC},l_.bind(void 0,0),l_.bind(void 0,1),function(v){var w=v.prog,T=v.ip,k=v.stack,j=w[++T];d.DEBUG&&console.log(v.step,"NPUSHB[]",j);for(var P=0;P<j;P++)k.push(w[++T]);v.ip=T},function(v){var w=v.ip,T=v.prog,k=v.stack,j=T[++w];d.DEBUG&&console.log(v.step,"NPUSHW[]",j);for(var P=0;P<j;P++){var F=T[++w]<<8|T[++w];32768&F&&(F=-(1+(65535^F))),k.push(F)}v.ip=w},function(v){var w=v.stack,T=v.store;T=T||(v.store=[]);var k=w.pop(),j=w.pop();d.DEBUG&&console.log(v.step,"WS",k,j),T[j]=k},function(v){var w=v.stack,T=v.store,k=w.pop();d.DEBUG&&console.log(v.step,"RS",k);var j=T&&T[k]||0;w.push(j)},function(v){var w=v.stack,T=w.pop(),k=w.pop();d.DEBUG&&console.log(v.step,"WCVTP",T,k),v.cvt[k]=T/64},function(v){var w=v.stack,T=w.pop();d.DEBUG&&console.log(v.step,"RCVT",T),w.push(64*v.cvt[T])},u_.bind(void 0,0),u_.bind(void 0,1),void 0,c_.bind(void 0,0),c_.bind(void 0,1),function(v){d.DEBUG&&console.log(v.step,"MPPEM[]"),v.stack.push(v.ppem)},void 0,function(v){d.DEBUG&&console.log(v.step,"FLIPON[]"),v.autoFlip=!0},void 0,void 0,function(v){var w=v.stack,T=w.pop(),k=w.pop();d.DEBUG&&console.log(v.step,"LT[]",T,k),w.push(k<T?1:0)},function(v){var w=v.stack,T=w.pop(),k=w.pop();d.DEBUG&&console.log(v.step,"LTEQ[]",T,k),w.push(k<=T?1:0)},function(v){var w=v.stack,T=w.pop(),k=w.pop();d.DEBUG&&console.log(v.step,"GT[]",T,k),w.push(T<k?1:0)},function(v){var w=v.stack,T=w.pop(),k=w.pop();d.DEBUG&&console.log(v.step,"GTEQ[]",T,k),w.push(T<=k?1:0)},function(v){var w=v.stack,T=w.pop(),k=w.pop();d.DEBUG&&console.log(v.step,"EQ[]",T,k),w.push(T===k?1:0)},function(v){var w=v.stack,T=w.pop(),k=w.pop();d.DEBUG&&console.log(v.step,"NEQ[]",T,k),w.push(T!==k?1:0)},function(v){var w=v.stack,T=w.pop();d.DEBUG&&console.log(v.step,"ODD[]",T),w.push(Math.trunc(T)%2?1:0)},function(v){var w=v.stack,T=w.pop();d.DEBUG&&console.log(v.step,"EVEN[]",T),w.push(Math.trunc(T)%2?0:1)},function(v){var w=v.stack.pop();d.DEBUG&&console.log(v.step,"IF[]",w),w||(Q1(v,!0),d.DEBUG&&console.log(v.step,"EIF[]"))},function(v){d.DEBUG&&console.log(v.step,"EIF[]")},function(v){var w=v.stack,T=w.pop(),k=w.pop();d.DEBUG&&console.log(v.step,"AND[]",T,k),w.push(T&&k?1:0)},function(v){var w=v.stack,T=w.pop(),k=w.pop();d.DEBUG&&console.log(v.step,"OR[]",T,k),w.push(T||k?1:0)},function(v){var w=v.stack,T=w.pop();d.DEBUG&&console.log(v.step,"NOT[]",T),w.push(T?0:1)},jm.bind(void 0,1),function(v){var w=v.stack.pop();d.DEBUG&&console.log(v.step,"SDB[]",w),v.deltaBase=w},function(v){var w=v.stack.pop();d.DEBUG&&console.log(v.step,"SDS[]",w),v.deltaShift=Math.pow(.5,w)},function(v){var w=v.stack,T=w.pop(),k=w.pop();d.DEBUG&&console.log(v.step,"ADD[]",T,k),w.push(k+T)},function(v){var w=v.stack,T=w.pop(),k=w.pop();d.DEBUG&&console.log(v.step,"SUB[]",T,k),w.push(k-T)},function(v){var w=v.stack,T=w.pop(),k=w.pop();d.DEBUG&&console.log(v.step,"DIV[]",T,k),w.push(64*k/T)},function(v){var w=v.stack,T=w.pop(),k=w.pop();d.DEBUG&&console.log(v.step,"MUL[]",T,k),w.push(k*T/64)},function(v){var w=v.stack,T=w.pop();d.DEBUG&&console.log(v.step,"ABS[]",T),w.push(Math.abs(T))},function(v){var w=v.stack,T=w.pop();d.DEBUG&&console.log(v.step,"NEG[]",T),w.push(-T)},function(v){var w=v.stack,T=w.pop();d.DEBUG&&console.log(v.step,"FLOOR[]",T),w.push(64*Math.floor(T/64))},function(v){var w=v.stack,T=w.pop();d.DEBUG&&console.log(v.step,"CEILING[]",T),w.push(64*Math.ceil(T/64))},Oh.bind(void 0,0),Oh.bind(void 0,1),Oh.bind(void 0,2),Oh.bind(void 0,3),void 0,void 0,void 0,void 0,function(v){var w=v.stack,T=w.pop(),k=w.pop();d.DEBUG&&console.log(v.step,"WCVTF[]",T,k),v.cvt[k]=T*v.ppem/v.font.unitsPerEm},jm.bind(void 0,2),jm.bind(void 0,3),Mm.bind(void 0,1),Mm.bind(void 0,2),Mm.bind(void 0,3),function(v){var w,T=v.stack.pop();switch(d.DEBUG&&console.log(v.step,"SROUND[]",T),v.round=Y1,192&T){case 0:w=.5;break;case 64:w=1;break;case 128:w=2;break;default:throw new Error("invalid SROUND value")}switch(v.srPeriod=w,48&T){case 0:v.srPhase=0;break;case 16:v.srPhase=.25*w;break;case 32:v.srPhase=.5*w;break;case 48:v.srPhase=.75*w;break;default:throw new Error("invalid SROUND value")}T&=15,v.srThreshold=T===0?0:(T/8-.5)*w},function(v){var w,T=v.stack.pop();switch(d.DEBUG&&console.log(v.step,"S45ROUND[]",T),v.round=Y1,192&T){case 0:w=Math.sqrt(2)/2;break;case 64:w=Math.sqrt(2);break;case 128:w=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(v.srPeriod=w,48&T){case 0:v.srPhase=0;break;case 16:v.srPhase=.25*w;break;case 32:v.srPhase=.5*w;break;case 48:v.srPhase=.75*w;break;default:throw new Error("invalid S45ROUND value")}T&=15,v.srThreshold=T===0?0:(T/8-.5)*w},void 0,void 0,function(v){d.DEBUG&&console.log(v.step,"ROFF[]"),v.round=EC},void 0,function(v){d.DEBUG&&console.log(v.step,"RUTG[]"),v.round=jC},function(v){d.DEBUG&&console.log(v.step,"RDTG[]"),v.round=MC},Cm,Cm,void 0,void 0,void 0,void 0,void 0,function(v){var w=v.stack.pop();d.DEBUG&&console.log(v.step,"SCANCTRL[]",w)},h_.bind(void 0,0),h_.bind(void 0,1),function(v){var w=v.stack,T=w.pop(),k=0;d.DEBUG&&console.log(v.step,"GETINFO[]",T),1&T&&(k=35),32&T&&(k|=4096),w.push(k)},void 0,function(v){var w=v.stack,T=w.pop(),k=w.pop(),j=w.pop();d.DEBUG&&console.log(v.step,"ROLL[]"),w.push(k),w.push(T),w.push(j)},function(v){var w=v.stack,T=w.pop(),k=w.pop();d.DEBUG&&console.log(v.step,"MAX[]",T,k),w.push(Math.max(k,T))},function(v){var w=v.stack,T=w.pop(),k=w.pop();d.DEBUG&&console.log(v.step,"MIN[]",T,k),w.push(Math.min(k,T))},function(v){var w=v.stack.pop();d.DEBUG&&console.log(v.step,"SCANTYPE[]",w)},function(v){var w=v.stack.pop(),T=v.stack.pop();switch(d.DEBUG&&console.log(v.step,"INSTCTRL[]",w,T),w){case 1:return void(v.inhibitGridFit=!!T);case 2:return void(v.ignoreCvt=!!T);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,Fi.bind(void 0,1),Fi.bind(void 0,2),Fi.bind(void 0,3),Fi.bind(void 0,4),Fi.bind(void 0,5),Fi.bind(void 0,6),Fi.bind(void 0,7),Fi.bind(void 0,8),Ui.bind(void 0,1),Ui.bind(void 0,2),Ui.bind(void 0,3),Ui.bind(void 0,4),Ui.bind(void 0,5),Ui.bind(void 0,6),Ui.bind(void 0,7),Ui.bind(void 0,8),st.bind(void 0,0,0,0,0,0),st.bind(void 0,0,0,0,0,1),st.bind(void 0,0,0,0,0,2),st.bind(void 0,0,0,0,0,3),st.bind(void 0,0,0,0,1,0),st.bind(void 0,0,0,0,1,1),st.bind(void 0,0,0,0,1,2),st.bind(void 0,0,0,0,1,3),st.bind(void 0,0,0,1,0,0),st.bind(void 0,0,0,1,0,1),st.bind(void 0,0,0,1,0,2),st.bind(void 0,0,0,1,0,3),st.bind(void 0,0,0,1,1,0),st.bind(void 0,0,0,1,1,1),st.bind(void 0,0,0,1,1,2),st.bind(void 0,0,0,1,1,3),st.bind(void 0,0,1,0,0,0),st.bind(void 0,0,1,0,0,1),st.bind(void 0,0,1,0,0,2),st.bind(void 0,0,1,0,0,3),st.bind(void 0,0,1,0,1,0),st.bind(void 0,0,1,0,1,1),st.bind(void 0,0,1,0,1,2),st.bind(void 0,0,1,0,1,3),st.bind(void 0,0,1,1,0,0),st.bind(void 0,0,1,1,0,1),st.bind(void 0,0,1,1,0,2),st.bind(void 0,0,1,1,0,3),st.bind(void 0,0,1,1,1,0),st.bind(void 0,0,1,1,1,1),st.bind(void 0,0,1,1,1,2),st.bind(void 0,0,1,1,1,3),st.bind(void 0,1,0,0,0,0),st.bind(void 0,1,0,0,0,1),st.bind(void 0,1,0,0,0,2),st.bind(void 0,1,0,0,0,3),st.bind(void 0,1,0,0,1,0),st.bind(void 0,1,0,0,1,1),st.bind(void 0,1,0,0,1,2),st.bind(void 0,1,0,0,1,3),st.bind(void 0,1,0,1,0,0),st.bind(void 0,1,0,1,0,1),st.bind(void 0,1,0,1,0,2),st.bind(void 0,1,0,1,0,3),st.bind(void 0,1,0,1,1,0),st.bind(void 0,1,0,1,1,1),st.bind(void 0,1,0,1,1,2),st.bind(void 0,1,0,1,1,3),st.bind(void 0,1,1,0,0,0),st.bind(void 0,1,1,0,0,1),st.bind(void 0,1,1,0,0,2),st.bind(void 0,1,1,0,0,3),st.bind(void 0,1,1,0,1,0),st.bind(void 0,1,1,0,1,1),st.bind(void 0,1,1,0,1,2),st.bind(void 0,1,1,0,1,3),st.bind(void 0,1,1,1,0,0),st.bind(void 0,1,1,1,0,1),st.bind(void 0,1,1,1,0,2),st.bind(void 0,1,1,1,0,3),st.bind(void 0,1,1,1,1,0),st.bind(void 0,1,1,1,1,1),st.bind(void 0,1,1,1,1,2),st.bind(void 0,1,1,1,1,3)];var DC=Array.from||function(v){return v.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[^\uD800-\uDFFF]|./g)||[]};function Zt(v){(v=v||{}).empty||(Ra(v.familyName,"When creating a new Font object, familyName is required."),Ra(v.styleName,"When creating a new Font object, styleName is required."),Ra(v.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),Ra(v.ascender,"When creating a new Font object, ascender is required."),Ra(v.descender,"When creating a new Font object, descender is required."),Ra(v.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:v.familyName||" "},fontSubfamily:{en:v.styleName||" "},fullName:{en:v.fullName||v.familyName+" "+v.styleName},postScriptName:{en:v.postScriptName||(v.familyName+v.styleName).replace(/\s/g,"")},designer:{en:v.designer||" "},designerURL:{en:v.designerURL||" "},manufacturer:{en:v.manufacturer||" "},manufacturerURL:{en:v.manufacturerURL||" "},license:{en:v.license||" "},licenseURL:{en:v.licenseURL||" "},version:{en:v.version||"Version 0.1"},description:{en:v.description||" "},copyright:{en:v.copyright||" "},trademark:{en:v.trademark||" "}},this.unitsPerEm=v.unitsPerEm||1e3,this.ascender=v.ascender,this.descender=v.descender,this.createdTimestamp=v.createdTimestamp,this.tables={os2:{usWeightClass:v.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:v.widthClass||this.usWidthClasses.MEDIUM,fsSelection:v.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new vt.GlyphSet(this,v.glyphs||[]),this.encoding=new je(this),this.position=new Ah(this),this.substitution=new Fs(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting?this._hinting:this.outlinesFormat==="truetype"?this._hinting=new H1(this):void 0}})}function d_(v,w){var T=JSON.stringify(v),k=256;for(var j in w){var P=parseInt(j);if(P&&!(P<256)){if(JSON.stringify(w[j])===T)return P;k<=P&&(k=P+1)}}return w[k]=v,k}function OC(v,w,T,k){for(var j=[{name:"nameID_"+v,type:"USHORT",value:d_(w.name,k)},{name:"flags_"+v,type:"USHORT",value:0}],P=0;P<T.length;++P){var F=T[P].tag;j.push({name:"axis_"+v+" "+F,type:"FIXED",value:w.coordinates[F]<<16})}return j}function IC(v,w,T,k){var j={},P=new B.Parser(v,w);j.name=k[P.parseUShort()]||{},P.skip("uShort",1),j.coordinates={};for(var F=0;F<T.length;++F)j.coordinates[T[F].tag]=P.parseFixed();return j}Zt.prototype.hasChar=function(v){return this.encoding.charToGlyphIndex(v)!==null},Zt.prototype.charToGlyphIndex=function(v){return this.encoding.charToGlyphIndex(v)},Zt.prototype.charToGlyph=function(v){var w=this.charToGlyphIndex(v),T=this.glyphs.get(w);return T=T||this.glyphs.get(0)},Zt.prototype.stringToGlyphs=function(v,w){w=w||this.defaultRenderOptions;for(var T=DC(v),k=[],j=0;j<T.length;j+=1){var P=T[j];k.push(this.charToGlyphIndex(P))}var F=k.length;if(w.features){var W=w.script||this.substitution.getDefaultScriptName(),Z=[];w.features.liga&&(Z=Z.concat(this.substitution.getFeature("liga",W,w.language))),w.features.rlig&&(Z=Z.concat(this.substitution.getFeature("rlig",W,w.language)));for(var ie=0;ie<F;ie+=1)for(var me=0;me<Z.length;me++){for(var be=Z[me],te=be.sub,Ge=te.length,Ne=0;Ne<Ge&&te[Ne]===k[ie+Ne];)Ne++;Ne===Ge&&(k.splice(ie,Ge,be.by),F=F-Ge+1)}}for(var Ae=new Array(F),Ce=this.glyphs.get(0),Me=0;Me<F;Me+=1)Ae[Me]=this.glyphs.get(k[Me])||Ce;return Ae},Zt.prototype.nameToGlyphIndex=function(v){return this.glyphNames.nameToGlyphIndex(v)},Zt.prototype.nameToGlyph=function(v){var w=this.nameToGlyphIndex(v),T=this.glyphs.get(w);return T=T||this.glyphs.get(0)},Zt.prototype.glyphIndexToName=function(v){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(v):""},Zt.prototype.getKerningValue=function(v,w){v=v.index||v,w=w.index||w;var T=this.position.defaultKerningTables;return T?this.position.getKerningValue(T,v,w):this.kerningPairs[v+","+w]||0},Zt.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},Zt.prototype.forEachGlyph=function(v,w,T,k,j,P){w=w!==void 0?w:0,T=T!==void 0?T:0,k=k!==void 0?k:72,j=j||this.defaultRenderOptions;var F,W=1/this.unitsPerEm*k,Z=this.stringToGlyphs(v,j);if(j.kerning){var ie=j.script||this.position.getDefaultScriptName();F=this.position.getKerningTables(ie,j.language)}for(var me=0;me<Z.length;me+=1){var be=Z[me];P.call(this,be,w,T,k,j),be.advanceWidth&&(w+=be.advanceWidth*W),j.kerning&&me<Z.length-1&&(w+=(F?this.position.getKerningValue(F,be.index,Z[me+1].index):this.getKerningValue(be,Z[me+1]))*W),j.letterSpacing?w+=j.letterSpacing*k:j.tracking&&(w+=j.tracking/1e3*k)}return w},Zt.prototype.getPath=function(v,w,T,k,j){var P=new ne;return this.forEachGlyph(v,w,T,k,j,function(F,W,Z,ie){var me=F.getPath(W,Z,ie,j,this);P.extend(me)}),P},Zt.prototype.getPaths=function(v,w,T,k,j){var P=[];return this.forEachGlyph(v,w,T,k,j,function(F,W,Z,ie){var me=F.getPath(W,Z,ie,j,this);P.push(me)}),P},Zt.prototype.getAdvanceWidth=function(v,w,T){return this.forEachGlyph(v,0,0,w,T,function(){})},Zt.prototype.draw=function(v,w,T,k,j,P){this.getPath(w,T,k,j,P).draw(v)},Zt.prototype.drawPoints=function(v,w,T,k,j,P){this.forEachGlyph(w,T,k,j,P,function(F,W,Z,ie){F.drawPoints(v,W,Z,ie)})},Zt.prototype.drawMetrics=function(v,w,T,k,j,P){this.forEachGlyph(w,T,k,j,P,function(F,W,Z,ie){F.drawMetrics(v,W,Z,ie)})},Zt.prototype.getEnglishName=function(v){var w=this.names[v];if(w)return w.en},Zt.prototype.validate=function(){var v=this;function w(T){var k=v.getEnglishName(T);k&&k.trim().length}w("fontFamily"),w("weightName"),w("manufacturer"),w("copyright"),w("version"),this.unitsPerEm},Zt.prototype.toTables=function(){return wC.fontToTable(this)},Zt.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},Zt.prototype.toArrayBuffer=function(){for(var v=this.toTables().encode(),w=new ArrayBuffer(v.length),T=new Uint8Array(w),k=0;k<v.length;k++)T[k]=v[k];return w},Zt.prototype.download=function(v){var w=this.getEnglishName("fontFamily"),T=this.getEnglishName("fontSubfamily");v=v||w.replace(/\s/g,"")+"-"+T+".otf";var k=this.toArrayBuffer();if(typeof window<"u")window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,k.byteLength,function(F){F.root.getFile(v,{create:!0},function(W){W.createWriter(function(Z){var ie=new DataView(k),me=new Blob([ie],{type:"font/opentype"});Z.write(me),Z.addEventListener("writeend",function(){location.href=W.toURL()},!1)})})},function(F){throw new Error(F.name+": "+F.message)});else{var j=r("fs"),P=function(F){for(var W=new a(F.byteLength),Z=new Uint8Array(F),ie=0;ie<W.length;++ie)W[ie]=Z[ie];return W}(k);j.writeFileSync(v,P)}},Zt.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},Zt.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},Zt.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var RC={make:function(v,w){var T,k,j,P,F=new Ve.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:v.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:v.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*v.axes.length}]);F.offsetToData=F.sizeOf();for(var W=0;W<v.axes.length;W++)F.fields=F.fields.concat((T=W,k=v.axes[W],j=w,P=d_(k.name,j),[{name:"tag_"+T,type:"TAG",value:k.tag},{name:"minValue_"+T,type:"FIXED",value:k.minValue<<16},{name:"defaultValue_"+T,type:"FIXED",value:k.defaultValue<<16},{name:"maxValue_"+T,type:"FIXED",value:k.maxValue<<16},{name:"flags_"+T,type:"USHORT",value:0},{name:"nameID_"+T,type:"USHORT",value:P}]));for(var Z=0;Z<v.instances.length;Z++)F.fields=F.fields.concat(OC(Z,v.instances[Z],v.axes,w));return F},parse:function(v,w,T){var k=new B.Parser(v,w),j=k.parseULong();he.argument(j===65536,"Unsupported fvar table version.");var P=k.parseOffset16();k.skip("uShort",1);for(var F,W,Z,ie,me,be=k.parseUShort(),te=k.parseUShort(),Ge=k.parseUShort(),Ne=k.parseUShort(),Ae=[],Ce=0;Ce<be;Ce++)Ae.push((F=v,W=w+P+Ce*te,Z=T,me=ie=void 0,ie={},me=new B.Parser(F,W),ie.tag=me.parseTag(),ie.minValue=me.parseFixed(),ie.defaultValue=me.parseFixed(),ie.maxValue=me.parseFixed(),me.skip("uShort",1),ie.name=Z[me.parseUShort()]||{},ie));for(var Me=[],et=w+P+be*te,Je=0;Je<Ge;Je++)Me.push(IC(v,et+Je*Ne,Ae,T));return{axes:Ae,instances:Me}}},ws=new Array(10);ws[1]=function(){var v=this.offset+this.relativeOffset,w=this.parseUShort();return w===1?{posFormat:1,coverage:this.parsePointer(ve.coverage),value:this.parseValueRecord()}:w===2?{posFormat:2,coverage:this.parsePointer(ve.coverage),values:this.parseValueRecordList()}:void he.assert(!1,"0x"+v.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},ws[2]=function(){var v=this.offset+this.relativeOffset,w=this.parseUShort();he.assert(w===1||w===2,"0x"+v.toString(16)+": GPOS lookup type 2 format must be 1 or 2.");var T=this.parsePointer(ve.coverage),k=this.parseUShort(),j=this.parseUShort();if(w===1)return{posFormat:w,coverage:T,valueFormat1:k,valueFormat2:j,pairSets:this.parseList(ve.pointer(ve.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(k),value2:this.parseValueRecord(j)}})))};if(w===2){var P=this.parsePointer(ve.classDef),F=this.parsePointer(ve.classDef),W=this.parseUShort(),Z=this.parseUShort();return{posFormat:w,coverage:T,valueFormat1:k,valueFormat2:j,classDef1:P,classDef2:F,class1Count:W,class2Count:Z,classRecords:this.parseList(W,ve.list(Z,function(){return{value1:this.parseValueRecord(k),value2:this.parseValueRecord(j)}}))}}},ws[3]=function(){return{error:"GPOS Lookup 3 not supported"}},ws[4]=function(){return{error:"GPOS Lookup 4 not supported"}},ws[5]=function(){return{error:"GPOS Lookup 5 not supported"}},ws[6]=function(){return{error:"GPOS Lookup 6 not supported"}},ws[7]=function(){return{error:"GPOS Lookup 7 not supported"}},ws[8]=function(){return{error:"GPOS Lookup 8 not supported"}},ws[9]=function(){return{error:"GPOS Lookup 9 not supported"}};var PC=new Array(10),LC={parse:function(v,w){var T=new ve(v,w=w||0),k=T.parseVersion(1);return he.argument(k===1||k===1.1,"Unsupported GPOS table version "+k),k===1?{version:k,scripts:T.parseScriptList(),features:T.parseFeatureList(),lookups:T.parseLookupList(ws)}:{version:k,scripts:T.parseScriptList(),features:T.parseFeatureList(),lookups:T.parseLookupList(ws),variations:T.parseFeatureVariationsList()}},make:function(v){return new Ve.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Ve.ScriptList(v.scripts)},{name:"features",type:"TABLE",value:new Ve.FeatureList(v.features)},{name:"lookups",type:"TABLE",value:new Ve.LookupList(v.lookups,PC)}])}},NC={parse:function(v,w){var T=new B.Parser(v,w),k=T.parseUShort();if(k===0)return function(j){var P={};j.skip("uShort");var F=j.parseUShort();he.argument(F===0,"Unsupported kern sub-table version."),j.skip("uShort",2);var W=j.parseUShort();j.skip("uShort",3);for(var Z=0;Z<W;Z+=1){var ie=j.parseUShort(),me=j.parseUShort(),be=j.parseShort();P[ie+","+me]=be}return P}(T);if(k===1)return function(j){var P={};j.skip("uShort"),1<j.parseULong()&&console.warn("Only the first kern subtable is supported."),j.skip("uLong");var F=255&j.parseUShort();if(j.skip("uShort"),F==0){var W=j.parseUShort();j.skip("uShort",3);for(var Z=0;Z<W;Z+=1){var ie=j.parseUShort(),me=j.parseUShort(),be=j.parseShort();P[ie+","+me]=be}}return P}(T);throw new Error("Unsupported kern table version ("+k+").")}},FC={parse:function(v,w,T,k){for(var j=new B.Parser(v,w),P=k?j.parseUShort:j.parseULong,F=[],W=0;W<T+1;W+=1){var Z=P.call(j);k&&(Z*=2),F.push(Z)}return F}};function UC(v,w){r("fs").readFile(v,function(T,k){if(T)return w(T.message);w(null,B1(k))})}function VC(v,w){var T=new XMLHttpRequest;T.open("get",v,!0),T.responseType="arraybuffer",T.onload=function(){return T.response?w(null,T.response):w("Font could not be loaded: "+T.statusText)},T.onerror=function(){w("Font could not be loaded")},T.send()}function f_(v,w){for(var T=[],k=12,j=0;j<w;j+=1){var P=B.getTag(v,k),F=B.getULong(v,k+4),W=B.getULong(v,k+8),Z=B.getULong(v,k+12);T.push({tag:P,checksum:F,offset:W,length:Z,compression:!1}),k+=16}return T}function Dr(v,w){if(w.compression!=="WOFF")return{data:v,offset:w.offset};var T=new Uint8Array(v.buffer,w.offset+2,w.compressedLength-2),k=new Uint8Array(w.length);if(z(T,k),k.byteLength!==w.length)throw new Error("Decompression error: "+w.tag+" decompressed length doesn't match recorded length");return{data:new DataView(k.buffer,0),offset:0}}function Am(v){var w,T,k,j,P,F,W,Z,ie,me,be,te,Ge,Ne,Ae=new Zt({empty:!0}),Ce=new DataView(v,0),Me=[],et=B.getTag(Ce,0);if(et===String.fromCharCode(0,1,0,0)||et==="true"||et==="typ1")Ae.outlinesFormat="truetype",Me=f_(Ce,k=B.getUShort(Ce,4));else if(et==="OTTO")Ae.outlinesFormat="cff",Me=f_(Ce,k=B.getUShort(Ce,4));else{if(et!=="wOFF")throw new Error("Unsupported OpenType signature "+et);var Je=B.getTag(Ce,4);if(Je===String.fromCharCode(0,1,0,0))Ae.outlinesFormat="truetype";else{if(Je!=="OTTO")throw new Error("Unsupported OpenType flavor "+et);Ae.outlinesFormat="cff"}Me=function(Ft,jr){for(var Jt=[],rr=44,Vs=0;Vs<jr;Vs+=1){var Pa=B.getTag(Ft,rr),No=B.getULong(Ft,rr+4),is=B.getULong(Ft,rr+8),Fo=B.getULong(Ft,rr+12),La=void 0;La=is<Fo&&"WOFF",Jt.push({tag:Pa,offset:No,compression:La,compressedLength:is,length:Fo}),rr+=20}return Jt}(Ce,k=B.getUShort(Ce,12))}for(var Ct=0;Ct<k;Ct+=1){var lt=Me[Ct],dt=void 0;switch(lt.tag){case"cmap":dt=Dr(Ce,lt),Ae.tables.cmap=X.parse(dt.data,dt.offset),Ae.encoding=new Pe(Ae.tables.cmap);break;case"cvt ":dt=Dr(Ce,lt),Ne=new B.Parser(dt.data,dt.offset),Ae.tables.cvt=Ne.parseShortList(lt.length/2);break;case"fvar":P=lt;break;case"fpgm":dt=Dr(Ce,lt),Ne=new B.Parser(dt.data,dt.offset),Ae.tables.fpgm=Ne.parseByteList(lt.length);break;case"head":dt=Dr(Ce,lt),Ae.tables.head=Ze.parse(dt.data,dt.offset),Ae.unitsPerEm=Ae.tables.head.unitsPerEm,w=Ae.tables.head.indexToLocFormat;break;case"hhea":dt=Dr(Ce,lt),Ae.tables.hhea=Ie.parse(dt.data,dt.offset),Ae.ascender=Ae.tables.hhea.ascender,Ae.descender=Ae.tables.hhea.descender,Ae.numberOfHMetrics=Ae.tables.hhea.numberOfHMetrics;break;case"hmtx":ie=lt;break;case"ltag":dt=Dr(Ce,lt),T=Vt.parse(dt.data,dt.offset);break;case"maxp":dt=Dr(Ce,lt),Ae.tables.maxp=qt.parse(dt.data,dt.offset),Ae.numGlyphs=Ae.tables.maxp.numGlyphs;break;case"name":te=lt;break;case"OS/2":dt=Dr(Ce,lt),Ae.tables.os2=xm.parse(dt.data,dt.offset);break;case"post":dt=Dr(Ce,lt),Ae.tables.post=D1.parse(dt.data,dt.offset),Ae.glyphNames=new qe(Ae.tables.post);break;case"prep":dt=Dr(Ce,lt),Ne=new B.Parser(dt.data,dt.offset),Ae.tables.prep=Ne.parseByteList(lt.length);break;case"glyf":F=lt;break;case"loca":be=lt;break;case"CFF ":j=lt;break;case"kern":me=lt;break;case"GPOS":W=lt;break;case"GSUB":Z=lt;break;case"meta":Ge=lt}}var mr=Dr(Ce,te);if(Ae.tables.name=A1.parse(mr.data,mr.offset,T),Ae.names=Ae.tables.name,F&&be){var Ot=w===0,At=Dr(Ce,be),It=FC.parse(At.data,At.offset,Ae.numGlyphs,Ot),Wt=Dr(Ce,F);Ae.glyphs=$1.parse(Wt.data,Wt.offset,It,Ae)}else{if(!j)throw new Error("Font doesn't contain TrueType or CFF outlines.");var Gt=Dr(Ce,j);Le.parse(Gt.data,Gt.offset,Ae)}var ar=Dr(Ce,ie);if(Dt.parse(ar.data,ar.offset,Ae.numberOfHMetrics,Ae.numGlyphs,Ae.glyphs),function(Ft){for(var jr,Jt=Ft.tables.cmap.glyphIndexMap,rr=Object.keys(Jt),Vs=0;Vs<rr.length;Vs+=1){var Pa=rr[Vs],No=Jt[Pa];(jr=Ft.glyphs.get(No)).addUnicode(parseInt(Pa))}for(var is=0;is<Ft.glyphs.length;is+=1)jr=Ft.glyphs.get(is),Ft.cffEncoding?Ft.isCIDFont?jr.name="gid"+is:jr.name=Ft.cffEncoding.charset[is]:Ft.glyphNames.names&&(jr.name=Ft.glyphNames.glyphIndexToName(is))}(Ae),me){var $t=Dr(Ce,me);Ae.kerningPairs=NC.parse($t.data,$t.offset)}else Ae.kerningPairs={};if(W){var zt=Dr(Ce,W);Ae.tables.gpos=LC.parse(zt.data,zt.offset),Ae.position.init()}if(Z){var lr=Dr(Ce,Z);Ae.tables.gsub=O1.parse(lr.data,lr.offset)}if(P){var Yt=Dr(Ce,P);Ae.tables.fvar=RC.parse(Yt.data,Yt.offset,Ae.names)}if(Ge){var Sr=Dr(Ce,Ge);Ae.tables.meta=I1.parse(Sr.data,Sr.offset),Ae.metas=Ae.tables.meta}return Ae}d.Font=Zt,d.Glyph=mt,d.Path=ne,d.BoundingBox=$,d._parse=B,d.parse=Am,d.load=function(v,w){(typeof window>"u"?UC:VC)(v,function(T,k){if(T)return w(T);var j;try{j=Am(k)}catch(P){return w(P,null)}return w(null,j)})},d.loadSync=function(v){return Am(B1(r("fs").readFileSync(v)))},Object.defineProperty(d,"__esModule",{value:!0})},h(typeof i=="object"&&s!==void 0?i:o.opentype={})}).call(this,r("buffer").Buffer)},{buffer:4,fs:2}],240:[function(r,s,i){(function(a){function o(g,m){for(var c=0,l=g.length-1;0<=l;l--){var u=g[l];u==="."?g.splice(l,1):u===".."?(g.splice(l,1),c++):c&&(g.splice(l,1),c--)}if(m)for(;c--;)g.unshift("..");return g}function h(g,m){if(g.filter)return g.filter(m);for(var c=[],l=0;l<g.length;l++)m(g[l],l,g)&&c.push(g[l]);return c}i.resolve=function(){for(var g="",m=!1,c=arguments.length-1;-1<=c&&!m;c--){var l=0<=c?arguments[c]:a.cwd();if(typeof l!="string")throw new TypeError("Arguments to path.resolve must be strings");l&&(g=l+"/"+g,m=l.charAt(0)==="/")}return(m?"/":"")+(g=o(h(g.split("/"),function(u){return!!u}),!m).join("/"))||"."},i.normalize=function(g){var m=i.isAbsolute(g),c=d(g,-1)==="/";return(g=o(h(g.split("/"),function(l){return!!l}),!m).join("/"))||m||(g="."),g&&c&&(g+="/"),(m?"/":"")+g},i.isAbsolute=function(g){return g.charAt(0)==="/"},i.join=function(){var g=Array.prototype.slice.call(arguments,0);return i.normalize(h(g,function(m,c){if(typeof m!="string")throw new TypeError("Arguments to path.join must be strings");return m}).join("/"))},i.relative=function(g,m){function c(b){for(var x=0;x<b.length&&b[x]==="";x++);for(var S=b.length-1;0<=S&&b[S]==="";S--);return S<x?[]:b.slice(x,S-x+1)}g=i.resolve(g).substr(1),m=i.resolve(m).substr(1);for(var l=c(g.split("/")),u=c(m.split("/")),f=Math.min(l.length,u.length),p=f,y=0;y<f;y++)if(l[y]!==u[y]){p=y;break}var _=[];for(y=p;y<l.length;y++)_.push("..");return(_=_.concat(u.slice(p))).join("/")},i.sep="/",i.delimiter=":",i.dirname=function(g){if(typeof g!="string"&&(g+=""),g.length===0)return".";for(var m=g.charCodeAt(0),c=m===47,l=-1,u=!0,f=g.length-1;1<=f;--f)if((m=g.charCodeAt(f))===47){if(!u){l=f;break}}else u=!1;return l===-1?c?"/":".":c&&l===1?"/":g.slice(0,l)},i.basename=function(g,m){var c=function(l){typeof l!="string"&&(l+="");var u,f=0,p=-1,y=!0;for(u=l.length-1;0<=u;--u)if(l.charCodeAt(u)===47){if(!y){f=u+1;break}}else p===-1&&(y=!1,p=u+1);return p===-1?"":l.slice(f,p)}(g);return m&&c.substr(-1*m.length)===m&&(c=c.substr(0,c.length-m.length)),c},i.extname=function(g){typeof g!="string"&&(g+="");for(var m=-1,c=0,l=-1,u=!0,f=0,p=g.length-1;0<=p;--p){var y=g.charCodeAt(p);if(y===47){if(u)continue;c=p+1;break}l===-1&&(u=!1,l=p+1),y===46?m===-1?m=p:f!==1&&(f=1):m!==-1&&(f=-1)}return m===-1||l===-1||f===0||f===1&&m===l-1&&m===c+1?"":g.slice(m,l)};var d="ab".substr(-1)==="b"?function(g,m,c){return g.substr(m,c)}:function(g,m,c){return m<0&&(m=g.length+m),g.substr(m,c)}}).call(this,r("_process"))},{_process:241}],241:[function(r,s,i){var a,o,h=s.exports={};function d(){throw new Error("setTimeout has not been defined")}function g(){throw new Error("clearTimeout has not been defined")}function m(x){if(a===setTimeout)return setTimeout(x,0);if((a===d||!a)&&setTimeout)return a=setTimeout,setTimeout(x,0);try{return a(x,0)}catch{try{return a.call(null,x,0)}catch{return a.call(this,x,0)}}}(function(){try{a=typeof setTimeout=="function"?setTimeout:d}catch{a=d}try{o=typeof clearTimeout=="function"?clearTimeout:g}catch{o=g}})();var c,l=[],u=!1,f=-1;function p(){u&&c&&(u=!1,c.length?l=c.concat(l):f=-1,l.length&&y())}function y(){if(!u){var x=m(p);u=!0;for(var S=l.length;S;){for(c=l,l=[];++f<S;)c&&c[f].run();f=-1,S=l.length}c=null,u=!1,function(E){if(o===clearTimeout)return clearTimeout(E);if((o===g||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(E);try{o(E)}catch{try{return o.call(null,E)}catch{return o.call(this,E)}}}(x)}}function _(x,S){this.fun=x,this.array=S}function b(){}h.nextTick=function(x){var S=new Array(arguments.length-1);if(1<arguments.length)for(var E=1;E<arguments.length;E++)S[E-1]=arguments[E];l.push(new _(x,S)),l.length!==1||u||m(y)},_.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=b,h.addListener=b,h.once=b,h.off=b,h.removeListener=b,h.removeAllListeners=b,h.emit=b,h.prependListener=b,h.prependOnceListener=b,h.listeners=function(x){return[]},h.binding=function(x){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(x){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},{}],242:[function(r,s,i){(function(a){if(!a.fetch){var o="URLSearchParams"in a,h="Symbol"in a&&"iterator"in Symbol,d="FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),g="FormData"in a,m="ArrayBuffer"in a;if(m)var c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=function(O){return O&&DataView.prototype.isPrototypeOf(O)},u=ArrayBuffer.isView||function(O){return O&&-1<c.indexOf(Object.prototype.toString.call(O))};x.prototype.append=function(O,N){O=y(O),N=_(N);var U=this.map[O];this.map[O]=U?U+","+N:N},x.prototype.delete=function(O){delete this.map[y(O)]},x.prototype.get=function(O){return O=y(O),this.has(O)?this.map[O]:null},x.prototype.has=function(O){return this.map.hasOwnProperty(y(O))},x.prototype.set=function(O,N){this.map[y(O)]=_(N)},x.prototype.forEach=function(O,N){for(var U in this.map)this.map.hasOwnProperty(U)&&O.call(N,this.map[U],U,this)},x.prototype.keys=function(){var O=[];return this.forEach(function(N,U){O.push(U)}),b(O)},x.prototype.values=function(){var O=[];return this.forEach(function(N){O.push(N)}),b(O)},x.prototype.entries=function(){var O=[];return this.forEach(function(N,U){O.push([U,N])}),b(O)},h&&(x.prototype[Symbol.iterator]=x.prototype.entries);var f=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];A.prototype.clone=function(){return new A(this,{body:this._bodyInit})},I.call(A.prototype),I.call(L.prototype),L.prototype.clone=function(){return new L(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new x(this.headers),url:this.url})},L.error=function(){var O=new L(null,{status:0,statusText:""});return O.type="error",O};var p=[301,302,303,307,308];L.redirect=function(O,N){if(p.indexOf(N)===-1)throw new RangeError("Invalid status code");return new L(null,{status:N,headers:{location:O}})},a.Headers=x,a.Request=A,a.Response=L,a.fetch=function(O,N){return new Promise(function(U,K){var J=new A(O,N),z=new XMLHttpRequest;z.onload=function(){var H,$,ne={status:z.status,statusText:z.statusText,headers:(H=z.getAllResponseHeaders()||"",$=new x,H.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(_e){var he=_e.split(":"),Te=he.shift().trim();if(Te){var fe=he.join(":").trim();$.append(Te,fe)}}),$)};ne.url="responseURL"in z?z.responseURL:ne.headers.get("X-Request-URL");var oe="response"in z?z.response:z.responseText;U(new L(oe,ne))},z.onerror=function(){K(new TypeError("Network request failed"))},z.ontimeout=function(){K(new TypeError("Network request failed"))},z.open(J.method,J.url,!0),J.credentials==="include"?z.withCredentials=!0:J.credentials==="omit"&&(z.withCredentials=!1),"responseType"in z&&d&&(z.responseType="blob"),J.headers.forEach(function(H,$){z.setRequestHeader($,H)}),z.send(J._bodyInit===void 0?null:J._bodyInit)})},a.fetch.polyfill=!0}function y(O){if(typeof O!="string"&&(O=String(O)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(O))throw new TypeError("Invalid character in header field name");return O.toLowerCase()}function _(O){return typeof O!="string"&&(O=String(O)),O}function b(O){var N={next:function(){var U=O.shift();return{done:U===void 0,value:U}}};return h&&(N[Symbol.iterator]=function(){return N}),N}function x(O){this.map={},O instanceof x?O.forEach(function(N,U){this.append(U,N)},this):Array.isArray(O)?O.forEach(function(N){this.append(N[0],N[1])},this):O&&Object.getOwnPropertyNames(O).forEach(function(N){this.append(N,O[N])},this)}function S(O){if(O.bodyUsed)return Promise.reject(new TypeError("Already read"));O.bodyUsed=!0}function E(O){return new Promise(function(N,U){O.onload=function(){N(O.result)},O.onerror=function(){U(O.error)}})}function C(O){var N=new FileReader,U=E(N);return N.readAsArrayBuffer(O),U}function M(O){if(O.slice)return O.slice(0);var N=new Uint8Array(O.byteLength);return N.set(new Uint8Array(O)),N.buffer}function I(){return this.bodyUsed=!1,this._initBody=function(O){if(this._bodyInit=O)if(typeof O=="string")this._bodyText=O;else if(d&&Blob.prototype.isPrototypeOf(O))this._bodyBlob=O;else if(g&&FormData.prototype.isPrototypeOf(O))this._bodyFormData=O;else if(o&&URLSearchParams.prototype.isPrototypeOf(O))this._bodyText=O.toString();else if(m&&d&&l(O))this._bodyArrayBuffer=M(O.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!m||!ArrayBuffer.prototype.isPrototypeOf(O)&&!u(O))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=M(O)}else this._bodyText="";this.headers.get("content-type")||(typeof O=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):o&&URLSearchParams.prototype.isPrototypeOf(O)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},d&&(this.blob=function(){var O=S(this);if(O)return O;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?S(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(C)}),this.text=function(){var O,N,U,K=S(this);if(K)return K;if(this._bodyBlob)return O=this._bodyBlob,N=new FileReader,U=E(N),N.readAsText(O),U;if(this._bodyArrayBuffer)return Promise.resolve(function(J){for(var z=new Uint8Array(J),H=new Array(z.length),$=0;$<z.length;$++)H[$]=String.fromCharCode(z[$]);return H.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},g&&(this.formData=function(){return this.text().then(D)}),this.json=function(){return this.text().then(JSON.parse)},this}function A(O,N){var U,K,J=(N=N||{}).body;if(O instanceof A){if(O.bodyUsed)throw new TypeError("Already read");this.url=O.url,this.credentials=O.credentials,N.headers||(this.headers=new x(O.headers)),this.method=O.method,this.mode=O.mode,J||O._bodyInit==null||(J=O._bodyInit,O.bodyUsed=!0)}else this.url=String(O);if(this.credentials=N.credentials||this.credentials||"omit",!N.headers&&this.headers||(this.headers=new x(N.headers)),this.method=(U=N.method||this.method||"GET",K=U.toUpperCase(),-1<f.indexOf(K)?K:U),this.mode=N.mode||this.mode||null,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&J)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(J)}function D(O){var N=new FormData;return O.trim().split("&").forEach(function(U){if(U){var K=U.split("="),J=K.shift().replace(/\+/g," "),z=K.join("=").replace(/\+/g," ");N.append(decodeURIComponent(J),decodeURIComponent(z))}}),N}function L(O,N){N=N||{},this.type="default",this.status=N.status===void 0?200:N.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in N?N.statusText:"OK",this.headers=new x(N.headers),this.url=N.url||"",this._initBody(O)}})(typeof self<"u"?self:this)},{}],243:[function(r,s,i){r("core-js/modules/es.function.name"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.split"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a,o=d(r("../core/main")),h=d(r("../color/color_conversion"));function d(l){return l&&l.__esModule?l:{default:l}}var g=[{h:0,s:0,b:.8275,name:"gray"},{h:0,s:0,b:.8627,name:"gray"},{h:0,s:0,b:.7529,name:"gray"},{h:.0167,s:.1176,b:1,name:"light pink"}],m=[{h:0,s:0,b:0,name:"black"},{h:0,s:0,b:.5,name:"gray"},{h:0,s:0,b:1,name:"white"},{h:0,s:.5,b:.5,name:"dark maroon"},{h:0,s:.5,b:1,name:"salmon pink"},{h:0,s:1,b:0,name:"black"},{h:0,s:1,b:.5,name:"dark red"},{h:0,s:1,b:1,name:"red"},{h:5,s:0,b:1,name:"very light peach"},{h:5,s:.5,b:.5,name:"brown"},{h:5,s:.5,b:1,name:"peach"},{h:5,s:1,b:.5,name:"brick red"},{h:5,s:1,b:1,name:"crimson"},{h:10,s:0,b:1,name:"light peach"},{h:10,s:.5,b:.5,name:"brown"},{h:10,s:.5,b:1,name:"light orange"},{h:10,s:1,b:.5,name:"brown"},{h:10,s:1,b:1,name:"orange"},{h:15,s:0,b:1,name:"very light yellow"},{h:15,s:.5,b:.5,name:"olive green"},{h:15,s:.5,b:1,name:"light yellow"},{h:15,s:1,b:0,name:"dark olive green"},{h:15,s:1,b:.5,name:"olive green"},{h:15,s:1,b:1,name:"yellow"},{h:20,s:0,b:1,name:"very light yellow"},{h:20,s:.5,b:.5,name:"olive green"},{h:20,s:.5,b:1,name:"light yellow green"},{h:20,s:1,b:0,name:"dark olive green"},{h:20,s:1,b:.5,name:"dark yellow green"},{h:20,s:1,b:1,name:"yellow green"},{h:25,s:.5,b:.5,name:"dark yellow green"},{h:25,s:.5,b:1,name:"light green"},{h:25,s:1,b:.5,name:"dark green"},{h:25,s:1,b:1,name:"green"},{h:30,s:.5,b:1,name:"light green"},{h:30,s:1,b:.5,name:"dark green"},{h:30,s:1,b:1,name:"green"},{h:35,s:0,b:.5,name:"light green"},{h:35,s:0,b:1,name:"very light green"},{h:35,s:.5,b:.5,name:"dark green"},{h:35,s:.5,b:1,name:"light green"},{h:35,s:1,b:0,name:"very dark green"},{h:35,s:1,b:.5,name:"dark green"},{h:35,s:1,b:1,name:"green"},{h:40,s:0,b:1,name:"very light green"},{h:40,s:.5,b:.5,name:"dark green"},{h:40,s:.5,b:1,name:"light green"},{h:40,s:1,b:.5,name:"dark green"},{h:40,s:1,b:1,name:"green"},{h:45,s:.5,b:1,name:"light turquoise"},{h:45,s:1,b:.5,name:"dark turquoise"},{h:45,s:1,b:1,name:"turquoise"},{h:50,s:0,b:1,name:"light sky blue"},{h:50,s:.5,b:.5,name:"dark cyan"},{h:50,s:.5,b:1,name:"light cyan"},{h:50,s:1,b:.5,name:"dark cyan"},{h:50,s:1,b:1,name:"cyan"},{h:55,s:0,b:1,name:"light sky blue"},{h:55,s:.5,b:1,name:"light sky blue"},{h:55,s:1,b:.5,name:"dark blue"},{h:55,s:1,b:1,name:"sky blue"},{h:60,s:0,b:.5,name:"gray"},{h:60,s:0,b:1,name:"very light blue"},{h:60,s:.5,b:.5,name:"blue"},{h:60,s:.5,b:1,name:"light blue"},{h:60,s:1,b:.5,name:"navy blue"},{h:60,s:1,b:1,name:"blue"},{h:65,s:0,b:1,name:"lavender"},{h:65,s:.5,b:.5,name:"navy blue"},{h:65,s:.5,b:1,name:"light purple"},{h:65,s:1,b:.5,name:"dark navy blue"},{h:65,s:1,b:1,name:"blue"},{h:70,s:0,b:1,name:"lavender"},{h:70,s:.5,b:.5,name:"navy blue"},{h:70,s:.5,b:1,name:"lavender blue"},{h:70,s:1,b:.5,name:"dark navy blue"},{h:70,s:1,b:1,name:"blue"},{h:75,s:.5,b:1,name:"lavender"},{h:75,s:1,b:.5,name:"dark purple"},{h:75,s:1,b:1,name:"purple"},{h:80,s:.5,b:1,name:"pinkish purple"},{h:80,s:1,b:.5,name:"dark purple"},{h:80,s:1,b:1,name:"purple"},{h:85,s:0,b:1,name:"light pink"},{h:85,s:.5,b:.5,name:"purple"},{h:85,s:.5,b:1,name:"light fuchsia"},{h:85,s:1,b:.5,name:"dark fuchsia"},{h:85,s:1,b:1,name:"fuchsia"},{h:90,s:.5,b:.5,name:"dark fuchsia"},{h:90,s:.5,b:1,name:"hot pink"},{h:90,s:1,b:.5,name:"dark fuchsia"},{h:90,s:1,b:1,name:"fuchsia"},{h:95,s:0,b:1,name:"pink"},{h:95,s:.5,b:1,name:"light pink"},{h:95,s:1,b:.5,name:"dark magenta"},{h:95,s:1,b:1,name:"magenta"}];o.default.prototype._rgbColorName=function(l){var u=h.default._rgbaToHSBA(l);return function(f){var p;if(f[0]!==0){f[0]=Math.round(100*f[0]);var y=f[0].toString().split(""),_=y.length-1;y[_]=parseInt(y[_]),y[_]<2.5?y[_]=0:2.5<=y[_]&&y[_]<7.5&&(y[_]=5),y.length===2?(y[0]=parseInt(y[0]),7.5<=y[_]&&(y[_]=0,y[0]=y[0]+1),f[0]=10*y[0]+y[1]):7.5<=y[_]?f[0]=10:f[0]=y[_]}f[2]=f[2]/255;for(var b=f.length-1;1<=b;b--)f[b]<=.25?f[b]=0:.25<f[b]&&f[b]<.75?f[b]=.5:f[b]=1;if(f[0]===0&&f[1]===0&&f[2]===1){for(var x=2;0<=x;x--)a[x]=Math.round(1e4*a[x])/1e4;for(var S=0;S<g.length;S++){if(g[S].h===a[0]&&g[S].s===a[1]&&g[S].b===a[2]){p=g[S].name;break}p="white"}}else for(var E=0;E<m.length;E++)if(m[E].h===f[0]&&m[E].s===f[1]&&m[E].b===f[2]){p=m[E].name;break}return p}([(a=u)[0],u[1],u[2]])};var c=o.default;i.default=c},{"../color/color_conversion":249,"../core/main":264,"core-js/modules/es.function.name":166,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.split":191}],244:[function(r,s,i){r("core-js/modules/es.array.concat"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.ends-with"),r("core-js/modules/es.string.replace"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a,o=(a=r("../core/main"))&&a.__esModule?a:{default:a},h="_Description",d="_fallbackDesc",g="_fallbackTable",m="_Label",c="_labelDesc",l="_labelTable";function u(p){if(p==="label"||p==="fallback")throw new Error("description should not be LABEL or FALLBACK");return p.endsWith(".")||p.endsWith(";")||p.endsWith(",")||p.endsWith("?")||p.endsWith("!")||(p+="."),p}o.default.prototype.describe=function(p,y){if(o.default._validateParameters("describe",arguments),typeof p=="string"){var _=this.canvas.id;p=u(p),this.dummyDOM||(this.dummyDOM=document.getElementById(_).parentNode),this.descriptions||(this.descriptions={}),this.descriptions.fallback?this.descriptions.fallback.innerHTML!==p&&(this.descriptions.fallback.innerHTML=p):this._describeHTML("fallback",p),y===this.LABEL&&(this.descriptions.label?this.descriptions.label.innerHTML!==p&&(this.descriptions.label.innerHTML=p):this._describeHTML("label",p))}},o.default.prototype.describeElement=function(p,y,_){if(o.default._validateParameters("describeElement",arguments),typeof y=="string"&&typeof p=="string"){var b=this.canvas.id;y=u(y);var x=function(E){if(E==="label"||E==="fallback")throw new Error("element name should not be LABEL or FALLBACK");return E.endsWith(".")||E.endsWith(";")||E.endsWith(",")?E=E.replace(/.$/,":"):E.endsWith(":")||(E+=":"),E}(p);p=p.replace(/[^a-zA-Z0-9]/g,"");var S='<th scope="row">'.concat(x,"</th><td>").concat(y,"</td>");this.dummyDOM||(this.dummyDOM=document.getElementById(b).parentNode),this.descriptions?this.descriptions.fallbackElements||(this.descriptions.fallbackElements={}):this.descriptions={fallbackElements:{}},this.descriptions.fallbackElements[p]?this.descriptions.fallbackElements[p].innerHTML!==S&&(this.descriptions.fallbackElements[p].innerHTML=S):this._describeElementHTML("fallback",p,S),_===this.LABEL&&(this.descriptions.labelElements||(this.descriptions.labelElements={}),this.descriptions.labelElements[p]?this.descriptions.labelElements[p].innerHTML!==S&&(this.descriptions.labelElements[p].innerHTML=S):this._describeElementHTML("label",p,S))}},o.default.prototype._describeHTML=function(p,y){var _=this.canvas.id;if(p==="fallback"){if(this.dummyDOM.querySelector("#".concat(_+h)))this.dummyDOM.querySelector("#"+_+g).insertAdjacentHTML("beforebegin",'<p id="'.concat(_+d,'"></p>'));else{var b='<div id="'.concat(_).concat(h,'" role="region" aria-label="Canvas Description"><p id="').concat(_).concat(d,'"></p></div>');this.dummyDOM.querySelector("#".concat(_,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(_,"accessibleOutput")).insertAdjacentHTML("beforebegin",b):this.dummyDOM.querySelector("#".concat(_)).innerHTML=b}return this.descriptions.fallback=this.dummyDOM.querySelector("#".concat(_).concat(d)),void(this.descriptions.fallback.innerHTML=y)}if(p==="label"){if(this.dummyDOM.querySelector("#".concat(_+m)))this.dummyDOM.querySelector("#".concat(_+l))&&this.dummyDOM.querySelector("#".concat(_+l)).insertAdjacentHTML("beforebegin",'<p id="'.concat(_).concat(c,'"></p>'));else{var x='<div id="'.concat(_).concat(m,'" class="p5Label"><p id="').concat(_).concat(c,'"></p></div>');this.dummyDOM.querySelector("#".concat(_,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(_,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",x):this.dummyDOM.querySelector("#"+_).insertAdjacentHTML("afterend",x)}return this.descriptions.label=this.dummyDOM.querySelector("#"+_+c),void(this.descriptions.label.innerHTML=y)}},o.default.prototype._describeElementHTML=function(p,y,_){var b=this.canvas.id;if(p==="fallback"){if(this.dummyDOM.querySelector("#".concat(b+h)))this.dummyDOM.querySelector("#"+b+g)||this.dummyDOM.querySelector("#"+b+d).insertAdjacentHTML("afterend",'<table id="'.concat(b).concat(g,'"><caption>Canvas elements and their descriptions</caption></table>'));else{var x='<div id="'.concat(b).concat(h,'" role="region" aria-label="Canvas Description"><table id="').concat(b).concat(g,'"><caption>Canvas elements and their descriptions</caption></table></div>');this.dummyDOM.querySelector("#".concat(b,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(b,"accessibleOutput")).insertAdjacentHTML("beforebegin",x):this.dummyDOM.querySelector("#"+b).innerHTML=x}var S=document.createElement("tr");return S.id=b+"_fte_"+y,this.dummyDOM.querySelector("#"+b+g).appendChild(S),this.descriptions.fallbackElements[y]=this.dummyDOM.querySelector("#".concat(b).concat("_fte_").concat(y)),void(this.descriptions.fallbackElements[y].innerHTML=_)}if(p==="label"){if(this.dummyDOM.querySelector("#".concat(b+m)))this.dummyDOM.querySelector("#".concat(b+l))||this.dummyDOM.querySelector("#"+b+c).insertAdjacentHTML("afterend",'<table id="'.concat(b+l,'"></table>'));else{var E='<div id="'.concat(b).concat(m,'" class="p5Label"><table id="').concat(b).concat(l,'"></table></div>');this.dummyDOM.querySelector("#".concat(b,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(b,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",E):this.dummyDOM.querySelector("#"+b).insertAdjacentHTML("afterend",E)}var C=document.createElement("tr");C.id=b+"_lte_"+y,this.dummyDOM.querySelector("#"+b+l).appendChild(C),this.descriptions.labelElements[y]=this.dummyDOM.querySelector("#".concat(b).concat("_lte_").concat(y)),this.descriptions.labelElements[y].innerHTML=_}};var f=o.default;i.default=f},{"../core/main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.ends-with":184,"core-js/modules/es.string.replace":189}],245:[function(r,s,i){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.map"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a,o=(a=r("../core/main"))&&a.__esModule?a:{default:a};o.default.prototype._updateGridOutput=function(d){if(this.dummyDOM.querySelector("#".concat(d,"_summary"))){var g=this._accessibleOutputs[d],m=function(u,f){var p="",y="",_=0;for(var b in f){var x=0;for(var S in f[b]){var E='<li id="'.concat(u,"shape").concat(_,'">').concat(f[b][S].color," ").concat(b,",");b==="line"?E+=" location = ".concat(f[b][S].pos,", length = ").concat(f[b][S].length," pixels"):(E+=" location = ".concat(f[b][S].pos),b!=="point"&&(E+=", area = ".concat(f[b][S].area," %")),E+="</li>"),p+=E,x++,_++}y=1<x?"".concat(y," ").concat(x," ").concat(b,"s"):"".concat(y," ").concat(x," ").concat(b)}return{numShapes:[_,y],details:p}}(d,this.ingredients.shapes),c=function(u,f,p,y){var _="".concat(f," canvas, ").concat(p," by ").concat(y," pixels, contains ").concat(u[0]);return _=u[0]===1?"".concat(_," shape: ").concat(u[1]):"".concat(_," shapes: ").concat(u[1]),_}(m.numShapes,this.ingredients.colors.background,this.width,this.height),l=function(u,f){var p=0,y="",_=Array.apply(null,Array(10)).map(function(){});for(var b in _)_[b]=Array.apply(null,Array(10)).map(function(){});for(var x in f)for(var S in f[x]){var E=void 0;E=x!=="line"?'<a href="#'.concat(u,"shape").concat(p,'">').concat(f[x][S].color," ").concat(x,"</a>"):'<a href="#'.concat(u,"shape").concat(p,'">').concat(f[x][S].color," ").concat(x," midpoint</a>"),_[f[x][S].loc.locY][f[x][S].loc.locX]?_[f[x][S].loc.locY][f[x][S].loc.locX]=_[f[x][S].loc.locY][f[x][S].loc.locX]+"  "+E:_[f[x][S].loc.locY][f[x][S].loc.locX]=E,p++}for(var C in _){var M="<tr>";for(var I in _[C])M+="<td>",_[C][I]!==void 0&&(M+=_[C][I]),M+="</td>";y=y+M+"</tr>"}return y}(d,this.ingredients.shapes);c!==g.summary.innerHTML&&(g.summary.innerHTML=c),l!==g.map.innerHTML&&(g.map.innerHTML=l),m.details!==g.shapeDetails.innerHTML&&(g.shapeDetails.innerHTML=m.details),this._accessibleOutputs[d]=g}};var h=o.default;i.default=h},{"../core/main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.map":161}],246:[function(r,s,i){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.map"),r("core-js/modules/es.number.to-fixed"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a,o=(a=r("../core/main"))&&a.__esModule?a:{default:a};function h(m,c,l){return m[0]<.4*c?m[1]<.4*l?"top left":m[1]>.6*l?"bottom left":"mid left":m[0]>.6*c?m[1]<.4*l?"top right":m[1]>.6*l?"bottom right":"mid right":m[1]<.4*l?"top middle":m[1]>.6*l?"bottom middle":"middle"}function d(m,c,l){var u=Math.floor(m[0]/c*10),f=Math.floor(m[1]/l*10);return u===10&&--u,f===10&&--f,{locX:u,locY:f}}o.default.prototype.textOutput=function(m){o.default._validateParameters("textOutput",arguments),this._accessibleOutputs.text||(this._accessibleOutputs.text=!0,this._createOutput("textOutput","Fallback"),m===this.LABEL&&(this._accessibleOutputs.textLabel=!0,this._createOutput("textOutput","Label")))},o.default.prototype.gridOutput=function(m){o.default._validateParameters("gridOutput",arguments),this._accessibleOutputs.grid||(this._accessibleOutputs.grid=!0,this._createOutput("gridOutput","Fallback"),m===this.LABEL&&(this._accessibleOutputs.gridLabel=!0,this._createOutput("gridOutput","Label")))},o.default.prototype._addAccsOutput=function(){return this._accessibleOutputs||(this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1}),this._accessibleOutputs.grid||this._accessibleOutputs.text},o.default.prototype._createOutput=function(m,c){var l,u,f,p=this.canvas.id;this.ingredients||(this.ingredients={shapes:{},colors:{background:"white",fill:"white",stroke:"black"},pShapes:""}),this.dummyDOM||(this.dummyDOM=document.getElementById(p).parentNode);var y="";c==="Fallback"?(l=p+m,u=p+"accessibleOutput",this.dummyDOM.querySelector("#".concat(u))||(this.dummyDOM.querySelector("#".concat(p,"_Description"))?this.dummyDOM.querySelector("#".concat(p,"_Description")).insertAdjacentHTML("afterend",'<div id="'.concat(u,'" role="region" aria-label="Canvas Outputs"></div>')):this.dummyDOM.querySelector("#".concat(p)).innerHTML='<div id="'.concat(u,'" role="region" aria-label="Canvas Outputs"></div>'))):c==="Label"&&(l=p+m+(y=c),u=p+"accessibleOutput"+c,this.dummyDOM.querySelector("#".concat(u))||(this.dummyDOM.querySelector("#".concat(p,"_Label"))?this.dummyDOM.querySelector("#".concat(p,"_Label")).insertAdjacentHTML("afterend",'<div id="'.concat(u,'"></div>')):this.dummyDOM.querySelector("#".concat(p)).insertAdjacentHTML("afterend",'<div id="'.concat(u,'"></div>')))),this._accessibleOutputs[l]={},m==="textOutput"?(y="#".concat(p,"gridOutput").concat(y),f='<div id="'.concat(l,'">Text Output<div id="').concat(l,'Summary" aria-label="text output summary"><p id="').concat(l,'_summary"></p><ul id="').concat(l,'_list"></ul></div><table id="').concat(l,'_shapeDetails" summary="text output shape details"></table></div>'),this.dummyDOM.querySelector(y)?this.dummyDOM.querySelector(y).insertAdjacentHTML("beforebegin",f):this.dummyDOM.querySelector("#".concat(u)).innerHTML=f,this._accessibleOutputs[l].list=this.dummyDOM.querySelector("#".concat(l,"_list"))):m==="gridOutput"&&(y="#".concat(p,"textOutput").concat(y),f='<div id="'.concat(l,'">Grid Output<p id="').concat(l,'_summary" aria-label="grid output summary"><table id="').concat(l,'_map" summary="grid output content"></table><ul id="').concat(l,'_shapeDetails" aria-label="grid output shape details"></ul></div>'),this.dummyDOM.querySelector(y)?this.dummyDOM.querySelector(y).insertAdjacentHTML("afterend",f):this.dummyDOM.querySelector("#".concat(u)).innerHTML=f,this._accessibleOutputs[l].map=this.dummyDOM.querySelector("#".concat(l,"_map"))),this._accessibleOutputs[l].shapeDetails=this.dummyDOM.querySelector("#".concat(l,"_shapeDetails")),this._accessibleOutputs[l].summary=this.dummyDOM.querySelector("#".concat(l,"_summary"))},o.default.prototype._updateAccsOutput=function(){var m=this.canvas.id;JSON.stringify(this.ingredients.shapes)!==this.ingredients.pShapes&&(this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this._accessibleOutputs.text&&this._updateTextOutput(m+"textOutput"),this._accessibleOutputs.grid&&this._updateGridOutput(m+"gridOutput"),this._accessibleOutputs.textLabel&&this._updateTextOutput(m+"textOutputLabel"),this._accessibleOutputs.gridLabel&&this._updateGridOutput(m+"gridOutputLabel"))},o.default.prototype._accsBackground=function(m){this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this.ingredients.shapes={},this.ingredients.colors.backgroundRGBA!==m&&(this.ingredients.colors.backgroundRGBA=m,this.ingredients.colors.background=this._rgbColorName(m))},o.default.prototype._accsCanvasColors=function(m,c){m==="fill"?this.ingredients.colors.fillRGBA!==c&&(this.ingredients.colors.fillRGBA=c,this.ingredients.colors.fill=this._rgbColorName(c)):m==="stroke"&&this.ingredients.colors.strokeRGBA!==c&&(this.ingredients.colors.strokeRGBA=c,this.ingredients.colors.stroke=this._rgbColorName(c))},o.default.prototype._accsOutput=function(m,c){m==="ellipse"&&c[2]===c[3]?m="circle":m==="rectangle"&&c[2]===c[3]&&(m="square");var l={},u=!0,f=function(b,x){var S,E;return E=b==="rectangle"||b==="ellipse"||b==="arc"||b==="circle"||b==="square"?(S=Math.round(x[0]+x[2]/2),Math.round(x[1]+x[3]/2)):b==="triangle"?(S=(x[0]+x[2]+x[4])/3,(x[1]+x[3]+x[5])/3):b==="quadrilateral"?(S=(x[0]+x[2]+x[4]+x[6])/4,(x[1]+x[3]+x[5]+x[7])/4):b==="line"?(S=(x[0]+x[2])/2,(x[1]+x[3])/2):(S=x[0],x[1]),[S,E]}(m,c);if(m==="line"){l.color=this.ingredients.colors.stroke,l.length=Math.round(this.dist(c[0],c[1],c[2],c[3]));var p=h([c[0],[1]],this.width,this.height),y=h([c[2],[3]],this.width,this.height);l.loc=d(f,this.width,this.height),l.pos=p===y?"at ".concat(p):"from ".concat(p," to ").concat(y)}else m==="point"?l.color=this.ingredients.colors.stroke:(l.color=this.ingredients.colors.fill,l.area=function(b,x,S,E){var C=0;if(b==="arc"){var M=((x[5]-x[4])%(2*Math.PI)+2*Math.PI)%(2*Math.PI);if(C=M*x[2]*x[3]/8,x[6]==="open"||x[6]==="chord"){var I=x[0],A=x[1],D=x[0]+x[2]/2*Math.cos(x[4]).toFixed(2),L=x[1]+x[3]/2*Math.sin(x[4]).toFixed(2),O=x[0]+x[2]/2*Math.cos(x[5]).toFixed(2),N=x[1]+x[3]/2*Math.sin(x[5]).toFixed(2),U=Math.abs(I*(L-N)+D*(N-A)+O*(A-L))/2;M>Math.PI?C+=U:C-=U}}else b==="ellipse"||b==="circle"?C=3.14*x[2]/2*x[3]/2:b==="line"||b==="point"?C=0:b==="quadrilateral"?C=Math.abs((x[6]+x[0])*(x[7]-x[1])+(x[0]+x[2])*(x[1]-x[3])+(x[2]+x[4])*(x[3]-x[5])+(x[4]+x[6])*(x[5]-x[7]))/2:b==="rectangle"||b==="square"?C=x[2]*x[3]:b==="triangle"&&(C=Math.abs(x[0]*(x[3]-x[5])+x[2]*(x[5]-x[1])+x[4]*(x[1]-x[3]))/2);return Math.round(100*C/(S*E))}(m,c,this.width,this.height)),l.pos=h(f,this.width,this.height),l.loc=d(f,this.width,this.height);if(this.ingredients.shapes[m]){if(this.ingredients.shapes[m]!==[l]){for(var _ in this.ingredients.shapes[m])JSON.stringify(this.ingredients.shapes[m][_])===JSON.stringify(l)&&(u=!1);u===!0&&this.ingredients.shapes[m].push(l)}}else this.ingredients.shapes[m]=[l]};var g=o.default;i.default=g},{"../core/main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.fill":151,"core-js/modules/es.array.map":161,"core-js/modules/es.number.to-fixed":172}],247:[function(r,s,i){r("core-js/modules/es.array.concat"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a,o=(a=r("../core/main"))&&a.__esModule?a:{default:a};o.default.prototype._updateTextOutput=function(d){if(this.dummyDOM.querySelector("#".concat(d,"_summary"))){var g=this._accessibleOutputs[d],m=function(u,f){var p="",y=0;for(var _ in f)for(var b in f[_]){var x='<li><a href="#'.concat(u,"shape").concat(y,'">').concat(f[_][b].color," ").concat(_,"</a>");_==="line"?x+=", ".concat(f[_][b].pos,", ").concat(f[_][b].length," pixels long.</li>"):(x+=", at ".concat(f[_][b].pos),_!=="point"&&(x+=", covering ".concat(f[_][b].area,"% of the canvas")),x+=".</li>"),p+=x,y++}return{numShapes:y,listShapes:p}}(d,this.ingredients.shapes),c=function(u,f,p,y){var _="Your output is a, ".concat(p," by ").concat(y," pixels, ").concat(f," canvas containing the following");return _=u===1?"".concat(_," shape:"):"".concat(_," ").concat(u," shapes:"),_}(m.numShapes,this.ingredients.colors.background,this.width,this.height),l=function(u,f){var p="",y=0;for(var _ in f)for(var b in f[_]){var x='<tr id="'.concat(u,"shape").concat(y,'"><th>').concat(f[_][b].color," ").concat(_,"</th>");_==="line"?x+="<td>location = ".concat(f[_][b].pos,"</td><td>length = ").concat(f[_][b].length," pixels</td></tr>"):(x+="<td>location = ".concat(f[_][b].pos,"</td>"),_!=="point"&&(x+="<td> area = ".concat(f[_][b].area,"%</td>")),x+="</tr>"),p+=x,y++}return p}(d,this.ingredients.shapes);c!==g.summary.innerHTML&&(g.summary.innerHTML=c),m.listShapes!==g.list.innerHTML&&(g.list.innerHTML=m.listShapes),l!==g.shapeDetails.innerHTML&&(g.shapeDetails.innerHTML=l),this._accessibleOutputs[d]=g}};var h=o.default;i.default=h},{"../core/main":264,"core-js/modules/es.array.concat":149}],248:[function(r,s,i){var a,o=(a=r("./core/main"))&&a.__esModule?a:{default:a};r("./core/constants"),r("./core/environment"),r("./core/friendly_errors/stacktrace"),r("./core/friendly_errors/validate_params"),r("./core/friendly_errors/file_errors"),r("./core/friendly_errors/fes_core"),r("./core/friendly_errors/sketch_reader"),r("./core/helpers"),r("./core/legacy"),r("./core/preload"),r("./core/p5.Element"),r("./core/p5.Graphics"),r("./core/p5.Renderer"),r("./core/p5.Renderer2D"),r("./core/rendering"),r("./core/shim"),r("./core/structure"),r("./core/transform"),r("./core/shape/2d_primitives"),r("./core/shape/attributes"),r("./core/shape/curves"),r("./core/shape/vertex"),r("./accessibility/outputs"),r("./accessibility/textOutput"),r("./accessibility/gridOutput"),r("./accessibility/color_namer"),r("./color/color_conversion"),r("./color/creating_reading"),r("./color/p5.Color"),r("./color/setting"),r("./data/p5.TypedDict"),r("./data/local_storage.js"),r("./dom/dom"),r("./accessibility/describe"),r("./events/acceleration"),r("./events/keyboard"),r("./events/mouse"),r("./events/touch"),r("./image/filters"),r("./image/image"),r("./image/loading_displaying"),r("./image/p5.Image"),r("./image/pixels"),r("./io/files"),r("./io/p5.Table"),r("./io/p5.TableRow"),r("./io/p5.XML"),r("./math/calculation"),r("./math/math"),r("./math/noise"),r("./math/p5.Vector"),r("./math/random"),r("./math/trigonometry"),r("./typography/attributes"),r("./typography/loading_displaying"),r("./typography/p5.Font"),r("./utilities/array_functions"),r("./utilities/conversion"),r("./utilities/string_functions"),r("./utilities/time_date"),r("./webgl/3d_primitives"),r("./webgl/interaction"),r("./webgl/light"),r("./webgl/loading"),r("./webgl/material"),r("./webgl/p5.Camera"),r("./webgl/p5.Geometry"),r("./webgl/p5.Matrix"),r("./webgl/p5.RendererGL.Immediate"),r("./webgl/p5.RendererGL"),r("./webgl/p5.RendererGL.Retained"),r("./webgl/p5.Shader"),r("./webgl/p5.RenderBuffer"),r("./webgl/p5.Texture"),r("./webgl/text"),r("./core/init"),s.exports=o.default},{"./accessibility/color_namer":243,"./accessibility/describe":244,"./accessibility/gridOutput":245,"./accessibility/outputs":246,"./accessibility/textOutput":247,"./color/color_conversion":249,"./color/creating_reading":250,"./color/p5.Color":251,"./color/setting":252,"./core/constants":253,"./core/environment":254,"./core/friendly_errors/fes_core":255,"./core/friendly_errors/file_errors":256,"./core/friendly_errors/sketch_reader":257,"./core/friendly_errors/stacktrace":258,"./core/friendly_errors/validate_params":259,"./core/helpers":260,"./core/init":261,"./core/legacy":263,"./core/main":264,"./core/p5.Element":265,"./core/p5.Graphics":266,"./core/p5.Renderer":267,"./core/p5.Renderer2D":268,"./core/preload":269,"./core/rendering":270,"./core/shape/2d_primitives":271,"./core/shape/attributes":272,"./core/shape/curves":273,"./core/shape/vertex":274,"./core/shim":275,"./core/structure":276,"./core/transform":277,"./data/local_storage.js":278,"./data/p5.TypedDict":279,"./dom/dom":280,"./events/acceleration":281,"./events/keyboard":282,"./events/mouse":283,"./events/touch":284,"./image/filters":285,"./image/image":286,"./image/loading_displaying":287,"./image/p5.Image":288,"./image/pixels":289,"./io/files":290,"./io/p5.Table":291,"./io/p5.TableRow":292,"./io/p5.XML":293,"./math/calculation":294,"./math/math":295,"./math/noise":296,"./math/p5.Vector":297,"./math/random":298,"./math/trigonometry":299,"./typography/attributes":300,"./typography/loading_displaying":301,"./typography/p5.Font":302,"./utilities/array_functions":303,"./utilities/conversion":304,"./utilities/string_functions":305,"./utilities/time_date":306,"./webgl/3d_primitives":307,"./webgl/interaction":308,"./webgl/light":309,"./webgl/loading":310,"./webgl/material":311,"./webgl/p5.Camera":312,"./webgl/p5.Geometry":313,"./webgl/p5.Matrix":314,"./webgl/p5.RenderBuffer":315,"./webgl/p5.RendererGL":318,"./webgl/p5.RendererGL.Immediate":316,"./webgl/p5.RendererGL.Retained":317,"./webgl/p5.Shader":319,"./webgl/p5.Texture":320,"./webgl/text":321}],249:[function(r,s,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a,o=(a=r("../core/main"))&&a.__esModule?a:{default:a};o.default.ColorConversion={},o.default.ColorConversion._hsbaToHSLA=function(d){var g=d[0],m=d[1],c=d[2],l=(2-m)*c/2;return l!=0&&(l==1?m=0:l<.5?m/=2-m:m=m*c/(2-2*l)),[g,m,l,d[3]]},o.default.ColorConversion._hsbaToRGBA=function(d){var g=6*d[0],m=d[1],c=d[2],l=[];if(m===0)l=[c,c,c,d[3]];else{var u,f,p,y=Math.floor(g),_=c*(1-m),b=c*(1-m*(g-y)),x=c*(1-m*(1+y-g));p=y===1?(u=b,f=c,_):y===2?(u=_,f=c,x):y===3?(u=_,f=b,c):y===4?(u=x,f=_,c):y===5?(u=c,f=_,b):(u=c,f=x,_),l=[u,f,p,d[3]]}return l},o.default.ColorConversion._hslaToHSBA=function(d){var g,m=d[0],c=d[1],l=d[2];return[m,c=2*((g=l<.5?(1+c)*l:l+c-l*c)-l)/g,g,d[3]]},o.default.ColorConversion._hslaToRGBA=function(d){var g=6*d[0],m=d[1],c=d[2],l=[];if(m===0)l=[c,c,c,d[3]];else{var u,f=2*c-(u=c<.5?(1+m)*c:c+m-c*m),p=function(y,_,b){return y<0?y+=6:6<=y&&(y-=6),y<1?_+(b-_)*y:y<3?b:y<4?_+(b-_)*(4-y):_};l=[p(2+g,f,u),p(g,f,u),p(g-2,f,u),d[3]]}return l},o.default.ColorConversion._rgbaToHSBA=function(d){var g,m,c=d[0],l=d[1],u=d[2],f=Math.max(c,l,u),p=f-Math.min(c,l,u);return p==0?m=g=0:(m=p/f,c===f?g=(l-u)/p:l===f?g=2+(u-c)/p:u===f&&(g=4+(c-l)/p),g<0?g+=6:6<=g&&(g-=6)),[g/6,m,f,d[3]]},o.default.ColorConversion._rgbaToHSLA=function(d){var g,m,c=d[0],l=d[1],u=d[2],f=Math.max(c,l,u),p=Math.min(c,l,u),y=f+p,_=f-p;return _==0?m=g=0:(m=y<1?_/y:_/(2-y),c===f?g=(l-u)/_:l===f?g=2+(u-c)/_:u===f&&(g=4+(c-l)/_),g<0?g+=6:6<=g&&(g-=6)),[g/6,m,y/2,d[3]]};var h=o.default.ColorConversion;i.default=h},{"../core/main":264}],250:[function(r,s,i){function a(c){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(c)}r("core-js/modules/es.array.map"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o,h=(o=r("../core/main"))&&o.__esModule?o:{default:o},d=function(c){if(c&&c.__esModule)return c;if(c===null||a(c)!=="object"&&typeof c!="function")return{default:c};var l=g();if(l&&l.has(c))return l.get(c);var u={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in c)if(Object.prototype.hasOwnProperty.call(c,p)){var y=f?Object.getOwnPropertyDescriptor(c,p):null;y&&(y.get||y.set)?Object.defineProperty(u,p,y):u[p]=c[p]}return u.default=c,l&&l.set(c,u),u}(r("../core/constants"));function g(){if(typeof WeakMap!="function")return null;var c=new WeakMap;return g=function(){return c},c}r("./p5.Color"),r("../core/friendly_errors/validate_params"),r("../core/friendly_errors/file_errors"),r("../core/friendly_errors/fes_core"),h.default.prototype.alpha=function(c){return h.default._validateParameters("alpha",arguments),this.color(c)._getAlpha()},h.default.prototype.blue=function(c){return h.default._validateParameters("blue",arguments),this.color(c)._getBlue()},h.default.prototype.brightness=function(c){return h.default._validateParameters("brightness",arguments),this.color(c)._getBrightness()},h.default.prototype.color=function(){if(h.default._validateParameters("color",arguments),arguments[0]instanceof h.default.Color)return arguments[0];var c=arguments[0]instanceof Array?arguments[0]:arguments;return new h.default.Color(this,c)},h.default.prototype.green=function(c){return h.default._validateParameters("green",arguments),this.color(c)._getGreen()},h.default.prototype.hue=function(c){return h.default._validateParameters("hue",arguments),this.color(c)._getHue()},h.default.prototype.lerpColor=function(c,l,u){h.default._validateParameters("lerpColor",arguments);var f,p,y,_,b,x,S=this._colorMode,E=this._colorMaxes;if(S===d.RGB)b=c.levels.map(function(C){return C/255}),x=l.levels.map(function(C){return C/255});else if(S===d.HSB)c._getBrightness(),l._getBrightness(),b=c.hsba,x=l.hsba;else{if(S!==d.HSL)throw new Error("".concat(S,"cannot be used for interpolation."));c._getLightness(),l._getLightness(),b=c.hsla,x=l.hsla}return u=Math.max(Math.min(u,1),0),this.lerp===void 0&&(this.lerp=function(C,M,I){return I*(M-C)+C}),f=this.lerp(b[0],x[0],u),p=this.lerp(b[1],x[1],u),y=this.lerp(b[2],x[2],u),_=this.lerp(b[3],x[3],u),f*=E[S][0],p*=E[S][1],y*=E[S][2],_*=E[S][3],this.color(f,p,y,_)},h.default.prototype.lightness=function(c){return h.default._validateParameters("lightness",arguments),this.color(c)._getLightness()},h.default.prototype.red=function(c){return h.default._validateParameters("red",arguments),this.color(c)._getRed()},h.default.prototype.saturation=function(c){return h.default._validateParameters("saturation",arguments),this.color(c)._getSaturation()};var m=h.default;i.default=m},{"../core/constants":253,"../core/friendly_errors/fes_core":255,"../core/friendly_errors/file_errors":256,"../core/friendly_errors/validate_params":259,"../core/main":264,"./p5.Color":251,"core-js/modules/es.array.map":161}],251:[function(r,s,i){function a(b){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x})(b)}r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.trim"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=m(r("../core/main")),h=function(b){if(b&&b.__esModule)return b;if(b===null||a(b)!=="object"&&typeof b!="function")return{default:b};var x=g();if(x&&x.has(b))return x.get(b);var S={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var C in b)if(Object.prototype.hasOwnProperty.call(b,C)){var M=E?Object.getOwnPropertyDescriptor(b,C):null;M&&(M.get||M.set)?Object.defineProperty(S,C,M):S[C]=b[C]}return S.default=b,x&&x.set(b,S),S}(r("../core/constants")),d=m(r("./color_conversion"));function g(){if(typeof WeakMap!="function")return null;var b=new WeakMap;return g=function(){return b},b}function m(b){return b&&b.__esModule?b:{default:b}}o.default.Color=function(b,x){if(this._storeModeAndMaxes(b._colorMode,b._colorMaxes),this.mode!==h.RGB&&this.mode!==h.HSL&&this.mode!==h.HSB)throw new Error("".concat(this.mode," is an invalid colorMode."));return this._array=o.default.Color._parseInputs.apply(this,x),this._calculateLevels(),this},o.default.Color.prototype.toString=function(b){var x=this.levels,S=this._array,E=S[3];switch(b){case"#rrggbb":return"#".concat(x[0]<16?"0".concat(x[0].toString(16)):x[0].toString(16),x[1]<16?"0".concat(x[1].toString(16)):x[1].toString(16),x[2]<16?"0".concat(x[2].toString(16)):x[2].toString(16));case"#rrggbbaa":return"#".concat(x[0]<16?"0".concat(x[0].toString(16)):x[0].toString(16),x[1]<16?"0".concat(x[1].toString(16)):x[1].toString(16),x[2]<16?"0".concat(x[2].toString(16)):x[2].toString(16),x[3]<16?"0".concat(x[3].toString(16)):x[3].toString(16));case"#rgb":return"#".concat(Math.round(15*S[0]).toString(16),Math.round(15*S[1]).toString(16),Math.round(15*S[2]).toString(16));case"#rgba":return"#".concat(Math.round(15*S[0]).toString(16),Math.round(15*S[1]).toString(16),Math.round(15*S[2]).toString(16),Math.round(15*S[3]).toString(16));case"rgb":return"rgb(".concat(x[0],", ",x[1],", ",x[2],")");case"rgb%":return"rgb(".concat((100*S[0]).toPrecision(3),"%, ",(100*S[1]).toPrecision(3),"%, ",(100*S[2]).toPrecision(3),"%)");case"rgba%":return"rgba(".concat((100*S[0]).toPrecision(3),"%, ",(100*S[1]).toPrecision(3),"%, ",(100*S[2]).toPrecision(3),"%, ",(100*S[3]).toPrecision(3),"%)");case"hsb":case"hsv":return this.hsba||(this.hsba=d.default._rgbaToHSBA(this._array)),"hsb(".concat(this.hsba[0]*this.maxes[h.HSB][0],", ",this.hsba[1]*this.maxes[h.HSB][1],", ",this.hsba[2]*this.maxes[h.HSB][2],")");case"hsb%":case"hsv%":return this.hsba||(this.hsba=d.default._rgbaToHSBA(this._array)),"hsb(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%)");case"hsba":case"hsva":return this.hsba||(this.hsba=d.default._rgbaToHSBA(this._array)),"hsba(".concat(this.hsba[0]*this.maxes[h.HSB][0],", ",this.hsba[1]*this.maxes[h.HSB][1],", ",this.hsba[2]*this.maxes[h.HSB][2],", ",E,")");case"hsba%":case"hsva%":return this.hsba||(this.hsba=d.default._rgbaToHSBA(this._array)),"hsba(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%, ",(100*E).toPrecision(3),"%)");case"hsl":return this.hsla||(this.hsla=d.default._rgbaToHSLA(this._array)),"hsl(".concat(this.hsla[0]*this.maxes[h.HSL][0],", ",this.hsla[1]*this.maxes[h.HSL][1],", ",this.hsla[2]*this.maxes[h.HSL][2],")");case"hsl%":return this.hsla||(this.hsla=d.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%)");case"hsla":return this.hsla||(this.hsla=d.default._rgbaToHSLA(this._array)),"hsla(".concat(this.hsla[0]*this.maxes[h.HSL][0],", ",this.hsla[1]*this.maxes[h.HSL][1],", ",this.hsla[2]*this.maxes[h.HSL][2],", ",E,")");case"hsla%":return this.hsla||(this.hsla=d.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%, ",(100*E).toPrecision(3),"%)");case"rgba":default:return"rgba(".concat(x[0],",",x[1],",",x[2],",",E,")")}},o.default.Color.prototype.setRed=function(b){this._array[0]=b/this.maxes[h.RGB][0],this._calculateLevels()},o.default.Color.prototype.setGreen=function(b){this._array[1]=b/this.maxes[h.RGB][1],this._calculateLevels()},o.default.Color.prototype.setBlue=function(b){this._array[2]=b/this.maxes[h.RGB][2],this._calculateLevels()},o.default.Color.prototype.setAlpha=function(b){this._array[3]=b/this.maxes[this.mode][3],this._calculateLevels()},o.default.Color.prototype._calculateLevels=function(){for(var b=this._array,x=this.levels=new Array(b.length),S=b.length-1;0<=S;--S)x[S]=Math.round(255*b[S]);this.hsla=null,this.hsba=null},o.default.Color.prototype._getAlpha=function(){return this._array[3]*this.maxes[this.mode][3]},o.default.Color.prototype._storeModeAndMaxes=function(b,x){this.mode=b,this.maxes=x},o.default.Color.prototype._getMode=function(){return this.mode},o.default.Color.prototype._getMaxes=function(){return this.maxes},o.default.Color.prototype._getBlue=function(){return this._array[2]*this.maxes[h.RGB][2]},o.default.Color.prototype._getBrightness=function(){return this.hsba||(this.hsba=d.default._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[h.HSB][2]},o.default.Color.prototype._getGreen=function(){return this._array[1]*this.maxes[h.RGB][1]},o.default.Color.prototype._getHue=function(){return this.mode===h.HSB?(this.hsba||(this.hsba=d.default._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[h.HSB][0]):(this.hsla||(this.hsla=d.default._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[h.HSL][0])},o.default.Color.prototype._getLightness=function(){return this.hsla||(this.hsla=d.default._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[h.HSL][2]},o.default.Color.prototype._getRed=function(){return this._array[0]*this.maxes[h.RGB][0]},o.default.Color.prototype._getSaturation=function(){return this.mode===h.HSB?(this.hsba||(this.hsba=d.default._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[h.HSB][1]):(this.hsla||(this.hsla=d.default._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[h.HSL][1])};var c={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},l=/\s*/,u=/(\d{1,3})/,f=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,p=new RegExp("".concat(f.source,"%")),y={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX4:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,HEX8:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",u.source,",",u.source,",",u.source,"\\)$"].join(l.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",p.source,",",p.source,",",p.source,"\\)$"].join(l.source),"i"),RGBA:new RegExp(["^rgba\\(",u.source,",",u.source,",",u.source,",",f.source,"\\)$"].join(l.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",p.source,",",p.source,",",p.source,",",f.source,"\\)$"].join(l.source),"i"),HSL:new RegExp(["^hsl\\(",u.source,",",p.source,",",p.source,"\\)$"].join(l.source),"i"),HSLA:new RegExp(["^hsla\\(",u.source,",",p.source,",",p.source,",",f.source,"\\)$"].join(l.source),"i"),HSB:new RegExp(["^hsb\\(",u.source,",",p.source,",",p.source,"\\)$"].join(l.source),"i"),HSBA:new RegExp(["^hsba\\(",u.source,",",p.source,",",p.source,",",f.source,"\\)$"].join(l.source),"i")};o.default.Color._parseInputs=function(b,x,S,E){var C,M=arguments.length,I=this.mode,A=this.maxes[I],D=[];if(3<=M){for(D[0]=b/A[0],D[1]=x/A[1],D[2]=S/A[2],D[3]=typeof E=="number"?E/A[3]:1,C=D.length-1;0<=C;--C){var L=D[C];L<0?D[C]=0:1<L&&(D[C]=1)}return I===h.HSL?d.default._hslaToRGBA(D):I===h.HSB?d.default._hsbaToRGBA(D):D}if(M===1&&typeof b=="string"){var O=b.trim().toLowerCase();if(c[O])return o.default.Color._parseInputs.call(this,c[O]);if(y.HEX3.test(O))return(D=y.HEX3.exec(O).slice(1).map(function(N){return parseInt(N+N,16)/255}))[3]=1,D;if(y.HEX6.test(O))return(D=y.HEX6.exec(O).slice(1).map(function(N){return parseInt(N,16)/255}))[3]=1,D;if(y.HEX4.test(O))return D=y.HEX4.exec(O).slice(1).map(function(N){return parseInt(N+N,16)/255});if(y.HEX8.test(O))return D=y.HEX8.exec(O).slice(1).map(function(N){return parseInt(N,16)/255});if(y.RGB.test(O))return(D=y.RGB.exec(O).slice(1).map(function(N){return N/255}))[3]=1,D;if(y.RGB_PERCENT.test(O))return(D=y.RGB_PERCENT.exec(O).slice(1).map(function(N){return parseFloat(N)/100}))[3]=1,D;if(y.RGBA.test(O))return D=y.RGBA.exec(O).slice(1).map(function(N,U){return U===3?parseFloat(N):N/255});if(y.RGBA_PERCENT.test(O))return D=y.RGBA_PERCENT.exec(O).slice(1).map(function(N,U){return U===3?parseFloat(N):parseFloat(N)/100});if(y.HSL.test(O)?(D=y.HSL.exec(O).slice(1).map(function(N,U){return U===0?parseInt(N,10)/360:parseInt(N,10)/100}))[3]=1:y.HSLA.test(O)&&(D=y.HSLA.exec(O).slice(1).map(function(N,U){return U===0?parseInt(N,10)/360:U===3?parseFloat(N):parseInt(N,10)/100})),(D=D.map(function(N){return Math.max(Math.min(N,1),0)})).length)return d.default._hslaToRGBA(D);if(y.HSB.test(O)?(D=y.HSB.exec(O).slice(1).map(function(N,U){return U===0?parseInt(N,10)/360:parseInt(N,10)/100}))[3]=1:y.HSBA.test(O)&&(D=y.HSBA.exec(O).slice(1).map(function(N,U){return U===0?parseInt(N,10)/360:U===3?parseFloat(N):parseInt(N,10)/100})),D.length){for(C=D.length-1;0<=C;--C)D[C]=Math.max(Math.min(D[C],1),0);return d.default._hsbaToRGBA(D)}D=[1,1,1,1]}else{if(M!==1&&M!==2||typeof b!="number")throw new Error("".concat(arguments,"is not a valid color representation."));D[0]=b/A[2],D[1]=b/A[2],D[2]=b/A[2],D[3]=typeof x=="number"?x/A[3]:1,D=D.map(function(N){return Math.max(Math.min(N,1),0)})}return D};var _=o.default.Color;i.default=_},{"../core/constants":253,"../core/main":264,"./color_conversion":249,"core-js/modules/es.array.join":159,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.trim":193}],252:[function(r,s,i){function a(c){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(c)}r("core-js/modules/es.array.fill"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o,h=(o=r("../core/main"))&&o.__esModule?o:{default:o},d=function(c){if(c&&c.__esModule)return c;if(c===null||a(c)!=="object"&&typeof c!="function")return{default:c};var l=g();if(l&&l.has(c))return l.get(c);var u={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in c)if(Object.prototype.hasOwnProperty.call(c,p)){var y=f?Object.getOwnPropertyDescriptor(c,p):null;y&&(y.get||y.set)?Object.defineProperty(u,p,y):u[p]=c[p]}return u.default=c,l&&l.set(c,u),u}(r("../core/constants"));function g(){if(typeof WeakMap!="function")return null;var c=new WeakMap;return g=function(){return c},c}r("./p5.Color"),h.default.prototype.background=function(){var c;return(c=this._renderer).background.apply(c,arguments),this},h.default.prototype.clear=function(){var c=(arguments.length<=0?void 0:arguments[0])||0,l=(arguments.length<=1?void 0:arguments[1])||0,u=(arguments.length<=2?void 0:arguments[2])||0,f=(arguments.length<=3?void 0:arguments[3])||0;return this._renderer.clear(c,l,u,f),this},h.default.prototype.colorMode=function(c,l,u,f,p){if(h.default._validateParameters("colorMode",arguments),c===d.RGB||c===d.HSB||c===d.HSL){this._colorMode=c;var y=this._colorMaxes[c];arguments.length===2?(y[0]=l,y[1]=l,y[2]=l,y[3]=l):arguments.length===4?(y[0]=l,y[1]=u,y[2]=f):arguments.length===5&&(y[0]=l,y[1]=u,y[2]=f,y[3]=p)}return this},h.default.prototype.fill=function(){var c;return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),(c=this._renderer).fill.apply(c,arguments),this},h.default.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this},h.default.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this},h.default.prototype.stroke=function(){var c;return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),(c=this._renderer).stroke.apply(c,arguments),this},h.default.prototype.erase=function(){var c=0<arguments.length&&arguments[0]!==void 0?arguments[0]:255,l=1<arguments.length&&arguments[1]!==void 0?arguments[1]:255;return this._renderer.erase(c,l),this},h.default.prototype.noErase=function(){return this._renderer.noErase(),this};var m=h.default;i.default=m},{"../core/constants":253,"../core/main":264,"./p5.Color":251,"core-js/modules/es.array.fill":151}],253:[function(r,s,i){Object.defineProperty(i,"__esModule",{value:!0}),i.BEZIER=i.QUADRATIC=i.LINEAR=i._CTX_MIDDLE=i._DEFAULT_LEADMULT=i._DEFAULT_TEXT_FILL=i.WORD=i.CHAR=i.BOLDITALIC=i.BOLD=i.ITALIC=i.NORMAL=i.BLUR=i.ERODE=i.DILATE=i.POSTERIZE=i.INVERT=i.OPAQUE=i.GRAY=i.THRESHOLD=i.BURN=i.DODGE=i.SOFT_LIGHT=i.HARD_LIGHT=i.OVERLAY=i.REPLACE=i.SCREEN=i.MULTIPLY=i.EXCLUSION=i.SUBTRACT=i.DIFFERENCE=i.LIGHTEST=i.DARKEST=i.ADD=i.REMOVE=i.BLEND=i.UP_ARROW=i.TAB=i.SHIFT=i.RIGHT_ARROW=i.RETURN=i.OPTION=i.LEFT_ARROW=i.ESCAPE=i.ENTER=i.DOWN_ARROW=i.DELETE=i.CONTROL=i.BACKSPACE=i.ALT=i.AUTO=i.HSL=i.HSB=i.RGB=i.MITER=i.BEVEL=i.ROUND=i.SQUARE=i.PROJECT=i.PIE=i.CHORD=i.OPEN=i.CLOSE=i.TESS=i.QUAD_STRIP=i.QUADS=i.TRIANGLE_STRIP=i.TRIANGLE_FAN=i.TRIANGLES=i.LINE_LOOP=i.LINE_STRIP=i.LINES=i.POINTS=i.BASELINE=i.BOTTOM=i.TOP=i.CENTER=i.LEFT=i.RIGHT=i.RADIUS=i.CORNERS=i.CORNER=i.RAD_TO_DEG=i.DEG_TO_RAD=i.RADIANS=i.DEGREES=i.TWO_PI=i.TAU=i.QUARTER_PI=i.PI=i.HALF_PI=i.WAIT=i.TEXT=i.MOVE=i.HAND=i.CROSS=i.ARROW=i.WEBGL=i.P2D=i.VERSION=void 0,i.FALLBACK=i.LABEL=i.AXES=i.GRID=i._DEFAULT_FILL=i._DEFAULT_STROKE=i.PORTRAIT=i.LANDSCAPE=i.MIRROR=i.CLAMP=i.REPEAT=i.NEAREST=i.IMAGE=i.IMMEDIATE=i.TEXTURE=i.FILL=i.STROKE=i.CURVE=void 0;var a=Math.PI;i.VERSION="1.4.2",i.P2D="p2d",i.WEBGL="webgl",i.ARROW="default",i.CROSS="crosshair",i.HAND="pointer",i.MOVE="move",i.TEXT="text",i.WAIT="wait";var o=a/2;i.HALF_PI=o;var h=a;i.PI=h;var d=a/4;i.QUARTER_PI=d;var g=2*a;i.TAU=g;var m=2*a;i.TWO_PI=m,i.DEGREES="degrees",i.RADIANS="radians";var c=a/180;i.DEG_TO_RAD=c;var l=180/a;i.RAD_TO_DEG=l,i.CORNER="corner",i.CORNERS="corners",i.RADIUS="radius",i.RIGHT="right",i.LEFT="left",i.CENTER="center",i.TOP="top",i.BOTTOM="bottom",i.BASELINE="alphabetic",i.POINTS=0,i.LINES=1,i.LINE_STRIP=3,i.LINE_LOOP=2,i.TRIANGLES=4,i.TRIANGLE_FAN=6,i.TRIANGLE_STRIP=5,i.QUADS="quads",i.QUAD_STRIP="quad_strip",i.TESS="tess",i.CLOSE="close",i.OPEN="open",i.CHORD="chord",i.PIE="pie",i.PROJECT="square",i.SQUARE="butt",i.ROUND="round",i.BEVEL="bevel",i.MITER="miter",i.RGB="rgb",i.HSB="hsb",i.HSL="hsl",i.AUTO="auto",i.ALT=18,i.BACKSPACE=8,i.CONTROL=17,i.DELETE=46,i.DOWN_ARROW=40,i.ENTER=13,i.ESCAPE=27,i.LEFT_ARROW=37,i.OPTION=18,i.RETURN=13,i.RIGHT_ARROW=39,i.SHIFT=16,i.TAB=9,i.UP_ARROW=38,i.BLEND="source-over",i.REMOVE="destination-out",i.ADD="lighter",i.DARKEST="darken",i.LIGHTEST="lighten",i.DIFFERENCE="difference",i.SUBTRACT="subtract",i.EXCLUSION="exclusion",i.MULTIPLY="multiply",i.SCREEN="screen",i.REPLACE="copy",i.OVERLAY="overlay",i.HARD_LIGHT="hard-light",i.SOFT_LIGHT="soft-light",i.DODGE="color-dodge",i.BURN="color-burn",i.THRESHOLD="threshold",i.GRAY="gray",i.OPAQUE="opaque",i.INVERT="invert",i.POSTERIZE="posterize",i.DILATE="dilate",i.ERODE="erode",i.BLUR="blur",i.NORMAL="normal",i.ITALIC="italic",i.BOLD="bold",i.BOLDITALIC="bold italic",i.CHAR="CHAR",i.WORD="WORD",i._DEFAULT_TEXT_FILL="#000000",i._DEFAULT_LEADMULT=1.25,i._CTX_MIDDLE="middle",i.LINEAR="linear",i.QUADRATIC="quadratic",i.BEZIER="bezier",i.CURVE="curve",i.STROKE="stroke",i.FILL="fill",i.TEXTURE="texture",i.IMMEDIATE="immediate",i.IMAGE="image",i.NEAREST="nearest",i.REPEAT="repeat",i.CLAMP="clamp",i.MIRROR="mirror",i.LANDSCAPE="landscape",i.PORTRAIT="portrait",i._DEFAULT_STROKE="#000000",i._DEFAULT_FILL="#FFFFFF",i.GRID="grid",i.AXES="axes",i.LABEL="label",i.FALLBACK="fallback"},{}],254:[function(r,s,i){function a(p){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(p)}r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.search"),r("core-js/modules/es.string.split"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o,h=(o=r("./main"))&&o.__esModule?o:{default:o},d=function(p){if(p&&p.__esModule)return p;if(p===null||a(p)!=="object"&&typeof p!="function")return{default:p};var y=g();if(y&&y.has(p))return y.get(p);var _={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var x in p)if(Object.prototype.hasOwnProperty.call(p,x)){var S=b?Object.getOwnPropertyDescriptor(p,x):null;S&&(S.get||S.set)?Object.defineProperty(_,x,S):_[x]=p[x]}return _.default=p,y&&y.set(p,_),_}(r("./constants"));function g(){if(typeof WeakMap!="function")return null;var p=new WeakMap;return g=function(){return p},p}var m=[d.ARROW,d.CROSS,d.HAND,d.MOVE,d.TEXT,d.WAIT];h.default.prototype._frameRate=0,h.default.prototype._lastFrameTime=window.performance.now(),h.default.prototype._targetFrameRate=60;var c=window.print;function l(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function u(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}h.default.prototype.print=function(){var p;arguments.length?(p=console).log.apply(p,arguments):c()},h.default.prototype.frameCount=0,h.default.prototype.deltaTime=0,h.default.prototype.focused=document.hasFocus(),h.default.prototype.cursor=function(p,y,_){var b="auto",x=this._curElement.elt;if(m.includes(p))b=p;else if(typeof p=="string"){var S="";y&&_&&typeof y=="number"&&typeof _=="number"&&(S="".concat(y," ").concat(_)),b=p.substring(0,7)==="http://"||p.substring(0,8)==="https://"||/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(p)?"url(".concat(p,") ").concat(S,", auto"):p}x.style.cursor=b},h.default.prototype.frameRate=function(p){return h.default._validateParameters("frameRate",arguments),typeof p!="number"||p<0?this._frameRate:(this._setProperty("_targetFrameRate",p),p===0&&this._setProperty("_frameRate",p),this)},h.default.prototype.getFrameRate=function(){return this.frameRate()},h.default.prototype.setFrameRate=function(p){return this.frameRate(p)},h.default.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},h.default.prototype.displayWidth=screen.width,h.default.prototype.displayHeight=screen.height,h.default.prototype.windowWidth=l(),h.default.prototype.windowHeight=u(),h.default.prototype._onresize=function(p){this._setProperty("windowWidth",l()),this._setProperty("windowHeight",u());var y,_=this._isGlobal?window:this;typeof _.windowResized=="function"&&((y=_.windowResized(p))===void 0||y||p.preventDefault())},h.default.prototype.width=0,h.default.prototype.height=0,h.default.prototype.fullscreen=function(p){if(h.default._validateParameters("fullscreen",arguments),p===void 0)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;p?function(y){if(!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))throw new Error("Fullscreen not enabled in this browser.");y.requestFullscreen?y.requestFullscreen():y.mozRequestFullScreen?y.mozRequestFullScreen():y.webkitRequestFullscreen?y.webkitRequestFullscreen():y.msRequestFullscreen&&y.msRequestFullscreen()}(document.documentElement):document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},h.default.prototype.pixelDensity=function(p){var y;return h.default._validateParameters("pixelDensity",arguments),typeof p=="number"?(p!==this._pixelDensity&&(this._pixelDensity=p),(y=this).resizeCanvas(this.width,this.height,!0)):y=this._pixelDensity,y},h.default.prototype.displayDensity=function(){return window.devicePixelRatio},h.default.prototype.getURL=function(){return location.href},h.default.prototype.getURLPath=function(){return location.pathname.split("/").filter(function(p){return p!==""})},h.default.prototype.getURLParams=function(){for(var p,y=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,_={};(p=y.exec(location.search))!=null;)p.index===y.lastIndex&&y.lastIndex++,_[p[1]]=p[2];return _};var f=h.default;i.default=f},{"./constants":253,"./main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.filter":152,"core-js/modules/es.array.includes":156,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.search":190,"core-js/modules/es.string.split":191}],255:[function(r,s,i){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.some"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.get-own-property-names"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.search"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a,o=(a=r("../main"))&&a.__esModule?a:{default:a};r("../internationalization");var h=null,d=null;o.default._friendlyError=o.default._checkForUserDefinedFunctions=o.default._fesErrorMonitor=function(){},h=null;var g="https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup";d=function(){function l(f){return Object.getOwnPropertyNames(f).filter(function(p){return p[0]!=="_"&&!(p in u)&&(u[p]=!0)}).map(function(p){var y;return y=typeof f[p]=="function"?"function":p===p.toUpperCase()?"constant":"variable",{name:p,type:y}})}var u={};(h=[].concat(l(o.default.prototype),l(r("../constants")))).sort(function(f,p){return p.name.length-f.name.length})};function m(l,u){u=u||console.log.bind(console),h||d(),h.some(function(f){if(l.message&&l.message.match("\\W?".concat(f.name,"\\W"))!==null){var p=f.type==="function"?"".concat(f.name,"()"):f.name;return u("Did you just try to use p5.js's ".concat(p," ").concat(f.type,`? If so, you may want to move it into your sketch's setup() function.

For more details, see: `).concat(g)),!0}})}o.default.prototype._helpForMisusedAtTopLevelCode=m,document.readyState!=="complete"&&(window.addEventListener("error",m,!1),window.addEventListener("load",function(){window.removeEventListener("error",m,!1)}));var c=o.default;i.default=c},{"../constants":253,"../internationalization":262,"../main":264,"./browser_errors":void 0,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.filter":152,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.some":163,"core-js/modules/es.function.name":166,"core-js/modules/es.object.assign":173,"core-js/modules/es.object.get-own-property-names":174,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.match":187,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.search":190,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.for-each":228,"core-js/modules/web.dom-collections.iterator":229}],256:[function(r,s,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a,o=(a=r("../main"))&&a.__esModule?a:{default:a};r("../internationalization"),o.default._friendlyFileLoadError=function(){};var h=o.default;i.default=h},{"../internationalization":262,"../main":264}],257:[function(r,s,i){function a(c){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(c)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.flat-map"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.unscopables.flat-map"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=g(r("../main"));r("../internationalization"),d(r("../constants"));function h(){if(typeof WeakMap!="function")return null;var c=new WeakMap;return h=function(){return c},c}function d(c){if(c&&c.__esModule)return c;if(c===null||a(c)!=="object"&&typeof c!="function")return{default:c};var l=h();if(l&&l.has(c))return l.get(c);var u={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in c)if(Object.prototype.hasOwnProperty.call(c,p)){var y=f?Object.getOwnPropertyDescriptor(c,p):null;y&&(y.get||y.set)?Object.defineProperty(u,p,y):u[p]=c[p]}return u.default=c,l&&l.set(c,u),u}function g(c){return c&&c.__esModule?c:{default:c}}o.default._fesCodeReader=function(){};var m=o.default;i.default=m},{"../constants":253,"../internationalization":262,"../main":264,"core-js/modules/es.array.filter":152,"core-js/modules/es.array.flat-map":153,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.from":155,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.unscopables.flat-map":165,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.match":187,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.for-each":228,"core-js/modules/web.dom-collections.iterator":229}],258:[function(r,s,i){r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a,o=(a=r("../main"))&&a.__esModule?a:{default:a};function h(){var g=/(^|@)\S+:\d+/,m=/^\s*at .*(\S+:\d+|\(native\))/m,c=/^(eval@)?(\[native code])?$/;return{parse:function(l){return l.stacktrace!==void 0||l["opera#sourceloc"]!==void 0?this.parseOpera(l):l.stack&&l.stack.match(m)?this.parseV8OrIE(l):l.stack?this.parseFFOrSafari(l):void 0},extractLocation:function(l){if(l.indexOf(":")===-1)return[l];var u=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(l.replace(/[()]/g,""));return[u[1],u[2]||void 0,u[3]||void 0]},parseV8OrIE:function(l){return l.stack.split(`
`).filter(function(u){return!!u.match(m)},this).map(function(u){-1<u.indexOf("(eval ")&&(u=u.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""));var f=u.replace(/^\s+/,"").replace(/\(eval code/g,"("),p=f.match(/ (\((.+):(\d+):(\d+)\)$)/),y=(f=p?f.replace(p[0],""):f).split(/\s+/).slice(1),_=this.extractLocation(p?p[1]:y.pop());return{functionName:y.join(" ")||void 0,fileName:-1<["eval","<anonymous>"].indexOf(_[0])?void 0:_[0],lineNumber:_[1],columnNumber:_[2],source:u}},this)},parseFFOrSafari:function(l){return l.stack.split(`
`).filter(function(u){return!u.match(c)},this).map(function(u){if(-1<u.indexOf(" > eval")&&(u=u.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),u.indexOf("@")===-1&&u.indexOf(":")===-1)return{functionName:u};var f=/((.*".+"[^@]*)?[^@]*)(?:@)/,p=u.match(f),y=p&&p[1]?p[1]:void 0,_=this.extractLocation(u.replace(f,""));return{functionName:y,fileName:_[0],lineNumber:_[1],columnNumber:_[2],source:u}},this)},parseOpera:function(l){return!l.stacktrace||-1<l.message.indexOf(`
`)&&l.message.split(`
`).length>l.stacktrace.split(`
`).length?this.parseOpera9(l):l.stack?this.parseOpera11(l):this.parseOpera10(l)},parseOpera9:function(l){for(var u=/Line (\d+).*script (?:in )?(\S+)/i,f=l.message.split(`
`),p=[],y=2,_=f.length;y<_;y+=2){var b=u.exec(f[y]);b&&p.push({fileName:b[2],lineNumber:b[1],source:f[y]})}return p},parseOpera10:function(l){for(var u=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,f=l.stacktrace.split(`
`),p=[],y=0,_=f.length;y<_;y+=2){var b=u.exec(f[y]);b&&p.push({functionName:b[3]||void 0,fileName:b[2],lineNumber:b[1],source:f[y]})}return p},parseOpera11:function(l){return l.stack.split(`
`).filter(function(u){return!!u.match(g)&&!u.match(/^Error created at/)},this).map(function(u){var f,p=u.split("@"),y=this.extractLocation(p.pop()),_=p.shift()||"",b=_.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0;return _.match(/\(([^)]*)\)/)&&(f=_.replace(/^[^(]+\(([^)]*)\)$/,"$1")),{functionName:b,args:f===void 0||f==="[arguments not available]"?void 0:f.split(","),fileName:y[0],lineNumber:y[1],columnNumber:y[2],source:u}},this)}}}o.default._getErrorStackParser=function(){return new h};var d=o.default;i.default=d},{"../main":264,"core-js/modules/es.array.filter":152,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.join":159,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.match":187,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191}],259:[function(r,s,i){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.map"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.set"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a,o=(a=r("../main"))&&a.__esModule?a:{default:a};(function(m){if(!(m&&m.__esModule)&&!(m===null||d(m)!=="object"&&typeof m!="function")){var c=h();if(c&&c.has(m))return c.get(m);var l={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in m)if(Object.prototype.hasOwnProperty.call(m,f)){var p=u?Object.getOwnPropertyDescriptor(m,f):null;p&&(p.get||p.set)?Object.defineProperty(l,f,p):l[f]=m[f]}l.default=m,c&&c.set(m,l)}})(r("../constants")),r("../internationalization");function h(){if(typeof WeakMap!="function")return null;var m=new WeakMap;return h=function(){return m},m}function d(m){return(d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(m)}o.default._validateParameters=o.default._clearValidateParamsCache=function(){};var g=o.default;i.default=g},{"../../../docs/parameterData.json":void 0,"../constants":253,"../internationalization":262,"../main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.last-index-of":160,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.function.name":166,"core-js/modules/es.map":167,"core-js/modules/es.number.constructor":170,"core-js/modules/es.object.get-prototype-of":175,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.reflect.construct":179,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.set":183,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.for-each":228,"core-js/modules/web.dom-collections.iterator":229}],260:[function(r,s,i){function a(g){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(g)}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=function(g){if(g&&g.__esModule)return g;if(g===null||a(g)!=="object"&&typeof g!="function")return{default:g};var m=h();if(m&&m.has(g))return m.get(g);var c={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in g)if(Object.prototype.hasOwnProperty.call(g,u)){var f=l?Object.getOwnPropertyDescriptor(g,u):null;f&&(f.get||f.set)?Object.defineProperty(c,u,f):c[u]=g[u]}return c.default=g,m&&m.set(g,c),c}(r("./constants"));function h(){if(typeof WeakMap!="function")return null;var g=new WeakMap;return h=function(){return g},g}var d={modeAdjust:function(g,m,c,l,u){return u===o.CORNER?{x:g,y:m,w:c,h:l}:u===o.CORNERS?{x:g,y:m,w:c-g,h:l-m}:u===o.RADIUS?{x:g-c,y:m-l,w:2*c,h:2*l}:u===o.CENTER?{x:g-.5*c,y:m-.5*l,w:c,h:l}:void 0}};i.default=d},{"./constants":253}],261:[function(r,s,i){r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator");var a,o=(a=r("../core/main"))&&a.__esModule?a:{default:a};r("./internationalization");var h=Promise.resolve();Promise.all([new Promise(function(d,g){document.readyState==="complete"?d():window.addEventListener("load",d,!1)}),h]).then(function(){window._setupDone===void 0?window.mocha||(window.setup&&typeof window.setup=="function"||window.draw&&typeof window.draw=="function")&&!o.default.instance&&new o.default:console.warn("p5.js seems to have been imported multiple times. Please remove the duplicate import")})},{"../core/main":264,"./internationalization":262,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.string.iterator":186,"core-js/modules/web.dom-collections.iterator":229}],262:[function(r,s,i){r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.setTranslatorLanguage=i.currentTranslatorLanguage=i.availableTranslatorLanguages=i.initialize=i.translator=void 0;var a,o,h=g(r("i18next")),d=g(r("i18next-browser-languagedetector"));function g(u){return u&&u.__esModule?u:{default:u}}function m(u,f){for(var p=0;p<f.length;p++){var y=f[p];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(u,y.key,y)}}var c=function(){function u(y,_){(function(b,x){if(!(b instanceof x))throw new TypeError("Cannot call a class as a function")})(this,u),this.init(y,_)}var f,p;return f=u,(p=[{key:"fetchWithTimeout",value:function(y,_,b){var x=2<arguments.length&&b!==void 0?b:2e3;return Promise.race([fetch(y,_),new Promise(function(S,E){return setTimeout(function(){return E(new Error("timeout"))},x)})])}},{key:"init",value:function(y,_){var b=1<arguments.length&&_!==void 0?_:{};this.services=y,this.options=b}},{key:"read",value:function(y,_,b){var x=this.options.loadPath;if(y===this.options.fallback)b(null,a[y][_]);else if(o.includes(y)){var S=this.services.interpolator.interpolate(x,{lng:y,ns:_});this.loadUrl(S,b)}else b("Not found",!1)}},{key:"loadUrl",value:function(y,_){this.fetchWithTimeout(y).then(function(b){if(!b.ok)throw new Error("failed loading ".concat(y));return b.json()},function(){throw new Error("failed loading ".concat(y))}).then(function(b){return _(null,b)}).catch(_)}}])&&m(f.prototype,p),u}();c.type="backend";var l=function(u,f){console.debug("p5.js translator called before translations were loaded"),h.default.t(u,f)};i.translator=l,i.initialize=function(){return h.default.use(d.default).use(c).init({fallbackLng:"en",nestingPrefix:"$tr(",nestingSuffix:")",defaultNS:"translation",returnEmptyString:!1,interpolation:{escapeValue:!1},detection:{checkWhitelist:!1,order:["querystring","navigator","htmlTag","path","subdomain"],caches:[]},backend:{fallback:"en",loadPath:"https://cdn.jsdelivr.net/npm/p5/translations/{{lng}}/{{ns}}.json"},partialBundledLanguages:!0,resources:a}).then(function(u){i.translator=l=u},function(u){return console.debug("Translations failed to load (".concat(u,")"))})},i.availableTranslatorLanguages=function(){return h.default.languages},i.currentTranslatorLanguage=function(){return h.default.language},i.setTranslatorLanguage=function(u){return h.default.changeLanguage(u||void 0,function(f){return console.debug("Translations failed to load (".concat(f,")"))})}},{"../../translations":void 0,"../../translations/dev":void 0,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.split":191,"core-js/modules/web.dom-collections.iterator":229,i18next:3,"i18next-browser-languagedetector":3}],263:[function(r,s,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a,o=(a=r("./main"))&&a.__esModule?a:{default:a};o.default.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},o.default.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},o.default.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},o.default.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")};var h=o.default;i.default=h},{"./main":264}],264:[function(r,s,i){function a(l){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(l)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-names"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,r("./shim");var o=function(l){if(l&&l.__esModule)return l;if(l===null||a(l)!=="object"&&typeof l!="function")return{default:l};var u=h();if(u&&u.has(l))return u.get(l);var f={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var y in l)if(Object.prototype.hasOwnProperty.call(l,y)){var _=p?Object.getOwnPropertyDescriptor(l,y):null;_&&(_.get||_.set)?Object.defineProperty(f,y,_):f[y]=l[y]}return f.default=l,u&&u.set(l,f),f}(r("./constants"));function h(){if(typeof WeakMap!="function")return null;var l=new WeakMap;return h=function(){return l},l}function d(l,u){for(var f=0;f<u.length;f++){var p=u[f];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(l,p.key,p)}}var g=function(){function l(p,y,_){var b=this;(function($,ne){if(!($ instanceof ne))throw new TypeError("Cannot call a class as a function")})(this,l),this._setupDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._userNode=y,this._curElement=null,this._elements=[],this._glAttributes=null,this._requestAnimId=0,this._preloadCount=0,this._isGlobal=!1,this._loop=!0,this._initializeInstanceVariables(),this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,dblclick:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},this._millisStart=-1,this._lcg_random_state=null,this._gaussian_previous=!1,this._events.wheel=null,this._loadingScreenId="p5_loading",this._registeredMethods={};var x=Object.getOwnPropertyNames(l.prototype._registeredMethods),S=!0,E=!1,C=void 0;try{for(var M,I=x[Symbol.iterator]();!(S=(M=I.next()).done);S=!0){var A=M.value;this._registeredMethods[A]=l.prototype._registeredMethods[A].slice()}}catch($){E=!0,C=$}finally{try{S||I.return==null||I.return()}finally{if(E)throw C}}window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),this._start=function(){b._userNode&&typeof b._userNode=="string"&&(b._userNode=document.getElementById(b._userNode));var $=b._isGlobal?window:b;if($.preload){var ne=document.getElementById(b._loadingScreenId);ne||((ne=document.createElement("div")).innerHTML="Loading...",ne.style.position="absolute",ne.id=b._loadingScreenId,(b._userNode||document.body).appendChild(ne));var oe=b._preloadMethods;for(var _e in oe){oe[_e]=oe[_e]||l;var he=oe[_e];he!==l.prototype&&he!==l||(b._isGlobal&&(window[_e]=b._wrapPreload(b,_e)),he=b),b._registeredPreloadMethods[_e]=he[_e],he[_e]=b._wrapPreload(he,_e)}$.preload(),b._runIfPreloadsAreDone()}else b._setup(),b._draw()},this._runIfPreloadsAreDone=function(){var $=this._isGlobal?window:this;if($._preloadCount===0){var ne=document.getElementById($._loadingScreenId);ne&&ne.parentNode.removeChild(ne),this._setupDone||(this._lastFrameTime=window.performance.now(),$._setup(),$._draw())}},this._decrementPreload=function(){var $=this._isGlobal?window:this;typeof $.preload=="function"&&($._setProperty("_preloadCount",$._preloadCount-1),$._runIfPreloadsAreDone())},this._wrapPreload=function($,ne){var oe=this;return function(){oe._incrementPreload();for(var _e=arguments.length,he=new Array(_e),Te=0;Te<_e;Te++)he[Te]=arguments[Te];return oe._registeredPreloadMethods[ne].apply($,he)}},this._incrementPreload=function(){var $=this._isGlobal?window:this;$._setProperty("_preloadCount",$._preloadCount+1)},this._setup=function(){b.createCanvas(b._defaultCanvasSize.width,b._defaultCanvasSize.height,"p2d");var $=b._isGlobal?window:b;if(typeof $.preload=="function")for(var ne in b._preloadMethods)$[ne]=b._preloadMethods[ne][ne],$[ne]&&b&&($[ne]=$[ne].bind(b));b._millisStart=window.performance.now(),typeof $.setup=="function"&&$.setup();var oe=document.getElementsByTagName("canvas"),_e=!0,he=!1,Te=void 0;try{for(var fe,pe=oe[Symbol.iterator]();!(_e=(fe=pe.next()).done);_e=!0){var R=fe.value;R.dataset.hidden==="true"&&(R.style.visibility="",delete R.dataset.hidden)}}catch(V){he=!0,Te=V}finally{try{_e||pe.return==null||pe.return()}finally{if(he)throw Te}}b._lastFrameTime=window.performance.now(),b._setupDone=!0,(b._accessibleOutputs.grid||b._accessibleOutputs.text)&&b._updateAccsOutput()},this._draw=function(){var $=window.performance.now(),ne=$-b._lastFrameTime,oe=1e3/b._targetFrameRate;(!b._loop||oe-5<=ne)&&(b.redraw(),b._frameRate=1e3/($-b._lastFrameTime),b.deltaTime=$-b._lastFrameTime,b._setProperty("deltaTime",b.deltaTime),b._lastFrameTime=$,b._updateMouseCoords!==void 0&&(b._updateMouseCoords(),b._setProperty("movedX",0),b._setProperty("movedY",0))),b._loop&&(b._requestAnimId=window.requestAnimationFrame(b._draw))},this._setProperty=function($,ne){b[$]=ne,b._isGlobal&&(window[$]=ne)},this.remove=function(){var $=document.getElementById(b._loadingScreenId);if($&&($.parentNode.removeChild($),b._incrementPreload()),b._curElement){for(var ne in b._loop=!1,b._requestAnimId&&window.cancelAnimationFrame(b._requestAnimId),b._events)window.removeEventListener(ne,b._events[ne]);var oe=!0,_e=!1,he=void 0;try{for(var Te,fe=b._elements[Symbol.iterator]();!(oe=(Te=fe.next()).done);oe=!0){var pe=Te.value;for(var R in pe.elt&&pe.elt.parentNode&&pe.elt.parentNode.removeChild(pe.elt),pe._events)pe.elt.removeEventListener(R,pe._events[R])}}catch(se){_e=!0,he=se}finally{try{oe||fe.return==null||fe.return()}finally{if(_e)throw he}}var V=b;b._registeredMethods.remove.forEach(function(se){se!==void 0&&se.call(V)})}if(b._isGlobal){for(var q in l.prototype)try{delete window[q]}catch{window[q]=void 0}for(var ee in b)if(b.hasOwnProperty(ee))try{delete window[ee]}catch{window[ee]=void 0}l.instance=null}},this._registeredMethods.init.forEach(function($){$!==void 0&&$.call(this)},this),this._setupPromisePreloads();var D=this._createFriendlyGlobalFunctionBinder();if(p)p(this),l._checkForUserDefinedFunctions(this);else{for(var L in this._isGlobal=!0,l.instance=this,l.prototype)if(typeof l.prototype[L]=="function"){var O=L.substring(2);this._events.hasOwnProperty(O)||(Math.hasOwnProperty(L)&&Math[L]===l.prototype[L]?D(L,l.prototype[L]):D(L,l.prototype[L].bind(this)))}else D(L,l.prototype[L]);for(var N in this)this.hasOwnProperty(N)&&D(N,this[N])}for(var U in this._events){var K=this["_on".concat(U)];if(K){var J=K.bind(this);window.addEventListener(U,J,{passive:!1}),this._events[U]=J}}function z(){b._setProperty("focused",!0)}function H(){b._setProperty("focused",!1)}window.addEventListener("focus",z),window.addEventListener("blur",H),this.registerMethod("remove",function(){window.removeEventListener("focus",z),window.removeEventListener("blur",H)}),document.readyState==="complete"?this._start():window.addEventListener("load",this._start.bind(this),!1)}var u,f;return u=l,(f=[{key:"_initializeInstanceVariables",value:function(){this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1},this._styles=[],this._bezierDetail=20,this._curveDetail=20,this._colorMode=o.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},this._downKeys={}}},{key:"registerPreloadMethod",value:function(p,y){l.prototype._preloadMethods.hasOwnProperty(p)||(l.prototype._preloadMethods[p]=y)}},{key:"registerMethod",value:function(p,y){var _=this||l.prototype;_._registeredMethods.hasOwnProperty(p)||(_._registeredMethods[p]=[]),_._registeredMethods[p].push(y)}},{key:"_createFriendlyGlobalFunctionBinder",value:function(p){var y=0<arguments.length&&p!==void 0?p:{},_=y.globalObject||window;return y.log||console.log.bind(console),function(b,x){_[b]=x}}}])&&d(u.prototype,f),l}();for(var m in g.instance=null,g.disableFriendlyErrors=!1,o)g.prototype[m]=o[m];g.VERSION=o.VERSION,g.prototype._preloadMethods={loadJSON:g.prototype,loadImage:g.prototype,loadStrings:g.prototype,loadXML:g.prototype,loadBytes:g.prototype,loadTable:g.prototype,loadFont:g.prototype,loadModel:g.prototype,loadShader:g.prototype},g.prototype._registeredMethods={init:[],pre:[],post:[],remove:[]},g.prototype._registeredPreloadMethods={};var c=g;i.default=c},{"./constants":253,"./shim":275,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-names":174,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.for-each":228,"core-js/modules/web.dom-collections.iterator":229}],265:[function(r,s,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a,o=(a=r("./main"))&&a.__esModule?a:{default:a};o.default.Element=function(d,g){this.elt=d,this._pInst=this._pixelsState=g,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight},o.default.Element.prototype.parent=function(d){return d===void 0?this.elt.parentNode:(typeof d=="string"?(d[0]==="#"&&(d=d.substring(1)),d=document.getElementById(d)):d instanceof o.default.Element&&(d=d.elt),d.appendChild(this.elt),this)},o.default.Element.prototype.id=function(d){return d===void 0?this.elt.id:(this.elt.id=d,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)},o.default.Element.prototype.class=function(d){return d===void 0?this.elt.className:(this.elt.className=d,this)},o.default.Element.prototype.mousePressed=function(d){return o.default.Element._adjustListener("mousedown",function(g){return this._pInst._setProperty("mouseIsPressed",!0),this._pInst._setMouseButton(g),d.call(this,g)},this),this},o.default.Element.prototype.doubleClicked=function(d){return o.default.Element._adjustListener("dblclick",d,this),this},o.default.Element.prototype.mouseWheel=function(d){return o.default.Element._adjustListener("wheel",d,this),this},o.default.Element.prototype.mouseReleased=function(d){return o.default.Element._adjustListener("mouseup",d,this),this},o.default.Element.prototype.mouseClicked=function(d){return o.default.Element._adjustListener("click",d,this),this},o.default.Element.prototype.mouseMoved=function(d){return o.default.Element._adjustListener("mousemove",d,this),this},o.default.Element.prototype.mouseOver=function(d){return o.default.Element._adjustListener("mouseover",d,this),this},o.default.Element.prototype.mouseOut=function(d){return o.default.Element._adjustListener("mouseout",d,this),this},o.default.Element.prototype.touchStarted=function(d){return o.default.Element._adjustListener("touchstart",d,this),this},o.default.Element.prototype.touchMoved=function(d){return o.default.Element._adjustListener("touchmove",d,this),this},o.default.Element.prototype.touchEnded=function(d){return o.default.Element._adjustListener("touchend",d,this),this},o.default.Element.prototype.dragOver=function(d){return o.default.Element._adjustListener("dragover",d,this),this},o.default.Element.prototype.dragLeave=function(d){return o.default.Element._adjustListener("dragleave",d,this),this},o.default.Element._adjustListener=function(d,g,m){return g===!1?o.default.Element._detachListener(d,m):o.default.Element._attachListener(d,g,m),this},o.default.Element._attachListener=function(d,g,m){m._events[d]&&o.default.Element._detachListener(d,m);var c=g.bind(m);m.elt.addEventListener(d,c,!1),m._events[d]=c},o.default.Element._detachListener=function(d,g){var m=g._events[d];g.elt.removeEventListener(d,m,!1),g._events[d]=null},o.default.Element.prototype._setProperty=function(d,g){this[d]=g};var h=o.default.Element;i.default=h},{"./main":264}],266:[function(r,s,i){function a(c){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(c)}r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.splice"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o,h=(o=r("./main"))&&o.__esModule?o:{default:o},d=function(c){if(c&&c.__esModule)return c;if(c===null||a(c)!=="object"&&typeof c!="function")return{default:c};var l=g();if(l&&l.has(c))return l.get(c);var u={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in c)if(Object.prototype.hasOwnProperty.call(c,p)){var y=f?Object.getOwnPropertyDescriptor(c,p):null;y&&(y.get||y.set)?Object.defineProperty(u,p,y):u[p]=c[p]}return u.default=c,l&&l.set(c,u),u}(r("./constants"));function g(){if(typeof WeakMap!="function")return null;var c=new WeakMap;return g=function(){return c},c}h.default.Graphics=function(c,l,u,f){var p=u||d.P2D;this.canvas=document.createElement("canvas");var y=f._userNode||document.body;for(var _ in y.appendChild(this.canvas),h.default.Element.call(this,this.canvas,f),h.default.prototype)this[_]||(typeof h.default.prototype[_]=="function"?this[_]=h.default.prototype[_].bind(this):this[_]=h.default.prototype[_]);return h.default.prototype._initializeInstanceVariables.apply(this),this.width=c,this.height=l,this._pixelDensity=f._pixelDensity,p===d.WEBGL?this._renderer=new h.default.RendererGL(this.canvas,this,!1):this._renderer=new h.default.Renderer2D(this.canvas,this,!1),f._elements.push(this),Object.defineProperty(this,"deltaTime",{get:function(){return this._pInst.deltaTime}}),this._renderer.resize(c,l),this._renderer._applyDefaults(),this},h.default.Graphics.prototype=Object.create(h.default.Element.prototype),h.default.Graphics.prototype.reset=function(){this._renderer.resetMatrix(),this._renderer.isP3D&&this._renderer._update()},h.default.Graphics.prototype.remove=function(){this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt);var c=this._pInst._elements.indexOf(this);for(var l in c!==-1&&this._pInst._elements.splice(c,1),this._events)this.elt.removeEventListener(l,this._events[l])};var m=h.default.Graphics;i.default=m},{"./constants":253,"./main":264,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.splice":164}],267:[function(r,s,i){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a,o=(a=r("./main"))&&a.__esModule?a:{default:a},h=function(l){if(l&&l.__esModule)return l;if(l===null||g(l)!=="object"&&typeof l!="function")return{default:l};var u=d();if(u&&u.has(l))return u.get(l);var f={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var y in l)if(Object.prototype.hasOwnProperty.call(l,y)){var _=p?Object.getOwnPropertyDescriptor(l,y):null;_&&(_.get||_.set)?Object.defineProperty(f,y,_):f[y]=l[y]}return f.default=l,u&&u.set(l,f),f}(r("../core/constants"));function d(){if(typeof WeakMap!="function")return null;var l=new WeakMap;return d=function(){return l},l}function g(l){return(g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(l)}function m(l){var u=0,f=0;if(l.offsetParent)for(;u+=l.offsetLeft,f+=l.offsetTop,l=l.offsetParent;);else u+=l.offsetLeft,f+=l.offsetTop;return[u,f]}o.default.Renderer=function(l,u,f){o.default.Element.call(this,l,u),this.canvas=l,this._pixelsState=u,f?(this._isMainCanvas=!0,this._pInst._setProperty("_curElement",this),this._pInst._setProperty("canvas",this.canvas),this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height)):(this.canvas.style.display="none",this._styles=[]),this._textSize=12,this._textLeading=15,this._textFont="sans-serif",this._textStyle=h.NORMAL,this._textAscent=null,this._textDescent=null,this._textAlign=h.LEFT,this._textBaseline=h.BASELINE,this._textWrap=h.WORD,this._rectMode=h.CORNER,this._ellipseMode=h.CENTER,this._curveTightness=0,this._imageMode=h.CORNER,this._tint=null,this._doStroke=!0,this._doFill=!0,this._strokeSet=!1,this._fillSet=!1,this._leadingSet=!1},o.default.Renderer.prototype=Object.create(o.default.Element.prototype),o.default.Renderer.prototype.push=function(){return{properties:{_doStroke:this._doStroke,_strokeSet:this._strokeSet,_doFill:this._doFill,_fillSet:this._fillSet,_tint:this._tint,_imageMode:this._imageMode,_rectMode:this._rectMode,_ellipseMode:this._ellipseMode,_textFont:this._textFont,_textLeading:this._textLeading,_leadingSet:this._leadingSet,_textSize:this._textSize,_textAlign:this._textAlign,_textBaseline:this._textBaseline,_textStyle:this._textStyle,_textWrap:this._textWrap}}},o.default.Renderer.prototype.pop=function(l){l.properties&&Object.assign(this,l.properties)},o.default.Renderer.prototype.resize=function(l,u){this.width=l,this.height=u,this.elt.width=l*this._pInst._pixelDensity,this.elt.height=u*this._pInst._pixelDensity,this.elt.style.width="".concat(l,"px"),this.elt.style.height="".concat(u,"px"),this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))},o.default.Renderer.prototype.get=function(l,u,f,p){var y=this._pixelsState,_=y._pixelDensity,b=this.canvas;if(l===void 0&&u===void 0)l=u=0,f=y.width,p=y.height;else if(l*=_,u*=_,f===void 0&&p===void 0)return l<0||u<0||l>=b.width||u>=b.height?[0,0,0,0]:this._getPixel(l,u);var x=new o.default.Image(f,p);return x.canvas.getContext("2d").drawImage(b,l,u,f*_,p*_,0,0,f,p),x},o.default.Renderer.prototype.textLeading=function(l){return typeof l=="number"?(this._setProperty("_leadingSet",!0),this._setProperty("_textLeading",l),this._pInst):this._textLeading},o.default.Renderer.prototype.textSize=function(l){return typeof l=="number"?(this._setProperty("_textSize",l),this._leadingSet||this._setProperty("_textLeading",l*h._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},o.default.Renderer.prototype.textStyle=function(l){return l?(l!==h.NORMAL&&l!==h.ITALIC&&l!==h.BOLD&&l!==h.BOLDITALIC||this._setProperty("_textStyle",l),this._applyTextProperties()):this._textStyle},o.default.Renderer.prototype.textAscent=function(){return this._textAscent===null&&this._updateTextMetrics(),this._textAscent},o.default.Renderer.prototype.textDescent=function(){return this._textDescent===null&&this._updateTextMetrics(),this._textDescent},o.default.Renderer.prototype.textAlign=function(l,u){return l!==void 0?(this._setProperty("_textAlign",l),u!==void 0&&this._setProperty("_textBaseline",u),this._applyTextProperties()):{horizontal:this._textAlign,vertical:this._textBaseline}},o.default.Renderer.prototype.textWrap=function(l){return this._setProperty("_textWrap",l),this._textWrap},o.default.Renderer.prototype.text=function(l,u,f,p,y){var _,b,x,S,E,C,M,I=this._pInst,A=this._textWrap,D=Number.MAX_VALUE;if((this._doFill||this._doStroke)&&l!==void 0){if(typeof l!="string"&&(l=l.toString()),_=(l=l.replace(/(\t)/g,"  ")).split(`
`),p!==void 0){switch(this._rectMode===h.CENTER&&(u-=p/2),this._textAlign){case h.CENTER:u+=p/2;break;case h.RIGHT:u+=p}var L=!1;if(y!==void 0){switch(this._rectMode===h.CENTER&&(f-=y/2),this._textBaseline){case h.BOTTOM:M=f+y,f=Math.max(M,f);break;case h.CENTER:M=f+y/2,f=Math.max(M,f);break;case h.BASELINE:L=!0,this._textBaseline=h.TOP}D=f+y-I.textAscent()}if(A===h.WORD){for(var O=[],N=0;N<_.length;N++){b="",E=_[N].split(" ");for(var U=0;U<E.length;U++)x="".concat(b+E[U])+" ",b=p<(S=this.textWidth(x))&&0<b.length?(O.push(b),"".concat(E[U])+" "):x;O.push(b)}var K=0,J=I.textAlign().vertical;J===h.CENTER?K=(O.length-1)*I.textLeading()/2:J===h.BOTTOM&&(K=(O.length-1)*I.textLeading());for(var z=0;z<_.length;z++){b="",E=_[z].split(" ");for(var H=0;H<E.length;H++)x="".concat(b+E[H])+" ",p<(S=this.textWidth(x))&&0<b.length?(this._renderText(I,b.trim(),u,f-K,D),b="".concat(E[H])+" ",f+=I.textLeading()):b=x;this._renderText(I,b.trim(),u,f-K,D),f+=I.textLeading(),L&&(this._textBaseline=h.BASELINE)}}else{for(var $=[],ne=0;ne<_.length;ne++){b="",C=_[ne].split("");for(var oe=0;oe<C.length;oe++)x="".concat(b+C[oe]),(S=this.textWidth(x))<=p?b+=C[oe]:p<S&&0<b.length&&($.push(b),b="".concat(C[oe]))}$.push(b);var _e=0,he=I.textAlign().vertical;he===h.CENTER?_e=($.length-1)*I.textLeading()/2:he===h.BOTTOM&&(_e=($.length-1)*I.textLeading());for(var Te=0;Te<_.length;Te++){b="",C=_[Te].split("");for(var fe=0;fe<C.length;fe++)x="".concat(b+C[fe]),(S=this.textWidth(x))<=p?b+=C[fe]:p<S&&0<b.length&&(this._renderText(I,b.trim(),u,f-_e,D),f+=I.textLeading(),b="".concat(C[fe]))}this._renderText(I,b.trim(),u,f-_e,D),f+=I.textLeading(),L&&(this._textBaseline=h.BASELINE)}}else{var pe=0,R=I.textAlign().vertical;R===h.CENTER?pe=(_.length-1)*I.textLeading()/2:R===h.BOTTOM&&(pe=(_.length-1)*I.textLeading());for(var V=0;V<_.length;V++)this._renderText(I,_[V],u,f-pe,D),f+=I.textLeading()}return I}},o.default.Renderer.prototype._applyDefaults=function(){return this},o.default.Renderer.prototype._isOpenType=function(){var l=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this._textFont;return g(l)==="object"&&l.font&&l.font.supported},o.default.Renderer.prototype._updateTextMetrics=function(){if(this._isOpenType())return this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent()),this;var l=document.createElement("span");l.style.fontFamily=this._textFont,l.style.fontSize="".concat(this._textSize,"px"),l.innerHTML="ABCjgq|";var u=document.createElement("div");u.style.display="inline-block",u.style.width="1px",u.style.height="0px";var f=document.createElement("div");f.appendChild(l),f.appendChild(u),f.style.height="0px",f.style.overflow="hidden",document.body.appendChild(f),u.style.verticalAlign="baseline";var p=m(u),y=m(l),_=p[1]-y[1];u.style.verticalAlign="bottom",p=m(u),y=m(l);var b=p[1]-y[1]-_;return document.body.removeChild(f),this._setProperty("_textAscent",_),this._setProperty("_textDescent",b),this};var c=o.default.Renderer;i.default=c},{"../core/constants":253,"./main":264,"core-js/modules/es.array.iterator":158,"core-js/modules/es.number.constructor":170,"core-js/modules/es.object.assign":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":229}],268:[function(r,s,i){function a(u){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(u)}r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=m(r("./main")),h=function(u){if(u&&u.__esModule)return u;if(u===null||a(u)!=="object"&&typeof u!="function")return{default:u};var f=g();if(f&&f.has(u))return f.get(u);var p={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var _ in u)if(Object.prototype.hasOwnProperty.call(u,_)){var b=y?Object.getOwnPropertyDescriptor(u,_):null;b&&(b.get||b.set)?Object.defineProperty(p,_,b):p[_]=u[_]}return p.default=u,f&&f.set(u,p),p}(r("./constants")),d=m(r("../image/filters"));function g(){if(typeof WeakMap!="function")return null;var u=new WeakMap;return g=function(){return u},u}function m(u){return u&&u.__esModule?u:{default:u}}r("./p5.Renderer");var c="rgba(0,0,0,0)";o.default.Renderer2D=function(u,f,p){return o.default.Renderer.call(this,u,f,p),this.drawingContext=this.canvas.getContext("2d"),this._pInst._setProperty("drawingContext",this.drawingContext),this},o.default.Renderer2D.prototype=Object.create(o.default.Renderer.prototype),o.default.Renderer2D.prototype._applyDefaults=function(){this._cachedFillStyle=this._cachedStrokeStyle=void 0,this._cachedBlendMode=h.BLEND,this._setFill(h._DEFAULT_FILL),this._setStroke(h._DEFAULT_STROKE),this.drawingContext.lineCap=h.ROUND,this.drawingContext.font="normal 12px sans-serif"},o.default.Renderer2D.prototype.resize=function(u,f){o.default.Renderer.prototype.resize.call(this,u,f),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)},o.default.Renderer2D.prototype.background=function(){if(this.drawingContext.save(),this.resetMatrix(),(arguments.length<=0?void 0:arguments[0])instanceof o.default.Image)if(0<=(arguments.length<=1?void 0:arguments[1])){var u=arguments.length<=0?void 0:arguments[0];this.drawingContext.globalAlpha=(arguments.length<=1?void 0:arguments[1])/255,this._pInst.image(u,0,0,this.width,this.height)}else this._pInst.image(arguments.length<=0?void 0:arguments[0],0,0,this.width,this.height);else{var f,p=this._getFill(),y=(f=this._pInst).color.apply(f,arguments);this._pInst._addAccsOutput()&&this._pInst._accsBackground(y.levels);var _=y.toString();this._setFill(_),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.fillRect(0,0,this.width,this.height),this._setFill(p),this._isErasing&&this._pInst.erase()}this.drawingContext.restore()},o.default.Renderer2D.prototype.clear=function(){this.drawingContext.save(),this.resetMatrix(),this.drawingContext.clearRect(0,0,this.width,this.height),this.drawingContext.restore()},o.default.Renderer2D.prototype.fill=function(){var u,f=(u=this._pInst).color.apply(u,arguments);this._setFill(f.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("fill",f.levels)},o.default.Renderer2D.prototype.stroke=function(){var u,f=(u=this._pInst).color.apply(u,arguments);this._setStroke(f.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("stroke",f.levels)},o.default.Renderer2D.prototype.erase=function(u,f){if(!this._isErasing){this._cachedFillStyle=this.drawingContext.fillStyle;var p=this._pInst.color(255,u).toString();this.drawingContext.fillStyle=p,this._cachedStrokeStyle=this.drawingContext.strokeStyle;var y=this._pInst.color(255,f).toString();this.drawingContext.strokeStyle=y;var _=this._cachedBlendMode;this.blendMode(h.REMOVE),this._cachedBlendMode=_,this._isErasing=!0}},o.default.Renderer2D.prototype.noErase=function(){this._isErasing&&(this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode),this._isErasing=!1)},o.default.Renderer2D.prototype.image=function(u,f,p,y,_,b,x,S,E){var C;u.gifProperties&&u._animateGif(this._pInst);try{this._tint&&(o.default.MediaElement&&u instanceof o.default.MediaElement&&u.loadPixels(),u.canvas&&(C=this._getTintedImageCanvas(u))),C=C||u.canvas||u.elt;var M=1;u.width&&0<u.width&&(M=C.width/u.width),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.drawImage(C,M*f,M*p,M*y,M*_,b,x,S,E),this._isErasing&&this._pInst.erase()}catch(I){if(I.name!=="NS_ERROR_NOT_AVAILABLE")throw I}},o.default.Renderer2D.prototype._getTintedImageCanvas=function(u){if(!u.canvas)return u;var f=d.default._toPixels(u.canvas),p=document.createElement("canvas");p.width=u.canvas.width,p.height=u.canvas.height;for(var y=p.getContext("2d"),_=y.createImageData(u.canvas.width,u.canvas.height),b=_.data,x=0;x<f.length;x+=4){var S=f[x],E=f[x+1],C=f[x+2],M=f[x+3];b[x]=S*this._tint[0]/255,b[x+1]=E*this._tint[1]/255,b[x+2]=C*this._tint[2]/255,b[x+3]=M*this._tint[3]/255}return y.putImageData(_,0,0),p},o.default.Renderer2D.prototype.blendMode=function(u){if(u===h.SUBTRACT)console.warn("blendMode(SUBTRACT) only works in WEBGL mode.");else{if(u!==h.BLEND&&u!==h.REMOVE&&u!==h.DARKEST&&u!==h.LIGHTEST&&u!==h.DIFFERENCE&&u!==h.MULTIPLY&&u!==h.EXCLUSION&&u!==h.SCREEN&&u!==h.REPLACE&&u!==h.OVERLAY&&u!==h.HARD_LIGHT&&u!==h.SOFT_LIGHT&&u!==h.DODGE&&u!==h.BURN&&u!==h.ADD)throw new Error("Mode ".concat(u," not recognized."));this._cachedBlendMode=u,this.drawingContext.globalCompositeOperation=u}},o.default.Renderer2D.prototype.blend=function(){for(var u=this.drawingContext.globalCompositeOperation,f=arguments.length,p=new Array(f),y=0;y<f;y++)p[y]=arguments[y];var _=p[p.length-1],b=Array.prototype.slice.call(p,0,p.length-1);this.drawingContext.globalCompositeOperation=_,o.default.prototype.copy.apply(this,b),this.drawingContext.globalCompositeOperation=u},o.default.Renderer2D.prototype._getPixel=function(u,f){var p;return[(p=this.drawingContext.getImageData(u,f,1,1).data)[0],p[1],p[2],p[3]]},o.default.Renderer2D.prototype.loadPixels=function(){var u=this._pixelsState,f=u._pixelDensity,p=this.width*f,y=this.height*f,_=this.drawingContext.getImageData(0,0,p,y);u._setProperty("imageData",_),u._setProperty("pixels",_.data)},o.default.Renderer2D.prototype.set=function(u,f,p){u=Math.floor(u),f=Math.floor(f);var y=this._pixelsState;if(p instanceof o.default.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(y._pixelDensity,y._pixelDensity),this.drawingContext.clearRect(u,f,p.width,p.height),this.drawingContext.drawImage(p.canvas,u,f),this.drawingContext.restore();else{var _=0,b=0,x=0,S=0,E=4*(f*y._pixelDensity*(this.width*y._pixelDensity)+u*y._pixelDensity);if(y.imageData||y.loadPixels.call(y),typeof p=="number")E<y.pixels.length&&(x=b=_=p,S=255);else if(p instanceof Array){if(p.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");E<y.pixels.length&&(_=p[0],b=p[1],x=p[2],S=p[3])}else p instanceof o.default.Color&&E<y.pixels.length&&(_=p.levels[0],b=p.levels[1],x=p.levels[2],S=p.levels[3]);for(var C=0;C<y._pixelDensity;C++)for(var M=0;M<y._pixelDensity;M++)E=4*((f*y._pixelDensity+M)*this.width*y._pixelDensity+(u*y._pixelDensity+C)),y.pixels[E]=_,y.pixels[E+1]=b,y.pixels[E+2]=x,y.pixels[E+3]=S}},o.default.Renderer2D.prototype.updatePixels=function(u,f,p,y){var _=this._pixelsState,b=_._pixelDensity;u===void 0&&f===void 0&&p===void 0&&y===void 0&&(f=u=0,p=this.width,y=this.height),u*=b,f*=b,p*=b,y*=b,this.gifProperties&&(this.gifProperties.frames[this.gifProperties.displayIndex].image=_.imageData),this.drawingContext.putImageData(_.imageData,u,f,0,0,p,y)},o.default.Renderer2D.prototype._acuteArcToBezier=function(u,f){var p=f/2,y=Math.cos(p),_=Math.sin(p),b=1/Math.tan(p),x=u+p,S=Math.cos(x),E=Math.sin(x),C=(4-y)/3,M=_+(y-C)*b;return{ax:Math.cos(u).toFixed(7),ay:Math.sin(u).toFixed(7),bx:(C*S+M*E).toFixed(7),by:(C*E-M*S).toFixed(7),cx:(C*S-M*E).toFixed(7),cy:(C*E+M*S).toFixed(7),dx:Math.cos(u+f).toFixed(7),dy:Math.sin(u+f).toFixed(7)}},o.default.Renderer2D.prototype.arc=function(u,f,p,y,_,b,x){var S=this.drawingContext,E=p/2,C=y/2,M=0,I=[];for(u+=E,f+=C;1e-5<=b-_;)M=Math.min(b-_,h.HALF_PI),I.push(this._acuteArcToBezier(_,M)),_+=M;return this._doFill&&(S.beginPath(),I.forEach(function(A,D){D===0&&S.moveTo(u+A.ax*E,f+A.ay*C),S.bezierCurveTo(u+A.bx*E,f+A.by*C,u+A.cx*E,f+A.cy*C,u+A.dx*E,f+A.dy*C)}),x!==h.PIE&&x!=null||S.lineTo(u,f),S.closePath(),S.fill()),this._doStroke&&(S.beginPath(),I.forEach(function(A,D){D===0&&S.moveTo(u+A.ax*E,f+A.ay*C),S.bezierCurveTo(u+A.bx*E,f+A.by*C,u+A.cx*E,f+A.cy*C,u+A.dx*E,f+A.dy*C)}),x===h.PIE?(S.lineTo(u,f),S.closePath()):x===h.CHORD&&S.closePath(),S.stroke()),this},o.default.Renderer2D.prototype.ellipse=function(u){var f=this.drawingContext,p=this._doFill,y=this._doStroke,_=parseFloat(u[0]),b=parseFloat(u[1]),x=parseFloat(u[2]),S=parseFloat(u[3]);if(p&&!y){if(this._getFill()===c)return this}else if(!p&&y&&this._getStroke()===c)return this;var E=x/2*.5522847498,C=S/2*.5522847498,M=_+x,I=b+S,A=_+x/2,D=b+S/2;f.beginPath(),f.moveTo(_,D),f.bezierCurveTo(_,D-C,A-E,b,A,b),f.bezierCurveTo(A+E,b,M,D-C,M,D),f.bezierCurveTo(M,D+C,A+E,I,A,I),f.bezierCurveTo(A-E,I,_,D+C,_,D),p&&f.fill(),y&&f.stroke()},o.default.Renderer2D.prototype.line=function(u,f,p,y){var _=this.drawingContext;return this._doStroke&&(this._getStroke()===c||(_.beginPath(),_.moveTo(u,f),_.lineTo(p,y),_.stroke())),this},o.default.Renderer2D.prototype.point=function(u,f){var p=this.drawingContext;if(!this._doStroke)return this;if(this._getStroke()===c)return this;var y=this._getStroke(),_=this._getFill();this._setFill(y),p.beginPath(),p.arc(u,f,p.lineWidth/2,0,h.TWO_PI,!1),p.fill(),this._setFill(_)},o.default.Renderer2D.prototype.quad=function(u,f,p,y,_,b,x,S){var E=this.drawingContext,C=this._doFill,M=this._doStroke;if(C&&!M){if(this._getFill()===c)return this}else if(!C&&M&&this._getStroke()===c)return this;return E.beginPath(),E.moveTo(u,f),E.lineTo(p,y),E.lineTo(_,b),E.lineTo(x,S),E.closePath(),C&&E.fill(),M&&E.stroke(),this},o.default.Renderer2D.prototype.rect=function(u){var f=u[0],p=u[1],y=u[2],_=u[3],b=u[4],x=u[5],S=u[6],E=u[7],C=this.drawingContext,M=this._doFill,I=this._doStroke;if(M&&!I){if(this._getFill()===c)return this}else if(!M&&I&&this._getStroke()===c)return this;if(C.beginPath(),b===void 0)C.rect(f,p,y,_);else{x===void 0&&(x=b),S===void 0&&(S=x),E===void 0&&(E=S);var A=Math.abs(y),D=Math.abs(_),L=A/2,O=D/2;A<2*b&&(b=L),D<2*b&&(b=O),A<2*x&&(x=L),D<2*x&&(x=O),A<2*S&&(S=L),D<2*S&&(S=O),A<2*E&&(E=L),D<2*E&&(E=O),C.beginPath(),C.moveTo(f+b,p),C.arcTo(f+y,p,f+y,p+_,x),C.arcTo(f+y,p+_,f,p+_,S),C.arcTo(f,p+_,f,p,E),C.arcTo(f,p,f+y,p,b),C.closePath()}return this._doFill&&C.fill(),this._doStroke&&C.stroke(),this},o.default.Renderer2D.prototype.triangle=function(u){var f=this.drawingContext,p=this._doFill,y=this._doStroke,_=u[0],b=u[1],x=u[2],S=u[3],E=u[4],C=u[5];if(p&&!y){if(this._getFill()===c)return this}else if(!p&&y&&this._getStroke()===c)return this;f.beginPath(),f.moveTo(_,b),f.lineTo(x,S),f.lineTo(E,C),f.closePath(),p&&f.fill(),y&&f.stroke()},o.default.Renderer2D.prototype.endShape=function(u,f,p,y,_,b,x){if(f.length===0)return this;if(!this._doStroke&&!this._doFill)return this;var S,E,C,M=u===h.CLOSE;M&&!b&&f.push(f[0]);var I=f.length;if(!p||x!==h.POLYGON&&x!==null)if(!y||x!==h.POLYGON&&x!==null)if(!_||x!==h.POLYGON&&x!==null)if(x===h.POINTS)for(E=0;E<I;E++)S=f[E],this._doStroke&&this._pInst.stroke(S[6]),this._pInst.point(S[0],S[1]);else if(x===h.LINES)for(E=0;E+1<I;E+=2)S=f[E],this._doStroke&&this._pInst.stroke(f[E+1][6]),this._pInst.line(S[0],S[1],f[E+1][0],f[E+1][1]);else if(x===h.TRIANGLES)for(E=0;E+2<I;E+=3)S=f[E],this.drawingContext.beginPath(),this.drawingContext.moveTo(S[0],S[1]),this.drawingContext.lineTo(f[E+1][0],f[E+1][1]),this.drawingContext.lineTo(f[E+2][0],f[E+2][1]),this.drawingContext.closePath(),this._doFill&&(this._pInst.fill(f[E+2][5]),this.drawingContext.fill()),this._doStroke&&(this._pInst.stroke(f[E+2][6]),this.drawingContext.stroke());else if(x===h.TRIANGLE_STRIP)for(E=0;E+1<I;E++)S=f[E],this.drawingContext.beginPath(),this.drawingContext.moveTo(f[E+1][0],f[E+1][1]),this.drawingContext.lineTo(S[0],S[1]),this._doStroke&&this._pInst.stroke(f[E+1][6]),this._doFill&&this._pInst.fill(f[E+1][5]),E+2<I&&(this.drawingContext.lineTo(f[E+2][0],f[E+2][1]),this._doStroke&&this._pInst.stroke(f[E+2][6]),this._doFill&&this._pInst.fill(f[E+2][5])),this._doFillStrokeClose(M);else if(x===h.TRIANGLE_FAN){if(2<I){for(this.drawingContext.beginPath(),E=2;E<I;E++)S=f[E],this.drawingContext.moveTo(f[0][0],f[0][1]),this.drawingContext.lineTo(f[E-1][0],f[E-1][1]),this.drawingContext.lineTo(S[0],S[1]),this.drawingContext.lineTo(f[0][0],f[0][1]),E<I-1&&(this._doFill&&S[5]!==f[E+1][5]||this._doStroke&&S[6]!==f[E+1][6])&&(this._doFill&&(this._pInst.fill(S[5]),this.drawingContext.fill(),this._pInst.fill(f[E+1][5])),this._doStroke&&(this._pInst.stroke(S[6]),this.drawingContext.stroke(),this._pInst.stroke(f[E+1][6])),this.drawingContext.closePath(),this.drawingContext.beginPath());this._doFillStrokeClose(M)}}else if(x===h.QUADS)for(E=0;E+3<I;E+=4){for(S=f[E],this.drawingContext.beginPath(),this.drawingContext.moveTo(S[0],S[1]),C=1;C<4;C++)this.drawingContext.lineTo(f[E+C][0],f[E+C][1]);this.drawingContext.lineTo(S[0],S[1]),this._doFill&&this._pInst.fill(f[E+3][5]),this._doStroke&&this._pInst.stroke(f[E+3][6]),this._doFillStrokeClose(M)}else if(x===h.QUAD_STRIP){if(3<I)for(E=0;E+1<I;E+=2)S=f[E],this.drawingContext.beginPath(),E+3<I?(this.drawingContext.moveTo(f[E+2][0],f[E+2][1]),this.drawingContext.lineTo(S[0],S[1]),this.drawingContext.lineTo(f[E+1][0],f[E+1][1]),this.drawingContext.lineTo(f[E+3][0],f[E+3][1]),this._doFill&&this._pInst.fill(f[E+3][5]),this._doStroke&&this._pInst.stroke(f[E+3][6])):(this.drawingContext.moveTo(S[0],S[1]),this.drawingContext.lineTo(f[E+1][0],f[E+1][1])),this._doFillStrokeClose(M)}else{for(this.drawingContext.beginPath(),this.drawingContext.moveTo(f[0][0],f[0][1]),E=1;E<I;E++)(S=f[E]).isVert&&(S.moveTo?this.drawingContext.moveTo(S[0],S[1]):this.drawingContext.lineTo(S[0],S[1]));this._doFillStrokeClose(M)}else{for(this.drawingContext.beginPath(),E=0;E<I;E++)f[E].isVert?f[E].moveTo?this.drawingContext.moveTo(f[E][0],f[E][1]):this.drawingContext.lineTo(f[E][0],f[E][1]):this.drawingContext.quadraticCurveTo(f[E][0],f[E][1],f[E][2],f[E][3]);this._doFillStrokeClose(M)}else{for(this.drawingContext.beginPath(),E=0;E<I;E++)f[E].isVert?f[E].moveTo?this.drawingContext.moveTo(f[E][0],f[E][1]):this.drawingContext.lineTo(f[E][0],f[E][1]):this.drawingContext.bezierCurveTo(f[E][0],f[E][1],f[E][2],f[E][3],f[E][4],f[E][5]);this._doFillStrokeClose(M)}else if(3<I){var A=[],D=1-this._curveTightness;for(this.drawingContext.beginPath(),this.drawingContext.moveTo(f[1][0],f[1][1]),E=1;E+2<I;E++)S=f[E],A[0]=[S[0],S[1]],A[1]=[S[0]+(D*f[E+1][0]-D*f[E-1][0])/6,S[1]+(D*f[E+1][1]-D*f[E-1][1])/6],A[2]=[f[E+1][0]+(D*f[E][0]-D*f[E+2][0])/6,f[E+1][1]+(D*f[E][1]-D*f[E+2][1])/6],A[3]=[f[E+1][0],f[E+1][1]],this.drawingContext.bezierCurveTo(A[1][0],A[1][1],A[2][0],A[2][1],A[3][0],A[3][1]);M&&this.drawingContext.lineTo(f[E+1][0],f[E+1][1]),this._doFillStrokeClose(M)}return b=_=y=p=!1,M&&f.pop(),this},o.default.Renderer2D.prototype.strokeCap=function(u){return u!==h.ROUND&&u!==h.SQUARE&&u!==h.PROJECT||(this.drawingContext.lineCap=u),this},o.default.Renderer2D.prototype.strokeJoin=function(u){return u!==h.ROUND&&u!==h.BEVEL&&u!==h.MITER||(this.drawingContext.lineJoin=u),this},o.default.Renderer2D.prototype.strokeWeight=function(u){return this.drawingContext.lineWidth=u===void 0||u===0?1e-4:u,this},o.default.Renderer2D.prototype._getFill=function(){return this._cachedFillStyle||(this._cachedFillStyle=this.drawingContext.fillStyle),this._cachedFillStyle},o.default.Renderer2D.prototype._setFill=function(u){u!==this._cachedFillStyle&&(this.drawingContext.fillStyle=u,this._cachedFillStyle=u)},o.default.Renderer2D.prototype._getStroke=function(){return this._cachedStrokeStyle||(this._cachedStrokeStyle=this.drawingContext.strokeStyle),this._cachedStrokeStyle},o.default.Renderer2D.prototype._setStroke=function(u){u!==this._cachedStrokeStyle&&(this.drawingContext.strokeStyle=u,this._cachedStrokeStyle=u)},o.default.Renderer2D.prototype.bezier=function(u,f,p,y,_,b,x,S){return this._pInst.beginShape(),this._pInst.vertex(u,f),this._pInst.bezierVertex(p,y,_,b,x,S),this._pInst.endShape(),this},o.default.Renderer2D.prototype.curve=function(u,f,p,y,_,b,x,S){return this._pInst.beginShape(),this._pInst.curveVertex(u,f),this._pInst.curveVertex(p,y),this._pInst.curveVertex(_,b),this._pInst.curveVertex(x,S),this._pInst.endShape(),this},o.default.Renderer2D.prototype._doFillStrokeClose=function(u){u&&this.drawingContext.closePath(),this._doFill&&this.drawingContext.fill(),this._doStroke&&this.drawingContext.stroke()},o.default.Renderer2D.prototype.applyMatrix=function(u,f,p,y,_,b){this.drawingContext.transform(u,f,p,y,_,b)},o.default.Renderer2D.prototype.resetMatrix=function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this},o.default.Renderer2D.prototype.rotate=function(u){this.drawingContext.rotate(u)},o.default.Renderer2D.prototype.scale=function(u,f){return this.drawingContext.scale(u,f),this},o.default.Renderer2D.prototype.translate=function(u,f){return u instanceof o.default.Vector&&(f=u.y,u=u.x),this.drawingContext.translate(u,f),this},o.default.Renderer2D.prototype.text=function(u,f,p,y,_){var b;y!==void 0&&this.drawingContext.textBaseline===h.BASELINE&&(b=!0,this.drawingContext.textBaseline=h.TOP);var x=o.default.Renderer.prototype.text.apply(this,arguments);return b&&(this.drawingContext.textBaseline=h.BASELINE),x},o.default.Renderer2D.prototype._renderText=function(u,f,p,y,_){if(!(_<=y))return u.push(),this._isOpenType()?this._textFont._renderPath(f,p,y,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(f,p,y),this._doFill&&(this._fillSet||this._setFill(h._DEFAULT_TEXT_FILL),this.drawingContext.fillText(f,p,y))),u.pop(),u},o.default.Renderer2D.prototype.textWidth=function(u){return this._isOpenType()?this._textFont._textWidth(u,this._textSize):this.drawingContext.measureText(u).width},o.default.Renderer2D.prototype._applyTextProperties=function(){var u,f=this._pInst;return this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),u=this._textFont,this._isOpenType()&&(u=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),this.drawingContext.font="".concat(this._textStyle||"normal"," ").concat(this._textSize||12,"px ").concat(u||"sans-serif"),this.drawingContext.textAlign=this._textAlign,this._textBaseline===h.CENTER?this.drawingContext.textBaseline=h._CTX_MIDDLE:this.drawingContext.textBaseline=this._textBaseline,f},o.default.Renderer2D.prototype.push=function(){return this.drawingContext.save(),o.default.Renderer.prototype.push.apply(this)},o.default.Renderer2D.prototype.pop=function(u){this.drawingContext.restore(),this._cachedFillStyle=this.drawingContext.fillStyle,this._cachedStrokeStyle=this.drawingContext.strokeStyle,o.default.Renderer.prototype.pop.call(this,u)};var l=o.default.Renderer2D;i.default=l},{"../image/filters":285,"./constants":253,"./main":264,"./p5.Renderer":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.fill":151,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.slice":162,"core-js/modules/es.function.name":166,"core-js/modules/es.number.to-fixed":172,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182}],269:[function(r,s,i){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator");var a,o=(a=r("./main"))&&a.__esModule?a:{default:a};o.default.prototype._promisePreloads=[];var h=!(o.default.prototype.registerPromisePreload=function(g){o.default.prototype._promisePreloads.push(g)});o.default.prototype._setupPromisePreloads=function(){var g=!0,m=!1,c=void 0;try{for(var l,u=this._promisePreloads[Symbol.iterator]();!(g=(l=u.next()).done);g=!0){var f=l.value,p=this,y=f.method,_=f.addCallbacks,b=f.legacyPreloadSetup,x=f.target||this,S=x[y].bind(x);if(x===o.default.prototype){if(h)continue;p=null,S=x[y]}x[y]=this._wrapPromisePreload(p,S,_),b&&(x[b.method]=this._legacyPreloadGenerator(p,b,x[y]))}}catch(E){m=!0,c=E}finally{try{g||u.return==null||u.return()}finally{if(m)throw c}}h=!0},o.default.prototype._wrapPromisePreload=function(g,m,c){var l=function(){var u=this;this._incrementPreload();for(var f=null,p=null,y=arguments.length,_=new Array(y),b=0;b<y;b++)_[b]=arguments[b];if(c)for(var x=_.length-1;0<=x&&!p&&typeof _[x]=="function";x--)p=f,f=_.pop();var S=Promise.resolve(m.apply(this,_));return f&&S.then(f),p&&S.catch(p),S.then(function(){return u._decrementPreload()}),S};return g&&(l=l.bind(g)),l};function d(){return{}}o.default.prototype._legacyPreloadGenerator=function(g,m,c){var l=m.createBaseObject||d,u=function(){var f=this;this._incrementPreload();var p=l.apply(this,arguments);return c.apply(this,arguments).then(function(y){Object.assign(p,y),f._decrementPreload()}),p};return g&&(u=u.bind(g)),u}},{"./main":264,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.assign":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":229}],270:[function(r,s,i){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a,o=(a=r("./main"))&&a.__esModule?a:{default:a},h=function(l){if(l&&l.__esModule)return l;if(l===null||g(l)!=="object"&&typeof l!="function")return{default:l};var u=d();if(u&&u.has(l))return u.get(l);var f={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var y in l)if(Object.prototype.hasOwnProperty.call(l,y)){var _=p?Object.getOwnPropertyDescriptor(l,y):null;_&&(_.get||_.set)?Object.defineProperty(f,y,_):f[y]=l[y]}return f.default=l,u&&u.set(l,f),f}(r("./constants"));function d(){if(typeof WeakMap!="function")return null;var l=new WeakMap;return d=function(){return l},l}function g(l){return(g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(l)}r("./p5.Graphics"),r("./p5.Renderer2D"),r("../webgl/p5.RendererGL");var m="defaultCanvas0";o.default.prototype.createCanvas=function(l,u,f){o.default._validateParameters("createCanvas",arguments);var p,y=f||h.P2D;if(y===h.WEBGL){if(p=document.getElementById(m)){p.parentNode.removeChild(p);var _=this._renderer;this._elements=this._elements.filter(function(S){return S!==_})}(p=document.createElement("canvas")).id=m,p.classList.add("p5Canvas")}else if(this._defaultGraphicsCreated)p=this.canvas;else{p=document.createElement("canvas");for(var b=0;document.getElementById("defaultCanvas".concat(b));)b++;m="defaultCanvas".concat(b),p.id=m,p.classList.add("p5Canvas")}if(this._setupDone||(p.dataset.hidden=!0,p.style.visibility="hidden"),this._userNode)this._userNode.appendChild(p);else{if(document.getElementsByTagName("main").length===0){var x=document.createElement("main");document.body.appendChild(x)}document.getElementsByTagName("main")[0].appendChild(p)}return y===h.WEBGL?(this._setProperty("_renderer",new o.default.RendererGL(p,this,!0)),this._elements.push(this._renderer)):this._defaultGraphicsCreated||(this._setProperty("_renderer",new o.default.Renderer2D(p,this,!0)),this._defaultGraphicsCreated=!0,this._elements.push(this._renderer)),this._renderer.resize(l,u),this._renderer._applyDefaults(),this._renderer},o.default.prototype.resizeCanvas=function(l,u,f){if(o.default._validateParameters("resizeCanvas",arguments),this._renderer){var p={};for(var y in this.drawingContext){var _=this.drawingContext[y];g(_)!=="object"&&typeof _!="function"&&(p[y]=_)}for(var b in this._renderer.resize(l,u),this.width=l,this.height=u,p)try{this.drawingContext[b]=p[b]}catch{}f||this.redraw()}this._addAccsOutput()&&this._updateAccsOutput()},o.default.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},o.default.prototype.createGraphics=function(l,u,f){return o.default._validateParameters("createGraphics",arguments),new o.default.Graphics(l,u,f,this)},o.default.prototype.blendMode=function(l){o.default._validateParameters("blendMode",arguments),l===h.NORMAL&&(console.warn("NORMAL has been deprecated for use in blendMode. defaulting to BLEND instead."),l=h.BLEND),this._renderer.blendMode(l)};var c=o.default;i.default=c},{"../webgl/p5.RendererGL":318,"./constants":253,"./main":264,"./p5.Graphics":266,"./p5.Renderer2D":268,"core-js/modules/es.array.filter":152,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":229}],271:[function(r,s,i){function a(l){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(l)}r("core-js/modules/es.array.slice"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=m(r("../main")),h=function(l){if(l&&l.__esModule)return l;if(l===null||a(l)!=="object"&&typeof l!="function")return{default:l};var u=g();if(u&&u.has(l))return u.get(l);var f={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var y in l)if(Object.prototype.hasOwnProperty.call(l,y)){var _=p?Object.getOwnPropertyDescriptor(l,y):null;_&&(_.get||_.set)?Object.defineProperty(f,y,_):f[y]=l[y]}return f.default=l,u&&u.set(l,f),f}(r("../constants")),d=m(r("../helpers"));function g(){if(typeof WeakMap!="function")return null;var l=new WeakMap;return g=function(){return l},l}function m(l){return l&&l.__esModule?l:{default:l}}r("../friendly_errors/fes_core"),r("../friendly_errors/file_errors"),r("../friendly_errors/validate_params"),o.default.prototype._normalizeArcAngles=function(l,u,f,p,y){var _;return l-=h.TWO_PI*Math.floor(l/h.TWO_PI),u-=h.TWO_PI*Math.floor(u/h.TWO_PI),_=Math.min(Math.abs(l-u),h.TWO_PI-Math.abs(l-u)),y&&(l=l<=h.HALF_PI?Math.atan(f/p*Math.tan(l)):l>h.HALF_PI&&l<=3*h.HALF_PI?Math.atan(f/p*Math.tan(l))+h.PI:Math.atan(f/p*Math.tan(l))+h.TWO_PI,u=u<=h.HALF_PI?Math.atan(f/p*Math.tan(u)):u>h.HALF_PI&&u<=3*h.HALF_PI?Math.atan(f/p*Math.tan(u))+h.PI:Math.atan(f/p*Math.tan(u))+h.TWO_PI),u<l&&(u+=h.TWO_PI),{start:l,stop:u,correspondToSamePoint:_<1e-5}},o.default.prototype.arc=function(l,u,f,p,y,_,b,x){if(o.default._validateParameters("arc",arguments),!this._renderer._doStroke&&!this._renderer._doFill)return this;if(y===_)return this;y=this._toRadians(y),_=this._toRadians(_),f=Math.abs(f),p=Math.abs(p);var S=d.default.modeAdjust(l,u,f,p,this._renderer._ellipseMode),E=this._normalizeArcAngles(y,_,S.w,S.h,!0);return E.correspondToSamePoint?this._renderer.ellipse([S.x,S.y,S.w,S.h,x]):(this._renderer.arc(S.x,S.y,S.w,S.h,E.start,E.stop,b,x),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("arc",[S.x,S.y,S.w,S.h,E.start,E.stop,b])),this},o.default.prototype.ellipse=function(l,u,f,p,y){return o.default._validateParameters("ellipse",arguments),this._renderEllipse.apply(this,arguments)},o.default.prototype.circle=function(){o.default._validateParameters("circle",arguments);var l=Array.prototype.slice.call(arguments,0,2);return l.push(arguments[2]),l.push(arguments[2]),this._renderEllipse.apply(this,l)},o.default.prototype._renderEllipse=function(l,u,f,p,y){if(!this._renderer._doStroke&&!this._renderer._doFill)return this;f<0&&(f=Math.abs(f)),p===void 0?p=f:p<0&&(p=Math.abs(p));var _=d.default.modeAdjust(l,u,f,p,this._renderer._ellipseMode);return this._renderer.ellipse([_.x,_.y,_.w,_.h,y]),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("ellipse",[_.x,_.y,_.w,_.h]),this},o.default.prototype.line=function(){for(var l=arguments.length,u=new Array(l),f=0;f<l;f++)u[f]=arguments[f];var p;return o.default._validateParameters("line",u),this._renderer._doStroke&&(p=this._renderer).line.apply(p,u),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("line",u),this},o.default.prototype.point=function(){for(var l=arguments.length,u=new Array(l),f=0;f<l;f++)u[f]=arguments[f];var p;return o.default._validateParameters("point",u),this._renderer._doStroke&&(u.length===1&&u[0]instanceof o.default.Vector?this._renderer.point.call(this._renderer,u[0].x,u[0].y,u[0].z):((p=this._renderer).point.apply(p,u),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("point",u))),this},o.default.prototype.quad=function(){for(var l=arguments.length,u=new Array(l),f=0;f<l;f++)u[f]=arguments[f];var p;return o.default._validateParameters("quad",u),(this._renderer._doStroke||this._renderer._doFill)&&(this._renderer.isP3D&&u.length<=12?this._renderer.quad.call(this._renderer,u[0],u[1],0,u[2],u[3],0,u[4],u[5],0,u[6],u[7],0,u[8],u[9]):((p=this._renderer).quad.apply(p,u),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("quadrilateral",u))),this},o.default.prototype.rect=function(){return o.default._validateParameters("rect",arguments),this._renderRect.apply(this,arguments)},o.default.prototype.square=function(l,u,f,p,y,_,b){return o.default._validateParameters("square",arguments),this._renderRect.call(this,l,u,f,f,p,y,_,b)},o.default.prototype._renderRect=function(){if(this._renderer._doStroke||this._renderer._doFill){arguments.length===3&&(arguments[3]=arguments[2]);for(var l=d.default.modeAdjust(arguments[0],arguments[1],arguments[2],arguments[3],this._renderer._rectMode),u=[l.x,l.y,l.w,l.h],f=4;f<arguments.length;f++)u[f]=arguments[f];this._renderer.rect(u),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("rectangle",[l.x,l.y,l.w,l.h])}return this},o.default.prototype.triangle=function(){for(var l=arguments.length,u=new Array(l),f=0;f<l;f++)u[f]=arguments[f];return o.default._validateParameters("triangle",u),(this._renderer._doStroke||this._renderer._doFill)&&this._renderer.triangle(u),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("triangle",u),this};var c=o.default;i.default=c},{"../constants":253,"../friendly_errors/fes_core":255,"../friendly_errors/file_errors":256,"../friendly_errors/validate_params":259,"../helpers":260,"../main":264,"core-js/modules/es.array.slice":162}],272:[function(r,s,i){function a(c){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(c)}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o,h=(o=r("../main"))&&o.__esModule?o:{default:o},d=function(c){if(c&&c.__esModule)return c;if(c===null||a(c)!=="object"&&typeof c!="function")return{default:c};var l=g();if(l&&l.has(c))return l.get(c);var u={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in c)if(Object.prototype.hasOwnProperty.call(c,p)){var y=f?Object.getOwnPropertyDescriptor(c,p):null;y&&(y.get||y.set)?Object.defineProperty(u,p,y):u[p]=c[p]}return u.default=c,l&&l.set(c,u),u}(r("../constants"));function g(){if(typeof WeakMap!="function")return null;var c=new WeakMap;return g=function(){return c},c}h.default.prototype.ellipseMode=function(c){return h.default._validateParameters("ellipseMode",arguments),c!==d.CORNER&&c!==d.CORNERS&&c!==d.RADIUS&&c!==d.CENTER||(this._renderer._ellipseMode=c),this},h.default.prototype.noSmooth=function(){return this._renderer.isP3D?this.setAttributes("antialias",!1):"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!1),this},h.default.prototype.rectMode=function(c){return h.default._validateParameters("rectMode",arguments),c!==d.CORNER&&c!==d.CORNERS&&c!==d.RADIUS&&c!==d.CENTER||(this._renderer._rectMode=c),this},h.default.prototype.smooth=function(){return this.setAttributes("antialias",!0),this._renderer.isP3D||"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!0),this},h.default.prototype.strokeCap=function(c){return h.default._validateParameters("strokeCap",arguments),c!==d.ROUND&&c!==d.SQUARE&&c!==d.PROJECT||this._renderer.strokeCap(c),this},h.default.prototype.strokeJoin=function(c){return h.default._validateParameters("strokeJoin",arguments),c!==d.ROUND&&c!==d.BEVEL&&c!==d.MITER||this._renderer.strokeJoin(c),this},h.default.prototype.strokeWeight=function(c){return h.default._validateParameters("strokeWeight",arguments),this._renderer.strokeWeight(c),this};var m=h.default;i.default=m},{"../constants":253,"../main":264}],273:[function(r,s,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a,o=(a=r("../main"))&&a.__esModule?a:{default:a};r("../friendly_errors/fes_core"),r("../friendly_errors/file_errors"),r("../friendly_errors/validate_params"),o.default.prototype.bezier=function(){for(var d,g=arguments.length,m=new Array(g),c=0;c<g;c++)m[c]=arguments[c];return o.default._validateParameters("bezier",m),(this._renderer._doStroke||this._renderer._doFill)&&(d=this._renderer).bezier.apply(d,m),this},o.default.prototype.bezierDetail=function(d){return o.default._validateParameters("bezierDetail",arguments),this._bezierDetail=d,this},o.default.prototype.bezierPoint=function(d,g,m,c,l){o.default._validateParameters("bezierPoint",arguments);var u=1-l;return Math.pow(u,3)*d+3*Math.pow(u,2)*l*g+3*u*Math.pow(l,2)*m+Math.pow(l,3)*c},o.default.prototype.bezierTangent=function(d,g,m,c,l){o.default._validateParameters("bezierTangent",arguments);var u=1-l;return 3*c*Math.pow(l,2)-3*m*Math.pow(l,2)+6*m*u*l-6*g*u*l+3*g*Math.pow(u,2)-3*d*Math.pow(u,2)},o.default.prototype.curve=function(){for(var d=arguments.length,g=new Array(d),m=0;m<d;m++)g[m]=arguments[m];var c;return o.default._validateParameters("curve",g),this._renderer._doStroke&&(c=this._renderer).curve.apply(c,g),this},o.default.prototype.curveDetail=function(d){return o.default._validateParameters("curveDetail",arguments),this._curveDetail=d<3?3:d,this},o.default.prototype.curveTightness=function(d){return o.default._validateParameters("curveTightness",arguments),this._renderer._curveTightness=d,this},o.default.prototype.curvePoint=function(d,g,m,c,l){o.default._validateParameters("curvePoint",arguments);var u=l*l*l,f=l*l;return d*(-.5*u+f-.5*l)+g*(1.5*u-2.5*f+1)+m*(-1.5*u+2*f+.5*l)+c*(.5*u-.5*f)},o.default.prototype.curveTangent=function(d,g,m,c,l){o.default._validateParameters("curveTangent",arguments);var u=l*l;return d*(-3*u/2+2*l-.5)+g*(9*u/2-5*l)+m*(-9*u/2+4*l+.5)+c*(3*u/2-l)};var h=o.default;i.default=h},{"../friendly_errors/fes_core":255,"../friendly_errors/file_errors":256,"../friendly_errors/validate_params":259,"../main":264}],274:[function(r,s,i){function a(x){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(x)}r("core-js/modules/es.array.slice"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o,h=(o=r("../main"))&&o.__esModule?o:{default:o},d=function(x){if(x&&x.__esModule)return x;if(x===null||a(x)!=="object"&&typeof x!="function")return{default:x};var S=g();if(S&&S.has(x))return S.get(x);var E={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var M in x)if(Object.prototype.hasOwnProperty.call(x,M)){var I=C?Object.getOwnPropertyDescriptor(x,M):null;I&&(I.get||I.set)?Object.defineProperty(E,M,I):E[M]=x[M]}return E.default=x,S&&S.set(x,E),E}(r("../constants"));function g(){if(typeof WeakMap!="function")return null;var x=new WeakMap;return g=function(){return x},x}var m=null,c=[],l=[],u=!1,f=!1,p=!1,y=!1,_=!0;h.default.prototype.beginContour=function(){return l=[],y=!0,this},h.default.prototype.beginShape=function(x){var S;return h.default._validateParameters("beginShape",arguments),this._renderer.isP3D?(S=this._renderer).beginShape.apply(S,arguments):(m=x===d.POINTS||x===d.LINES||x===d.TRIANGLES||x===d.TRIANGLE_FAN||x===d.TRIANGLE_STRIP||x===d.QUADS||x===d.QUAD_STRIP?x:null,c=[],l=[]),this},h.default.prototype.bezierVertex=function(){for(var x=arguments.length,S=new Array(x),E=0;E<x;E++)S[E]=arguments[E];var C;if(h.default._validateParameters("bezierVertex",S),this._renderer.isP3D)(C=this._renderer).bezierVertex.apply(C,S);else if(c.length===0)h.default._friendlyError("vertex() must be used once before calling bezierVertex()","bezierVertex");else{u=!0;for(var M=[],I=0;I<S.length;I++)M[I]=S[I];M.isVert=!1,y?l.push(M):c.push(M)}return this},h.default.prototype.curveVertex=function(){for(var x=arguments.length,S=new Array(x),E=0;E<x;E++)S[E]=arguments[E];var C;return h.default._validateParameters("curveVertex",S),this._renderer.isP3D?(C=this._renderer).curveVertex.apply(C,S):(f=!0,this.vertex(S[0],S[1])),this},h.default.prototype.endContour=function(){var x=l[0].slice();x.isVert=l[0].isVert,x.moveTo=!1,l.push(x),_&&(c.push(c[0]),_=!1);for(var S=0;S<l.length;S++)c.push(l[S]);return this},h.default.prototype.endShape=function(x){if(h.default._validateParameters("endShape",arguments),this._renderer.isP3D)this._renderer.endShape(x,f,u,p,y,m);else{if(c.length===0)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;var S=x===d.CLOSE;S&&!y&&c.push(c[0]),this._renderer.endShape(x,c,f,u,p,y,m),_=!(y=p=u=f=!1),S&&c.pop()}return this},h.default.prototype.quadraticVertex=function(){for(var x=arguments.length,S=new Array(x),E=0;E<x;E++)S[E]=arguments[E];if(h.default._validateParameters("quadraticVertex",S),this._renderer.isP3D){var C;(C=this._renderer).quadraticVertex.apply(C,S)}else{if(this._contourInited){var M={};return M.x=S[0],M.y=S[1],M.x3=S[2],M.y3=S[3],M.type=d.QUADRATIC,this._contourVertices.push(M),this}if(0<c.length){p=!0;for(var I=[],A=0;A<S.length;A++)I[A]=S[A];I.isVert=!1,y?l.push(I):c.push(I)}else h.default._friendlyError("vertex() must be used once before calling quadraticVertex()","quadraticVertex")}return this},h.default.prototype.vertex=function(x,S,E,C,M){if(this._renderer.isP3D){var I;(I=this._renderer).vertex.apply(I,arguments)}else{var A=[];A.isVert=!0,A[0]=x,A[1]=S,A[2]=0,A[3]=0,A[4]=0,A[5]=this._renderer._getFill(),A[6]=this._renderer._getStroke(),E&&(A.moveTo=E),y?(l.length===0&&(A.moveTo=!0),l.push(A)):c.push(A)}return this},h.default.prototype.normal=function(x,S,E){var C;return this._assert3d("normal"),h.default._validateParameters("normal",arguments),(C=this._renderer).normal.apply(C,arguments),this};var b=h.default;i.default=b},{"../constants":253,"../main":264,"core-js/modules/es.array.slice":162}],275:[function(r,s,i){function a(o){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(o)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.uint8-clamped-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(o,h){window.setTimeout(o,1e3/60)},typeof Uint8ClampedArray>"u"||Uint8ClampedArray.prototype.slice||Object.defineProperty(Uint8ClampedArray.prototype,"slice",{value:Array.prototype.slice,writable:!0,configurable:!0,enumerable:!1}),function(){if(!Object.assign){var o=Object.keys,h=Object.defineProperty,d=typeof Symbol=="function"&&a(Symbol())==="symbol",g=Object.prototype.propertyIsEnumerable,m=function(c){return function(l){return g.call(c,l)}};h(Object,"assign",{value:function(c,l){if(c==null)throw new TypeError("target must be an object");var u,f,p,y,_=Object(c);for(u=1;u<arguments.length;++u)for(f=Object(arguments[u]),y=o(f),d&&Object.getOwnPropertySymbols&&y.push.apply(y,Object.getOwnPropertySymbols(f).filter(m(f))),p=0;p<y.length;++p)_[y[p]]=f[y[p]];return _},configurable:!0,enumerable:!1,writable:!0})}}()},{"core-js/modules/es.array.filter":152,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.assign":173,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-clamped-array":227,"core-js/modules/web.dom-collections.iterator":229}],276:[function(r,s,i){r("core-js/modules/es.array.for-each"),r("core-js/modules/es.object.assign"),r("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a,o=(a=r("./main"))&&a.__esModule?a:{default:a};o.default.prototype.noLoop=function(){this._loop=!1},o.default.prototype.loop=function(){this._loop||(this._loop=!0,this._setupDone&&this._draw())},o.default.prototype.isLooping=function(){return this._loop},o.default.prototype.push=function(){this._styles.push({props:{_colorMode:this._colorMode},renderer:this._renderer.push()})},o.default.prototype.pop=function(){var d=this._styles.pop();d?(this._renderer.pop(d.renderer),Object.assign(this,d.props)):console.warn("pop() was called without matching push()")},o.default.prototype.redraw=function(d){if(!this._inUserDraw&&this._setupDone){var g=parseInt(d);(isNaN(g)||g<1)&&(g=1);var m=this._isGlobal?window:this;if(typeof m.draw=="function"){m.setup===void 0&&m.scale(m._pixelDensity,m._pixelDensity);for(var c=function(u){u.call(m)},l=0;l<g;l++){m.resetMatrix(),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._updateAccsOutput(),m._renderer.isP3D&&m._renderer._update(),m._setProperty("frameCount",m.frameCount+1),m._registeredMethods.pre.forEach(c),this._inUserDraw=!0;try{m.draw()}finally{this._inUserDraw=!1}m._registeredMethods.post.forEach(c)}}}};var h=o.default;i.default=h},{"./main":264,"core-js/modules/es.array.for-each":154,"core-js/modules/es.object.assign":173,"core-js/modules/web.dom-collections.for-each":228}],277:[function(r,s,i){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a,o=(a=r("./main"))&&a.__esModule?a:{default:a};function h(g){return function(m){if(Array.isArray(m)){for(var c=0,l=new Array(m.length);c<m.length;c++)l[c]=m[c];return l}}(g)||function(m){if(Symbol.iterator in Object(m)||Object.prototype.toString.call(m)==="[object Arguments]")return Array.from(m)}(g)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}o.default.prototype.applyMatrix=function(){var g,m,c=arguments[0]instanceof Object.getPrototypeOf(Uint8Array);return Array.isArray(arguments[0])||c?(g=this._renderer).applyMatrix.apply(g,h(arguments[0])):(m=this._renderer).applyMatrix.apply(m,arguments),this},o.default.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},o.default.prototype.rotate=function(g,m){return o.default._validateParameters("rotate",arguments),this._renderer.rotate(this._toRadians(g),m),this},o.default.prototype.rotateX=function(g){return this._assert3d("rotateX"),o.default._validateParameters("rotateX",arguments),this._renderer.rotateX(this._toRadians(g)),this},o.default.prototype.rotateY=function(g){return this._assert3d("rotateY"),o.default._validateParameters("rotateY",arguments),this._renderer.rotateY(this._toRadians(g)),this},o.default.prototype.rotateZ=function(g){return this._assert3d("rotateZ"),o.default._validateParameters("rotateZ",arguments),this._renderer.rotateZ(this._toRadians(g)),this},o.default.prototype.scale=function(g,m,c){if(o.default._validateParameters("scale",arguments),g instanceof o.default.Vector){var l=g;g=l.x,m=l.y,c=l.z}else if(g instanceof Array){var u=g;g=u[0],m=u[1],c=u[2]||1}return isNaN(m)?m=c=g:isNaN(c)&&(c=1),this._renderer.scale.call(this._renderer,g,m,c),this},o.default.prototype.shearX=function(g){o.default._validateParameters("shearX",arguments);var m=this._toRadians(g);return this._renderer.applyMatrix(1,0,Math.tan(m),1,0,0),this},o.default.prototype.shearY=function(g){o.default._validateParameters("shearY",arguments);var m=this._toRadians(g);return this._renderer.applyMatrix(1,Math.tan(m),0,1,0,0),this},o.default.prototype.translate=function(g,m,c){return o.default._validateParameters("translate",arguments),this._renderer.isP3D?this._renderer.translate(g,m,c):this._renderer.translate(g,m),this};var d=o.default;i.default=d},{"./main":264,"core-js/modules/es.array.from":155,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-prototype-of":175,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/web.dom-collections.iterator":229}],278:[function(r,s,i){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.ends-with"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator");var a,o=(a=r("../core/main"))&&a.__esModule?a:{default:a};function h(g){return function(m){if(Array.isArray(m)){for(var c=0,l=new Array(m.length);c<m.length;c++)l[c]=m[c];return l}}(g)||function(m){if(Symbol.iterator in Object(m)||Object.prototype.toString.call(m)==="[object Arguments]")return Array.from(m)}(g)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(g){return(d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(g)}o.default.prototype.storeItem=function(g,m){typeof g!="string"&&console.log("The argument that you passed to storeItem() - ".concat(g," is not a string.")),g.endsWith("p5TypeID")&&console.log("The argument that you passed to storeItem() - ".concat(g," must not end with 'p5TypeID'.")),m===void 0&&console.log("You cannot store undefined variables using storeItem().");var c=d(m);switch(c){case"number":case"boolean":m=m.toString();break;case"object":m instanceof o.default.Color?c="p5.Color":m instanceof o.default.Vector&&(c="p5.Vector",m=[m.x,m.y,m.z]),m=JSON.stringify(m)}localStorage.setItem(g,m);var l="".concat(g,"p5TypeID");localStorage.setItem(l,c)},o.default.prototype.getItem=function(g){var m=localStorage.getItem(g),c=localStorage.getItem("".concat(g,"p5TypeID"));if(c===void 0)console.log("Unable to determine type of item stored under ".concat(g,"in local storage. Did you save the item with something other than setItem()?"));else if(m!==null)switch(c){case"number":m=parseFloat(m);break;case"boolean":m=m==="true";break;case"object":m=JSON.parse(m);break;case"p5.Color":m=JSON.parse(m),m=this.color.apply(this,h(m.levels));break;case"p5.Vector":m=JSON.parse(m),m=this.createVector.apply(this,h(m))}return m},o.default.prototype.clearStorage=function(){localStorage.clear()},o.default.prototype.removeItem=function(g){typeof g!="string"&&console.log("The argument that you passed to removeItem() - ".concat(g," is not a string.")),localStorage.removeItem(g),localStorage.removeItem("".concat(g,"p5TypeID"))}},{"../core/main":264,"core-js/modules/es.array.from":155,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.ends-with":184,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":229}],279:[function(r,s,i){r("core-js/modules/es.array.concat"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.string.sub"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a,o=(a=r("../core/main"))&&a.__esModule?a:{default:a};o.default.prototype.createStringDict=function(d,g){return o.default._validateParameters("createStringDict",arguments),new o.default.StringDict(d,g)},o.default.prototype.createNumberDict=function(d,g){return o.default._validateParameters("createNumberDict",arguments),new o.default.NumberDict(d,g)},o.default.TypedDict=function(d,g){return d instanceof Object?this.data=d:(this.data={},this.data[d]=g),this},o.default.TypedDict.prototype.size=function(){return Object.keys(this.data).length},o.default.TypedDict.prototype.hasKey=function(d){return this.data.hasOwnProperty(d)},o.default.TypedDict.prototype.get=function(d){if(this.data.hasOwnProperty(d))return this.data[d];console.log("".concat(d," does not exist in this Dictionary"))},o.default.TypedDict.prototype.set=function(d,g){this._validate(g)?this.data[d]=g:console.log("Those values dont work for this dictionary type.")},o.default.TypedDict.prototype._addObj=function(d){for(var g in d)this.set(g,d[g])},o.default.TypedDict.prototype.create=function(d,g){d instanceof Object&&g===void 0?this._addObj(d):d!==void 0?this.set(d,g):console.log("In order to create a new Dictionary entry you must pass an object or a key, value pair")},o.default.TypedDict.prototype.clear=function(){this.data={}},o.default.TypedDict.prototype.remove=function(d){if(!this.data.hasOwnProperty(d))throw new Error("".concat(d," does not exist in this Dictionary"));delete this.data[d]},o.default.TypedDict.prototype.print=function(){for(var d in this.data)console.log("key:".concat(d," value:").concat(this.data[d]))},o.default.TypedDict.prototype.saveTable=function(d){var g="";for(var m in this.data)g+="".concat(m,",").concat(this.data[m],`
`);var c=new Blob([g],{type:"text/csv"});o.default.prototype.downloadFile(c,d||"mycsv","csv")},o.default.TypedDict.prototype.saveJSON=function(d,g){o.default.prototype.saveJSON(this.data,d,g)},o.default.TypedDict.prototype._validate=function(d){return!0},o.default.StringDict=function(){for(var d=arguments.length,g=new Array(d),m=0;m<d;m++)g[m]=arguments[m];o.default.TypedDict.apply(this,g)},o.default.StringDict.prototype=Object.create(o.default.TypedDict.prototype),o.default.StringDict.prototype._validate=function(d){return typeof d=="string"},o.default.NumberDict=function(){for(var d=arguments.length,g=new Array(d),m=0;m<d;m++)g[m]=arguments[m];o.default.TypedDict.apply(this,g)},o.default.NumberDict.prototype=Object.create(o.default.TypedDict.prototype),o.default.NumberDict.prototype._validate=function(d){return typeof d=="number"},o.default.NumberDict.prototype.add=function(d,g){this.data.hasOwnProperty(d)?this.data[d]+=g:console.log("The key - ".concat(d," does not exist in this dictionary."))},o.default.NumberDict.prototype.sub=function(d,g){this.add(d,-g)},o.default.NumberDict.prototype.mult=function(d,g){this.data.hasOwnProperty(d)?this.data[d]*=g:console.log("The key - ".concat(d," does not exist in this dictionary."))},o.default.NumberDict.prototype.div=function(d,g){this.data.hasOwnProperty(d)?this.data[d]/=g:console.log("The key - ".concat(d," does not exist in this dictionary."))},o.default.NumberDict.prototype._valueTest=function(d){if(Object.keys(this.data).length===0)throw new Error("Unable to search for a minimum or maximum value on an empty NumberDict");if(Object.keys(this.data).length===1)return this.data[Object.keys(this.data)[0]];var g=this.data[Object.keys(this.data)[0]];for(var m in this.data)this.data[m]*d<g*d&&(g=this.data[m]);return g},o.default.NumberDict.prototype.minValue=function(){return this._valueTest(1)},o.default.NumberDict.prototype.maxValue=function(){return this._valueTest(-1)},o.default.NumberDict.prototype._keyTest=function(d){if(Object.keys(this.data).length===0)throw new Error("Unable to use minValue on an empty NumberDict");if(Object.keys(this.data).length===1)return Object.keys(this.data)[0];for(var g=Object.keys(this.data)[0],m=1;m<Object.keys(this.data).length;m++)Object.keys(this.data)[m]*d<g*d&&(g=Object.keys(this.data)[m]);return g},o.default.NumberDict.prototype.minKey=function(){return this._keyTest(1)},o.default.NumberDict.prototype.maxKey=function(){return this._keyTest(-1)};var h=o.default.TypedDict;i.default=h},{"../core/main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.object.keys":176,"core-js/modules/es.string.sub":192}],280:[function(r,s,i){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.every"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/web.url"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a,o=(a=r("../core/main"))&&a.__esModule?a:{default:a};function h(l){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(l)}function d(l,u,f){(u._userNode?u._userNode:document.body).appendChild(l);var p=f?new o.default.MediaElement(l,u):new o.default.Element(l,u);return u._elements.push(p),p}function g(l,u,f,p){var y=document.createElement(u);typeof(f=f||"")=="string"&&(f=[f]);var _=!0,b=!1,x=void 0;try{for(var S,E=f[Symbol.iterator]();!(_=(S=E.next()).done);_=!0){var C=S.value,M=document.createElement("source");M.setAttribute("src",C),y.appendChild(M)}}catch(A){b=!0,x=A}finally{try{_||E.return==null||E.return()}finally{if(b)throw x}}typeof p=="function"&&y.addEventListener("canplaythrough",function A(){p(),y.removeEventListener("canplaythrough",A)});var I=d(y,l,!0);return I.loadedmetadata=!1,y.addEventListener("loadedmetadata",function(){I.width=y.videoWidth,I.height=y.videoHeight,I.elt.width===0&&(I.elt.width=y.videoWidth),I.elt.height===0&&(I.elt.height=y.videoHeight),I.presetPlaybackRate&&(I.elt.playbackRate=I.presetPlaybackRate,delete I.presetPlaybackRate),I.loadedmetadata=!0}),I}o.default.prototype.select=function(l,u){o.default._validateParameters("select",arguments);var f=this._getContainer(u).querySelector(l);return f?this._wrapElement(f):null},o.default.prototype.selectAll=function(l,u){o.default._validateParameters("selectAll",arguments);var f=[],p=this._getContainer(u).querySelectorAll(l);if(p)for(var y=0;y<p.length;y++){var _=this._wrapElement(p[y]);f.push(_)}return f},o.default.prototype._getContainer=function(l){var u=document;return typeof l=="string"?u=document.querySelector(l)||document:l instanceof o.default.Element?u=l.elt:l instanceof HTMLElement&&(u=l),u},o.default.prototype._wrapElement=function(l){var u=Array.prototype.slice.call(l.children);if(l.tagName!=="INPUT"||l.type!=="checkbox")return l.tagName==="VIDEO"||l.tagName==="AUDIO"?new o.default.MediaElement(l,this):l.tagName==="SELECT"?this.createSelect(new o.default.Element(l,this)):0<u.length&&u.every(function(p){return p.tagName==="INPUT"||p.tagName==="LABEL"})?this.createRadio(new o.default.Element(l,this)):new o.default.Element(l,this);var f=new o.default.Element(l,this);return f.checked=function(){return arguments.length===0?this.elt.checked:(this.elt.checked=!!arguments[0],this)},f},o.default.prototype.removeElements=function(l){o.default._validateParameters("removeElements",arguments),this._elements.filter(function(u){return!(u.elt instanceof HTMLCanvasElement)}).map(function(u){return u.remove()})},o.default.Element.prototype.changed=function(l){return o.default.Element._adjustListener("change",l,this),this},o.default.Element.prototype.input=function(l){return o.default.Element._adjustListener("input",l,this),this},o.default.prototype.createDiv=function(){var l=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",u=document.createElement("div");return u.innerHTML=l,d(u,this)},o.default.prototype.createP=function(){var l=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",u=document.createElement("p");return u.innerHTML=l,d(u,this)},o.default.prototype.createSpan=function(){var l=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",u=document.createElement("span");return u.innerHTML=l,d(u,this)},o.default.prototype.createImg=function(){o.default._validateParameters("createImg",arguments);var l,u=document.createElement("img"),f=arguments;return 1<f.length&&typeof f[1]=="string"&&(u.alt=f[1]),2<f.length&&typeof f[2]=="string"&&(u.crossOrigin=f[2]),u.src=f[0],l=d(u,this),u.addEventListener("load",function(){l.width=u.offsetWidth||u.width,l.height=u.offsetHeight||u.height;var p=f[f.length-1];typeof p=="function"&&p(l)}),l},o.default.prototype.createA=function(l,u,f){o.default._validateParameters("createA",arguments);var p=document.createElement("a");return p.href=l,p.innerHTML=u,f&&(p.target=f),d(p,this)},o.default.prototype.createSlider=function(l,u,f,p){o.default._validateParameters("createSlider",arguments);var y=document.createElement("input");return y.type="range",y.min=l,y.max=u,p===0?y.step=1e-18:p&&(y.step=p),typeof f=="number"&&(y.value=f),d(y,this)},o.default.prototype.createButton=function(l,u){o.default._validateParameters("createButton",arguments);var f=document.createElement("button");return f.innerHTML=l,u&&(f.value=u),d(f,this)},o.default.prototype.createCheckbox=function(){o.default._validateParameters("createCheckbox",arguments);var l=document.createElement("div"),u=document.createElement("input");u.type="checkbox";var f=document.createElement("label");f.appendChild(u),l.appendChild(f);var p=d(l,this);if(p.checked=function(){var _=p.elt.firstElementChild.getElementsByTagName("input")[0];if(_){if(arguments.length===0)return _.checked;_.checked=!!arguments[0]}return p},this.value=function(_){return p.value=_,this},arguments[0]){p.value(arguments[0]);var y=document.createElement("span");y.innerHTML=arguments[0],f.appendChild(y)}return arguments[1]&&(u.checked=!0),p},o.default.prototype.createSelect=function(){var l;o.default._validateParameters("createSelect",arguments);var u=arguments[0];if(u instanceof o.default.Element&&u.elt instanceof HTMLSelectElement)l=u,this.elt=u.elt;else if(u instanceof HTMLSelectElement)l=d(u,this),this.elt=u;else{var f=document.createElement("select");u&&typeof u=="boolean"&&f.setAttribute("multiple","true"),l=d(f,this),this.elt=f}return l.option=function(p,y){var _;if(p!==void 0){for(var b=0;b<this.elt.length;b+=1)if(this.elt[b].innerHTML===p){_=b;break}if(_!==void 0)y===!1?this.elt.remove(_):this.elt[_].value=y;else{var x=document.createElement("option");x.innerHTML=p,x.value=y===void 0?p:y,this.elt.appendChild(x),this._pInst._elements.push(x)}}},l.selected=function(p){if(p!==void 0){for(var y=0;y<this.elt.length;y+=1)this.elt[y].value.toString()===p.toString()&&(this.elt.selectedIndex=y);return this}if(this.elt.getAttribute("multiple")){var _=[],b=!0,x=!1,S=void 0;try{for(var E,C=this.elt.selectedOptions[Symbol.iterator]();!(b=(E=C.next()).done);b=!0){var M=E.value;_.push(M.value)}}catch(I){x=!0,S=I}finally{try{b||C.return==null||C.return()}finally{if(x)throw S}}return _}return this.elt.value},l.disable=function(p){if(typeof p=="string")for(var y=0;y<this.elt.length;y++)this.elt[y].value.toString()===p&&(this.elt[y].disabled=!0,this.elt[y].selected=!1);else this.elt.disabled=!0;return this},l},o.default.prototype.createRadio=function(){var l,u,f=arguments[0];f instanceof HTMLDivElement||f instanceof HTMLSpanElement?(l=f,typeof arguments[1]=="string"&&(u=arguments[1])):(typeof f=="string"&&(u=f),l=document.createElement("div"));var p=d(this.elt=l,this);p._name=u||"radioOption";function y(b){return b instanceof HTMLInputElement&&b.type==="radio"}function _(b){return b instanceof HTMLLabelElement}return p._getOptionsArray=function(){return Array.from(this.elt.children).filter(function(b){return y(b)||_(b)&&y(b.firstElementChild)}).map(function(b){return y(b)?b:b.firstElementChild})},p.option=function(b,x){var S,E,C,M=!0,I=!1,A=void 0;try{for(var D,L=p._getOptionsArray()[Symbol.iterator]();!(M=(D=L.next()).done);M=!0){var O=D.value;if(O.value===b){S=O;break}}}catch(N){I=!0,A=N}finally{try{M||L.return==null||L.return()}finally{if(I)throw A}}return S===void 0&&((S=document.createElement("input")).setAttribute("type","radio"),S.setAttribute("value",b)),S.setAttribute("name",p._name),_(S.parentElement)?E=S.parentElement:(E=document.createElement("label")).insertAdjacentElement("afterbegin",S),E.lastElementChild instanceof HTMLSpanElement?C=E.lastElementChild:(C=document.createElement("span"),S.insertAdjacentElement("afterend",C)),C.innerHTML=x===void 0?b:x,this.elt.appendChild(E),S},p.remove=function(b){var x=!0,S=!1,E=void 0;try{for(var C,M=p._getOptionsArray()[Symbol.iterator]();!(x=(C=M.next()).done);x=!0){var I=C.value;if(I.value===b)return void(_(I.parentElement)?I.parentElement.remove():I.remove())}}catch(A){S=!0,E=A}finally{try{x||M.return==null||M.return()}finally{if(S)throw E}}},p.value=function(){var b="",x=!0,S=!1,E=void 0;try{for(var C,M=p._getOptionsArray()[Symbol.iterator]();!(x=(C=M.next()).done);x=!0){var I=C.value;if(I.checked){b=I.value;break}}}catch(A){S=!0,E=A}finally{try{x||M.return==null||M.return()}finally{if(S)throw E}}return b},p.selected=function(b){var x=null;if(b===void 0){var S=!0,E=!1,C=void 0;try{for(var M,I=p._getOptionsArray()[Symbol.iterator]();!(S=(M=I.next()).done);S=!0){var A=M.value;if(A.checked){x=A;break}}}catch(J){E=!0,C=J}finally{try{S||I.return==null||I.return()}finally{if(E)throw C}}}else{p._getOptionsArray().forEach(function(J){J.checked=!1,J.removeAttribute("checked")});var D=!0,L=!1,O=void 0;try{for(var N,U=p._getOptionsArray()[Symbol.iterator]();!(D=(N=U.next()).done);D=!0){var K=N.value;K.value===b&&(K.setAttribute("checked",!0),K.checked=!0,x=K)}}catch(J){L=!0,O=J}finally{try{D||U.return==null||U.return()}finally{if(L)throw O}}}return x},p.disable=function(){var b=!(0<arguments.length&&arguments[0]!==void 0)||arguments[0],x=!0,S=!1,E=void 0;try{for(var C,M=p._getOptionsArray()[Symbol.iterator]();!(x=(C=M.next()).done);x=!0)C.value.setAttribute("disabled",b)}catch(I){S=!0,E=I}finally{try{x||M.return==null||M.return()}finally{if(S)throw E}}},p},o.default.prototype.createColorPicker=function(l){o.default._validateParameters("createColorPicker",arguments);var u,f=document.createElement("input");return f.type="color",l?l instanceof o.default.Color?f.value=l.toString("#rrggbb"):(o.default.prototype._colorMode="rgb",o.default.prototype._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},f.value=o.default.prototype.color(l).toString("#rrggbb")):f.value="#000000",(u=d(f,this)).color=function(){return l&&(l.mode&&(o.default.prototype._colorMode=l.mode),l.maxes&&(o.default.prototype._colorMaxes=l.maxes)),o.default.prototype.color(this.elt.value)},u},o.default.prototype.createInput=function(){var l=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",u=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"text";o.default._validateParameters("createInput",arguments);var f=document.createElement("input");return f.setAttribute("value",l),f.setAttribute("type",u),d(f,this)},o.default.prototype.createFileInput=function(l){var u=1<arguments.length&&arguments[1]!==void 0&&arguments[1];if(o.default._validateParameters("createFileInput",arguments),window.File&&window.FileReader&&window.FileList&&window.Blob){var f=document.createElement("input");return f.setAttribute("type","file"),u&&f.setAttribute("multiple",!0),f.addEventListener("change",function(p){var y=!0,_=!1,b=void 0;try{for(var x,S=p.target.files[Symbol.iterator]();!(y=(x=S.next()).done);y=!0){var E=x.value;o.default.File._load(E,l)}}catch(C){_=!0,b=C}finally{try{y||S.return==null||S.return()}finally{if(_)throw b}}},!1),d(f,this)}console.log("The File APIs are not fully supported in this browser. Cannot create element.")},o.default.prototype.createVideo=function(l,u){return o.default._validateParameters("createVideo",arguments),g(this,"video",l,u)},o.default.prototype.createAudio=function(l,u){return o.default._validateParameters("createAudio",arguments),g(this,"audio",l,u)},o.default.prototype.VIDEO="video",o.default.prototype.AUDIO="audio",navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(l){var u=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return u?new Promise(function(f,p){u.call(navigator,l,f,p)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),o.default.prototype.createCapture=function(){if(o.default._validateParameters("createCapture",arguments),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new DOMException("getUserMedia not supported in this browser");var l,u,f=!0,p=!0,y=!0,_=!1,b=void 0;try{for(var x,S=arguments[Symbol.iterator]();!(y=(x=S.next()).done);y=!0){var E=x.value;E===o.default.prototype.VIDEO?p=!1:E===o.default.prototype.AUDIO?f=!1:h(E)==="object"?l=E:typeof E=="function"&&(u=E)}}catch(I){_=!0,b=I}finally{try{y||S.return==null||S.return()}finally{if(_)throw b}}l=l||{video:f,audio:p};var C=document.createElement("video");C.setAttribute("playsinline",""),navigator.mediaDevices.getUserMedia(l).then(function(I){try{"srcObject"in C?C.srcObject=I:C.src=window.URL.createObjectURL(I)}catch{C.src=I}},console.log);var M=d(C,this,!0);return M.loadedmetadata=!1,C.addEventListener("loadedmetadata",function(){C.play(),C.width?(M.width=C.width,M.height=C.height):(M.width=M.elt.width=C.videoWidth,M.height=M.elt.height=C.videoHeight),M.loadedmetadata=!0,u&&u(C.srcObject)}),M},o.default.prototype.createElement=function(l,u){o.default._validateParameters("createElement",arguments);var f=document.createElement(l);return u!==void 0&&(f.innerHTML=u),d(f,this)},o.default.Element.prototype.addClass=function(l){return this.elt.className?this.hasClass(l)||(this.elt.className=this.elt.className+" "+l):this.elt.className=l,this},o.default.Element.prototype.removeClass=function(l){return this.elt.classList.remove(l),this},o.default.Element.prototype.hasClass=function(l){return this.elt.classList.contains(l)},o.default.Element.prototype.toggleClass=function(l){return this.elt.classList.contains(l)?this.elt.classList.remove(l):this.elt.classList.add(l),this},o.default.Element.prototype.child=function(l){return l===void 0?this.elt.childNodes:(typeof l=="string"?(l[0]==="#"&&(l=l.substring(1)),l=document.getElementById(l)):l instanceof o.default.Element&&(l=l.elt),l instanceof HTMLElement&&this.elt.appendChild(l),this)},o.default.Element.prototype.center=function(l){var u=this.elt.style.display,f=this.elt.style.display==="none",p=this.parent().style.display==="none",y={x:this.elt.offsetLeft,y:this.elt.offsetTop};f&&this.show(),p&&this.parent().show(),this.elt.style.display="block",this.position(0,0);var _=Math.abs(this.parent().offsetWidth-this.elt.offsetWidth),b=Math.abs(this.parent().offsetHeight-this.elt.offsetHeight);return l==="both"||l===void 0?this.position(_/2+this.parent().offsetLeft,b/2+this.parent().offsetTop):l==="horizontal"?this.position(_/2+this.parent().offsetLeft,y.y):l==="vertical"&&this.position(y.x,b/2+this.parent().offsetTop),this.style("display",u),f&&this.hide(),p&&this.parent().hide(),this},o.default.Element.prototype.html=function(){return arguments.length===0?this.elt.innerHTML:(arguments[1]?this.elt.insertAdjacentHTML("beforeend",arguments[0]):this.elt.innerHTML=arguments[0],this)},o.default.Element.prototype.position=function(){if(arguments.length===0)return{x:this.elt.offsetLeft,y:this.elt.offsetTop};var l="absolute";return arguments[2]!=="static"&&arguments[2]!=="fixed"&&arguments[2]!=="relative"&&arguments[2]!=="sticky"&&arguments[2]!=="initial"&&arguments[2]!=="inherit"||(l=arguments[2]),this.elt.style.position=l,this.elt.style.left=arguments[0]+"px",this.elt.style.top=arguments[1]+"px",this.x=arguments[0],this.y=arguments[1],this},o.default.Element.prototype._translate=function(){this.elt.style.position="absolute";var l="";return this.elt.style.transform&&(l=(l=this.elt.style.transform.replace(/translate3d\(.*\)/g,"")).replace(/translate[X-Z]?\(.*\)/g,"")),arguments.length===2?this.elt.style.transform="translate("+arguments[0]+"px, "+arguments[1]+"px)":2<arguments.length&&(this.elt.style.transform="translate3d("+arguments[0]+"px,"+arguments[1]+"px,"+arguments[2]+"px)",this.elt.parentElement.style.perspective=arguments.length===3?"1000px":arguments[3]+"px"),this.elt.style.transform+=l,this},o.default.Element.prototype._rotate=function(){var l="";return this.elt.style.transform&&(l=(l=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"")).replace(/rotate[X-Z]?\(.*\)/g,"")),arguments.length===1?this.elt.style.transform="rotate("+arguments[0]+"deg)":arguments.length===2?this.elt.style.transform="rotate("+arguments[0]+"deg, "+arguments[1]+"deg)":arguments.length===3&&(this.elt.style.transform="rotateX("+arguments[0]+"deg)",this.elt.style.transform+="rotateY("+arguments[1]+"deg)",this.elt.style.transform+="rotateZ("+arguments[2]+"deg)"),this.elt.style.transform+=l,this},o.default.Element.prototype.style=function(l,u){if(u instanceof o.default.Color&&(u="rgba("+u.levels[0]+","+u.levels[1]+","+u.levels[2]+","+u.levels[3]/255+")"),u===void 0){if(l.indexOf(":")===-1)return window.getComputedStyle(this.elt).getPropertyValue(l);for(var f=l.split(";"),p=0;p<f.length;p++){var y=f[p].split(":");y[0]&&y[1]&&(this.elt.style[y[0].trim()]=y[1].trim())}}else if(this.elt.style[l]=u,l==="width"||l==="height"||l==="left"||l==="top"){var _=window.getComputedStyle(this.elt).getPropertyValue(l).replace(/\D+/g,"");this[l]=parseInt(_,10)}return this},o.default.Element.prototype.attribute=function(l,u){if(this.elt.firstChild==null||this.elt.firstChild.type!=="checkbox"&&this.elt.firstChild.type!=="radio")return u===void 0?this.elt.getAttribute(l):(this.elt.setAttribute(l,u),this);if(u===void 0)return this.elt.firstChild.getAttribute(l);for(var f=0;f<this.elt.childNodes.length;f++)this.elt.childNodes[f].setAttribute(l,u)},o.default.Element.prototype.removeAttribute=function(l){if(this.elt.firstChild!=null&&(this.elt.firstChild.type==="checkbox"||this.elt.firstChild.type==="radio"))for(var u=0;u<this.elt.childNodes.length;u++)this.elt.childNodes[u].removeAttribute(l);return this.elt.removeAttribute(l),this},o.default.Element.prototype.value=function(){return 0<arguments.length?(this.elt.value=arguments[0],this):this.elt.type==="range"?parseFloat(this.elt.value):this.elt.value},o.default.Element.prototype.show=function(){return this.elt.style.display="block",this},o.default.Element.prototype.hide=function(){return this.elt.style.display="none",this},o.default.Element.prototype.size=function(l,u){if(arguments.length===0)return{width:this.elt.offsetWidth,height:this.elt.offsetHeight};var f=l,p=u,y=o.default.prototype.AUTO;if(f!==y||p!==y){if(f===y?f=u*this.width/this.height:p===y&&(p=l*this.height/this.width),this.elt instanceof HTMLCanvasElement){var _,b={},x=this.elt.getContext("2d");for(_ in x)b[_]=x[_];for(_ in this.elt.setAttribute("width",f*this._pInst._pixelDensity),this.elt.setAttribute("height",p*this._pInst._pixelDensity),this.elt.style.width=f+"px",this.elt.style.height=p+"px",this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),b)this.elt.getContext("2d")[_]=b[_]}else this.elt.style.width=f+"px",this.elt.style.height=p+"px",this.elt.width=f,this.elt.height=p;this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this._pInst&&this._pInst._curElement&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",this.elt.offsetWidth),this._pInst._setProperty("height",this.elt.offsetHeight))}return this},o.default.Element.prototype.remove=function(){if(this instanceof o.default.MediaElement){this.stop();var l=this.elt.srcObject;l!==null&&l.getTracks().forEach(function(p){p.stop()})}var u=this._pInst._elements.indexOf(this);for(var f in u!==-1&&this._pInst._elements.splice(u,1),this._events)this.elt.removeEventListener(f,this._events[f]);this.elt&&this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt)},o.default.Element.prototype.drop=function(l,u){if(window.File&&window.FileReader&&window.FileList&&window.Blob){if(!this._dragDisabled){this._dragDisabled=!0;var f=function(p){p.preventDefault()};this.elt.addEventListener("dragover",f),this.elt.addEventListener("dragleave",f)}o.default.Element._attachListener("drop",function(p){p.preventDefault(),typeof u=="function"&&u.call(this,p);for(var y=p.dataTransfer.files,_=0;_<y.length;_++){var b=y[_];o.default.File._load(b,l)}},this)}else console.log("The File APIs are not fully supported in this browser.");return this},o.default.MediaElement=function(l,u){o.default.Element.call(this,l,u);var f=this;this.elt.crossOrigin="anonymous",this._prevTime=0,this._cueIDCounter=0,this._cues=[],(this._pixelsState=this)._pixelDensity=1,this._modified=!1,Object.defineProperty(f,"src",{get:function(){var p=f.elt.children[0].src,y=f.elt.src===window.location.href?"":f.elt.src;return p===window.location.href?y:p},set:function(p){for(var y=0;y<f.elt.children.length;y++)f.elt.removeChild(f.elt.children[y]);var _=document.createElement("source");_.src=p,l.appendChild(_),f.elt.src=p,f.modified=!0}}),f._onended=function(){},f.elt.onended=function(){f._onended(f)}},o.default.MediaElement.prototype=Object.create(o.default.Element.prototype),o.default.MediaElement.prototype.play=function(){var l,u=this;return this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0),(l=(1<this.elt.readyState||this.elt.load(),this.elt.play()))&&l.catch&&l.catch(function(f){f.name==="NotAllowedError"?o.default._friendlyAutoplayError(u.src):console.error("Media play method encountered an unexpected error",f)}),this},o.default.MediaElement.prototype.stop=function(){return this.elt.pause(),this.elt.currentTime=0,this},o.default.MediaElement.prototype.pause=function(){return this.elt.pause(),this},o.default.MediaElement.prototype.loop=function(){return this.elt.setAttribute("loop",!0),this.play(),this},o.default.MediaElement.prototype.noLoop=function(){return this.elt.removeAttribute("loop"),this},o.default.MediaElement.prototype._setupAutoplayFailDetection=function(){var l=this,u=setTimeout(function(){return o.default._friendlyAutoplayError(l.src)},500);this.elt.addEventListener("play",function(){return clearTimeout(u)},{passive:!0,once:!0})},o.default.MediaElement.prototype.autoplay=function(l){var u=this,f=this.elt.getAttribute("autoplay");if(this.elt.setAttribute("autoplay",l),l&&!f){var p=function(){return u._setupAutoplayFailDetection()};this.elt.readyState===4?p():this.elt.addEventListener("canplay",p,{passive:!0,once:!0})}return this},o.default.MediaElement.prototype.volume=function(l){if(l===void 0)return this.elt.volume;this.elt.volume=l},o.default.MediaElement.prototype.speed=function(l){if(l===void 0)return this.presetPlaybackRate||this.elt.playbackRate;this.loadedmetadata?this.elt.playbackRate=l:this.presetPlaybackRate=l},o.default.MediaElement.prototype.time=function(l){return l===void 0?this.elt.currentTime:(this.elt.currentTime=l,this)},o.default.MediaElement.prototype.duration=function(){return this.elt.duration},o.default.MediaElement.prototype.pixels=[],o.default.MediaElement.prototype._ensureCanvas=function(){this.canvas||(this.canvas=document.createElement("canvas"),this.drawingContext=this.canvas.getContext("2d"),this.setModified(!0)),this.loadedmetadata&&(this.canvas.width!==this.elt.width&&(this.canvas.width=this.elt.width,this.canvas.height=this.elt.height,this.width=this.canvas.width,this.height=this.canvas.height),this.drawingContext.drawImage(this.elt,0,0,this.canvas.width,this.canvas.height),this.setModified(!0))},o.default.MediaElement.prototype.loadPixels=function(){return this._ensureCanvas(),o.default.Renderer2D.prototype.loadPixels.apply(this,arguments)},o.default.MediaElement.prototype.updatePixels=function(l,u,f,p){return this.loadedmetadata&&(this._ensureCanvas(),o.default.Renderer2D.prototype.updatePixels.call(this,l,u,f,p)),this.setModified(!0),this},o.default.MediaElement.prototype.get=function(){return this._ensureCanvas(),o.default.Renderer2D.prototype.get.apply(this,arguments)},o.default.MediaElement.prototype._getPixel=function(){return this.loadPixels(),o.default.Renderer2D.prototype._getPixel.apply(this,arguments)},o.default.MediaElement.prototype.set=function(l,u,f){this.loadedmetadata&&(this._ensureCanvas(),o.default.Renderer2D.prototype.set.call(this,l,u,f),this.setModified(!0))},o.default.MediaElement.prototype.copy=function(){this._ensureCanvas(),o.default.prototype.copy.apply(this,arguments)},o.default.MediaElement.prototype.mask=function(){this.loadPixels(),this.setModified(!0),o.default.Image.prototype.mask.apply(this,arguments)},o.default.MediaElement.prototype.isModified=function(){return this._modified},o.default.MediaElement.prototype.setModified=function(l){this._modified=l},o.default.MediaElement.prototype.onended=function(l){return this._onended=l,this},o.default.MediaElement.prototype.connect=function(l){var u,f;if(typeof o.default.prototype.getAudioContext=="function")u=o.default.prototype.getAudioContext(),f=o.default.soundOut.input;else try{f=(u=l.context).destination}catch{throw"connect() is meant to be used with Web Audio API or p5.sound.js"}this.audioSourceNode||(this.audioSourceNode=u.createMediaElementSource(this.elt),this.audioSourceNode.connect(f)),l?l.input?this.audioSourceNode.connect(l.input):this.audioSourceNode.connect(l):this.audioSourceNode.connect(f)},o.default.MediaElement.prototype.disconnect=function(){if(!this.audioSourceNode)throw"nothing to disconnect";this.audioSourceNode.disconnect()},o.default.MediaElement.prototype.showControls=function(){this.elt.style["text-align"]="inherit",this.elt.controls=!0},o.default.MediaElement.prototype.hideControls=function(){this.elt.controls=!1};function m(l,u,f,p){this.callback=l,this.time=u,this.id=f,this.val=p}o.default.MediaElement.prototype.addCue=function(l,u,f){var p=this._cueIDCounter++,y=new m(u,l,p,f);return this._cues.push(y),this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this)),p},o.default.MediaElement.prototype.removeCue=function(l){for(var u=0;u<this._cues.length;u++)this._cues[u].id===l&&(console.log(l),this._cues.splice(u,1));this._cues.length===0&&(this.elt.ontimeupdate=null)},o.default.MediaElement.prototype.clearCues=function(){this._cues=[],this.elt.ontimeupdate=null},o.default.MediaElement.prototype._onTimeUpdate=function(){for(var l=this.time(),u=0;u<this._cues.length;u++){var f=this._cues[u].time,p=this._cues[u].val;this._prevTime<f&&f<=l&&this._cues[u].callback(p)}this._prevTime=l},o.default.File=function(l,u){this.file=l,this._pInst=u;var f=l.type.split("/");this.type=f[0],this.subtype=f[1],this.name=l.name,this.size=l.size,this.data=void 0},o.default.File._createLoader=function(l,u){var f=new FileReader;return f.onload=function(p){var y=new o.default.File(l);if(y.file.type==="application/json")y.data=JSON.parse(p.target.result);else if(y.file.type==="text/xml"){var _=new DOMParser().parseFromString(p.target.result,"text/xml");y.data=new o.default.XML(_.documentElement)}else y.data=p.target.result;u(y)},f},o.default.File._load=function(l,u){if(/^text\//.test(l.type)||l.type==="application/json")o.default.File._createLoader(l,u).readAsText(l);else if(/^(video|audio)\//.test(l.type)){var f=new o.default.File(l);f.data=URL.createObjectURL(l),u(f)}else o.default.File._createLoader(l,u).readAsDataURL(l)};var c=o.default;i.default=c},{"../core/main":264,"core-js/modules/es.array.every":150,"core-js/modules/es.array.filter":152,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.from":155,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.function.name":166,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.for-each":228,"core-js/modules/web.dom-collections.iterator":229,"core-js/modules/web.url":231}],281:[function(r,s,i){function a(x){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(x)}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o,h=(o=r("../core/main"))&&o.__esModule?o:{default:o},d=function(x){if(x&&x.__esModule)return x;if(x===null||a(x)!=="object"&&typeof x!="function")return{default:x};var S=g();if(S&&S.has(x))return S.get(x);var E={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var M in x)if(Object.prototype.hasOwnProperty.call(x,M)){var I=C?Object.getOwnPropertyDescriptor(x,M):null;I&&(I.get||I.set)?Object.defineProperty(E,M,I):E[M]=x[M]}return E.default=x,S&&S.set(x,E),E}(r("../core/constants"));function g(){if(typeof WeakMap!="function")return null;var x=new WeakMap;return g=function(){return x},x}h.default.prototype.deviceOrientation=1<window.innerWidth/window.innerHeight?"landscape":"portrait",h.default.prototype.accelerationX=0,h.default.prototype.accelerationY=0,h.default.prototype.accelerationZ=0,h.default.prototype.pAccelerationX=0,h.default.prototype.pAccelerationY=0,h.default.prototype.pAccelerationZ=0,h.default.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX),this._setProperty("pAccelerationY",this.accelerationY),this._setProperty("pAccelerationZ",this.accelerationZ)},h.default.prototype.rotationX=0,h.default.prototype.rotationY=0,h.default.prototype.rotationZ=0,h.default.prototype.pRotationX=0,h.default.prototype.pRotationY=0;var m=h.default.prototype.pRotationZ=0,c=0,l=0,u="clockwise",f="clockwise",p="clockwise";h.default.prototype.pRotateDirectionX=void 0,h.default.prototype.pRotateDirectionY=void 0,h.default.prototype.pRotateDirectionZ=void 0,h.default.prototype._updatePRotations=function(){this._setProperty("pRotationX",this.rotationX),this._setProperty("pRotationY",this.rotationY),this._setProperty("pRotationZ",this.rotationZ)},h.default.prototype.turnAxis=void 0;var y=.5,_=30;h.default.prototype.setMoveThreshold=function(x){h.default._validateParameters("setMoveThreshold",arguments),y=x},h.default.prototype.setShakeThreshold=function(x){h.default._validateParameters("setShakeThreshold",arguments),_=x},h.default.prototype._ondeviceorientation=function(x){this._updatePRotations(),this._angleMode===d.radians&&(x.beta=x.beta*(_PI/180),x.gamma=x.gamma*(_PI/180),x.alpha=x.alpha*(_PI/180)),this._setProperty("rotationX",x.beta),this._setProperty("rotationY",x.gamma),this._setProperty("rotationZ",x.alpha),this._handleMotion()},h.default.prototype._ondevicemotion=function(x){this._updatePAccelerations(),this._setProperty("accelerationX",2*x.acceleration.x),this._setProperty("accelerationY",2*x.acceleration.y),this._setProperty("accelerationZ",2*x.acceleration.z),this._handleMotion()},h.default.prototype._handleMotion=function(){window.orientation===90||window.orientation===-90?this._setProperty("deviceOrientation","landscape"):window.orientation===0?this._setProperty("deviceOrientation","portrait"):window.orientation===void 0&&this._setProperty("deviceOrientation","undefined");var x,S,E=this._isGlobal?window:this;if(typeof E.deviceMoved=="function"&&(Math.abs(this.accelerationX-this.pAccelerationX)>y||Math.abs(this.accelerationY-this.pAccelerationY)>y||Math.abs(this.accelerationZ-this.pAccelerationZ)>y)&&E.deviceMoved(),typeof E.deviceTurned=="function"){var C=this.rotationX+180,M=this.pRotationX+180,I=m+180;0<C-M&&C-M<270||C-M<-270?u="clockwise":(C-M<0||270<C-M)&&(u="counter-clockwise"),u!==this.pRotateDirectionX&&(I=C),90<Math.abs(C-I)&&Math.abs(C-I)<270&&(I=C,this._setProperty("turnAxis","X"),E.deviceTurned()),this.pRotateDirectionX=u,m=I-180;var A=this.rotationY+180,D=this.pRotationY+180,L=c+180;0<A-D&&A-D<270||A-D<-270?f="clockwise":(A-D<0||270<A-this.pRotationY)&&(f="counter-clockwise"),f!==this.pRotateDirectionY&&(L=A),90<Math.abs(A-L)&&Math.abs(A-L)<270&&(L=A,this._setProperty("turnAxis","Y"),E.deviceTurned()),this.pRotateDirectionY=f,c=L-180,0<this.rotationZ-this.pRotationZ&&this.rotationZ-this.pRotationZ<270||this.rotationZ-this.pRotationZ<-270?p="clockwise":(this.rotationZ-this.pRotationZ<0||270<this.rotationZ-this.pRotationZ)&&(p="counter-clockwise"),p!==this.pRotateDirectionZ&&(l=this.rotationZ),90<Math.abs(this.rotationZ-l)&&Math.abs(this.rotationZ-l)<270&&(l=this.rotationZ,this._setProperty("turnAxis","Z"),E.deviceTurned()),this.pRotateDirectionZ=p,this._setProperty("turnAxis",void 0)}typeof E.deviceShaken=="function"&&(this.pAccelerationX!==null&&(x=Math.abs(this.accelerationX-this.pAccelerationX),S=Math.abs(this.accelerationY-this.pAccelerationY)),_<x+S&&E.deviceShaken())};var b=h.default;i.default=b},{"../core/constants":253,"../core/main":264}],282:[function(r,s,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a,o=(a=r("../core/main"))&&a.__esModule?a:{default:a};o.default.prototype.isKeyPressed=!1,o.default.prototype.keyIsPressed=!1,o.default.prototype.key="",o.default.prototype.keyCode=0,o.default.prototype._onkeydown=function(d){if(!this._downKeys[d.which]){this._setProperty("isKeyPressed",!0),this._setProperty("keyIsPressed",!0),this._setProperty("keyCode",d.which),this._downKeys[d.which]=!0,this._setProperty("key",d.key||String.fromCharCode(d.which)||d.which);var g=this._isGlobal?window:this;typeof g.keyPressed=="function"&&!d.charCode&&g.keyPressed(d)===!1&&d.preventDefault()}},o.default.prototype._onkeyup=function(d){this._downKeys[d.which]=!1,this._areDownKeys()||(this._setProperty("isKeyPressed",!1),this._setProperty("keyIsPressed",!1)),this._setProperty("_lastKeyCodeTyped",null),this._setProperty("key",d.key||String.fromCharCode(d.which)||d.which),this._setProperty("keyCode",d.which);var g=this._isGlobal?window:this;typeof g.keyReleased=="function"&&g.keyReleased(d)===!1&&d.preventDefault()},o.default.prototype._onkeypress=function(d){if(d.which!==this._lastKeyCodeTyped){this._setProperty("_lastKeyCodeTyped",d.which),this._setProperty("key",d.key||String.fromCharCode(d.which)||d.which);var g=this._isGlobal?window:this;typeof g.keyTyped=="function"&&g.keyTyped(d)===!1&&d.preventDefault()}},o.default.prototype._onblur=function(d){this._downKeys={}},o.default.prototype.keyIsDown=function(d){return o.default._validateParameters("keyIsDown",arguments),this._downKeys[d]||!1},o.default.prototype._areDownKeys=function(){for(var d in this._downKeys)if(this._downKeys.hasOwnProperty(d)&&this._downKeys[d]===!0)return!0;return!1};var h=o.default;i.default=h},{"../core/main":264}],283:[function(r,s,i){function a(c){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(c)}r("core-js/modules/es.array.includes"),r("core-js/modules/es.string.includes"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o,h=(o=r("../core/main"))&&o.__esModule?o:{default:o},d=function(c){if(c&&c.__esModule)return c;if(c===null||a(c)!=="object"&&typeof c!="function")return{default:c};var l=g();if(l&&l.has(c))return l.get(c);var u={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in c)if(Object.prototype.hasOwnProperty.call(c,p)){var y=f?Object.getOwnPropertyDescriptor(c,p):null;y&&(y.get||y.set)?Object.defineProperty(u,p,y):u[p]=c[p]}return u.default=c,l&&l.set(c,u),u}(r("../core/constants"));function g(){if(typeof WeakMap!="function")return null;var c=new WeakMap;return g=function(){return c},c}h.default.prototype.movedX=0,h.default.prototype.movedY=0,h.default.prototype._hasMouseInteracted=!1,h.default.prototype.mouseX=0,h.default.prototype.mouseY=0,h.default.prototype.pmouseX=0,h.default.prototype.pmouseY=0,h.default.prototype.winMouseX=0,h.default.prototype.winMouseY=0,h.default.prototype.pwinMouseX=0,h.default.prototype.pwinMouseY=0,h.default.prototype.mouseButton=0,h.default.prototype.mouseIsPressed=!1,h.default.prototype._updateNextMouseCoords=function(c){if(this._curElement!==null&&(!c.touches||0<c.touches.length)){var l=function(u,f,p,y){y&&!y.clientX&&(y.touches?y=y.touches[0]:y.changedTouches&&(y=y.changedTouches[0]));var _=u.getBoundingClientRect(),b=u.scrollWidth/f||1,x=u.scrollHeight/p||1;return{x:(y.clientX-_.left)/b,y:(y.clientY-_.top)/x,winX:y.clientX,winY:y.clientY,id:y.identifier}}(this._curElement.elt,this.width,this.height,c);this._setProperty("movedX",c.movementX),this._setProperty("movedY",c.movementY),this._setProperty("mouseX",l.x),this._setProperty("mouseY",l.y),this._setProperty("winMouseX",l.winX),this._setProperty("winMouseY",l.winY)}this._hasMouseInteracted||(this._updateMouseCoords(),this._setProperty("_hasMouseInteracted",!0))},h.default.prototype._updateMouseCoords=function(){this._setProperty("pmouseX",this.mouseX),this._setProperty("pmouseY",this.mouseY),this._setProperty("pwinMouseX",this.winMouseX),this._setProperty("pwinMouseY",this.winMouseY),this._setProperty("_pmouseWheelDeltaY",this._mouseWheelDeltaY)},h.default.prototype._setMouseButton=function(c){c.button===1?this._setProperty("mouseButton",d.CENTER):c.button===2?this._setProperty("mouseButton",d.RIGHT):this._setProperty("mouseButton",d.LEFT)},h.default.prototype._onmousemove=function(c){var l=this._isGlobal?window:this;this._updateNextMouseCoords(c),this.mouseIsPressed?typeof l.mouseDragged=="function"?l.mouseDragged(c)===!1&&c.preventDefault():typeof l.touchMoved=="function"&&l.touchMoved(c)===!1&&c.preventDefault():typeof l.mouseMoved=="function"&&l.mouseMoved(c)===!1&&c.preventDefault()},h.default.prototype._onmousedown=function(c){var l=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._setMouseButton(c),this._updateNextMouseCoords(c),typeof l.mousePressed=="function"?l.mousePressed(c)===!1&&c.preventDefault():navigator.userAgent.toLowerCase().includes("safari")&&typeof l.touchStarted=="function"&&l.touchStarted(c)===!1&&c.preventDefault()},h.default.prototype._onmouseup=function(c){var l=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!1),typeof l.mouseReleased=="function"?l.mouseReleased(c)===!1&&c.preventDefault():typeof l.touchEnded=="function"&&l.touchEnded(c)===!1&&c.preventDefault()},h.default.prototype._ondragend=h.default.prototype._onmouseup,h.default.prototype._ondragover=h.default.prototype._onmousemove,h.default.prototype._onclick=function(c){var l=this._isGlobal?window:this;typeof l.mouseClicked=="function"&&l.mouseClicked(c)===!1&&c.preventDefault()},h.default.prototype._ondblclick=function(c){var l=this._isGlobal?window:this;typeof l.doubleClicked=="function"&&l.doubleClicked(c)===!1&&c.preventDefault()},h.default.prototype._mouseWheelDeltaY=0,h.default.prototype._pmouseWheelDeltaY=0,h.default.prototype._onwheel=function(c){var l=this._isGlobal?window:this;this._setProperty("_mouseWheelDeltaY",c.deltaY),typeof l.mouseWheel=="function"&&(c.delta=c.deltaY,l.mouseWheel(c)===!1&&c.preventDefault())},h.default.prototype.requestPointerLock=function(){var c=this._curElement.elt;return c.requestPointerLock=c.requestPointerLock||c.mozRequestPointerLock,c.requestPointerLock?(c.requestPointerLock(),!0):(console.log("requestPointerLock is not implemented in this browser"),!1)},h.default.prototype.exitPointerLock=function(){document.exitPointerLock()};var m=h.default;i.default=m},{"../core/constants":253,"../core/main":264,"core-js/modules/es.array.includes":156,"core-js/modules/es.string.includes":185}],284:[function(r,s,i){r("core-js/modules/es.array.includes"),r("core-js/modules/es.string.includes"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a,o=(a=r("../core/main"))&&a.__esModule?a:{default:a};function h(g,m,c,l,u){var f=4<arguments.length&&u!==void 0?u:0,p=g.getBoundingClientRect(),y=g.scrollWidth/m||1,_=g.scrollHeight/c||1,b=l.touches[f]||l.changedTouches[f];return{x:(b.clientX-p.left)/y,y:(b.clientY-p.top)/_,winX:b.clientX,winY:b.clientY,id:b.identifier}}o.default.prototype.touches=[],o.default.prototype._updateTouchCoords=function(g){if(this._curElement!==null){for(var m=[],c=0;c<g.touches.length;c++)m[c]=h(this._curElement.elt,this.width,this.height,g,c);this._setProperty("touches",m)}},o.default.prototype._ontouchstart=function(g){var m=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._updateTouchCoords(g),this._updateNextMouseCoords(g),this._updateMouseCoords(),typeof m.touchStarted=="function"?m.touchStarted(g)===!1&&g.preventDefault():navigator.userAgent.toLowerCase().includes("safari")&&typeof m.mousePressed=="function"&&m.mousePressed(g)===!1&&g.preventDefault()},o.default.prototype._ontouchmove=function(g){var m=this._isGlobal?window:this;this._updateTouchCoords(g),this._updateNextMouseCoords(g),typeof m.touchMoved=="function"?m.touchMoved(g)===!1&&g.preventDefault():typeof m.mouseDragged=="function"&&m.mouseDragged(g)===!1&&g.preventDefault()},o.default.prototype._ontouchend=function(g){this._setProperty("mouseIsPressed",!1),this._updateTouchCoords(g),this._updateNextMouseCoords(g);var m=this._isGlobal?window:this;typeof m.touchEnded=="function"?m.touchEnded(g)===!1&&g.preventDefault():typeof m.mouseReleased=="function"&&m.mouseReleased(g)===!1&&g.preventDefault()};var d=o.default;i.default=d},{"../core/main":264,"core-js/modules/es.array.includes":156,"core-js/modules/es.string.includes":185}],285:[function(r,s,i){r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.typed-array.int32-array"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a,o,h,d,g={};function m(l,u){for(var f,p,y,_,b,x,S,E,C,M,I=g._toPixels(l),A=l.width,D=l.height,L=A*D,O=new Int32Array(L),N=0;N<L;N++)O[N]=g._getARGB(I,N);var U,K,J,z,H=new Int32Array(L),$=new Int32Array(L),ne=new Int32Array(L),oe=new Int32Array(L),_e=0;for(function(Te){var fe=3.5*Te|0;if(a!==(fe=fe<1?1:fe<248?fe:248)){o=1+(a=fe)<<1,h=new Int32Array(o),d=new Array(o);for(var pe=0;pe<o;pe++)d[pe]=new Int32Array(256);for(var R,V,q,ee,se=1,re=fe-1;se<fe;se++){h[fe+se]=h[re]=V=re*re,q=d[fe+se],ee=d[re--];for(var xe=0;xe<256;xe++)q[xe]=ee[xe]=V*xe}R=h[fe]=fe*fe,q=d[fe];for(var Q=0;Q<256;Q++)q[Q]=R*Q}}(u),K=0;K<D;K++){for(U=0;U<A;U++){if(_=y=p=b=f=0,(x=U-a)<0)M=-x,x=0;else{if(A<=x)break;M=0}for(J=M;J<o&&!(A<=x);J++){var he=O[x+_e];b+=(z=d[J])[(-16777216&he)>>>24],p+=z[(16711680&he)>>16],y+=z[(65280&he)>>8],_+=z[255&he],f+=h[J],x++}H[S=_e+U]=b/f,$[S]=p/f,ne[S]=y/f,oe[S]=_/f}_e+=A}for(C=(E=-a)*A,K=_e=0;K<D;K++){for(U=0;U<A;U++){if(_=y=p=b=f=0,E<0)M=S=-E,x=U;else{if(D<=E)break;M=0,S=E,x=U+C}for(J=M;J<o&&!(D<=S);J++)b+=(z=d[J])[H[x]],p+=z[$[x]],y+=z[ne[x]],_+=z[oe[x]],f+=h[J],S++,x+=A;O[U+_e]=b/f<<24|p/f<<16|y/f<<8|_/f}_e+=A,C+=A,E++}g._setPixels(I,O)}g._toPixels=function(l){if(l instanceof ImageData)return l.data;if(l.getContext("2d"))return l.getContext("2d").getImageData(0,0,l.width,l.height).data;if(l.getContext("webgl")){var u=l.getContext("webgl"),f=u.drawingBufferWidth*u.drawingBufferHeight*4,p=new Uint8Array(f);return u.readPixels(0,0,l.width,l.height,u.RGBA,u.UNSIGNED_BYTE,p),p}},g._getARGB=function(l,u){var f=4*u;return l[3+f]<<24&4278190080|l[f]<<16&16711680|l[1+f]<<8&65280|255&l[2+f]},g._setPixels=function(l,u){for(var f=0,p=0,y=l.length;p<y;p++)l[(f=4*p)+0]=(16711680&u[p])>>>16,l[f+1]=(65280&u[p])>>>8,l[f+2]=255&u[p],l[f+3]=(4278190080&u[p])>>>24},g._toImageData=function(l){return l instanceof ImageData?l:l.getContext("2d").getImageData(0,0,l.width,l.height)},g._createImageData=function(l,u){return g._tmpCanvas=document.createElement("canvas"),g._tmpCtx=g._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(l,u)},g.apply=function(l,u,f){var p=l.getContext("2d"),y=p.getImageData(0,0,l.width,l.height),_=u(y,f);_ instanceof ImageData?p.putImageData(_,0,0,0,0,l.width,l.height):p.putImageData(y,0,0,0,0,l.width,l.height)},g.threshold=function(l,u){var f=g._toPixels(l);u===void 0&&(u=.5);for(var p=Math.floor(255*u),y=0;y<f.length;y+=4){var _=void 0;_=p<=.2126*f[y]+.7152*f[y+1]+.0722*f[y+2]?255:0,f[y]=f[y+1]=f[y+2]=_}},g.gray=function(l){for(var u=g._toPixels(l),f=0;f<u.length;f+=4){var p=.2126*u[f]+.7152*u[f+1]+.0722*u[f+2];u[f]=u[f+1]=u[f+2]=p}},g.opaque=function(l){for(var u=g._toPixels(l),f=0;f<u.length;f+=4)u[f+3]=255;return u},g.invert=function(l){for(var u=g._toPixels(l),f=0;f<u.length;f+=4)u[f]=255-u[f],u[f+1]=255-u[f+1],u[f+2]=255-u[f+2]},g.posterize=function(l,u){var f=g._toPixels(l);if(u<2||255<u)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var p=u-1,y=0;y<f.length;y+=4){var _=f[y],b=f[y+1],x=f[y+2];f[y]=255*(_*u>>8)/p,f[y+1]=255*(b*u>>8)/p,f[y+2]=255*(x*u>>8)/p}},g.dilate=function(l){for(var u,f,p,y,_,b,x,S,E,C,M,I,A,D,L,O,N,U=g._toPixels(l),K=0,J=U.length?U.length/4:0,z=new Int32Array(J);K<J;)for(f=(u=K)+l.width;K<f;)p=y=g._getARGB(U,K),(x=K-1)<u&&(x=K),f<=(b=K+1)&&(b=K),(S=K-l.width)<0&&(S=0),J<=(E=K+l.width)&&(E=K),I=g._getARGB(U,S),M=g._getARGB(U,x),A=g._getARGB(U,E),(_=77*(p>>16&255)+151*(p>>8&255)+28*(255&p))<(L=77*(M>>16&255)+151*(M>>8&255)+28*(255&M))&&(y=M,_=L),_<(D=77*((C=g._getARGB(U,b))>>16&255)+151*(C>>8&255)+28*(255&C))&&(y=C,_=D),_<(O=77*(I>>16&255)+151*(I>>8&255)+28*(255&I))&&(y=I,_=O),_<(N=77*(A>>16&255)+151*(A>>8&255)+28*(255&A))&&(y=A,_=N),z[K++]=y;g._setPixels(U,z)},g.erode=function(l){for(var u,f,p,y,_,b,x,S,E,C,M,I,A,D,L,O,N,U=g._toPixels(l),K=0,J=U.length?U.length/4:0,z=new Int32Array(J);K<J;)for(f=(u=K)+l.width;K<f;)p=y=g._getARGB(U,K),(x=K-1)<u&&(x=K),f<=(b=K+1)&&(b=K),(S=K-l.width)<0&&(S=0),J<=(E=K+l.width)&&(E=K),I=g._getARGB(U,S),M=g._getARGB(U,x),A=g._getARGB(U,E),(L=77*(M>>16&255)+151*(M>>8&255)+28*(255&M))<(_=77*(p>>16&255)+151*(p>>8&255)+28*(255&p))&&(y=M,_=L),(D=77*((C=g._getARGB(U,b))>>16&255)+151*(C>>8&255)+28*(255&C))<_&&(y=C,_=D),(O=77*(I>>16&255)+151*(I>>8&255)+28*(255&I))<_&&(y=I,_=O),(N=77*(A>>16&255)+151*(A>>8&255)+28*(255&A))<_&&(y=A,_=N),z[K++]=y;g._setPixels(U,z)},g.blur=function(l,u){m(l,u)};var c=g;i.default=c},{"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.int32-array":209,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226}],286:[function(r,s,i){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.set"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.uint32-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a=h(r("../core/main")),o=h(r("omggif"));function h(m){return m&&m.__esModule?m:{default:m}}function d(m){return function(c){if(Array.isArray(c)){for(var l=0,u=new Array(c.length);l<c.length;l++)u[l]=c[l];return u}}(m)||function(c){if(Symbol.iterator in Object(c)||Object.prototype.toString.call(c)==="[object Arguments]")return Array.from(c)}(m)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}a.default.prototype.createImage=function(m,c){return a.default._validateParameters("createImage",arguments),new a.default.Image(m,c)},a.default.prototype.saveCanvas=function(){a.default._validateParameters("saveCanvas",arguments);var m,c,l,u,f=[].slice.call(arguments);switch(arguments[0]instanceof HTMLCanvasElement?(m=arguments[0],f.shift()):arguments[0]instanceof a.default.Element?(m=arguments[0].elt,f.shift()):m=this._curElement&&this._curElement.elt,1<=f.length&&(c=f[0]),2<=f.length&&(l=f[1]),l=l||a.default.prototype._checkFileExtension(c,l)[1]||"png"){default:u="image/png";break;case"jpeg":case"jpg":u="image/jpeg"}m.toBlob(function(p){a.default.prototype.downloadFile(p,c,l)},u)},a.default.prototype.saveGif=function(m,c){var l=m.gifProperties,u=l.loopLimit;u===1?u=null:u===null&&(u=0);for(var f=new Uint8Array(m.width*m.height*l.numFrames),p=[],y={},_=0;_<l.numFrames;_++){for(var b=new Set,x=l.frames[_].image.data,S=x.length,E=new Uint32Array(m.width*m.height),C=0,M=0;C<S;C+=4,M++){var I=x[C+0]<<16|x[C+1]<<8|x[C+2]<<0;b.add(I),E[M]=I}var A=d(b).sort().toString();y[A]===void 0?y[A]={freq:1,frames:[_]}:(y[A].freq+=1,y[A].frames.push(_)),p.push(E)}var D=[],L=Object.keys(y).sort(function(pe,R){return y[R].freq-y[pe].freq}),O=L[0].split(",").map(function(pe){return parseInt(pe)});D=D.concat(y[O].frames);for(var N=new Set(O),U=1;U<L.length;U++){var K=L[U].split(",").map(function(pe){return parseInt(pe)}).filter(function(pe){return!N.has(pe)});if(O.length+K.length<=256){for(var J=0;J<K.length;J++)O.push(K[J]),N.add(K[J]);D=D.concat(y[L[U]].frames)}}D=new Set(D);for(var z={},H=0;H<O.length;H++)z[O[H]]||(z[O[H]]=H);for(var $=1;$<O.length;)$<<=1;O.length=$;for(var ne={loop:u,palette:new Uint32Array(O)},oe=new o.default.GifWriter(f,m.width,m.height,ne),_e={},he=function(pe){for(var R=!D.has(pe),V=R?[]:O,q=new Uint8Array(m.width*m.height),ee={},se=new Set,re=0;re<p[pe].length;re++){var xe=p[pe][re];R?(ee[xe]===void 0&&(ee[xe]=V.length,V.push(xe)),q[re]=ee[xe]):q[re]=z[xe],0<pe&&p[pe-1][re]!==xe&&se.add(xe)}var Q={},ce=V.filter(function(Ee){return!se.has(Ee)});if(0<ce.length){var de=ce[0],ae=R?ee[de]:z[de];if(0<pe){for(var Se=0;Se<p[pe].length;Se++)p[pe-1][Se]===p[pe][Se]&&(q[Se]=ae);Q.transparent=ae,_e.frameOpts.disposal=1}}if(Q.delay=l.frames[pe].delay/10,R){for(var ke=1;ke<V.length;)ke<<=1;V.length=ke,Q.palette=new Uint32Array(V)}0<pe&&oe.addFrame(0,0,m.width,m.height,_e.pixelPaletteIndex,_e.frameOpts),_e={pixelPaletteIndex:q,frameOpts:Q}},Te=0;Te<l.numFrames;Te++)he(Te);_e.frameOpts.disposal=1,oe.addFrame(0,0,m.width,m.height,_e.pixelPaletteIndex,_e.frameOpts);var fe=new Blob([f.slice(0,oe.end())],{type:"image/gif"});a.default.prototype.downloadFile(fe,c,"gif")},a.default.prototype.saveFrames=function(m,c,l,u,f){a.default._validateParameters("saveFrames",arguments);var p=l||3;p=a.default.prototype.constrain(p,0,15),p*=1e3;var y=u||15;y=a.default.prototype.constrain(y,0,22);var _=0,b=a.default.prototype._makeFrame,x=this._curElement.elt,S=[],E=setInterval(function(){S.push(b(m+_,c,x)),_++},1e3/y);setTimeout(function(){if(clearInterval(E),f)f(S);else{var C=!0,M=!1,I=void 0;try{for(var A,D=S[Symbol.iterator]();!(C=(A=D.next()).done);C=!0){var L=A.value;a.default.prototype.downloadFile(L.imageData,L.filename,L.ext)}}catch(O){M=!0,I=O}finally{try{C||D.return==null||D.return()}finally{if(M)throw I}}}S=[]},p+.01)},a.default.prototype._makeFrame=function(m,c,l){var u,f;if(u=this?this._curElement.elt:l,c)switch(c.toLowerCase()){case"png":f="image/png";break;case"jpeg":case"jpg":f="image/jpeg";break;default:f="image/png"}else c="png",f="image/png";var p=u.toDataURL(f);p=p.replace(f,"image/octet-stream");var y={};return y.imageData=p,y.filename=m,y.ext=c,y};var g=a.default;i.default=g},{"../core/main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.filter":152,"core-js/modules/es.array.from":155,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.set":183,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint32-array":225,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/web.dom-collections.iterator":229,omggif:238}],287:[function(r,s,i){function a(p){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(p)}r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.uint8-clamped-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=l(r("../core/main")),h=l(r("./filters")),d=l(r("../core/helpers")),g=function(p){if(p&&p.__esModule)return p;if(p===null||a(p)!=="object"&&typeof p!="function")return{default:p};var y=c();if(y&&y.has(p))return y.get(p);var _={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var x in p)if(Object.prototype.hasOwnProperty.call(p,x)){var S=b?Object.getOwnPropertyDescriptor(p,x):null;S&&(S.get||S.set)?Object.defineProperty(_,x,S):_[x]=p[x]}return _.default=p,y&&y.set(p,_),_}(r("../core/constants")),m=l(r("omggif"));function c(){if(typeof WeakMap!="function")return null;var p=new WeakMap;return c=function(){return p},p}function l(p){return p&&p.__esModule?p:{default:p}}function u(p,y){return 0<p&&p<y?p:y}r("../core/friendly_errors/validate_params"),r("../core/friendly_errors/file_errors"),r("../core/friendly_errors/fes_core"),o.default.prototype.loadImage=function(p,y,_){o.default._validateParameters("loadImage",arguments);var b=new o.default.Image(1,1,this),x=this,S=new Request(p,{method:"GET",mode:"cors"});return fetch(p,S).then(function(E){var C=E.headers.get("content-type");if(C===null&&console.warn("The image you loaded does not have a Content-Type header. If you are using the online editor consider reuploading the asset."),C&&C.includes("image/gif"))E.arrayBuffer().then(function(I){I&&function(A,D,L,O,N){var U=new m.default.GifReader(A);D.width=D.canvas.width=U.width,D.height=D.canvas.height=U.height;var K=[],J=U.numFrames(),z=new Uint8ClampedArray(D.width*D.height*4);if(1<J){for(var H=function(fe,pe){try{pe.decodeAndBlitFrameRGBA(fe,z)}catch(R){o.default._friendlyFileLoadError(8,D.src),typeof O=="function"?O(R):console.error(R)}},$=0;$<J;$++){var ne=U.frameInfo($),oe=D.drawingContext.getImageData(0,0,D.width,D.height);z=oe.data.slice(),H($,U);var _e=new ImageData(z,D.width,D.height);D.drawingContext.putImageData(_e,0,0);var he=ne.delay;he===0&&(he=10),K.push({image:D.drawingContext.getImageData(0,0,D.width,D.height),delay:10*he}),ne.disposal===2?D.drawingContext.clearRect(ne.x,ne.y,ne.width,ne.height):ne.disposal===3&&D.drawingContext.putImageData(oe,0,0,ne.x,ne.y,ne.width,ne.height)}var Te=U.loopCount();Te===null?Te=1:Te===0&&(Te=null),D.drawingContext.putImageData(K[0].image,0,0),D.gifProperties={displayIndex:0,loopLimit:Te,loopCount:0,frames:K,numFrames:J,playing:!0,timeDisplayed:0,lastChangeTime:0}}typeof L=="function"&&L(D),N()}(new Uint8Array(I),b,y,_,function(A){x._decrementPreload()}.bind(x))},function(I){typeof _=="function"?_(I):console.error(I)});else{var M=new Image;M.onload=function(){b.width=b.canvas.width=M.width,b.height=b.canvas.height=M.height,b.drawingContext.drawImage(M,0,0),b.modified=!0,typeof y=="function"&&y(b),x._decrementPreload()},M.onerror=function(I){o.default._friendlyFileLoadError(0,M.src),typeof _=="function"?_(I):console.error(I)},p.indexOf("data:image/")!==0&&(M.crossOrigin="Anonymous"),M.src=p}b.modified=!0}).catch(function(E){o.default._friendlyFileLoadError(0,p),typeof _=="function"?_(E):console.error(E)}),b},o.default.prototype.image=function(p,y,_,b,x,S,E,C,M){o.default._validateParameters("image",arguments);var I=p.width,A=p.height;p.elt&&p.elt.videoWidth&&!p.canvas&&(I=p.elt.videoWidth,A=p.elt.videoHeight);var D=y,L=_,O=b||I,N=x||A,U=S||0,K=E||0,J=C||I,z=M||A;J=u(J,I),z=u(z,A);var H=1;p.elt&&!p.canvas&&p.elt.style.width&&(H=p.elt.videoWidth&&!b?p.elt.videoWidth:p.elt.width,H/=parseInt(p.elt.style.width,10)),U*=H,K*=H,z*=H,J*=H;var $=d.default.modeAdjust(D,L,O,N,this._renderer._imageMode);this._renderer.image(p,U,K,J,z,$.x,$.y,$.w,$.h)},o.default.prototype.tint=function(){for(var p=arguments.length,y=new Array(p),_=0;_<p;_++)y[_]=arguments[_];o.default._validateParameters("tint",y);var b=this.color.apply(this,y);this._renderer._tint=b.levels},o.default.prototype.noTint=function(){this._renderer._tint=null},o.default.prototype._getTintedImageCanvas=function(p){if(!p.canvas)return p;var y=h.default._toPixels(p.canvas),_=document.createElement("canvas");_.width=p.canvas.width,_.height=p.canvas.height;for(var b=_.getContext("2d"),x=b.createImageData(p.canvas.width,p.canvas.height),S=x.data,E=0;E<y.length;E+=4){var C=y[E],M=y[E+1],I=y[E+2],A=y[E+3];S[E]=C*this._renderer._tint[0]/255,S[E+1]=M*this._renderer._tint[1]/255,S[E+2]=I*this._renderer._tint[2]/255,S[E+3]=A*this._renderer._tint[3]/255}return b.putImageData(x,0,0),_},o.default.prototype.imageMode=function(p){o.default._validateParameters("imageMode",arguments),p!==g.CORNER&&p!==g.CORNERS&&p!==g.CENTER||(this._renderer._imageMode=p)};var f=o.default;i.default=f},{"../core/constants":253,"../core/friendly_errors/fes_core":255,"../core/friendly_errors/file_errors":256,"../core/friendly_errors/validate_params":259,"../core/helpers":260,"../core/main":264,"./filters":285,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.string.includes":185,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/es.typed-array.uint8-clamped-array":227,omggif:238}],288:[function(r,s,i){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a=h(r("../core/main")),o=h(r("./filters"));function h(g){return g&&g.__esModule?g:{default:g}}a.default.Image=function(g,m){this.width=g,this.height=m,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),(this._pixelsState=this)._pixelDensity=1,this.gifProperties=null,this._modified=!1,this.pixels=[]},a.default.Image.prototype._animateGif=function(g){var m=this.gifProperties,c=g._lastFrameTime;if(m.lastChangeTime===0&&(m.lastChangeTime=c),m.playing){m.timeDisplayed=c-m.lastChangeTime;var l=m.frames[m.displayIndex].delay;if(m.timeDisplayed>=l){var u=Math.floor(m.timeDisplayed/l);if(m.timeDisplayed=0,m.lastChangeTime=c,m.displayIndex+=u,m.loopCount=Math.floor(m.displayIndex/m.numFrames),m.loopLimit!==null&&m.loopCount>=m.loopLimit)m.playing=!1;else{var f=m.displayIndex%m.numFrames;this.drawingContext.putImageData(m.frames[f].image,0,0),m.displayIndex=f,this.setModified(!0)}}}},a.default.Image.prototype._setProperty=function(g,m){this[g]=m,this.setModified(!0)},a.default.Image.prototype.loadPixels=function(){a.default.Renderer2D.prototype.loadPixels.call(this),this.setModified(!0)},a.default.Image.prototype.updatePixels=function(g,m,c,l){a.default.Renderer2D.prototype.updatePixels.call(this,g,m,c,l),this.setModified(!0)},a.default.Image.prototype.get=function(g,m,c,l){return a.default._validateParameters("p5.Image.get",arguments),a.default.Renderer2D.prototype.get.apply(this,arguments)},a.default.Image.prototype._getPixel=a.default.Renderer2D.prototype._getPixel,a.default.Image.prototype.set=function(g,m,c){a.default.Renderer2D.prototype.set.call(this,g,m,c),this.setModified(!0)},a.default.Image.prototype.resize=function(g,m){g===0&&m===0?(g=this.canvas.width,m=this.canvas.height):g===0?g=this.canvas.width*m/this.canvas.height:m===0&&(m=this.canvas.height*g/this.canvas.width),g=Math.floor(g),m=Math.floor(m);var c=document.createElement("canvas");if(c.width=g,c.height=m,this.gifProperties)for(var l=this.gifProperties,u=function(y,_){for(var b=0,x=0;x<_.height;x++)for(var S=0;S<_.width;S++){var E=Math.floor(S*y.width/_.width),C=4*(Math.floor(x*y.height/_.height)*y.width+E);_.data[b++]=y.data[C++],_.data[b++]=y.data[C++],_.data[b++]=y.data[C++],_.data[b++]=y.data[C++]}},f=0;f<l.numFrames;f++){var p=this.drawingContext.createImageData(g,m);u(l.frames[f].image,p),l.frames[f].image=p}c.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,c.width,c.height),this.canvas.width=this.width=g,this.canvas.height=this.height=m,this.drawingContext.drawImage(c,0,0,g,m,0,0,g,m),0<this.pixels.length&&this.loadPixels(),this.setModified(!0)},a.default.Image.prototype.copy=function(){for(var g=arguments.length,m=new Array(g),c=0;c<g;c++)m[c]=arguments[c];a.default.prototype.copy.apply(this,m)},a.default.Image.prototype.mask=function(g){g===void 0&&(g=this);var m=this.drawingContext.globalCompositeOperation,c=1;g instanceof a.default.Renderer&&(c=g._pInst._pixelDensity);var l=[g,0,0,c*g.width,c*g.height,0,0,this.width,this.height];this.drawingContext.globalCompositeOperation="destination-in",a.default.Image.prototype.copy.apply(this,l),this.drawingContext.globalCompositeOperation=m,this.setModified(!0)},a.default.Image.prototype.filter=function(g,m){o.default.apply(this.canvas,o.default[g],m),this.setModified(!0)},a.default.Image.prototype.blend=function(){for(var g=arguments.length,m=new Array(g),c=0;c<g;c++)m[c]=arguments[c];a.default._validateParameters("p5.Image.blend",arguments),a.default.prototype.blend.apply(this,m),this.setModified(!0)},a.default.Image.prototype.setModified=function(g){this._modified=g},a.default.Image.prototype.isModified=function(){return this._modified},a.default.Image.prototype.save=function(g,m){this.gifProperties?a.default.prototype.saveGif(this,g):a.default.prototype.saveCanvas(this.canvas,g,m)},a.default.Image.prototype.reset=function(){if(this.gifProperties){var g=this.gifProperties;g.playing=!0,g.timeSinceStart=0,g.timeDisplayed=0,g.lastChangeTime=0,g.loopCount=0,g.displayIndex=0,this.drawingContext.putImageData(g.frames[0].image,0,0)}},a.default.Image.prototype.getCurrentFrame=function(){if(this.gifProperties){var g=this.gifProperties;return g.displayIndex%g.numFrames}},a.default.Image.prototype.setFrame=function(g){if(this.gifProperties){var m=this.gifProperties;g<m.numFrames&&0<=g?(m.timeDisplayed=0,m.lastChangeTime=0,m.displayIndex=g,this.drawingContext.putImageData(m.frames[g].image,0,0)):console.log("Cannot set GIF to a frame number that is higher than total number of frames or below zero.")}},a.default.Image.prototype.numFrames=function(){if(this.gifProperties)return this.gifProperties.numFrames},a.default.Image.prototype.play=function(){this.gifProperties&&(this.gifProperties.playing=!0)},a.default.Image.prototype.pause=function(){this.gifProperties&&(this.gifProperties.playing=!1)},a.default.Image.prototype.delay=function(g,m){if(this.gifProperties){var c=this.gifProperties;if(m<c.numFrames&&0<=m)c.frames[m].delay=g;else{var l=!0,u=!1,f=void 0;try{for(var p,y=c.frames[Symbol.iterator]();!(l=(p=y.next()).done);l=!0)p.value.delay=g}catch(_){u=!0,f=_}finally{try{l||y.return==null||y.return()}finally{if(u)throw f}}}}};var d=a.default.Image;i.default=d},{"../core/main":264,"./filters":285,"core-js/modules/es.array.filter":152,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":229}],289:[function(r,s,i){r("core-js/modules/es.array.filter"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a=h(r("../core/main")),o=h(r("./filters"));function h(g){return g&&g.__esModule?g:{default:g}}r("../color/p5.Color"),a.default.prototype.pixels=[],a.default.prototype.blend=function(){for(var g=arguments.length,m=new Array(g),c=0;c<g;c++)m[c]=arguments[c];var l;a.default._validateParameters("blend",m),this._renderer?(l=this._renderer).blend.apply(l,m):a.default.Renderer2D.prototype.blend.apply(this,m)},a.default.prototype.copy=function(){for(var g=arguments.length,m=new Array(g),c=0;c<g;c++)m[c]=arguments[c];var l,u,f,p,y,_,b,x,S;if(a.default._validateParameters("copy",m),m.length===9)l=m[0],u=m[1],f=m[2],p=m[3],y=m[4],_=m[5],b=m[6],x=m[7],S=m[8];else{if(m.length!==8)throw new Error("Signature not supported");l=this,u=m[0],f=m[1],p=m[2],y=m[3],_=m[4],b=m[5],x=m[6],S=m[7]}a.default.prototype._copyHelper(this,l,u,f,p,y,_,b,x,S)},a.default.prototype._copyHelper=function(g,m,c,l,u,f,p,y,_,b){m.loadPixels();var x=m.canvas.width/m.width,S=0,E=0;m._renderer&&m._renderer.isP3D&&(S=m.width/2,E=m.height/2),g._renderer&&g._renderer.isP3D?a.default.RendererGL.prototype.image.call(g._renderer,m,c+S,l+E,u,f,p,y,_,b):g.drawingContext.drawImage(m.canvas,x*(c+S),x*(l+E),x*u,x*f,p,y,_,b)},a.default.prototype.filter=function(g,m){a.default._validateParameters("filter",arguments),this.canvas!==void 0?o.default.apply(this.canvas,o.default[g],m):o.default.apply(this.elt,o.default[g],m)},a.default.prototype.get=function(g,m,c,l){var u;return a.default._validateParameters("get",arguments),(u=this._renderer).get.apply(u,arguments)},a.default.prototype.loadPixels=function(){for(var g=arguments.length,m=new Array(g),c=0;c<g;c++)m[c]=arguments[c];a.default._validateParameters("loadPixels",m),this._renderer.loadPixels()},a.default.prototype.set=function(g,m,c){this._renderer.set(g,m,c)},a.default.prototype.updatePixels=function(g,m,c,l){a.default._validateParameters("updatePixels",arguments),this.pixels.length!==0&&this._renderer.updatePixels(g,m,c,l)};var d=a.default;i.default=d},{"../color/p5.Color":251,"../core/main":264,"./filters":285,"core-js/modules/es.array.filter":152}],290:[function(r,s,i){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/web.url"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a=d(r("../core/main"));r("whatwg-fetch"),r("es6-promise/auto");var o=d(r("fetch-jsonp")),h=d(r("file-saver"));function d(f){return f&&f.__esModule?f:{default:f}}function g(f){return(g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(f)}function m(f,p){var y={};if((p=p||[])===void 0)for(var _=0;_<f.length;_++)p[_.toString()]=_;for(var b=0;b<p.length;b++){var x=p[b],S=f[b];y[x]=S}return y}function c(f){return f.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function l(f,p){p&&p!==!0&&p!=="true"||(p="");var y="";return(f=f||"untitled")&&f.includes(".")&&(y=f.split(".").pop()),p&&y!==p&&(y=p,f="".concat(f,".").concat(y)),[f,y]}r("../core/friendly_errors/validate_params"),r("../core/friendly_errors/file_errors"),r("../core/friendly_errors/fes_core"),a.default.prototype.loadJSON=function(){for(var f=arguments.length,p=new Array(f),y=0;y<f;y++)p[y]=arguments[y];a.default._validateParameters("loadJSON",p);for(var _,b,x,S=p[0],E={},C="json",M=1;M<p.length;M++){var I=p[M];typeof I=="string"?I!=="jsonp"&&I!=="json"||(C=I):typeof I=="function"?_?b=I:_=I:g(I)==="object"&&(I.hasOwnProperty("jsonpCallback")||I.hasOwnProperty("jsonpCallbackFunction"))&&(C="jsonp",x=I)}var A=this;return this.httpDo(S,"GET",x,C,function(D){for(var L in D)E[L]=D[L];_!==void 0&&_(D),A._decrementPreload()},function(D){if(a.default._friendlyFileLoadError(5,S),!b)throw D;b(D)}),E},a.default.prototype.loadStrings=function(){for(var f=arguments.length,p=new Array(f),y=0;y<f;y++)p[y]=arguments[y];a.default._validateParameters("loadStrings",p);for(var _,b,x=[],S=1;S<p.length;S++){var E=p[S];typeof E=="function"&&(_===void 0?_=E:b===void 0&&(b=E))}var C=this;return a.default.prototype.httpDo.call(this,p[0],"GET","text",function(M){for(var I=M.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/),A=0,D=I.length;A<D;A+=32768)Array.prototype.push.apply(x,I.slice(A,Math.min(A+32768,D)));_!==void 0&&_(x),C._decrementPreload()},function(M){if(a.default._friendlyFileLoadError(3,M),!b)throw M;b(M)}),x},a.default.prototype.loadTable=function(f){var p,y,_,b=!1,x=f.substring(f.lastIndexOf(".")+1,f.length);x==="csv"?_=",":x==="ssv"?_=";":x==="tsv"&&(_="	");for(var S=1;S<arguments.length;S++)typeof arguments[S]=="function"?p===void 0?p=arguments[S]:y===void 0&&(y=arguments[S]):typeof arguments[S]=="string"&&(arguments[S]==="header"&&(b=!0),arguments[S]==="csv"?_=",":arguments[S]==="ssv"?_=";":arguments[S]==="tsv"&&(_="	"));var E=new a.default.Table,C=this;return this.httpDo(f,"GET","table",function(M){for(var I,A,D={},L=[],O=0,N=null,U=function(){D.currentState=0,D.token=""},K=function(){N.push(D.token),U()},J=function(){D.currentState=4,L.push(N),N=null};;){if((I=M[O++])==null){if(D.escaped)throw new Error("Unclosed quote in file.");if(N){K(),J();break}}if(N===null&&(D.escaped=!1,N=[],U()),D.currentState===0){if(I==='"'){D.escaped=!0,D.currentState=1;continue}D.currentState=1}if(D.currentState===1&&D.escaped)if(I==='"')M[O]==='"'?(D.token+='"',O++):(D.escaped=!1,D.currentState=2);else{if(I==="\r")continue;D.token+=I}else I==="\r"?(M[O]===`
`&&O++,K(),J()):I===`
`?(K(),J()):I===_?K():D.currentState===1&&(D.token+=I)}if(b)E.columns=L.shift();else for(var z=0;z<L[0].length;z++)E.columns[z]="null";for(var H=0;H<L.length;H++)(L[H].length!==1||L[H][0]!=="undefined"&&L[H][0]!=="")&&((A=new a.default.TableRow).arr=L[H],A.obj=m(L[H],E.columns),E.addRow(A));typeof p=="function"&&p(E),C._decrementPreload()},function(M){a.default._friendlyFileLoadError(2,f),y?y(M):console.error(M)}),E},a.default.prototype.loadXML=function(){for(var f=arguments.length,p=new Array(f),y=0;y<f;y++)p[y]=arguments[y];for(var _,b,x=new a.default.XML,S=1;S<p.length;S++){var E=p[S];typeof E=="function"&&(_===void 0?_=E:b===void 0&&(b=E))}var C=this;return this.httpDo(p[0],"GET","xml",function(M){for(var I in M)x[I]=M[I];_!==void 0&&_(x),C._decrementPreload()},function(M){if(a.default._friendlyFileLoadError(1,M),!b)throw M;b(M)}),x},a.default.prototype.loadBytes=function(f,p,y){var _={},b=this;return this.httpDo(f,"GET","arrayBuffer",function(x){_.bytes=new Uint8Array(x),typeof p=="function"&&p(_),b._decrementPreload()},function(x){if(a.default._friendlyFileLoadError(6,f),!y)throw x;y(x)}),_},a.default.prototype.httpGet=function(){a.default._validateParameters("httpGet",arguments);var f=Array.prototype.slice.call(arguments);return f.splice(1,0,"GET"),a.default.prototype.httpDo.apply(this,f)},a.default.prototype.httpPost=function(){a.default._validateParameters("httpPost",arguments);var f=Array.prototype.slice.call(arguments);return f.splice(1,0,"POST"),a.default.prototype.httpDo.apply(this,f)},a.default.prototype.httpDo=function(){for(var f,p,y,_,b,x={},S=0,E="text/plain",C=arguments.length-1;0<C&&typeof(C<0||arguments.length<=C?void 0:arguments[C])=="function";C--)S++;var M=arguments.length<=0?void 0:arguments[0];if(arguments.length-S==2&&typeof M=="string"&&g(arguments.length<=1?void 0:arguments[1])==="object")_=new Request(M,arguments.length<=1?void 0:arguments[1]),p=arguments.length<=2?void 0:arguments[2],y=arguments.length<=3?void 0:arguments[3];else{for(var I,A="GET",D=1;D<arguments.length;D++){var L=D<0||arguments.length<=D?void 0:arguments[D];if(typeof L=="string")L==="GET"||L==="POST"||L==="PUT"||L==="DELETE"?A=L:L==="json"||L==="jsonp"||L==="binary"||L==="arrayBuffer"||L==="xml"||L==="text"||L==="table"?f=L:I=L;else if(typeof L=="number")I=L.toString();else if(g(L)==="object")if(L.hasOwnProperty("jsonpCallback")||L.hasOwnProperty("jsonpCallbackFunction"))for(var O in L)x[O]=L[O];else E=L instanceof a.default.XML?(I=L.serialize(),"application/xml"):(I=JSON.stringify(L),"application/json");else typeof L=="function"&&(p?y=L:p=L)}var N=A==="GET"?new Headers:new Headers({"Content-Type":E});_=new Request(M,{method:A,mode:"cors",body:I,headers:N})}return(b=(b=(f=f||(M.includes("json")?"json":M.includes("xml")?"xml":"text"))==="jsonp"?(0,o.default)(M,x):fetch(_)).then(function(U){if(!U.ok){var K=new Error(U.body);throw K.status=U.status,K.ok=!1,K}var J=0;switch(f!=="jsonp"&&(J=U.headers.get("content-length")),J&&64e6<J&&a.default._friendlyFileLoadError(7,M),f){case"json":case"jsonp":return U.json();case"binary":return U.blob();case"arrayBuffer":return U.arrayBuffer();case"xml":return U.text().then(function(z){var H=new DOMParser().parseFromString(z,"text/xml");return new a.default.XML(H.documentElement)});default:return U.text()}})).then(p||function(){}),b.catch(y||console.error),b},window.URL=window.URL||window.webkitURL,a.default.prototype._pWriters=[],a.default.prototype.createWriter=function(f,p){var y;for(var _ in a.default.prototype._pWriters)if(a.default.prototype._pWriters[_].name===f)return y=new a.default.PrintWriter(f+this.millis(),p),a.default.prototype._pWriters.push(y),y;return y=new a.default.PrintWriter(f,p),a.default.prototype._pWriters.push(y),y},a.default.PrintWriter=function(f,p){var y=this;this.name=f,this.content="",this.write=function(_){this.content+=_},this.print=function(_){this.content+="".concat(_,`
`)},this.clear=function(){this.content=""},this.close=function(){var _=[];for(var b in _.push(this.content),a.default.prototype.writeFile(_,f,p),a.default.prototype._pWriters)a.default.prototype._pWriters[b].name===this.name&&a.default.prototype._pWriters.splice(b,1);y.clear(),y={}}},a.default.prototype.save=function(f,p,y){var _=arguments,b=this._curElement?this._curElement.elt:this.elt;if(_.length!==0)if(_[0]instanceof a.default.Renderer||_[0]instanceof a.default.Graphics)a.default.prototype.saveCanvas(_[0].elt,_[1],_[2]);else if(_.length===1&&typeof _[0]=="string")a.default.prototype.saveCanvas(b,_[0]);else switch(l(_[1],_[2])[1]){case"json":return void a.default.prototype.saveJSON(_[0],_[1],_[2]);case"txt":return void a.default.prototype.saveStrings(_[0],_[1],_[2]);default:_[0]instanceof Array?a.default.prototype.saveStrings(_[0],_[1],_[2]):_[0]instanceof a.default.Table?a.default.prototype.saveTable(_[0],_[1],_[2]):_[0]instanceof a.default.Image?a.default.prototype.saveCanvas(_[0].canvas,_[1]):_[0]instanceof a.default.SoundFile&&a.default.prototype.saveSound(_[0],_[1],_[2],_[3])}else a.default.prototype.saveCanvas(b)},a.default.prototype.saveJSON=function(f,p,y){var _;a.default._validateParameters("saveJSON",arguments),_=y?JSON.stringify(f):JSON.stringify(f,void 0,2),this.saveStrings(_.split(`
`),p,"json")},a.default.prototype.saveJSONObject=a.default.prototype.saveJSON,a.default.prototype.saveJSONArray=a.default.prototype.saveJSON,a.default.prototype.saveStrings=function(f,p,y,_){a.default._validateParameters("saveStrings",arguments);for(var b=y||"txt",x=this.createWriter(p,b),S=0;S<f.length;S++)_?x.write(f[S]+`\r
`):x.write(f[S]+`
`);x.close(),x.clear()},a.default.prototype.saveTable=function(f,p,y){var _;a.default._validateParameters("saveTable",arguments),_=y===void 0?p.substring(p.lastIndexOf(".")+1,p.length):y;var b=this.createWriter(p,_),x=f.columns,S=",";if(_==="tsv"&&(S="	"),_!=="html"){if(x[0]!=="0"){for(var E=0;E<x.length;E++)E<x.length-1?b.write(x[E]+S):b.write(x[E]);b.write(`
`)}for(var C=0;C<f.rows.length;C++){var M=void 0;for(M=0;M<f.rows[C].arr.length;M++)M<f.rows[C].arr.length-1?_==="csv"&&String(f.rows[C].arr[M]).includes(",")?b.write('"'+f.rows[C].arr[M]+'"'+S):b.write(f.rows[C].arr[M]+S):_==="csv"&&String(f.rows[C].arr[M]).includes(",")?b.write('"'+f.rows[C].arr[M]+'"'):b.write(f.rows[C].arr[M]);b.write(`
`)}}else{if(b.print("<html>"),b.print("<head>"),b.print('  <meta http-equiv="content-type" content="text/html;charset=utf-8" />'),b.print("</head>"),b.print("<body>"),b.print("  <table>"),x[0]!=="0"){b.print("    <tr>");for(var I=0;I<x.length;I++){var A=c(x[I]);b.print("      <td>".concat(A)),b.print("      </td>")}b.print("    </tr>")}for(var D=0;D<f.rows.length;D++){b.print("    <tr>");for(var L=0;L<f.columns.length;L++){var O=c(f.rows[D].getString(L));b.print("      <td>".concat(O)),b.print("      </td>")}b.print("    </tr>")}b.print("  </table>"),b.print("</body>"),b.print("</html>")}b.close(),b.clear()},a.default.prototype.writeFile=function(f,p,y){var _="application/octet-stream";a.default.prototype._isSafari()&&(_="text/plain");var b=new Blob(f,{type:_});a.default.prototype.downloadFile(b,p,y)},a.default.prototype.downloadFile=function(f,p,y){var _=l(p,y),b=_[0];if(f instanceof Blob)h.default.saveAs(f,b);else{var x=document.createElement("a");if(x.href=f,x.download=b,x.onclick=function(E){var C;C=E,document.body.removeChild(C.target),E.stopPropagation()},x.style.display="none",document.body.appendChild(x),a.default.prototype._isSafari()){var S=`Hello, Safari user! To download this file...
`;S+=`1. Go to File --> Save As.
`,S+=`2. Choose "Page Source" as the Format.
`,S+='3. Name it with this extension: ."'.concat(_[1],'"'),alert(S)}x.click()}},a.default.prototype._checkFileExtension=l,a.default.prototype._isSafari=function(){return 0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")};var u=a.default;i.default=u},{"../core/friendly_errors/fes_core":255,"../core/friendly_errors/file_errors":256,"../core/friendly_errors/validate_params":259,"../core/main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.last-index-of":160,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.function.name":166,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/web.dom-collections.iterator":229,"core-js/modules/web.url":231,"es6-promise/auto":232,"fetch-jsonp":234,"file-saver":235,"whatwg-fetch":242}],291:[function(r,s,i){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.trim"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a,o=(a=r("../core/main"))&&a.__esModule?a:{default:a};o.default.Table=function(d){this.columns=[],this.rows=[]},o.default.Table.prototype.addRow=function(d){var g=d||new o.default.TableRow;if(g.arr===void 0||g.obj===void 0)throw new Error("invalid TableRow: ".concat(g));return(g.table=this).rows.push(g),g},o.default.Table.prototype.removeRow=function(d){this.rows[d].table=null;var g=this.rows.splice(d+1,this.rows.length);this.rows.pop(),this.rows=this.rows.concat(g)},o.default.Table.prototype.getRow=function(d){return this.rows[d]},o.default.Table.prototype.getRows=function(){return this.rows},o.default.Table.prototype.findRow=function(d,g){if(typeof g=="string"){for(var m=0;m<this.rows.length;m++)if(this.rows[m].obj[g]===d)return this.rows[m]}else for(var c=0;c<this.rows.length;c++)if(this.rows[c].arr[g]===d)return this.rows[c];return null},o.default.Table.prototype.findRows=function(d,g){var m=[];if(typeof g=="string")for(var c=0;c<this.rows.length;c++)this.rows[c].obj[g]===d&&m.push(this.rows[c]);else for(var l=0;l<this.rows.length;l++)this.rows[l].arr[g]===d&&m.push(this.rows[l]);return m},o.default.Table.prototype.matchRow=function(d,g){if(typeof g=="number"){for(var m=0;m<this.rows.length;m++)if(this.rows[m].arr[g].match(d))return this.rows[m]}else for(var c=0;c<this.rows.length;c++)if(this.rows[c].obj[g].match(d))return this.rows[c];return null},o.default.Table.prototype.matchRows=function(d,g){var m=[];if(typeof g=="number")for(var c=0;c<this.rows.length;c++)this.rows[c].arr[g].match(d)&&m.push(this.rows[c]);else for(var l=0;l<this.rows.length;l++)this.rows[l].obj[g].match(d)&&m.push(this.rows[l]);return m},o.default.Table.prototype.getColumn=function(d){var g=[];if(typeof d=="string")for(var m=0;m<this.rows.length;m++)g.push(this.rows[m].obj[d]);else for(var c=0;c<this.rows.length;c++)g.push(this.rows[c].arr[d]);return g},o.default.Table.prototype.clearRows=function(){delete this.rows,this.rows=[]},o.default.Table.prototype.addColumn=function(d){var g=d||null;this.columns.push(g)},o.default.Table.prototype.getColumnCount=function(){return this.columns.length},o.default.Table.prototype.getRowCount=function(){return this.rows.length},o.default.Table.prototype.removeTokens=function(d,g){for(var m=[],c=0;c<d.length;c++)m.push(d.charAt(c).replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"));var l=new RegExp(m.join("|"),"g");if(g===void 0)for(var u=0;u<this.columns.length;u++)for(var f=0;f<this.rows.length;f++){var p=this.rows[f].arr[u];p=p.replace(l,""),this.rows[f].arr[u]=p,this.rows[f].obj[this.columns[u]]=p}else if(typeof g=="string")for(var y=0;y<this.rows.length;y++){var _=this.rows[y].obj[g];_=_.replace(l,""),this.rows[y].obj[g]=_;var b=this.columns.indexOf(g);this.rows[y].arr[b]=_}else for(var x=0;x<this.rows.length;x++){var S=this.rows[x].arr[g];S=S.replace(l,""),this.rows[x].arr[g]=S,this.rows[x].obj[this.columns[g]]=S}},o.default.Table.prototype.trim=function(d){var g=new RegExp(" ","g");if(d===void 0)for(var m=0;m<this.columns.length;m++)for(var c=0;c<this.rows.length;c++){var l=this.rows[c].arr[m];l=l.replace(g,""),this.rows[c].arr[m]=l,this.rows[c].obj[this.columns[m]]=l}else if(typeof d=="string")for(var u=0;u<this.rows.length;u++){var f=this.rows[u].obj[d];f=f.replace(g,""),this.rows[u].obj[d]=f;var p=this.columns.indexOf(d);this.rows[u].arr[p]=f}else for(var y=0;y<this.rows.length;y++){var _=this.rows[y].arr[d];_=_.replace(g,""),this.rows[y].arr[d]=_,this.rows[y].obj[this.columns[d]]=_}},o.default.Table.prototype.removeColumn=function(d){var g,m;typeof d=="string"?(g=d,m=this.columns.indexOf(d)):(m=d,g=this.columns[d]);var c=this.columns.splice(m+1,this.columns.length);this.columns.pop(),this.columns=this.columns.concat(c);for(var l=0;l<this.rows.length;l++){var u=this.rows[l].arr,f=u.splice(m+1,u.length);u.pop(),this.rows[l].arr=u.concat(f),delete this.rows[l].obj[g]}},o.default.Table.prototype.set=function(d,g,m){this.rows[d].set(g,m)},o.default.Table.prototype.setNum=function(d,g,m){this.rows[d].setNum(g,m)},o.default.Table.prototype.setString=function(d,g,m){this.rows[d].setString(g,m)},o.default.Table.prototype.get=function(d,g){return this.rows[d].get(g)},o.default.Table.prototype.getNum=function(d,g){return this.rows[d].getNum(g)},o.default.Table.prototype.getString=function(d,g){return this.rows[d].getString(g)},o.default.Table.prototype.getObject=function(d){for(var g,m={},c=0;c<this.rows.length;c++)if(g=this.rows[c].obj,typeof d=="string"){if(!(0<=this.columns.indexOf(d)))throw new Error('This table has no column named "'.concat(d,'"'));m[g[d]]=g}else m[c]=this.rows[c].obj;return m},o.default.Table.prototype.getArray=function(){for(var d=[],g=0;g<this.rows.length;g++)d.push(this.rows[g].arr);return d};var h=o.default;i.default=h},{"../core/main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.join":159,"core-js/modules/es.array.splice":164,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.match":187,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.trim":193}],292:[function(r,s,i){r("core-js/modules/es.array.index-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.split"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a,o=(a=r("../core/main"))&&a.__esModule?a:{default:a};o.default.TableRow=function(d,g){var m=[],c={};d&&(g=g||",",m=d.split(g));for(var l=0;l<m.length;l++){var u=l,f=m[l];c[u]=f}this.arr=m,this.obj=c,this.table=null},o.default.TableRow.prototype.set=function(d,g){if(typeof d=="string"){var m=this.table.columns.indexOf(d);if(!(0<=m))throw new Error('This table has no column named "'.concat(d,'"'));this.obj[d]=g,this.arr[m]=g}else{if(!(d<this.table.columns.length))throw new Error("Column #".concat(d," is out of the range of this table"));this.arr[d]=g;var c=this.table.columns[d];this.obj[c]=g}},o.default.TableRow.prototype.setNum=function(d,g){var m=parseFloat(g);this.set(d,m)},o.default.TableRow.prototype.setString=function(d,g){var m=g.toString();this.set(d,m)},o.default.TableRow.prototype.get=function(d){return typeof d=="string"?this.obj[d]:this.arr[d]},o.default.TableRow.prototype.getNum=function(d){var g;if((g=parseFloat(typeof d=="string"?this.obj[d]:this.arr[d])).toString()==="NaN")throw"Error: ".concat(this.obj[d]," is NaN (Not a Number)");return g},o.default.TableRow.prototype.getString=function(d){return typeof d=="string"?this.obj[d].toString():this.arr[d].toString()};var h=o.default;i.default=h},{"../core/main":264,"core-js/modules/es.array.index-of":157,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.split":191}],293:[function(r,s,i){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a,o=(a=r("../core/main"))&&a.__esModule?a:{default:a};function h(g){for(var m=[],c=0;c<g.length;c++)m.push(new o.default.XML(g[c]));return m}o.default.XML=function(g){if(g)this.DOM=g;else{var m=document.implementation.createDocument(null,"doc");this.DOM=m.createElement("root")}},o.default.XML.prototype.getParent=function(){return new o.default.XML(this.DOM.parentElement)},o.default.XML.prototype.getName=function(){return this.DOM.tagName},o.default.XML.prototype.setName=function(g){var m=this.DOM.innerHTML,c=this.DOM.attributes,l=document.implementation.createDocument(null,"default").createElement(g);l.innerHTML=m;for(var u=0;u<c.length;u++)l.setAttribute(c[u].nodeName,c.nodeValue);this.DOM=l},o.default.XML.prototype.hasChildren=function(){return 0<this.DOM.children.length},o.default.XML.prototype.listChildren=function(){for(var g=[],m=0;m<this.DOM.childNodes.length;m++)g.push(this.DOM.childNodes[m].nodeName);return g},o.default.XML.prototype.getChildren=function(g){return h(g?this.DOM.getElementsByTagName(g):this.DOM.children)},o.default.XML.prototype.getChild=function(g){if(typeof g!="string")return new o.default.XML(this.DOM.children[g]);var m=!0,c=!1,l=void 0;try{for(var u,f=this.DOM.children[Symbol.iterator]();!(m=(u=f.next()).done);m=!0){var p=u.value;if(p.tagName===g)return new o.default.XML(p)}}catch(y){c=!0,l=y}finally{try{m||f.return==null||f.return()}finally{if(c)throw l}}},o.default.XML.prototype.addChild=function(g){g instanceof o.default.XML&&this.DOM.appendChild(g.DOM)},o.default.XML.prototype.removeChild=function(g){var m=-1;if(typeof g=="string"){for(var c=0;c<this.DOM.children.length;c++)if(this.DOM.children[c].tagName===g){m=c;break}}else m=g;m!==-1&&this.DOM.removeChild(this.DOM.children[m])},o.default.XML.prototype.getAttributeCount=function(){return this.DOM.attributes.length},o.default.XML.prototype.listAttributes=function(){var g=[],m=!0,c=!1,l=void 0;try{for(var u,f=this.DOM.attributes[Symbol.iterator]();!(m=(u=f.next()).done);m=!0){var p=u.value;g.push(p.nodeName)}}catch(y){c=!0,l=y}finally{try{m||f.return==null||f.return()}finally{if(c)throw l}}return g},o.default.XML.prototype.hasAttribute=function(g){var m={},c=!0,l=!1,u=void 0;try{for(var f,p=this.DOM.attributes[Symbol.iterator]();!(c=(f=p.next()).done);c=!0){var y=f.value;m[y.nodeName]=y.nodeValue}}catch(_){l=!0,u=_}finally{try{c||p.return==null||p.return()}finally{if(l)throw u}}return!!m[g]},o.default.XML.prototype.getNum=function(g,m){var c={},l=!0,u=!1,f=void 0;try{for(var p,y=this.DOM.attributes[Symbol.iterator]();!(l=(p=y.next()).done);l=!0){var _=p.value;c[_.nodeName]=_.nodeValue}}catch(b){u=!0,f=b}finally{try{l||y.return==null||y.return()}finally{if(u)throw f}}return Number(c[g])||m||0},o.default.XML.prototype.getString=function(g,m){var c={},l=!0,u=!1,f=void 0;try{for(var p,y=this.DOM.attributes[Symbol.iterator]();!(l=(p=y.next()).done);l=!0){var _=p.value;c[_.nodeName]=_.nodeValue}}catch(b){u=!0,f=b}finally{try{l||y.return==null||y.return()}finally{if(u)throw f}}return c[g]?String(c[g]):m||null},o.default.XML.prototype.setAttribute=function(g,m){this.DOM.setAttribute(g,m)},o.default.XML.prototype.getContent=function(g){return this.DOM.textContent.replace(/\s\s+/g,",")||g||null},o.default.XML.prototype.setContent=function(g){this.DOM.children.length||(this.DOM.textContent=g)},o.default.XML.prototype.serialize=function(){return new XMLSerializer().serializeToString(this.DOM)};var d=o.default;i.default=d},{"../core/main":264,"core-js/modules/es.array.iterator":158,"core-js/modules/es.number.constructor":170,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":229}],294:[function(r,s,i){r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.string.includes"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a,o=(a=r("../core/main"))&&a.__esModule?a:{default:a};function h(){if(typeof Math.hypot=="function")return Math.hypot.apply(null,arguments);for(var g=arguments.length,m=[],c=0,l=0;l<g;l++){var u=arguments[l];if((u=+u)===1/0||u===-1/0)return 1/0;c<(u=Math.abs(u))&&(c=u),m[l]=u}c===0&&(c=1);for(var f=0,p=0,y=0;y<g;y++){var _=m[y]/c,b=_*_-p,x=f+b;p=x-f-b,f=x}return Math.sqrt(f)*c}o.default.prototype.abs=Math.abs,o.default.prototype.ceil=Math.ceil,o.default.prototype.constrain=function(g,m,c){return o.default._validateParameters("constrain",arguments),Math.max(Math.min(g,c),m)},o.default.prototype.dist=function(){for(var g=arguments.length,m=new Array(g),c=0;c<g;c++)m[c]=arguments[c];return o.default._validateParameters("dist",m),m.length===4?h(m[2]-m[0],m[3]-m[1]):m.length===6?h(m[3]-m[0],m[4]-m[1],m[5]-m[2]):void 0},o.default.prototype.exp=Math.exp,o.default.prototype.floor=Math.floor,o.default.prototype.lerp=function(g,m,c){return o.default._validateParameters("lerp",arguments),c*(m-g)+g},o.default.prototype.log=Math.log,o.default.prototype.mag=function(g,m){return o.default._validateParameters("mag",arguments),h(g,m)},o.default.prototype.map=function(g,m,c,l,u,f){o.default._validateParameters("map",arguments);var p=(g-m)/(c-m)*(u-l)+l;return f?l<u?this.constrain(p,l,u):this.constrain(p,u,l):p},o.default.prototype.max=function(){for(var g=arguments.length,m=new Array(g),c=0;c<g;c++)m[c]=arguments[c];return m[0]instanceof Array?Math.max.apply(null,m[0]):Math.max.apply(null,m)},o.default.prototype.min=function(){for(var g=arguments.length,m=new Array(g),c=0;c<g;c++)m[c]=arguments[c];return m[0]instanceof Array?Math.min.apply(null,m[0]):Math.min.apply(null,m)},o.default.prototype.norm=function(g,m,c){return o.default._validateParameters("norm",arguments),this.map(g,m,c,0,1)},o.default.prototype.pow=Math.pow,o.default.prototype.round=function(g,m){if(!m)return Math.round(g);var c=Math.pow(10,m);return Math.round(g*c)/c},o.default.prototype.sq=function(g){return g*g},o.default.prototype.sqrt=Math.sqrt,o.default.prototype.fract=function(g){o.default._validateParameters("fract",arguments);var m=0,c=Number(g);if(isNaN(c)||Math.abs(c)===1/0)return c;if(c<0&&(c=-c,m=1),!String(c).includes(".")||String(c).includes("e"))return c<1?Math.abs(m-c):0;var l=String(c);return l=Number("0"+l.slice(l.indexOf("."))),Math.abs(m-l)};var d=o.default;i.default=d},{"../core/main":264,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.math.hypot":168,"core-js/modules/es.number.constructor":170,"core-js/modules/es.string.includes":185}],295:[function(r,s,i){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.to-string"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a,o=(a=r("../core/main"))&&a.__esModule?a:{default:a};function h(m,c,l){return(h=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(u,f,p){var y=[null];y.push.apply(y,f);var _=new(Function.bind.apply(u,y));return p&&d(_,p.prototype),_}).apply(null,arguments)}function d(m,c){return(d=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l})(m,c)}o.default.prototype.createVector=function(m,c,l){return this instanceof o.default?h(o.default.Vector,[this._fromRadians.bind(this),this._toRadians.bind(this)].concat(Array.prototype.slice.call(arguments))):new o.default.Vector(m,c,l)};var g=o.default;i.default=g},{"../core/main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.to-string":177,"core-js/modules/es.reflect.construct":179,"core-js/modules/es.regexp.to-string":182}],296:[function(r,s,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a,o=(a=r("../core/main"))&&a.__esModule?a:{default:a};function h(u){return .5*(1-Math.cos(u*Math.PI))}var d,g=4095,m=4,c=.5;o.default.prototype.noise=function(u){var f=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(d==null){d=new Array(4096);for(var y=0;y<4096;y++)d[y]=Math.random()}u<0&&(u=-u),f<0&&(f=-f),p<0&&(p=-p);for(var _,b,x,S,E,C=Math.floor(u),M=Math.floor(f),I=Math.floor(p),A=u-C,D=f-M,L=p-I,O=0,N=.5,U=0;U<m;U++){var K=C+(M<<4)+(I<<8);_=h(A),b=h(D),x=d[K&g],x+=_*(d[K+1&g]-x),S=d[K+16&g],x+=b*((S+=_*(d[K+16+1&g]-S))-x),S=d[(K+=256)&g],S+=_*(d[K+1&g]-S),E=d[K+16&g],S+=b*((E+=_*(d[K+16+1&g]-E))-S),O+=(x+=h(L)*(S-x))*N,N*=c,C<<=1,M<<=1,I<<=1,1<=(A*=2)&&(C++,A--),1<=(D*=2)&&(M++,D--),1<=(L*=2)&&(I++,L--)}return O},o.default.prototype.noiseDetail=function(u,f){0<u&&(m=u),0<f&&(c=f)},o.default.prototype.noiseSeed=function(u){var f,p,y,_=(y=4294967296,{setSeed:function(x){p=f=(x==null?Math.random()*y:x)>>>0},getSeed:function(){return f},rand:function(){return(p=(1664525*p+1013904223)%y)/y}});_.setSeed(u),d=new Array(4096);for(var b=0;b<4096;b++)d[b]=_.rand()};var l=o.default;i.default=l},{"../core/main":264}],297:[function(r,s,i){function a(u){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(u)}r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.every"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.some"),r("core-js/modules/es.math.sign"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.number.is-finite"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.sub"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o,h=(o=r("../core/main"))&&o.__esModule?o:{default:o},d=function(u){if(u&&u.__esModule)return u;if(u===null||a(u)!=="object"&&typeof u!="function")return{default:u};var f=g();if(f&&f.has(u))return f.get(u);var p={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var _ in u)if(Object.prototype.hasOwnProperty.call(u,_)){var b=y?Object.getOwnPropertyDescriptor(u,_):null;b&&(b.get||b.set)?Object.defineProperty(p,_,b):p[_]=u[_]}return p.default=u,f&&f.set(u,p),p}(r("../core/constants"));function g(){if(typeof WeakMap!="function")return null;var u=new WeakMap;return g=function(){return u},u}h.default.Vector=function(u,f,p,y,_){var b,x,S;S={}.toString.call(u)==="[object Function]"?(this.isPInst=!0,this._fromRadians=u,this._toRadians=f,b=p||0,x=y||0,_||0):(b=u||0,x=f||0,p||0),this.x=b,this.y=x,this.z=S},h.default.Vector.prototype.toString=function(){return"p5.Vector Object : [".concat(this.x,", ").concat(this.y,", ").concat(this.z,"]")},h.default.Vector.prototype.set=function(u,f,p){return u instanceof h.default.Vector?(this.x=u.x||0,this.y=u.y||0,this.z=u.z||0):u instanceof Array?(this.x=u[0]||0,this.y=u[1]||0,this.z=u[2]||0):(this.x=u||0,this.y=f||0,this.z=p||0),this},h.default.Vector.prototype.copy=function(){return this.isPInst?new h.default.Vector(this._fromRadians,this._toRadians,this.x,this.y,this.z):new h.default.Vector(this.x,this.y,this.z)},h.default.Vector.prototype.add=function(u,f,p){return u instanceof h.default.Vector?(this.x+=u.x||0,this.y+=u.y||0,this.z+=u.z||0):u instanceof Array?(this.x+=u[0]||0,this.y+=u[1]||0,this.z+=u[2]||0):(this.x+=u||0,this.y+=f||0,this.z+=p||0),this};function m(u,f){return u!==0&&(this.x=this.x%u),f!==0&&(this.y=this.y%f),this}function c(u,f,p){return u!==0&&(this.x=this.x%u),f!==0&&(this.y=this.y%f),p!==0&&(this.z=this.z%p),this}h.default.Vector.prototype.rem=function(u,f,p){if(u instanceof h.default.Vector){if(Number.isFinite(u.x)&&Number.isFinite(u.y)&&Number.isFinite(u.z)){var y=parseFloat(u.x),_=parseFloat(u.y),b=parseFloat(u.z);return c.call(this,y,_,b)}}else if(u instanceof Array){if(u.every(function(E){return Number.isFinite(E)})){if(u.length===2)return m.call(this,u[0],u[1]);if(u.length===3)return c.call(this,u[0],u[1],u[2])}}else if(arguments.length===1){if(Number.isFinite(u)&&u!==0)return this.x=this.x%u,this.y=this.y%u,this.z=this.z%u,this}else if(arguments.length===2){var x=Array.prototype.slice.call(arguments);if(x.every(function(E){return Number.isFinite(E)})&&x.length===2)return m.call(this,x[0],x[1])}else if(arguments.length===3){var S=Array.prototype.slice.call(arguments);if(S.every(function(E){return Number.isFinite(E)})&&S.length===3)return c.call(this,S[0],S[1],S[2])}},h.default.Vector.prototype.sub=function(u,f,p){return u instanceof h.default.Vector?(this.x-=u.x||0,this.y-=u.y||0,this.z-=u.z||0):u instanceof Array?(this.x-=u[0]||0,this.y-=u[1]||0,this.z-=u[2]||0):(this.x-=u||0,this.y-=f||0,this.z-=p||0),this},h.default.Vector.prototype.mult=function(u,f,p){if(u instanceof h.default.Vector)return Number.isFinite(u.x)&&Number.isFinite(u.y)&&Number.isFinite(u.z)&&typeof u.x=="number"&&typeof u.y=="number"&&typeof u.z=="number"?(this.x*=u.x,this.y*=u.y,this.z*=u.z):console.warn("p5.Vector.prototype.mult:","x contains components that are either undefined or not finite numbers"),this;if(u instanceof Array)return u.every(function(_){return Number.isFinite(_)})&&u.every(function(_){return typeof _=="number"})?u.length===1?(this.x*=u[0],this.y*=u[0],this.z*=u[0]):u.length===2?(this.x*=u[0],this.y*=u[1]):u.length===3&&(this.x*=u[0],this.y*=u[1],this.z*=u[2]):console.warn("p5.Vector.prototype.mult:","x contains elements that are either undefined or not finite numbers"),this;var y=Array.prototype.slice.call(arguments);return y.every(function(_){return Number.isFinite(_)})&&y.every(function(_){return typeof _=="number"})?(arguments.length===1&&(this.x*=u,this.y*=u,this.z*=u),arguments.length===2&&(this.x*=u,this.y*=f),arguments.length===3&&(this.x*=u,this.y*=f,this.z*=p)):console.warn("p5.Vector.prototype.mult:","x, y, or z arguments are either undefined or not a finite number"),this},h.default.Vector.prototype.div=function(u,f,p){if(u instanceof h.default.Vector){if(Number.isFinite(u.x)&&Number.isFinite(u.y)&&Number.isFinite(u.z)&&typeof u.x=="number"&&typeof u.y=="number"&&typeof u.z=="number"){if(u.x===0||u.y===0||u.z===0)return console.warn("p5.Vector.prototype.div:","divide by 0"),this;this.x/=u.x,this.y/=u.y,this.z/=u.z}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");return this}if(u instanceof Array){if(u.every(function(_){return Number.isFinite(_)})&&u.every(function(_){return typeof _=="number"})){if(u.some(function(_){return _===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;u.length===1?(this.x/=u[0],this.y/=u[0],this.z/=u[0]):u.length===2?(this.x/=u[0],this.y/=u[1]):u.length===3&&(this.x/=u[0],this.y/=u[1],this.z/=u[2])}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");return this}var y=Array.prototype.slice.call(arguments);if(y.every(function(_){return Number.isFinite(_)})&&y.every(function(_){return typeof _=="number"})){if(y.some(function(_){return _===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;arguments.length===1&&(this.x/=u,this.y/=u,this.z/=u),arguments.length===2&&(this.x/=u,this.y/=f),arguments.length===3&&(this.x/=u,this.y/=f,this.z/=p)}else console.warn("p5.Vector.prototype.div:","x, y, or z arguments are either undefined or not a finite number");return this},h.default.Vector.prototype.mag=function(){return Math.sqrt(this.magSq())},h.default.Vector.prototype.magSq=function(){var u=this.x,f=this.y,p=this.z;return u*u+f*f+p*p},h.default.Vector.prototype.dot=function(u,f,p){return u instanceof h.default.Vector?this.dot(u.x,u.y,u.z):this.x*(u||0)+this.y*(f||0)+this.z*(p||0)},h.default.Vector.prototype.cross=function(u){var f=this.y*u.z-this.z*u.y,p=this.z*u.x-this.x*u.z,y=this.x*u.y-this.y*u.x;return this.isPInst?new h.default.Vector(this._fromRadians,this._toRadians,f,p,y):new h.default.Vector(f,p,y)},h.default.Vector.prototype.dist=function(u){return u.copy().sub(this).mag()},h.default.Vector.prototype.normalize=function(){var u=this.mag();return u!==0&&this.mult(1/u),this},h.default.Vector.prototype.limit=function(u){var f=this.magSq();return u*u<f&&this.div(Math.sqrt(f)).mult(u),this},h.default.Vector.prototype.setMag=function(u){return this.normalize().mult(u)},h.default.Vector.prototype.heading=function(){var u=Math.atan2(this.y,this.x);return this.isPInst?this._fromRadians(u):u},h.default.Vector.prototype.setHeading=function(u){var f=this.mag();return this.x=f*Math.cos(u),this.y=f*Math.sin(u),this},h.default.Vector.prototype.rotate=function(u){var f=this.heading()+u;this.isPInst&&(f=this._toRadians(f));var p=this.mag();return this.x=Math.cos(f)*p,this.y=Math.sin(f)*p,this},h.default.Vector.prototype.angleBetween=function(u){var f,p=this.dot(u)/(this.mag()*u.mag());return f=Math.acos(Math.min(1,Math.max(-1,p))),f*=Math.sign(this.cross(u).z||1),this.isPInst&&(f=this._fromRadians(f)),f},h.default.Vector.prototype.lerp=function(u,f,p,y){return u instanceof h.default.Vector?this.lerp(u.x,u.y,u.z,f):(this.x+=(u-this.x)*y||0,this.y+=(f-this.y)*y||0,this.z+=(p-this.z)*y||0,this)},h.default.Vector.prototype.reflect=function(u){return u.normalize(),this.sub(u.mult(2*this.dot(u)))},h.default.Vector.prototype.array=function(){return[this.x||0,this.y||0,this.z||0]},h.default.Vector.prototype.equals=function(u,f,p){var y,_,b;return b=u instanceof h.default.Vector?(y=u.x||0,_=u.y||0,u.z||0):u instanceof Array?(y=u[0]||0,_=u[1]||0,u[2]||0):(y=u||0,_=f||0,p||0),this.x===y&&this.y===_&&this.z===b},h.default.Vector.fromAngle=function(u,f){return f===void 0&&(f=1),new h.default.Vector(f*Math.cos(u),f*Math.sin(u),0)},h.default.Vector.fromAngles=function(u,f,p){p===void 0&&(p=1);var y=Math.cos(f),_=Math.sin(f),b=Math.cos(u),x=Math.sin(u);return new h.default.Vector(p*x*_,-p*b,p*x*y)},h.default.Vector.random2D=function(){return this.fromAngle(Math.random()*d.TWO_PI)},h.default.Vector.random3D=function(){var u=Math.random()*d.TWO_PI,f=2*Math.random()-1,p=Math.sqrt(1-f*f),y=p*Math.cos(u),_=p*Math.sin(u);return new h.default.Vector(y,_,f)},h.default.Vector.add=function(u,f,p){return p?p.set(u):(p=u.copy(),arguments.length===3&&h.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.add")),p.add(f),p},h.default.Vector.rem=function(u,f){if(u instanceof h.default.Vector&&f instanceof h.default.Vector){var p=u.copy();return p.rem(f),p}},h.default.Vector.sub=function(u,f,p){return p?p.set(u):(p=u.copy(),arguments.length===3&&h.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.sub")),p.sub(f),p},h.default.Vector.mult=function(u,f,p){return p?p.set(u):(p=u.copy(),arguments.length===3&&h.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.mult")),p.mult(f),p},h.default.Vector.rotate=function(u,f,p){return arguments.length===2?p=u.copy():(p instanceof h.default.Vector||h.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.rotate"),p.set(u)),p.rotate(f),p},h.default.Vector.div=function(u,f,p){return p?p.set(u):(p=u.copy(),arguments.length===3&&h.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.div")),p.div(f),p},h.default.Vector.dot=function(u,f){return u.dot(f)},h.default.Vector.cross=function(u,f){return u.cross(f)},h.default.Vector.dist=function(u,f){return u.dist(f)},h.default.Vector.lerp=function(u,f,p,y){return y?y.set(u):(y=u.copy(),arguments.length===4&&h.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.lerp")),y.lerp(f,p),y},h.default.Vector.mag=function(u){var f=u.x,p=u.y,y=u.z,_=f*f+p*p+y*y;return Math.sqrt(_)},h.default.Vector.normalize=function(u,f){return arguments.length<2?f=u.copy():(f instanceof h.default.Vector||h.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.normalize"),f.set(u)),f.normalize()};var l=h.default.Vector;i.default=l},{"../core/constants":253,"../core/main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.every":150,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.some":163,"core-js/modules/es.math.sign":169,"core-js/modules/es.number.constructor":170,"core-js/modules/es.number.is-finite":171,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.sub":192}],298:[function(r,s,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a,o=(a=r("../core/main"))&&a.__esModule?a:{default:a},h="_lcg_random_state",d=4294967296,g=0;o.default.prototype._lcg=function(c){return this[c]=(1664525*this[c]+1013904223)%d,this[c]/d},o.default.prototype._lcgSetSeed=function(c,l){this[c]=(l==null?Math.random()*d:l)>>>0},o.default.prototype.randomSeed=function(c){this._lcgSetSeed(h,c),this._gaussian_previous=!1},o.default.prototype.random=function(c,l){var u;if(o.default._validateParameters("random",arguments),u=this[h]!=null?this._lcg(h):Math.random(),c===void 0)return u;if(l===void 0)return c instanceof Array?c[Math.floor(u*c.length)]:u*c;if(l<c){var f=c;c=l,l=f}return u*(l-c)+c},o.default.prototype.randomGaussian=function(c){var l,u,f,p,y=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(this._gaussian_previous)l=g,this._gaussian_previous=!1;else{for(;1<=(p=(u=this.random(2)-1)*u+(f=this.random(2)-1)*f););l=u*(p=Math.sqrt(-2*Math.log(p)/p)),g=f*p,this._gaussian_previous=!0}return l*y+(c||0)};var m=o.default;i.default=m},{"../core/main":264}],299:[function(r,s,i){function a(c){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(c)}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o,h=(o=r("../core/main"))&&o.__esModule?o:{default:o},d=function(c){if(c&&c.__esModule)return c;if(c===null||a(c)!=="object"&&typeof c!="function")return{default:c};var l=g();if(l&&l.has(c))return l.get(c);var u={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in c)if(Object.prototype.hasOwnProperty.call(c,p)){var y=f?Object.getOwnPropertyDescriptor(c,p):null;y&&(y.get||y.set)?Object.defineProperty(u,p,y):u[p]=c[p]}return u.default=c,l&&l.set(c,u),u}(r("../core/constants"));function g(){if(typeof WeakMap!="function")return null;var c=new WeakMap;return g=function(){return c},c}h.default.prototype._angleMode=d.RADIANS,h.default.prototype.acos=function(c){return this._fromRadians(Math.acos(c))},h.default.prototype.asin=function(c){return this._fromRadians(Math.asin(c))},h.default.prototype.atan=function(c){return this._fromRadians(Math.atan(c))},h.default.prototype.atan2=function(c,l){return this._fromRadians(Math.atan2(c,l))},h.default.prototype.cos=function(c){return Math.cos(this._toRadians(c))},h.default.prototype.sin=function(c){return Math.sin(this._toRadians(c))},h.default.prototype.tan=function(c){return Math.tan(this._toRadians(c))},h.default.prototype.degrees=function(c){return c*d.RAD_TO_DEG},h.default.prototype.radians=function(c){return c*d.DEG_TO_RAD},h.default.prototype.angleMode=function(c){if(h.default._validateParameters("angleMode",arguments),c===void 0)return this._angleMode;c!==d.DEGREES&&c!==d.RADIANS||(this._angleMode=c)},h.default.prototype._toRadians=function(c){return this._angleMode===d.DEGREES?c*d.DEG_TO_RAD:c},h.default.prototype._toDegrees=function(c){return this._angleMode===d.RADIANS?c*d.RAD_TO_DEG:c},h.default.prototype._fromRadians=function(c){return this._angleMode===d.DEGREES?c*d.RAD_TO_DEG:c};var m=h.default;i.default=m},{"../core/constants":253,"../core/main":264}],300:[function(r,s,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a,o=(a=r("../core/main"))&&a.__esModule?a:{default:a};o.default.prototype.textAlign=function(d,g){var m;return o.default._validateParameters("textAlign",arguments),(m=this._renderer).textAlign.apply(m,arguments)},o.default.prototype.textLeading=function(d){var g;return o.default._validateParameters("textLeading",arguments),(g=this._renderer).textLeading.apply(g,arguments)},o.default.prototype.textSize=function(d){var g;return o.default._validateParameters("textSize",arguments),(g=this._renderer).textSize.apply(g,arguments)},o.default.prototype.textStyle=function(d){var g;return o.default._validateParameters("textStyle",arguments),(g=this._renderer).textStyle.apply(g,arguments)},o.default.prototype.textWidth=function(){for(var d,g=arguments.length,m=new Array(g),c=0;c<g;c++)m[c]=arguments[c];return m[0]+="",o.default._validateParameters("textWidth",m),m[0].length===0?0:(d=this._renderer).textWidth.apply(d,m)},o.default.prototype.textAscent=function(){for(var d=arguments.length,g=new Array(d),m=0;m<d;m++)g[m]=arguments[m];return o.default._validateParameters("textAscent",g),this._renderer.textAscent()},o.default.prototype.textDescent=function(){for(var d=arguments.length,g=new Array(d),m=0;m<d;m++)g[m]=arguments[m];return o.default._validateParameters("textDescent",g),this._renderer.textDescent()},o.default.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()},o.default.prototype.textWrap=function(d){if(d!=="WORD"&&d!=="CHAR")throw"Error: textWrap accepts only WORD or CHAR";return this._renderer.textWrap(d)};var h=o.default;i.default=h},{"../core/main":264}],301:[function(r,s,i){function a(u){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(u)}r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.split"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o,h=(o=r("../core/main"))&&o.__esModule?o:{default:o},d=c(r("../core/constants")),g=c(r("opentype.js"));function m(){if(typeof WeakMap!="function")return null;var u=new WeakMap;return m=function(){return u},u}function c(u){if(u&&u.__esModule)return u;if(u===null||a(u)!=="object"&&typeof u!="function")return{default:u};var f=m();if(f&&f.has(u))return f.get(u);var p={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var _ in u)if(Object.prototype.hasOwnProperty.call(u,_)){var b=y?Object.getOwnPropertyDescriptor(u,_):null;b&&(b.get||b.set)?Object.defineProperty(p,_,b):p[_]=u[_]}return p.default=u,f&&f.set(u,p),p}r("../core/friendly_errors/validate_params"),r("../core/friendly_errors/file_errors"),r("../core/friendly_errors/fes_core"),h.default.prototype.loadFont=function(u,f,p){h.default._validateParameters("loadFont",arguments);var y=new h.default.Font(this),_=this;return g.load(u,function(b,x){if(b)return h.default._friendlyFileLoadError(4,u),p!==void 0?p(b):void console.error(b,u);y.font=x,f!==void 0&&f(y),_._decrementPreload();var S,E,C=u.split("\\").pop().split("/").pop(),M=C.lastIndexOf("."),I=M<1?null:C.slice(M+1);["ttf","otf","woff","woff2"].includes(I)&&(S=C.slice(0,M!==-1?M:0),(E=document.createElement("style")).appendChild(document.createTextNode(`
@font-face {
font-family: `.concat(S,`;
src: url(`).concat(u,`);
}
`))),document.head.appendChild(E))}),y},h.default.prototype.text=function(u,f,p,y,_){var b;return h.default._validateParameters("text",arguments),this._renderer._doFill||this._renderer._doStroke?(b=this._renderer).text.apply(b,arguments):this},h.default.prototype.textFont=function(u,f){if(h.default._validateParameters("textFont",arguments),arguments.length){if(!u)throw new Error("null font passed to textFont");return this._renderer._setProperty("_textFont",u),f&&(this._renderer._setProperty("_textSize",f),this._renderer._leadingSet||this._renderer._setProperty("_textLeading",f*d._DEFAULT_LEADMULT)),this._renderer._applyTextProperties()}return this._renderer._textFont};var l=h.default;i.default=l},{"../core/constants":253,"../core/friendly_errors/fes_core":255,"../core/friendly_errors/file_errors":256,"../core/friendly_errors/validate_params":259,"../core/main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.last-index-of":160,"core-js/modules/es.array.slice":162,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.split":191,"opentype.js":239}],302:[function(r,s,i){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a,o=(a=r("../core/main"))&&a.__esModule?a:{default:a},h=function(A){if(A&&A.__esModule)return A;if(A===null||g(A)!=="object"&&typeof A!="function")return{default:A};var D=d();if(D&&D.has(A))return D.get(A);var L={},O=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var N in A)if(Object.prototype.hasOwnProperty.call(A,N)){var U=O?Object.getOwnPropertyDescriptor(A,N):null;U&&(U.get||U.set)?Object.defineProperty(L,N,U):L[N]=A[N]}return L.default=A,D&&D.set(A,L),L}(r("../core/constants"));function d(){if(typeof WeakMap!="function")return null;var A=new WeakMap;return d=function(){return A},A}function g(A){return(g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D})(A)}function m(A,D){for(var L=function(J,z){if(g(J)!=="object")J=z;else for(var H in z)J[H]===void 0&&(J[H]=z[H]);return J}(D,{sampleFactor:.1,simplifyThreshold:0}),O=_(A,0,1),N=O/(O*L.sampleFactor),U=[],K=0;K<O;K+=N)U.push(_(A,K));return L.simplifyThreshold&&function(J){for(var z=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,H=0,$=J.length-1;3<J.length&&0<=$;--$)f(u(J,$-1),u(J,$),u(J,$+1),z)&&(J.splice($%J.length,1),H++)}(U,L.simplifyThreshold),U}function c(A){for(var D,L=[],O=0;O<A.length;O++)A[O].type==="M"&&(D&&L.push(D),D=[]),D.push(l(A[O]));return L.push(D),L}function l(A){var D=[A.type];return A.type==="M"||A.type==="L"?D.push(A.x,A.y):A.type==="C"?D.push(A.x1,A.y1,A.x2,A.y2,A.x,A.y):A.type==="Q"&&D.push(A.x1,A.y1,A.x,A.y),D}function u(A,D){var L=A.length;return A[D<0?D%L+L:D%L]}function f(A,D,L,O){if(!O)return N=A,K=L,((U=D)[0]-N[0])*(K[1]-N[1])-(K[0]-N[0])*(U[1]-N[1])==0;var N,U,K;f.tmpPoint1===void 0&&(f.tmpPoint1=[],f.tmpPoint2=[]);var J=f.tmpPoint1,z=f.tmpPoint2;J.x=D.x-A.x,J.y=D.y-A.y,z.x=L.x-D.x,z.y=L.y-D.y;var H=J.x*z.x+J.y*z.y,$=Math.sqrt(J.x*J.x+J.y*J.y),ne=Math.sqrt(z.x*z.x+z.y*z.y);return Math.acos(H/($*ne))<O}function p(A,D,L,O,N,U,K,J,z){var H=1-z,$=Math.pow(H,3),ne=Math.pow(H,2),oe=z*z,_e=oe*z,he=$*A+3*ne*z*L+3*H*z*z*N+_e*K,Te=$*D+3*ne*z*O+3*H*z*z*U+_e*J,fe=A+2*z*(L-A)+oe*(N-2*L+A),pe=D+2*z*(O-D)+oe*(U-2*O+D),R=L+2*z*(N-L)+oe*(K-2*N+L),V=O+2*z*(U-O)+oe*(J-2*U+O),q=H*A+z*L,ee=H*D+z*O,se=H*N+z*K,re=H*U+z*J,xe=90-180*Math.atan2(fe-R,pe-V)/Math.PI;return(R<fe||pe<V)&&(xe+=180),{x:he,y:Te,m:{x:fe,y:pe},n:{x:R,y:V},start:{x:q,y:ee},end:{x:se,y:re},alpha:xe}}function y(A,D,L,O,N,U,K,J,z){return z==null?C(A,D,L,O,N,U,K,J):p(A,D,L,O,N,U,K,J,function(H,$,ne,oe,_e,he,Te,fe,pe){if(!(pe<0||C(H,$,ne,oe,_e,he,Te,fe)<pe)){var R,V=.5,q=1-V;for(R=C(H,$,ne,oe,_e,he,Te,fe,q);.01<Math.abs(R-pe);)R=C(H,$,ne,oe,_e,he,Te,fe,q+=(R<pe?1:-1)*(V/=2));return q}}(A,D,L,O,N,U,K,J,z))}function _(A,D,L){for(var O,N,U,K,J,z=0,H=0,$=(A=function(ne,oe){function _e(ke,Ee,Fe){var Qe,Ye;if(!ke)return["C",Ee.x,Ee.y,Ee.x,Ee.y,Ee.x,Ee.y];switch(ke[0]in{T:1,Q:1}||(Ee.qx=Ee.qy=null),ke[0]){case"M":Ee.X=ke[1],Ee.Y=ke[2];break;case"A":ke=["C"].concat(function Ve(pt,Oe,De,He,Xe,ve,tt,B,X,G){var Y=Math.PI,le=120*Y/180,we,je,Pe,ge,qe=Y/180*(+Xe||0),ot=[],mt,wt=function(qt,kt,Ke){var or=qt*Math.cos(Ke)-kt*Math.sin(Ke),ht=qt*Math.sin(Ke)+kt*Math.cos(Ke);return{x:or,y:ht}};if(G)we=G[0],je=G[1],Pe=G[2],ge=G[3];else{mt=wt(pt,Oe,-qe),pt=mt.x,Oe=mt.y,mt=wt(B,X,-qe),B=mt.x,X=mt.y;var gt=(pt-B)/2,vt=(Oe-X)/2,Nt=gt*gt/(De*De)+vt*vt/(He*He);1<Nt&&(Nt=Math.sqrt(Nt),De*=Nt,He*=Nt);var Ls=De*De,wn=He*He,Mo=(ve===tt?-1:1)*Math.sqrt(Math.abs((Ls*wn-Ls*vt*vt-wn*gt*gt)/(Ls*vt*vt+wn*gt*gt)));Pe=Mo*De*vt/He+(pt+B)/2,ge=Mo*-He*gt/De+(Oe+X)/2,we=Math.asin(((Oe-ge)/He).toFixed(9)),je=Math.asin(((X-ge)/He).toFixed(9)),(we=pt<Pe?Y-we:we)<0&&(we=2*Y+we),(je=B<Pe?Y-je:je)<0&&(je=2*Y+je),tt&&je<we&&(we-=2*Y),!tt&&we<je&&(je-=2*Y)}var si=je-we;if(Math.abs(si)>le){var Ns=je,Ao=B,Do=X;je=we+le*(tt&&we<je?1:-1),B=Pe+De*Math.cos(je),X=ge+He*Math.sin(je),ot=Ve(B,X,De,He,Xe,0,tt,Ao,Do,[je,Ns,Pe,ge])}si=je-we;var Oo=Math.cos(we),Io=Math.sin(we),Ro=Math.cos(je),Aa=Math.sin(je),Pi=Math.tan(si/4),Li=4/3*De*Pi,ue=4/3*He*Pi,Re=[pt,Oe],We=[pt+Li*Io,Oe-ue*Oo],Le=[B+Li*Aa,X-ue*Ro],Ze=[B,X];We[0]=2*Re[0]-We[0],We[1]=2*Re[1]-We[1];{if(G)return[We,Le,Ze].concat(ot);ot=[We,Le,Ze].concat(ot).join().split(",");for(var Ie=[],Dt=0,Vt=ot.length;Dt<Vt;Dt++)Ie[Dt]=Dt%2?wt(ot[Dt-1],ot[Dt],qe).y:wt(ot[Dt],ot[Dt+1],qe).x;return Ie}}.apply(0,[Ee.x,Ee.y].concat(ke.slice(1))));break;case"S":Ye=Fe==="C"||Fe==="S"?(Qe=2*Ee.x-Ee.bx,2*Ee.y-Ee.by):(Qe=Ee.x,Ee.y),ke=["C",Qe,Ye].concat(ke.slice(1));break;case"T":Fe==="Q"||Fe==="T"?(Ee.qx=2*Ee.x-Ee.qx,Ee.qy=2*Ee.y-Ee.qy):(Ee.qx=Ee.x,Ee.qy=Ee.y),ke=["C"].concat(E(Ee.x,Ee.y,Ee.qx,Ee.qy,ke[1],ke[2]));break;case"Q":Ee.qx=ke[1],Ee.qy=ke[2],ke=["C"].concat(E(Ee.x,Ee.y,ke[1],ke[2],ke[3],ke[4]));break;case"L":ke=["C"].concat(S(Ee.x,Ee.y,ke[1],ke[2]));break;case"H":ke=["C"].concat(S(Ee.x,Ee.y,ke[1],Ee.y));break;case"V":ke=["C"].concat(S(Ee.x,Ee.y,Ee.x,ke[1]));break;case"Z":ke=["C"].concat(S(Ee.x,Ee.y,Ee.X,Ee.Y))}return ke}function he(ke,Ee){if(7<ke[Ee].length){ke[Ee].shift();for(var Fe=ke[Ee];Fe.length;)ee[Ee]="A",R&&(se[Ee]="A"),ke.splice(Ee++,0,["C"].concat(Fe.splice(0,6)));ke.splice(Ee,1),fe=Math.max(pe.length,R&&R.length||0)}}function Te(ke,Ee,Fe,Qe,Ye){ke&&Ee&&ke[Ye][0]==="M"&&Ee[Ye][0]!=="M"&&(Ee.splice(Ye,0,["M",Qe.x,Qe.y]),Fe.bx=0,Fe.by=0,Fe.x=ke[Ye][1],Fe.y=ke[Ye][2],fe=Math.max(pe.length,R&&R.length||0))}var fe,pe=b(ne),R=oe&&b(oe),V={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},q={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},ee=[],se=[],re="",xe="";fe=Math.max(pe.length,R&&R.length||0);for(var Q=0;Q<fe;Q++){pe[Q]&&(re=pe[Q][0]),re!=="C"&&(ee[Q]=re,Q&&(xe=ee[Q-1])),pe[Q]=_e(pe[Q],V,xe),ee[Q]!=="A"&&re==="C"&&(ee[Q]="C"),he(pe,Q),R&&(R[Q]&&(re=R[Q][0]),re!=="C"&&(se[Q]=re,Q&&(xe=se[Q-1])),R[Q]=_e(R[Q],q,xe),se[Q]!=="A"&&re==="C"&&(se[Q]="C"),he(R,Q)),Te(pe,R,V,q,Q),Te(R,pe,q,V,Q);var ce=pe[Q],de=R&&R[Q],ae=ce.length,Se=R&&de.length;V.x=ce[ae-2],V.y=ce[ae-1],V.bx=parseFloat(ce[ae-4])||V.x,V.by=parseFloat(ce[ae-3])||V.y,q.bx=R&&(parseFloat(de[Se-4])||q.x),q.by=R&&(parseFloat(de[Se-3])||q.y),q.x=R&&de[Se-2],q.y=R&&de[Se-1]}return R?[pe,R]:pe}(A)).length;H<$;H++){if((U=A[H])[0]==="M")O=+U[1],N=+U[2];else{if(D<z+(K=y(O,N,U[1],U[2],U[3],U[4],U[5],U[6]))&&!L)return{x:(J=y(O,N,U[1],U[2],U[3],U[4],U[5],U[6],D-z)).x,y:J.y,alpha:J.alpha};z+=K,O=+U[5],N=+U[6]}U.shift()+U}return(J=L?z:p(O,N,U[0],U[1],U[2],U[3],U[4],U[5],1)).alpha&&(J={x:J.x,y:J.y,alpha:J.alpha}),J}function b(A){var D,L=[],O=0,N=0,U=0,K=0,J=0;if(!A)return L;A[0][0]==="M"&&(U=O=+A[0][1],K=N=+A[0][2],J++,L[0]=["M",O,N]);for(var z,H,$=A.length===3&&A[0][0]==="M"&&A[1][0].toUpperCase()==="R"&&A[2][0].toUpperCase()==="Z",ne=J,oe=A.length;ne<oe;ne++){if(L.push(z=[]),(H=A[ne])[0]!==String.prototype.toUpperCase.call(H[0]))switch(z[0]=String.prototype.toUpperCase.call(H[0]),z[0]){case"A":z[1]=H[1],z[2]=H[2],z[3]=H[3],z[4]=H[4],z[5]=H[5],z[6]=+(H[6]+O),z[7]=+(H[7]+N);break;case"V":z[1]=+H[1]+N;break;case"H":z[1]=+H[1]+O;break;case"R":for(var _e=2,he=(D=[O,N].concat(H.slice(1))).length;_e<he;_e++)D[_e]=+D[_e]+O,D[++_e]=+D[_e]+N;L.pop(),L=L.concat(x(D,$));break;case"M":U=+H[1]+O,K=+H[2]+N;break;default:for(var Te=1,fe=H.length;Te<fe;Te++)z[Te]=+H[Te]+(Te%2?O:N)}else if(H[0]==="R")D=[O,N].concat(H.slice(1)),L.pop(),L=L.concat(x(D,$)),z=["R"].concat(H.slice(-2));else for(var pe=0,R=H.length;pe<R;pe++)z[pe]=H[pe];switch(z[0]){case"Z":O=U,N=K;break;case"H":O=z[1];break;case"V":N=z[1];break;case"M":U=z[z.length-2],K=z[z.length-1];break;default:O=z[z.length-2],N=z[z.length-1]}}return L}function x(A,D){for(var L=[],O=0,N=A.length;O<N-2*!D;O+=2){var U=[{x:+A[O-2],y:+A[O-1]},{x:+A[O],y:+A[O+1]},{x:+A[O+2],y:+A[O+3]},{x:+A[O+4],y:+A[O+5]}];D?O?N-4===O?U[3]={x:+A[0],y:+A[1]}:N-2===O&&(U[2]={x:+A[0],y:+A[1]},U[3]={x:+A[2],y:+A[3]}):U[0]={x:+A[N-2],y:+A[N-1]}:N-4===O?U[3]=U[2]:O||(U[0]={x:+A[O],y:+A[O+1]}),L.push(["C",(-U[0].x+6*U[1].x+U[2].x)/6,(-U[0].y+6*U[1].y+U[2].y)/6,(U[1].x+6*U[2].x-U[3].x)/6,(U[1].y+6*U[2].y-U[3].y)/6,U[2].x,U[2].y])}return L}function S(A,D,L,O){return[A,D,L,O,L,O]}function E(A,D,L,O,N,U){return[1/3*A+2/3*L,1/3*D+2/3*O,1/3*N+2/3*L,1/3*U+2/3*O,N,U]}function C(A,D,L,O,N,U,K,J,z){z==null&&(z=1);for(var H=(z=1<z?1:z<0?0:z)/2,$=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],ne=0,oe=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],_e=0;_e<12;_e++){var he=H*$[_e]+H,Te=M(he,A,L,N,K),fe=M(he,D,O,U,J),pe=Te*Te+fe*fe;ne+=oe[_e]*Math.sqrt(pe)}return H*ne}function M(A,D,L,O,N){return A*(A*(-3*D+9*L-9*O+3*N)+6*D-12*L+6*O)-3*D+3*L}o.default.Font=function(A){this.parent=A,this.cache={},this.font=void 0},o.default.Font.prototype.textBounds=function(A){var D,L=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,O=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,N=3<arguments.length?arguments[3]:void 0,U=4<arguments.length?arguments[4]:void 0,K=U&&U.renderer&&U.renderer._pInst||this.parent,J=K._renderer.drawingContext;if(J.textAlign||h.LEFT,J.textBaseline||h.BASELINE,N=N||K._renderer._textSize,!D){var z,H,$=[],ne=[],oe=[];oe[0]=[];var _e=[],he=this._scale(N),Te=K._renderer.textLeading(),fe=0;this.font.forEachGlyph(A,L,O,N,U,function(ee,se,re,xe){var Q=ee.getMetrics();ee.index===0||ee.index===10?oe[fe+=1]=[]:(oe[fe].push(se+Q.xMin*he),oe[fe].push(se+Q.xMax*he),_e.push(re+fe*Te+-Q.yMin*he),_e.push(re+fe*Te+-Q.yMax*he))}),0<oe[fe].length&&($[fe]=Math.min.apply(null,oe[fe]),ne[fe]=Math.max.apply(null,oe[fe]));for(var pe=0,R=0;R<=fe;R++){$[R]=Math.min.apply(null,oe[R]),ne[R]=Math.max.apply(null,oe[R]);var V=ne[R]-$[R];pe<V&&(pe=V)}var q=Math.min.apply(null,$);D={x:q,y:z=Math.min.apply(null,_e),h:Math.max.apply(null,_e)-z,w:pe,advance:q-L},H=this._handleAlignment(K._renderer,A,D.x,D.y,D.w+D.advance),D.x=H.x,D.y=H.y}return D},o.default.Font.prototype.textToPoints=function(A,D,L,O,N){var U,K=0,J=[],z=this._getGlyphs(A);O=O||this.parent._renderer._textSize;for(var H=0;H<z.length;H++){if(!(z[U=H].name&&z[U].name==="space"||A.length===z.length&&A[U]===" "))for(var $=c(z[H].getPath(D,L,O).commands),ne=0;ne<$.length;ne++)for(var oe=m($[ne],N),_e=0;_e<oe.length;_e++)oe[_e].x+=K,J.push(oe[_e]);K+=z[H].advanceWidth*this._scale(O)}return J},o.default.Font.prototype._getGlyphs=function(A){return this.font.stringToGlyphs(A)},o.default.Font.prototype._getPath=function(A,D,L,O){var N=(O&&O.renderer&&O.renderer._pInst||this.parent)._renderer,U=this._handleAlignment(N,A,D,L);return this.font.getPath(A,U.x,U.y,N._textSize,O)},o.default.Font.prototype._getPathData=function(A,D,L,O){var N=3;return typeof A=="string"&&2<arguments.length?A=this._getPath(A,D,L,O):g(D)==="object"&&(O=D),O&&typeof O.decimals=="number"&&(N=O.decimals),A.toPathData(N)},o.default.Font.prototype._getSVG=function(A,D,L,O){var N=3;return typeof A=="string"&&2<arguments.length?A=this._getPath(A,D,L,O):g(D)==="object"&&(O=D),O&&(typeof O.decimals=="number"&&(N=O.decimals),typeof O.strokeWidth=="number"&&(A.strokeWidth=O.strokeWidth),O.fill!==void 0&&(A.fill=O.fill),O.stroke!==void 0&&(A.stroke=O.stroke)),A.toSVG(N)},o.default.Font.prototype._renderPath=function(A,D,L,O){var N,U=O&&O.renderer||this.parent._renderer,K=U.drawingContext;N=g(A)==="object"&&A.commands?A.commands:this._getPath(A,D,L,O).commands,K.beginPath();var J=!0,z=!1,H=void 0;try{for(var $,ne=N[Symbol.iterator]();!(J=($=ne.next()).done);J=!0){var oe=$.value;oe.type==="M"?K.moveTo(oe.x,oe.y):oe.type==="L"?K.lineTo(oe.x,oe.y):oe.type==="C"?K.bezierCurveTo(oe.x1,oe.y1,oe.x2,oe.y2,oe.x,oe.y):oe.type==="Q"?K.quadraticCurveTo(oe.x1,oe.y1,oe.x,oe.y):oe.type==="Z"&&K.closePath()}}catch(_e){z=!0,H=_e}finally{try{J||ne.return==null||ne.return()}finally{if(z)throw H}}return U._doStroke&&U._strokeSet&&K.stroke(),U._doFill&&(U._fillSet||U._setFill(h._DEFAULT_TEXT_FILL),K.fill()),this},o.default.Font.prototype._textWidth=function(A,D){return this.font.getAdvanceWidth(A,D)},o.default.Font.prototype._textAscent=function(A){return this.font.ascender*this._scale(A)},o.default.Font.prototype._textDescent=function(A){return-this.font.descender*this._scale(A)},o.default.Font.prototype._scale=function(A){return 1/this.font.unitsPerEm*(A||this.parent._renderer._textSize)},o.default.Font.prototype._handleAlignment=function(A,D,L,O,N){var U=A._textSize;switch(N===void 0&&(N=this._textWidth(D,U)),A._textAlign){case h.CENTER:L-=N/2;break;case h.RIGHT:L-=N}switch(A._textBaseline){case h.TOP:O+=this._textAscent(U);break;case h.CENTER:O+=this._textAscent(U)/2;break;case h.BOTTOM:O-=this._textDescent(U)}return{x:L,y:O}};var I=o.default;i.default=I},{"../core/constants":253,"../core/main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.fill":151,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.function.name":166,"core-js/modules/es.number.to-fixed":172,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":229}],303:[function(r,s,i){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.array-buffer.constructor"),r("core-js/modules/es.object.to-string"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a,o=(a=r("../core/main"))&&a.__esModule?a:{default:a};o.default.prototype.append=function(d,g){return d.push(g),d},o.default.prototype.arrayCopy=function(d,g,m,c,l){var u,f;d=l!==void 0?(f=Math.min(l,d.length),u=c,d.slice(g,f+g)):(f=m!==void 0?(f=m,Math.min(f,d.length)):d.length,u=0,m=g,d.slice(0,f)),Array.prototype.splice.apply(m,[u,f].concat(d))},o.default.prototype.concat=function(d,g){return d.concat(g)},o.default.prototype.reverse=function(d){return d.reverse()},o.default.prototype.shorten=function(d){return d.pop(),d},o.default.prototype.shuffle=function(d,g){for(var m,c,l=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(d),u=(d=g||l?d:d.slice()).length;1<u;)m=this.random(0,1)*u|0,c=d[--u],d[u]=d[m],d[m]=c;return d},o.default.prototype.sort=function(d,g){var m=g?d.slice(0,Math.min(g,d.length)):d,c=g?d.slice(Math.min(g,d.length)):[];return(m=typeof m[0]=="string"?m.sort():m.sort(function(l,u){return l-u})).concat(c)},o.default.prototype.splice=function(d,g,m){return Array.prototype.splice.apply(d,[m,0].concat(g)),d},o.default.prototype.subset=function(d,g,m){return m!==void 0?d.slice(g,g+m):d.slice(g,d.length)};var h=o.default;i.default=h},{"../core/main":264,"core-js/modules/es.array-buffer.constructor":148,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.object.to-string":177}],304:[function(r,s,i){r("core-js/modules/es.array.map"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.repeat"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a,o=(a=r("../core/main"))&&a.__esModule?a:{default:a};o.default.prototype.float=function(d){return d instanceof Array?d.map(parseFloat):parseFloat(d)},o.default.prototype.int=function(d){var g=1<arguments.length&&arguments[1]!==void 0?arguments[1]:10;return d===1/0||d==="Infinity"?1/0:d===-1/0||d==="-Infinity"?-1/0:typeof d=="string"?parseInt(d,g):typeof d=="number"?0|d:typeof d=="boolean"?d?1:0:d instanceof Array?d.map(function(m){return o.default.prototype.int(m,g)}):void 0},o.default.prototype.str=function(d){return d instanceof Array?d.map(o.default.prototype.str):String(d)},o.default.prototype.boolean=function(d){return typeof d=="number"?d!==0:typeof d=="string"?d.toLowerCase()==="true":typeof d=="boolean"?d:d instanceof Array?d.map(o.default.prototype.boolean):void 0},o.default.prototype.byte=function(d){var g=o.default.prototype.int(d,10);return typeof g=="number"?(g+128)%256-128:g instanceof Array?g.map(o.default.prototype.byte):void 0},o.default.prototype.char=function(d){return typeof d!="number"||isNaN(d)?d instanceof Array?d.map(o.default.prototype.char):typeof d=="string"?o.default.prototype.char(parseInt(d,10)):void 0:String.fromCharCode(d)},o.default.prototype.unchar=function(d){return typeof d=="string"&&d.length===1?d.charCodeAt(0):d instanceof Array?d.map(o.default.prototype.unchar):void 0},o.default.prototype.hex=function(d,g){if(g=g==null?g=8:g,d instanceof Array)return d.map(function(c){return o.default.prototype.hex(c,g)});if(d===1/0||d===-1/0)return(d===1/0?"F":"0").repeat(g);if(typeof d=="number"){d<0&&(d=4294967295+d+1);for(var m=Number(d).toString(16).toUpperCase();m.length<g;)m="0".concat(m);return m.length>=g&&(m=m.substring(m.length-g,m.length)),m}},o.default.prototype.unhex=function(d){return d instanceof Array?d.map(o.default.prototype.unhex):parseInt("0x".concat(d),16)};var h=o.default;i.default=h},{"../core/main":264,"core-js/modules/es.array.map":161,"core-js/modules/es.number.constructor":170,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.repeat":188}],305:[function(r,s,i){r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a,o=(a=r("../core/main"))&&a.__esModule?a:{default:a};function h(l,u,f){var p=l<0,y=p?l.toString().substring(1):l.toString(),_=y.indexOf("."),b=_!==-1?y.substring(0,_):y,x=_!==-1?y.substring(_+1):"",S=p?"-":"";if(f!==void 0){var E="";(_!==-1||0<f-x.length)&&(E="."),x.length>f&&(x=x.substring(0,f));for(var C=0;C<u-b.length;C++)S+="0";S+=b,S+=E,S+=x;for(var M=0;M<f-x.length;M++)S+="0";return S}for(var I=0;I<Math.max(u-b.length,0);I++)S+="0";return S+=y}function d(l,u){var f=(l=l.toString()).indexOf("."),p=f!==-1?l.substring(f):"",y=f!==-1?l.substring(0,f):l;if(y=y.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),u===0)p="";else if(u!==void 0)if(u>p.length)for(var _=u-(p+=f===-1?".":"").length+1,b=0;b<_;b++)p+="0";else p=p.substring(0,u+1);return y+p}function g(l){return 0<parseFloat(l)?"+".concat(l.toString()):l.toString()}function m(l){return 0<=parseFloat(l)?" ".concat(l.toString()):l.toString()}r("../core/friendly_errors/validate_params"),r("../core/friendly_errors/file_errors"),r("../core/friendly_errors/fes_core"),o.default.prototype.join=function(l,u){return o.default._validateParameters("join",arguments),l.join(u)},o.default.prototype.match=function(l,u){return o.default._validateParameters("match",arguments),l.match(u)},o.default.prototype.matchAll=function(l,u){o.default._validateParameters("matchAll",arguments);for(var f=new RegExp(u,"g"),p=f.exec(l),y=[];p!==null;)y.push(p),p=f.exec(l);return y},o.default.prototype.nf=function(l,u,f){return o.default._validateParameters("nf",arguments),l instanceof Array?l.map(function(p){return h(p,u,f)}):Object.prototype.toString.call(l)==="[object Arguments]"?l.length===3?this.nf(l[0],l[1],l[2]):l.length===2?this.nf(l[0],l[1]):this.nf(l[0]):h(l,u,f)},o.default.prototype.nfc=function(l,u){return o.default._validateParameters("nfc",arguments),l instanceof Array?l.map(function(f){return d(f,u)}):d(l,u)},o.default.prototype.nfp=function(){for(var l=arguments.length,u=new Array(l),f=0;f<l;f++)u[f]=arguments[f];o.default._validateParameters("nfp",u);var p=o.default.prototype.nf.apply(this,u);return p instanceof Array?p.map(g):g(p)},o.default.prototype.nfs=function(){for(var l=arguments.length,u=new Array(l),f=0;f<l;f++)u[f]=arguments[f];o.default._validateParameters("nfs",u);var p=o.default.prototype.nf.apply(this,u);return p instanceof Array?p.map(m):m(p)},o.default.prototype.split=function(l,u){return o.default._validateParameters("split",arguments),l.split(u)},o.default.prototype.splitTokens=function(l,u){var f;if(o.default._validateParameters("splitTokens",arguments),u!==void 0){var p=u,y=/\]/g.exec(p),_=/\[/g.exec(p);f=_&&y?(p=p.slice(0,y.index)+p.slice(y.index+1),_=/\[/g.exec(p),p=p.slice(0,_.index)+p.slice(_.index+1),new RegExp("[\\[".concat(p,"\\]]"),"g")):y?(p=p.slice(0,y.index)+p.slice(y.index+1),new RegExp("[".concat(p,"\\]]"),"g")):_?(p=p.slice(0,_.index)+p.slice(_.index+1),new RegExp("[".concat(p,"\\[]"),"g")):new RegExp("[".concat(p,"]"),"g")}else f=/\s/g;return l.split(f).filter(function(b){return b})},o.default.prototype.trim=function(l){return o.default._validateParameters("trim",arguments),l instanceof Array?l.map(this.trim):l.trim()};var c=o.default;i.default=c},{"../core/friendly_errors/fes_core":255,"../core/friendly_errors/file_errors":256,"../core/friendly_errors/validate_params":259,"../core/main":264,"core-js/modules/es.array.filter":152,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.join":159,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.match":187,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193}],306:[function(r,s,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a,o=(a=r("../core/main"))&&a.__esModule?a:{default:a};o.default.prototype.day=function(){return new Date().getDate()},o.default.prototype.hour=function(){return new Date().getHours()},o.default.prototype.minute=function(){return new Date().getMinutes()},o.default.prototype.millis=function(){return this._millisStart===-1?0:window.performance.now()-this._millisStart},o.default.prototype.month=function(){return new Date().getMonth()+1},o.default.prototype.second=function(){return new Date().getSeconds()},o.default.prototype.year=function(){return new Date().getFullYear()};var h=o.default;i.default=h},{"../core/main":264}],307:[function(r,s,i){function a(l){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(l)}r("core-js/modules/es.array.concat"),r("core-js/modules/es.number.to-fixed"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o,h=(o=r("../core/main"))&&o.__esModule?o:{default:o};r("./p5.Geometry");var d=function(l){if(l&&l.__esModule)return l;if(l===null||a(l)!=="object"&&typeof l!="function")return{default:l};var u=g();if(u&&u.has(l))return u.get(l);var f={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var y in l)if(Object.prototype.hasOwnProperty.call(l,y)){var _=p?Object.getOwnPropertyDescriptor(l,y):null;_&&(_.get||_.set)?Object.defineProperty(f,y,_):f[y]=l[y]}return f.default=l,u&&u.set(l,f),f}(r("../core/constants"));function g(){if(typeof WeakMap!="function")return null;var l=new WeakMap;return g=function(){return l},l}h.default.prototype.plane=function(l,u,f,p){this._assert3d("plane"),h.default._validateParameters("plane",arguments),l===void 0&&(l=50),u===void 0&&(u=l),f===void 0&&(f=1),p===void 0&&(p=1);var y="plane|".concat(f,"|").concat(p);if(!this._renderer.geometryInHash(y)){var _=new h.default.Geometry(f,p,function(){for(var b,x,S,E=0;E<=this.detailY;E++){x=E/this.detailY;for(var C=0;C<=this.detailX;C++)b=C/this.detailX,S=new h.default.Vector(b-.5,x-.5,0),this.vertices.push(S),this.uvs.push(b,x)}});_.computeFaces().computeNormals(),f<=1&&p<=1?_._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on plane objects with more than 1 detailX or 1 detailY"),this._renderer.createBuffers(y,_)}return this._renderer.drawBuffersScaled(y,l,u,1),this},h.default.prototype.box=function(l,u,f,p,y){this._assert3d("box"),h.default._validateParameters("box",arguments),l===void 0&&(l=50),u===void 0&&(u=l),f===void 0&&(f=u);var _=this._renderer.attributes&&this._renderer.attributes.perPixelLighting;p===void 0&&(p=_?1:4),y===void 0&&(y=_?1:4);var b="box|".concat(p,"|").concat(y);if(!this._renderer.geometryInHash(b)){var x=new h.default.Geometry(p,y,function(){var S=[[0,4,2,6],[1,3,5,7],[0,1,4,5],[2,6,3,7],[0,2,1,3],[4,5,6,7]];this.strokeIndices=[[0,1],[1,3],[3,2],[6,7],[8,9],[9,11],[14,15],[16,17],[17,19],[18,19],[20,21],[22,23]];for(var E=0;E<S.length;E++){for(var C=S[E],M=4*E,I=0;I<4;I++){var A=C[I],D=new h.default.Vector((2*(1&A)-1)/2,((2&A)-1)/2,((4&A)/2-1)/2);this.vertices.push(D),this.uvs.push(1&I,(2&I)/2)}this.faces.push([M,1+M,2+M]),this.faces.push([2+M,1+M,3+M])}});x.computeNormals(),p<=4&&y<=4?x._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on box objects with more than 4 detailX or 4 detailY"),this._renderer.createBuffers(b,x)}return this._renderer.drawBuffersScaled(b,l,u,f),this},h.default.prototype.sphere=function(l,u,f){return this._assert3d("sphere"),h.default._validateParameters("sphere",arguments),l===void 0&&(l=50),u===void 0&&(u=24),f===void 0&&(f=16),this.ellipsoid(l,l,l,u,f),this};function m(l,u,f,p,y,_,b){l=l<=0?1:l,u=u<0?0:u,f=f<=0?l:f,p=p<3?3:p;var x,S,E,C=(_=_===void 0||_)?-2:0,M=(y=y<1?1:y)+((b=b===void 0?u!==0:b)?2:0),I=Math.atan2(l-u,f),A=Math.sin(I),D=Math.cos(I);for(x=C;x<=M;++x){var L=x/y,O=f*L,N=void 0;for(N=x<0?(L=O=0,l):y<x?(O=f,L=1,u):l+(u-l)*L,x!==-2&&x!==y+2||(N=0),O-=f/2,S=0;S<p;++S){var U=S/(p-1),K=2*Math.PI*U,J=Math.sin(K),z=Math.cos(K);this.vertices.push(new h.default.Vector(J*N,O,z*N));var H=void 0;H=x<0?new h.default.Vector(0,-1,0):y<x&&u?new h.default.Vector(0,1,0):new h.default.Vector(J*D,A,z*D),this.vertexNormals.push(H),this.uvs.push(U,L)}}var $=0;if(_){for(E=0;E<p;++E){var ne=(E+1)%p;this.faces.push([$+E,$+p+ne,$+p+E])}$+=2*p}for(x=0;x<y;++x){for(S=0;S<p;++S){var oe=(S+1)%p;this.faces.push([$+S,$+oe,$+p+oe]),this.faces.push([$+S,$+p+oe,$+p+S])}$+=p}if(b)for($+=p,S=0;S<p;++S)this.faces.push([$+S,$+(S+1)%p,$+p])}h.default.prototype.cylinder=function(l,u,f,p,y,_){this._assert3d("cylinder"),h.default._validateParameters("cylinder",arguments),l===void 0&&(l=50),u===void 0&&(u=l),f===void 0&&(f=24),p===void 0&&(p=1),_===void 0&&(_=!0),y===void 0&&(y=!0);var b="cylinder|".concat(f,"|").concat(p,"|").concat(y,"|").concat(_);if(!this._renderer.geometryInHash(b)){var x=new h.default.Geometry(f,p);m.call(x,1,1,1,f,p,y,_),f<=24&&p<=16?x._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cylinder objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(b,x)}return this._renderer.drawBuffersScaled(b,l,u,l),this},h.default.prototype.cone=function(l,u,f,p,y){this._assert3d("cone"),h.default._validateParameters("cone",arguments),l===void 0&&(l=50),u===void 0&&(u=l),f===void 0&&(f=24),p===void 0&&(p=1),y===void 0&&(y=!0);var _="cone|".concat(f,"|").concat(p,"|").concat(y);if(!this._renderer.geometryInHash(_)){var b=new h.default.Geometry(f,p);m.call(b,1,0,1,f,p,y,!1),f<=24&&p<=16?b._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cone objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(_,b)}return this._renderer.drawBuffersScaled(_,l,u,l),this},h.default.prototype.ellipsoid=function(l,u,f,p,y){this._assert3d("ellipsoid"),h.default._validateParameters("ellipsoid",arguments),l===void 0&&(l=50),u===void 0&&(u=l),f===void 0&&(f=l),p===void 0&&(p=24),y===void 0&&(y=16);var _="ellipsoid|".concat(p,"|").concat(y);if(!this._renderer.geometryInHash(_)){var b=new h.default.Geometry(p,y,function(){for(var x=0;x<=this.detailY;x++)for(var S=x/this.detailY,E=Math.PI*S-Math.PI/2,C=Math.cos(E),M=Math.sin(E),I=0;I<=this.detailX;I++){var A=I/this.detailX,D=2*Math.PI*A,L=Math.cos(D),O=Math.sin(D),N=new h.default.Vector(C*O,M,C*L);this.vertices.push(N),this.vertexNormals.push(N),this.uvs.push(A,S)}});b.computeFaces(),p<=24&&y<=24?b._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on ellipsoids with more than 24 detailX or 24 detailY"),this._renderer.createBuffers(_,b)}return this._renderer.drawBuffersScaled(_,l,u,f),this},h.default.prototype.torus=function(l,u,f,p){if(this._assert3d("torus"),h.default._validateParameters("torus",arguments),l===void 0)l=50;else if(!l)return;if(u===void 0)u=10;else if(!u)return;f===void 0&&(f=24),p===void 0&&(p=16);var y=(u/l).toPrecision(4),_="torus|".concat(y,"|").concat(f,"|").concat(p);if(!this._renderer.geometryInHash(_)){var b=new h.default.Geometry(f,p,function(){for(var x=0;x<=this.detailY;x++)for(var S=x/this.detailY,E=2*Math.PI*S,C=Math.cos(E),M=Math.sin(E),I=1+y*C,A=0;A<=this.detailX;A++){var D=A/this.detailX,L=2*Math.PI*D,O=Math.cos(L),N=Math.sin(L),U=new h.default.Vector(I*O,I*N,y*M),K=new h.default.Vector(C*O,C*N,M);this.vertices.push(U),this.vertexNormals.push(K),this.uvs.push(D,S)}});b.computeFaces(),f<=24&&p<=16?b._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw strokes on torus object with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(_,b)}return this._renderer.drawBuffersScaled(_,l,l,l),this},h.default.RendererGL.prototype.point=function(l,u,f){f===void 0&&(f=0);var p=[];return p.push(new h.default.Vector(l,u,f)),this._drawPoints(p,this.immediateMode.buffers.point),this},h.default.RendererGL.prototype.triangle=function(l){var u=l[0],f=l[1],p=l[2],y=l[3],_=l[4],b=l[5];if(!this.geometryInHash("tri")){var x=new h.default.Geometry(1,1,function(){var C=[];C.push(new h.default.Vector(0,0,0)),C.push(new h.default.Vector(0,1,0)),C.push(new h.default.Vector(1,0,0)),this.strokeIndices=[[0,1],[1,2],[2,0]],this.vertices=C,this.faces=[[0,1,2]],this.uvs=[0,0,0,1,1,1]});x._makeTriangleEdges()._edgesToVertices(),x.computeNormals(),this.createBuffers("tri",x)}var S=this.uMVMatrix.copy();try{var E=new h.default.Matrix([p-u,y-f,0,0,_-u,b-f,0,0,0,0,1,0,u,f,0,1]).mult(this.uMVMatrix);this.uMVMatrix=E,this.drawBuffers("tri")}finally{this.uMVMatrix=S}return this},h.default.RendererGL.prototype.ellipse=function(l){this.arc(l[0],l[1],l[2],l[3],0,d.TWO_PI,d.OPEN,l[4])},h.default.RendererGL.prototype.arc=function(l){var u,f,p=l,y=arguments[1],_=arguments[2],b=arguments[3],x=arguments[4],S=arguments[5],E=arguments[6],C=arguments[7]||25;if(f=Math.abs(S-x)>=d.TWO_PI?"".concat(u="ellipse","|").concat(C,"|"):"".concat(u="arc","|").concat(x,"|").concat(S,"|").concat(E,"|").concat(C,"|"),!this.geometryInHash(f)){var M=new h.default.Geometry(C,1,function(){if(this.strokeIndices=[],x.toFixed(10)!==S.toFixed(10)){E!==d.PIE&&E!==void 0||(this.vertices.push(new h.default.Vector(.5,.5,0)),this.uvs.push([.5,.5]));for(var A=0;A<=C;A++){var D=(S-x)*(A/C)+x,L=.5+Math.cos(D)/2,O=.5+Math.sin(D)/2;this.vertices.push(new h.default.Vector(L,O,0)),this.uvs.push([L,O]),A<C-1&&(this.faces.push([0,A+1,A+2]),this.strokeIndices.push([A+1,A+2]))}switch(E){case d.PIE:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.strokeIndices.push([0,1]),this.strokeIndices.push([this.vertices.length-2,this.vertices.length-1]),this.strokeIndices.push([0,this.vertices.length-1]);break;case d.CHORD:this.strokeIndices.push([0,1]),this.strokeIndices.push([0,this.vertices.length-1]);break;case d.OPEN:this.strokeIndices.push([0,1]);break;default:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.strokeIndices.push([this.vertices.length-2,this.vertices.length-1])}}});M.computeNormals(),C<=50?M._makeTriangleEdges()._edgesToVertices(M):this._doStroke&&console.log("Cannot apply a stroke to an ".concat(u," with more than 50 detail")),this.createBuffers(f,M)}var I=this.uMVMatrix.copy();try{this.uMVMatrix.translate([p,y,0]),this.uMVMatrix.scale(_,b,1),this.drawBuffers(f)}finally{this.uMVMatrix=I}return this},h.default.RendererGL.prototype.rect=function(l){var u=this._pInst._glAttributes.perPixelLighting,f=l[0],p=l[1],y=l[2],_=l[3],b=l[4]||(u?1:24),x=l[5]||(u?1:16),S="rect|".concat(b,"|").concat(x);if(!this.geometryInHash(S)){var E=new h.default.Geometry(b,x,function(){for(var M=0;M<=this.detailY;M++)for(var I=M/this.detailY,A=0;A<=this.detailX;A++){var D=A/this.detailX,L=new h.default.Vector(D,I,0);this.vertices.push(L),this.uvs.push(D,I)}0<b&&0<x&&(this.strokeIndices=[[0,b],[b,(b+1)*(x+1)-1],[(b+1)*(x+1)-1,(b+1)*x],[(b+1)*x,0]])});E.computeFaces().computeNormals()._makeTriangleEdges()._edgesToVertices(),this.createBuffers(S,E)}var C=this.uMVMatrix.copy();try{this.uMVMatrix.translate([f,p,0]),this.uMVMatrix.scale(y,_,1),this.drawBuffers(S)}finally{this.uMVMatrix=C}return this},h.default.RendererGL.prototype.quad=function(l,u,f,p,y,_,b,x,S,E,C,M,I,A){I===void 0&&(I=2),A===void 0&&(A=2);var D="quad|".concat(l,"|").concat(u,"|").concat(f,"|").concat(p,"|").concat(y,"|").concat(_,"|").concat(b,"|").concat(x,"|").concat(S,"|").concat(E,"|").concat(C,"|").concat(M,"|").concat(I,"|").concat(A);if(!this.geometryInHash(D)){var L=new h.default.Geometry(I,A,function(){for(var H=1/(this.detailX-1),$=1/(this.detailY-1),ne=0;ne<this.detailY;ne++)for(var oe=0;oe<this.detailX;oe++){var _e=oe*H,he=ne*$,Te=(1-_e)*((1-he)*l+he*E)+_e*((1-he)*p+he*b),fe=(1-_e)*((1-he)*u+he*C)+_e*((1-he)*y+he*x),pe=(1-_e)*((1-he)*f+he*M)+_e*((1-he)*_+he*S);this.vertices.push(new h.default.Vector(Te,fe,pe)),this.uvs.push([_e,he])}});L.faces=[];for(var O=0;O<A-1;O++)for(var N=0;N<I-1;N++){var U=N+O*I,K=N+1+O*I,J=N+1+(O+1)*I,z=N+(O+1)*I;L.faces.push([U,K,J]),L.faces.push([U,J,z])}L.computeNormals()._makeTriangleEdges()._edgesToVertices(),this.createBuffers(D,L)}return this.drawBuffers(D),this},h.default.RendererGL.prototype.bezier=function(l,u,f,p,y,_,b,x,S,E,C,M){arguments.length===8&&(C=x,E=b,x=_,b=y,y=p,p=f,f=_=S=M=0);var I=this._pInst._bezierDetail||20;this.beginShape();for(var A=0;A<=I;A++){var D=Math.pow(1-A/I,3),L=A/I*3*Math.pow(1-A/I,2),O=3*Math.pow(A/I,2)*(1-A/I),N=Math.pow(A/I,3);this.vertex(l*D+p*L+b*O+E*N,u*D+y*L+x*O+C*N,f*D+_*L+S*O+M*N)}return this.endShape(),this},h.default.RendererGL.prototype.curve=function(l,u,f,p,y,_,b,x,S,E,C,M){arguments.length===8&&(E=b,C=x,b=y,x=p,y=p=f,f=_=S=M=0);var I=this._pInst._curveDetail;this.beginShape();for(var A=0;A<=I;A++){var D=.5*Math.pow(A/I,3),L=.5*Math.pow(A/I,2),O=A/I*.5,N=D*(3*p-l-3*b+E)+L*(2*l-5*p+4*b-E)+O*(-l+b)+2*p*.5,U=D*(3*y-u-3*x+C)+L*(2*u-5*y+4*x-C)+O*(-u+x)+2*y*.5,K=D*(3*_-f-3*S+M)+L*(2*f-5*_+4*S-M)+O*(-f+S)+2*_*.5;this.vertex(N,U,K)}return this.endShape(),this},h.default.RendererGL.prototype.line=function(){return arguments.length===6?(this.beginShape(d.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]),this.vertex(arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]),this.endShape()):arguments.length===4&&(this.beginShape(d.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],0),this.vertex(arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],0),this.endShape()),this},h.default.RendererGL.prototype.bezierVertex=function(){if(this.immediateMode._bezierVertex.length===0)throw Error("vertex() must be used once before calling bezierVertex()");var l,u,f,p,y,_=[],b=[],x=[],S=arguments.length;if((l=0)===this._lookUpTableBezier.length||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var E=1/this._lutBezierDetail,C=0,M=1,I=0;C<1;){if(l=parseFloat(C.toFixed(6)),this._lookUpTableBezier[I]=this._bezierCoefficients(l),M.toFixed(6)===E.toFixed(6)){l=parseFloat(M.toFixed(6))+parseFloat(C.toFixed(6)),++I,this._lookUpTableBezier[I]=this._bezierCoefficients(l);break}C+=E,M-=E,++I}}var A=this._lookUpTableBezier.length;if(S===6){for(this.isBezier=!0,_=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2],arguments.length<=4?void 0:arguments[4]],b=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3],arguments.length<=5?void 0:arguments[5]],y=0;y<A;y++)u=_[0]*this._lookUpTableBezier[y][0]+_[1]*this._lookUpTableBezier[y][1]+_[2]*this._lookUpTableBezier[y][2]+_[3]*this._lookUpTableBezier[y][3],f=b[0]*this._lookUpTableBezier[y][0]+b[1]*this._lookUpTableBezier[y][1]+b[2]*this._lookUpTableBezier[y][2]+b[3]*this._lookUpTableBezier[y][3],this.vertex(u,f);this.immediateMode._bezierVertex[0]=arguments.length<=4?void 0:arguments[4],this.immediateMode._bezierVertex[1]=arguments.length<=5?void 0:arguments[5]}else if(S===9){for(this.isBezier=!0,_=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3],arguments.length<=6?void 0:arguments[6]],b=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4],arguments.length<=7?void 0:arguments[7]],x=[this.immediateMode._bezierVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5],arguments.length<=8?void 0:arguments[8]],y=0;y<A;y++)u=_[0]*this._lookUpTableBezier[y][0]+_[1]*this._lookUpTableBezier[y][1]+_[2]*this._lookUpTableBezier[y][2]+_[3]*this._lookUpTableBezier[y][3],f=b[0]*this._lookUpTableBezier[y][0]+b[1]*this._lookUpTableBezier[y][1]+b[2]*this._lookUpTableBezier[y][2]+b[3]*this._lookUpTableBezier[y][3],p=x[0]*this._lookUpTableBezier[y][0]+x[1]*this._lookUpTableBezier[y][1]+x[2]*this._lookUpTableBezier[y][2]+x[3]*this._lookUpTableBezier[y][3],this.vertex(u,f,p);this.immediateMode._bezierVertex[0]=arguments.length<=6?void 0:arguments[6],this.immediateMode._bezierVertex[1]=arguments.length<=7?void 0:arguments[7],this.immediateMode._bezierVertex[2]=arguments.length<=8?void 0:arguments[8]}},h.default.RendererGL.prototype.quadraticVertex=function(){if(this.immediateMode._quadraticVertex.length===0)throw Error("vertex() must be used once before calling quadraticVertex()");var l,u,f,p,y,_=[],b=[],x=[],S=arguments.length;if((l=0)===this._lookUpTableQuadratic.length||this._lutQuadraticDetail!==this._pInst._curveDetail){this._lookUpTableQuadratic=[],this._lutQuadraticDetail=this._pInst._curveDetail;for(var E=1/this._lutQuadraticDetail,C=0,M=1,I=0;C<1;){if(l=parseFloat(C.toFixed(6)),this._lookUpTableQuadratic[I]=this._quadraticCoefficients(l),M.toFixed(6)===E.toFixed(6)){l=parseFloat(M.toFixed(6))+parseFloat(C.toFixed(6)),++I,this._lookUpTableQuadratic[I]=this._quadraticCoefficients(l);break}C+=E,M-=E,++I}}var A=this._lookUpTableQuadratic.length;if(S===4){for(this.isQuadratic=!0,_=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2]],b=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3]],y=0;y<A;y++)u=_[0]*this._lookUpTableQuadratic[y][0]+_[1]*this._lookUpTableQuadratic[y][1]+_[2]*this._lookUpTableQuadratic[y][2],f=b[0]*this._lookUpTableQuadratic[y][0]+b[1]*this._lookUpTableQuadratic[y][1]+b[2]*this._lookUpTableQuadratic[y][2],this.vertex(u,f);this.immediateMode._quadraticVertex[0]=arguments.length<=2?void 0:arguments[2],this.immediateMode._quadraticVertex[1]=arguments.length<=3?void 0:arguments[3]}else if(S===6){for(this.isQuadratic=!0,_=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3]],b=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4]],x=[this.immediateMode._quadraticVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5]],y=0;y<A;y++)u=_[0]*this._lookUpTableQuadratic[y][0]+_[1]*this._lookUpTableQuadratic[y][1]+_[2]*this._lookUpTableQuadratic[y][2],f=b[0]*this._lookUpTableQuadratic[y][0]+b[1]*this._lookUpTableQuadratic[y][1]+b[2]*this._lookUpTableQuadratic[y][2],p=x[0]*this._lookUpTableQuadratic[y][0]+x[1]*this._lookUpTableQuadratic[y][1]+x[2]*this._lookUpTableQuadratic[y][2],this.vertex(u,f,p);this.immediateMode._quadraticVertex[0]=arguments.length<=3?void 0:arguments[3],this.immediateMode._quadraticVertex[1]=arguments.length<=4?void 0:arguments[4],this.immediateMode._quadraticVertex[2]=arguments.length<=5?void 0:arguments[5]}},h.default.RendererGL.prototype.curveVertex=function(){var l,u,f,p,y,_=[],b=[],x=[],S=arguments.length;if((l=0)===this._lookUpTableBezier.length||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var E=1/this._lutBezierDetail,C=0,M=1,I=0;C<1;){if(l=parseFloat(C.toFixed(6)),this._lookUpTableBezier[I]=this._bezierCoefficients(l),M.toFixed(6)===E.toFixed(6)){l=parseFloat(M.toFixed(6))+parseFloat(C.toFixed(6)),++I,this._lookUpTableBezier[I]=this._bezierCoefficients(l);break}C+=E,M-=E,++I}}var A=this._lookUpTableBezier.length;if(S===2){if(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.length===8){for(this.isCurve=!0,_=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[6]]),b=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[7]]),y=0;y<A;y++)u=_[0]*this._lookUpTableBezier[y][0]+_[1]*this._lookUpTableBezier[y][1]+_[2]*this._lookUpTableBezier[y][2]+_[3]*this._lookUpTableBezier[y][3],f=b[0]*this._lookUpTableBezier[y][0]+b[1]*this._lookUpTableBezier[y][1]+b[2]*this._lookUpTableBezier[y][2]+b[3]*this._lookUpTableBezier[y][3],this.vertex(u,f);for(y=0;y<S;y++)this.immediateMode._curveVertex.shift()}}else if(S===3&&(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.push(arguments.length<=2?void 0:arguments[2]),this.immediateMode._curveVertex.length===12)){for(this.isCurve=!0,_=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[6],this.immediateMode._curveVertex[9]]),b=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[7],this.immediateMode._curveVertex[10]]),x=this._bezierToCatmull([this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[8],this.immediateMode._curveVertex[11]]),y=0;y<A;y++)u=_[0]*this._lookUpTableBezier[y][0]+_[1]*this._lookUpTableBezier[y][1]+_[2]*this._lookUpTableBezier[y][2]+_[3]*this._lookUpTableBezier[y][3],f=b[0]*this._lookUpTableBezier[y][0]+b[1]*this._lookUpTableBezier[y][1]+b[2]*this._lookUpTableBezier[y][2]+b[3]*this._lookUpTableBezier[y][3],p=x[0]*this._lookUpTableBezier[y][0]+x[1]*this._lookUpTableBezier[y][1]+x[2]*this._lookUpTableBezier[y][2]+x[3]*this._lookUpTableBezier[y][3],this.vertex(u,f,p);for(y=0;y<S;y++)this.immediateMode._curveVertex.shift()}},h.default.RendererGL.prototype.image=function(l,u,f,p,y,_,b,x,S){this._isErasing&&this.blendMode(this._cachedBlendMode),this._pInst.push(),this._pInst.noLights(),this._pInst.texture(l),this._pInst.textureMode(d.NORMAL);var E=0;u<=l.width&&(E=u/l.width);var C=1;u+p<=l.width&&(C=(u+p)/l.width);var M=0;f<=l.height&&(M=f/l.height);var I=1;f+y<=l.height&&(I=(f+y)/l.height),this.beginShape(),this.vertex(_,b,0,E,M),this.vertex(_+x,b,0,C,M),this.vertex(_+x,b+S,0,C,I),this.vertex(_,b+S,0,E,I),this.endShape(d.CLOSE),this._pInst.pop(),this._isErasing&&this.blendMode(d.REMOVE)};var c=h.default;i.default=c},{"../core/constants":253,"../core/main":264,"./p5.Geometry":313,"core-js/modules/es.array.concat":149,"core-js/modules/es.number.to-fixed":172}],308:[function(r,s,i){function a(c){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(c)}r("core-js/modules/es.array.splice"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o,h=(o=r("../core/main"))&&o.__esModule?o:{default:o},d=function(c){if(c&&c.__esModule)return c;if(c===null||a(c)!=="object"&&typeof c!="function")return{default:c};var l=g();if(l&&l.has(c))return l.get(c);var u={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in c)if(Object.prototype.hasOwnProperty.call(c,p)){var y=f?Object.getOwnPropertyDescriptor(c,p):null;y&&(y.get||y.set)?Object.defineProperty(u,p,y):u[p]=c[p]}return u.default=c,l&&l.set(c,u),u}(r("../core/constants"));function g(){if(typeof WeakMap!="function")return null;var c=new WeakMap;return g=function(){return c},c}h.default.prototype.orbitControl=function(c,l,u){if(this._assert3d("orbitControl"),h.default._validateParameters("orbitControl",arguments),this.mouseX<this.width&&0<this.mouseX&&this.mouseY<this.height&&0<this.mouseY){var f=this._renderer._curCamera;c===void 0&&(c=1),l===void 0&&(l=c),u===void 0&&(u=.5),this.contextMenuDisabled!==!0&&(this.canvas.oncontextmenu=function(){return!1},this._setProperty("contextMenuDisabled",!0)),this.wheelDefaultDisabled!==!0&&(this.canvas.onwheel=function(){return!1},this._setProperty("wheelDefaultDisabled",!0));var p=this.height<this.width?this.height:this.width;if(this._mouseWheelDeltaY!==this._pmouseWheelDeltaY&&(0<this._mouseWheelDeltaY?this._renderer._curCamera._orbit(0,0,u*p):this._renderer._curCamera._orbit(0,0,-u*p)),this.mouseIsPressed){if(this.mouseButton===this.LEFT){var y=-c*(this.mouseX-this.pmouseX)/p,_=l*(this.mouseY-this.pmouseY)/p;this._renderer._curCamera._orbit(y,_,0)}else if(this.mouseButton===this.RIGHT){var b=f._getLocalAxes(),x=Math.sqrt(b.x[0]*b.x[0]+b.x[2]*b.x[2]);x!==0&&(b.x[0]/=x,b.x[2]/=x);var S=Math.sqrt(b.y[0]*b.y[0]+b.y[2]*b.y[2]);S!==0&&(b.y[0]/=S,b.y[2]/=S);var E=-1*c*(this.mouseX-this.pmouseX),C=-1*l*(this.mouseY-this.pmouseY);f.setPosition(f.eyeX+E*b.x[0]+C*b.z[0],f.eyeY,f.eyeZ+E*b.x[2]+C*b.z[2])}}return this}},h.default.prototype.debugMode=function(){this._assert3d("debugMode");for(var c=arguments.length,l=new Array(c),u=0;u<c;u++)l[u]=arguments[u];h.default._validateParameters("debugMode",l);for(var f=this._registeredMethods.post.length-1;0<=f;f--)this._registeredMethods.post[f].toString()!==this._grid().toString()&&this._registeredMethods.post[f].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(f,1);l[0]===d.GRID?this.registerMethod("post",this._grid.call(this,l[1],l[2],l[3],l[4],l[5])):l[0]===d.AXES?this.registerMethod("post",this._axesIcon.call(this,l[1],l[2],l[3],l[4])):(this.registerMethod("post",this._grid.call(this,l[0],l[1],l[2],l[3],l[4])),this.registerMethod("post",this._axesIcon.call(this,l[5],l[6],l[7],l[8])))},h.default.prototype.noDebugMode=function(){this._assert3d("noDebugMode");for(var c=this._registeredMethods.post.length-1;0<=c;c--)this._registeredMethods.post[c].toString()!==this._grid().toString()&&this._registeredMethods.post[c].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(c,1)},h.default.prototype._grid=function(c,l,u,f,p){c===void 0&&(c=this.width/2),l===void 0&&(l=Math.round(c/30)<4?4:Math.round(c/30)),u===void 0&&(u=0),f===void 0&&(f=0),p===void 0&&(p=0);var y=c/l,_=c/2;return function(){this.push(),this.stroke(255*this._renderer.curStrokeColor[0],255*this._renderer.curStrokeColor[1],255*this._renderer.curStrokeColor[2]),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix.mat4[0],this._renderer._curCamera.cameraMatrix.mat4[1],this._renderer._curCamera.cameraMatrix.mat4[2],this._renderer._curCamera.cameraMatrix.mat4[3],this._renderer._curCamera.cameraMatrix.mat4[4],this._renderer._curCamera.cameraMatrix.mat4[5],this._renderer._curCamera.cameraMatrix.mat4[6],this._renderer._curCamera.cameraMatrix.mat4[7],this._renderer._curCamera.cameraMatrix.mat4[8],this._renderer._curCamera.cameraMatrix.mat4[9],this._renderer._curCamera.cameraMatrix.mat4[10],this._renderer._curCamera.cameraMatrix.mat4[11],this._renderer._curCamera.cameraMatrix.mat4[12],this._renderer._curCamera.cameraMatrix.mat4[13],this._renderer._curCamera.cameraMatrix.mat4[14],this._renderer._curCamera.cameraMatrix.mat4[15]);for(var b=0;b<=l;b++)this.beginShape(this.LINES),this.vertex(-_+u,f,b*y-_+p),this.vertex(+_+u,f,b*y-_+p),this.endShape();for(var x=0;x<=l;x++)this.beginShape(this.LINES),this.vertex(x*y-_+u,f,-_+p),this.vertex(x*y-_+u,f,+_+p),this.endShape();this.pop()}},h.default.prototype._axesIcon=function(c,l,u,f){return c===void 0&&(c=40<this.width/20?this.width/20:40),l===void 0&&(l=-this.width/4),u===void 0&&(u=l),f===void 0&&(f=l),function(){this.push(),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix.mat4[0],this._renderer._curCamera.cameraMatrix.mat4[1],this._renderer._curCamera.cameraMatrix.mat4[2],this._renderer._curCamera.cameraMatrix.mat4[3],this._renderer._curCamera.cameraMatrix.mat4[4],this._renderer._curCamera.cameraMatrix.mat4[5],this._renderer._curCamera.cameraMatrix.mat4[6],this._renderer._curCamera.cameraMatrix.mat4[7],this._renderer._curCamera.cameraMatrix.mat4[8],this._renderer._curCamera.cameraMatrix.mat4[9],this._renderer._curCamera.cameraMatrix.mat4[10],this._renderer._curCamera.cameraMatrix.mat4[11],this._renderer._curCamera.cameraMatrix.mat4[12],this._renderer._curCamera.cameraMatrix.mat4[13],this._renderer._curCamera.cameraMatrix.mat4[14],this._renderer._curCamera.cameraMatrix.mat4[15]),this.strokeWeight(2),this.stroke(255,0,0),this.beginShape(this.LINES),this.vertex(l,u,f),this.vertex(l+c,u,f),this.endShape(),this.stroke(0,255,0),this.beginShape(this.LINES),this.vertex(l,u,f),this.vertex(l,u+c,f),this.endShape(),this.stroke(0,0,255),this.beginShape(this.LINES),this.vertex(l,u,f),this.vertex(l,u,f+c),this.endShape(),this.pop()}};var m=h.default;i.default=m},{"../core/constants":253,"../core/main":264,"core-js/modules/es.array.splice":164,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182}],309:[function(r,s,i){function a(c){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(c)}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o,h=(o=r("../core/main"))&&o.__esModule?o:{default:o},d=function(c){if(c&&c.__esModule)return c;if(c===null||a(c)!=="object"&&typeof c!="function")return{default:c};var l=g();if(l&&l.has(c))return l.get(c);var u={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in c)if(Object.prototype.hasOwnProperty.call(c,p)){var y=f?Object.getOwnPropertyDescriptor(c,p):null;y&&(y.get||y.set)?Object.defineProperty(u,p,y):u[p]=c[p]}return u.default=c,l&&l.set(c,u),u}(r("../core/constants"));function g(){if(typeof WeakMap!="function")return null;var c=new WeakMap;return g=function(){return c},c}h.default.prototype.ambientLight=function(c,l,u,f){this._assert3d("ambientLight"),h.default._validateParameters("ambientLight",arguments);var p=this.color.apply(this,arguments);return this._renderer.ambientLightColors.push(p._array[0],p._array[1],p._array[2]),this._renderer._enableLighting=!0,this},h.default.prototype.specularColor=function(c,l,u){this._assert3d("specularColor"),h.default._validateParameters("specularColor",arguments);var f=this.color.apply(this,arguments);return this._renderer.specularColors=[f._array[0],f._array[1],f._array[2]],this},h.default.prototype.directionalLight=function(c,l,u,f,p,y){var _,b,x,S;this._assert3d("directionalLight"),h.default._validateParameters("directionalLight",arguments),_=c instanceof h.default.Color?c:this.color(c,l,u);var E=arguments[arguments.length-1];S=typeof E=="number"?(b=arguments[arguments.length-3],x=arguments[arguments.length-2],arguments[arguments.length-1]):(b=E.x,x=E.y,E.z);var C=Math.sqrt(b*b+x*x+S*S);return this._renderer.directionalLightDirections.push(b/C,x/C,S/C),this._renderer.directionalLightDiffuseColors.push(_._array[0],_._array[1],_._array[2]),Array.prototype.push.apply(this._renderer.directionalLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},h.default.prototype.pointLight=function(c,l,u,f,p,y){var _,b,x,S;this._assert3d("pointLight"),h.default._validateParameters("pointLight",arguments),_=c instanceof h.default.Color?c:this.color(c,l,u);var E=arguments[arguments.length-1];return S=typeof E=="number"?(b=arguments[arguments.length-3],x=arguments[arguments.length-2],arguments[arguments.length-1]):(b=E.x,x=E.y,E.z),this._renderer.pointLightPositions.push(b,x,S),this._renderer.pointLightDiffuseColors.push(_._array[0],_._array[1],_._array[2]),Array.prototype.push.apply(this._renderer.pointLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},h.default.prototype.lights=function(){if(this._assert3d("lights"),this._colorMode===d.RGB)this.ambientLight(128,128,128),this.directionalLight(128,128,128,0,0,-1);else{var c=this._colorMaxes[this._colorMode][2];this.ambientLight(0,0,c),this.directionalLight(0,0,c,0,0,-1)}return this},h.default.prototype.lightFalloff=function(c,l,u){return this._assert3d("lightFalloff"),h.default._validateParameters("lightFalloff",arguments),c<0&&(c=0,console.warn("Value of constant argument in lightFalloff() should be never be negative. Set to 0.")),l<0&&(l=0,console.warn("Value of linear argument in lightFalloff() should be never be negative. Set to 0.")),u<0&&(u=0,console.warn("Value of quadratic argument in lightFalloff() should be never be negative. Set to 0.")),c===0&&l===0&&u===0&&(c=1,console.warn("Either one of the three arguments in lightFalloff() should be greater than zero. Set constant argument to 1.")),this._renderer.constantAttenuation=c,this._renderer.linearAttenuation=l,this._renderer.quadraticAttenuation=u,this},h.default.prototype.spotLight=function(c,l,u,f,p,y,_,b,x,S,E){var C,M,I;this._assert3d("spotLight"),h.default._validateParameters("spotLight",arguments);var A=arguments.length;switch(A){case 11:case 10:C=this.color(c,l,u),M=new h.default.Vector(f,p,y),I=new h.default.Vector(_,b,x);break;case 9:c instanceof h.default.Color?(C=c,M=new h.default.Vector(l,u,f),I=new h.default.Vector(p,y,_),S=b,E=x):f instanceof h.default.Vector?(C=this.color(c,l,u),M=f,I=new h.default.Vector(p,y,_),S=b,E=x):_ instanceof h.default.Vector?(C=this.color(c,l,u),M=new h.default.Vector(f,p,y),I=_,S=b,E=x):(C=this.color(c,l,u),M=new h.default.Vector(f,p,y),I=new h.default.Vector(_,b,x));break;case 8:S=(I=c instanceof h.default.Color?(C=c,M=new h.default.Vector(l,u,f),new h.default.Vector(p,y,_)):f instanceof h.default.Vector?(C=this.color(c,l,u),M=f,new h.default.Vector(p,y,_)):(C=this.color(c,l,u),M=new h.default.Vector(f,p,y),_),b);break;case 7:c instanceof h.default.Color&&l instanceof h.default.Vector?(C=c,M=l,I=new h.default.Vector(u,f,p),S=y,E=_):c instanceof h.default.Color&&p instanceof h.default.Vector?(C=c,M=new h.default.Vector(l,u,f),I=p,S=y,E=_):f instanceof h.default.Vector&&p instanceof h.default.Vector?(C=this.color(c,l,u),M=f,I=p,S=y,E=_):I=c instanceof h.default.Color?(C=c,M=new h.default.Vector(l,u,f),new h.default.Vector(p,y,_)):f instanceof h.default.Vector?(C=this.color(c,l,u),M=f,new h.default.Vector(p,y,_)):(C=this.color(c,l,u),M=new h.default.Vector(f,p,y),_);break;case 6:f instanceof h.default.Vector&&p instanceof h.default.Vector?(C=this.color(c,l,u),M=f,I=p,S=y):c instanceof h.default.Color&&p instanceof h.default.Vector?(C=c,M=new h.default.Vector(l,u,f),I=p,S=y):c instanceof h.default.Color&&l instanceof h.default.Vector&&(C=c,M=l,I=new h.default.Vector(u,f,p),S=y);break;case 5:c instanceof h.default.Color&&l instanceof h.default.Vector&&u instanceof h.default.Vector?(C=c,M=l,I=u,S=f,E=p):f instanceof h.default.Vector&&p instanceof h.default.Vector?(C=this.color(c,l,u),M=f,I=p):c instanceof h.default.Color&&p instanceof h.default.Vector?(C=c,M=new h.default.Vector(l,u,f),I=p):c instanceof h.default.Color&&l instanceof h.default.Vector&&(C=c,M=l,I=new h.default.Vector(u,f,p));break;case 4:C=c,M=l,I=u,S=f;break;case 3:C=c,M=l,I=u;break;default:return console.warn("Sorry, input for spotlight() is not in prescribed format. Too ".concat(A<3?"few":"many"," arguments were provided")),this}return this._renderer.spotLightDiffuseColors.push(C._array[0],C._array[1],C._array[2]),Array.prototype.push.apply(this._renderer.spotLightSpecularColors,this._renderer.specularColors),this._renderer.spotLightPositions.push(M.x,M.y,M.z),I.normalize(),this._renderer.spotLightDirections.push(I.x,I.y,I.z),S===void 0&&(S=Math.PI/3),E!==void 0&&E<1?(E=1,console.warn("Value of concentration needs to be greater than 1. Setting it to 1")):E===void 0&&(E=100),S=this._renderer._pInst._toRadians(S),this._renderer.spotLightAngle.push(Math.cos(S)),this._renderer.spotLightConc.push(E),this._renderer._enableLighting=!0,this},h.default.prototype.noLights=function(){return this._assert3d("noLights"),h.default._validateParameters("noLights",arguments),this._renderer._enableLighting=!1,this._renderer.ambientLightColors.length=0,this._renderer.specularColors=[1,1,1],this._renderer.directionalLightDirections.length=0,this._renderer.directionalLightDiffuseColors.length=0,this._renderer.directionalLightSpecularColors.length=0,this._renderer.pointLightPositions.length=0,this._renderer.pointLightDiffuseColors.length=0,this._renderer.pointLightSpecularColors.length=0,this._renderer.spotLightPositions.length=0,this._renderer.spotLightDirections.length=0,this._renderer.spotLightDiffuseColors.length=0,this._renderer.spotLightSpecularColors.length=0,this._renderer.spotLightAngle.length=0,this._renderer.spotLightConc.length=0,this._renderer.constantAttenuation=1,this._renderer.linearAttenuation=0,this._renderer.quadraticAttenuation=0,this._renderer._useShininess=1,this};var m=h.default;i.default=m},{"../core/constants":253,"../core/main":264}],310:[function(r,s,i){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a,o=(a=r("../core/main"))&&a.__esModule?a:{default:a};function h(g,m,c){for(var l=0,u=g.length;l<u;l++)if(g[l]!==m.getUint8(c+l,!1))return!1;return!0}r("./p5.Geometry"),o.default.prototype.loadModel=function(g){var m,c,l;o.default._validateParameters("loadModel",arguments);var u=g.slice(-4);typeof arguments[1]=="boolean"?(m=arguments[1],c=arguments[2],l=arguments[3],arguments[4]!==void 0&&(u=arguments[4])):(m=!1,c=arguments[1],l=arguments[2],arguments[3]!==void 0&&(u=arguments[3]));var f=new o.default.Geometry;f.gid="".concat(g,"|").concat(m);var p=this;return u.match(/\.stl$/i)?this.httpDo(g,"GET","arrayBuffer",function(y){(function(_,b){if(function(E){for(var C=new DataView(E),M=[115,111,108,105,100],I=0;I<5;I++)if(h(M,C,I))return!1;return!0}(b))(function(E,C){for(var M,I,A,D,L,O,N,U=new DataView(C),K=U.getUint32(80,!0),J=!1,z=0;z<70;z++)U.getUint32(z,!1)===1129270351&&U.getUint8(z+4)===82&&U.getUint8(z+5)===61&&(J=!0,D=[],L=U.getUint8(z+6)/255,O=U.getUint8(z+7)/255,N=U.getUint8(z+8)/255);for(var H=0;H<K;H++){var $=84+50*H,ne=U.getFloat32($,!0),oe=U.getFloat32(4+$,!0),_e=U.getFloat32(8+$,!0);if(J){var he=U.getUint16(48+$,!0);A=(32768&he)==0?(M=(31&he)/31,I=(he>>5&31)/31,(he>>10&31)/31):(M=L,I=O,N)}for(var Te=new o.default.Vector(ne,oe,_e),fe=1;fe<=3;fe++){var pe=$+12*fe,R=new o.default.Vector(U.getFloat32(pe,!0),U.getFloat32(4+pe,!0),U.getFloat32(8+pe,!0));E.vertices.push(R),E.vertexNormals.push(Te),J&&D.push(M,I,A)}E.faces.push([3*H,3*H+1,3*H+2]),E.uvs.push([0,0],[0,0],[0,0])}})(_,b);else{var x=new DataView(b);if(!("TextDecoder"in window))return console.warn("Sorry, ASCII STL loading only works in browsers that support TextDecoder (https://caniuse.com/#feat=textencoder)");var S=new TextDecoder("utf-8").decode(x).split(`
`);(function(E,C){for(var M,I,A="",D=[],L=0;L<C.length;++L){for(var O=C[L].trim(),N=O.split(" "),U=0;U<N.length;++U)N[U]===""&&N.splice(U,1);if(N.length!==0)switch(A){case"":if(N[0]!=="solid")return console.error(O),console.error('Invalid state "'.concat(N[0],'", should be "solid"'));A="solid";break;case"solid":if(N[0]!=="facet"||N[1]!=="normal")return console.error(O),console.error('Invalid state "'.concat(N[0],'", should be "facet normal"'));M=new o.default.Vector(parseFloat(N[2]),parseFloat(N[3]),parseFloat(N[4])),E.vertexNormals.push(M,M,M),A="facet normal";break;case"facet normal":if(N[0]!=="outer"||N[1]!=="loop")return console.error(O),console.error('Invalid state "'.concat(N[0],'", should be "outer loop"'));A="vertex";break;case"vertex":if(N[0]==="vertex")I=new o.default.Vector(parseFloat(N[1]),parseFloat(N[2]),parseFloat(N[3])),E.vertices.push(I),E.uvs.push([0,0]),D.push(E.vertices.indexOf(I));else{if(N[0]!=="endloop")return console.error(O),console.error('Invalid state "'.concat(N[0],'", should be "vertex" or "endloop"'));E.faces.push(D),D=[],A="endloop"}break;case"endloop":if(N[0]!=="endfacet")return console.error(O),console.error('Invalid state "'.concat(N[0],'", should be "endfacet"'));A="endfacet";break;case"endfacet":if(N[0]!=="endsolid"){if(N[0]!=="facet"||N[1]!=="normal")return console.error(O),console.error('Invalid state "'.concat(N[0],'", should be "endsolid" or "facet normal"'));M=new o.default.Vector(parseFloat(N[2]),parseFloat(N[3]),parseFloat(N[4])),E.vertexNormals.push(M,M,M),A="facet normal"}break;default:console.error('Invalid state "'.concat(A,'"'))}}})(_,S)}})(f,y),m&&f.normalize(),p._decrementPreload(),typeof c=="function"&&c(f)},l):u.match(/\.obj$/i)?this.loadStrings(g,function(y){(function(_,b){for(var x={v:[],vt:[],vn:[]},S={},E=0;E<b.length;++E){var C=b[E].trim().split(/\b\s+/);if(0<C.length){if(C[0]==="v"||C[0]==="vn"){var M=new o.default.Vector(parseFloat(C[1]),parseFloat(C[2]),parseFloat(C[3]));x[C[0]].push(M)}else if(C[0]==="vt"){var I=[parseFloat(C[1]),1-parseFloat(C[2])];x[C[0]].push(I)}else if(C[0]==="f")for(var A=3;A<C.length;++A){for(var D=[],L=[1,A-1,A],O=0;O<L.length;++O){var N=C[L[O]],U=0;if(S[N]!==void 0)U=S[N];else{for(var K=N.split("/"),J=0;J<K.length;J++)K[J]=parseInt(K[J])-1;U=S[N]=_.vertices.length,_.vertices.push(x.v[K[0]].copy()),x.vt[K[1]]?_.uvs.push(x.vt[K[1]].slice()):_.uvs.push([0,0]),x.vn[K[2]]&&_.vertexNormals.push(x.vn[K[2]].copy())}D.push(U)}D[0]!==D[1]&&D[0]!==D[2]&&D[1]!==D[2]&&_.faces.push(D)}}}_.vertexNormals.length===0&&_.computeNormals()})(f,y),m&&f.normalize(),p._decrementPreload(),typeof c=="function"&&c(f)},l):(o.default._friendlyFileLoadError(3,g),l?l():console.error("Sorry, the file type is invalid. Only OBJ and STL files are supported.")),f},o.default.prototype.model=function(g){this._assert3d("model"),o.default._validateParameters("model",arguments),0<g.vertices.length&&(this._renderer.geometryInHash(g.gid)||(g._makeTriangleEdges()._edgesToVertices(),this._renderer.createBuffers(g.gid,g)),this._renderer.drawBuffers(g.gid))};var d=o.default;i.default=d},{"../core/main":264,"./p5.Geometry":313,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.match":187,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193}],311:[function(r,s,i){function a(c){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(c)}r("core-js/modules/es.array.join"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o,h=(o=r("../core/main"))&&o.__esModule?o:{default:o},d=function(c){if(c&&c.__esModule)return c;if(c===null||a(c)!=="object"&&typeof c!="function")return{default:c};var l=g();if(l&&l.has(c))return l.get(c);var u={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in c)if(Object.prototype.hasOwnProperty.call(c,p)){var y=f?Object.getOwnPropertyDescriptor(c,p):null;y&&(y.get||y.set)?Object.defineProperty(u,p,y):u[p]=c[p]}return u.default=c,l&&l.set(c,u),u}(r("../core/constants"));function g(){if(typeof WeakMap!="function")return null;var c=new WeakMap;return g=function(){return c},c}r("./p5.Texture"),h.default.prototype.loadShader=function(c,l,u,f){h.default._validateParameters("loadShader",arguments),f=f||console.error;function p(){_._decrementPreload(),u&&u(y)}var y=new h.default.Shader,_=this,b=!1,x=!1;return this.loadStrings(c,function(S){y._vertSrc=S.join(`
`),x=!0,b&&p()},f),this.loadStrings(l,function(S){y._fragSrc=S.join(`
`),b=!0,x&&p()},f),y},h.default.prototype.createShader=function(c,l){return this._assert3d("createShader"),h.default._validateParameters("createShader",arguments),new h.default.Shader(this._renderer,c,l)},h.default.prototype.shader=function(c){return this._assert3d("shader"),h.default._validateParameters("shader",arguments),c._renderer===void 0&&(c._renderer=this._renderer),c.init(),c.isStrokeShader()?this._renderer.userStrokeShader=c:(this._renderer.userFillShader=c,this._renderer._useNormalMaterial=!1),this},h.default.prototype.resetShader=function(){return this._renderer.userFillShader=this._renderer.userStrokeShader=null,this},h.default.prototype.texture=function(c){return this._assert3d("texture"),h.default._validateParameters("texture",arguments),c.gifProperties&&c._animateGif(this),this._renderer.drawMode=d.TEXTURE,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!1,this._renderer._tex=c,this._renderer._setProperty("_doFill",!0),this},h.default.prototype.textureMode=function(c){c!==d.IMAGE&&c!==d.NORMAL?console.warn("You tried to set ".concat(c," textureMode only supports IMAGE & NORMAL ")):this._renderer.textureMode=c},h.default.prototype.textureWrap=function(c){var l=1<arguments.length&&arguments[1]!==void 0?arguments[1]:c;this._renderer.textureWrapX=c,this._renderer.textureWrapY=l;for(var u=this._renderer.textures,f=0;f<u.length;f++)u[f].setWrapMode(c,l)},h.default.prototype.normalMaterial=function(){this._assert3d("normalMaterial");for(var c=arguments.length,l=new Array(c),u=0;u<c;u++)l[u]=arguments[u];return h.default._validateParameters("normalMaterial",l),this._renderer.drawMode=d.FILL,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!0,this._renderer.curFillColor=[1,1,1,1],this._renderer._setProperty("_doFill",!0),this.noStroke(),this},h.default.prototype.ambientMaterial=function(c,l,u){this._assert3d("ambientMaterial"),h.default._validateParameters("ambientMaterial",arguments);var f=h.default.prototype.color.apply(this,arguments);return this._renderer.curFillColor=f._array,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._tex=null,this._renderer._setProperty("_doFill",!0),this},h.default.prototype.emissiveMaterial=function(c,l,u,f){this._assert3d("emissiveMaterial"),h.default._validateParameters("emissiveMaterial",arguments);var p=h.default.prototype.color.apply(this,arguments);return this._renderer.curFillColor=p._array,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._tex=null,this},h.default.prototype.specularMaterial=function(c,l,u,f){this._assert3d("specularMaterial"),h.default._validateParameters("specularMaterial",arguments);var p=h.default.prototype.color.apply(this,arguments);return this._renderer.curFillColor=p._array,this._renderer._useSpecularMaterial=!0,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._tex=null,this},h.default.prototype.shininess=function(c){return this._assert3d("shininess"),h.default._validateParameters("shininess",arguments),c<1&&(c=1),this._renderer._useShininess=c,this},h.default.RendererGL.prototype._applyColorBlend=function(c){var l=this.GL,u=this.drawMode===d.TEXTURE||c[c.length-1]<1||this._isErasing;return u!==this._isBlending&&(u||this.curBlendMode!==d.BLEND&&this.curBlendMode!==d.ADD?l.enable(l.BLEND):l.disable(l.BLEND),l.depthMask(!0),this._isBlending=u),this._applyBlendMode(),c},h.default.RendererGL.prototype._applyBlendMode=function(){if(this._cachedBlendMode!==this.curBlendMode){var c=this.GL;switch(this.curBlendMode){case d.BLEND:case d.ADD:c.blendEquation(c.FUNC_ADD),c.blendFunc(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA);break;case d.REMOVE:c.blendEquation(c.FUNC_REVERSE_SUBTRACT),c.blendFunc(c.SRC_ALPHA,c.DST_ALPHA);break;case d.MULTIPLY:c.blendEquationSeparate(c.FUNC_ADD,c.FUNC_ADD),c.blendFuncSeparate(c.ZERO,c.SRC_COLOR,c.ONE,c.ONE);break;case d.SCREEN:c.blendEquationSeparate(c.FUNC_ADD,c.FUNC_ADD),c.blendFuncSeparate(c.ONE_MINUS_DST_COLOR,c.ONE,c.ONE,c.ONE);break;case d.EXCLUSION:c.blendEquationSeparate(c.FUNC_ADD,c.FUNC_ADD),c.blendFuncSeparate(c.ONE_MINUS_DST_COLOR,c.ONE_MINUS_SRC_COLOR,c.ONE,c.ONE);break;case d.REPLACE:c.blendEquation(c.FUNC_ADD),c.blendFunc(c.ONE,c.ZERO);break;case d.SUBTRACT:c.blendEquationSeparate(c.FUNC_REVERSE_SUBTRACT,c.FUNC_ADD),c.blendFuncSeparate(c.SRC_ALPHA,c.ONE,c.ONE,c.ONE);break;case d.DARKEST:this.blendExt?(c.blendEquationSeparate(this.blendExt.MIN_EXT,c.FUNC_ADD),c.blendFuncSeparate(c.ONE,c.ONE,c.ONE,c.ONE)):console.warn("blendMode(DARKEST) does not work in your browser in WEBGL mode.");break;case d.LIGHTEST:this.blendExt?(c.blendEquationSeparate(this.blendExt.MAX_EXT,c.FUNC_ADD),c.blendFuncSeparate(c.ONE,c.ONE,c.ONE,c.ONE)):console.warn("blendMode(LIGHTEST) does not work in your browser in WEBGL mode.");break;default:console.error("Oops! Somehow RendererGL set curBlendMode to an unsupported mode.")}this._isErasing||(this._cachedBlendMode=this.curBlendMode)}};var m=h.default;i.default=m},{"../core/constants":253,"../core/main":264,"./p5.Texture":320,"core-js/modules/es.array.join":159}],312:[function(r,s,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a,o=(a=r("../core/main"))&&a.__esModule?a:{default:a};o.default.prototype.camera=function(){var d;this._assert3d("camera");for(var g=arguments.length,m=new Array(g),c=0;c<g;c++)m[c]=arguments[c];return o.default._validateParameters("camera",m),(d=this._renderer._curCamera).camera.apply(d,m),this},o.default.prototype.perspective=function(){var d;this._assert3d("perspective");for(var g=arguments.length,m=new Array(g),c=0;c<g;c++)m[c]=arguments[c];return o.default._validateParameters("perspective",m),(d=this._renderer._curCamera).perspective.apply(d,m),this},o.default.prototype.ortho=function(){var d;this._assert3d("ortho");for(var g=arguments.length,m=new Array(g),c=0;c<g;c++)m[c]=arguments[c];return o.default._validateParameters("ortho",m),(d=this._renderer._curCamera).ortho.apply(d,m),this},o.default.prototype.frustum=function(){var d;this._assert3d("frustum");for(var g=arguments.length,m=new Array(g),c=0;c<g;c++)m[c]=arguments[c];return o.default._validateParameters("frustum",m),(d=this._renderer._curCamera).frustum.apply(d,m),this},o.default.prototype.createCamera=function(){this._assert3d("createCamera");var d=new o.default.Camera(this._renderer);return d._computeCameraDefaultSettings(),d._setDefaultCamera(),this._renderer._curCamera=d},o.default.Camera=function(d){this._renderer=d,this.cameraType="default",this.cameraMatrix=new o.default.Matrix,this.projMatrix=new o.default.Matrix},o.default.Camera.prototype.perspective=function(d,g,m,c){this.cameraType=0<arguments.length?"custom":"default",d===void 0?(d=this.defaultCameraFOV,this.cameraFOV=d):this.cameraFOV=this._renderer._pInst._toRadians(d),g===void 0&&(g=this.defaultAspectRatio),m===void 0&&(m=this.defaultCameraNear),c===void 0&&(c=this.defaultCameraFar),m<=1e-4&&(m=.01,console.log("Avoid perspective near plane values close to or below 0. Setting value to 0.01.")),c<m&&console.log("Perspective far plane value is less than near plane value. Nothing will be shown."),this.aspectRatio=g,this.cameraNear=m,this.cameraFar=c,this.projMatrix=o.default.Matrix.identity();var l=1/Math.tan(this.cameraFOV/2),u=1/(this.cameraNear-this.cameraFar);this.projMatrix.set(l/g,0,0,0,0,-l,0,0,0,0,(c+m)*u,-1,0,0,2*c*m*u,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15])},o.default.Camera.prototype.ortho=function(d,g,m,c,l,u){d===void 0&&(d=-this._renderer.width/2),g===void 0&&(g=this._renderer.width/2),m===void 0&&(m=-this._renderer.height/2),c===void 0&&(c=this._renderer.height/2),l===void 0&&(l=0),u===void 0&&(u=Math.max(this._renderer.width,this._renderer.height));var f=g-d,p=c-m,y=u-l,_=2/f,b=2/p,x=-2/y,S=-(g+d)/f,E=-(c+m)/p,C=-(u+l)/y;this.projMatrix=o.default.Matrix.identity(),this.projMatrix.set(_,0,0,0,0,-b,0,0,0,0,x,0,S,E,C,1),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom"},o.default.Camera.prototype.frustum=function(d,g,m,c,l,u){d===void 0&&(d=-this._renderer.width/2),g===void 0&&(g=this._renderer.width/2),m===void 0&&(m=-this._renderer.height/2),c===void 0&&(c=this._renderer.height/2),l===void 0&&(l=0),u===void 0&&(u=Math.max(this._renderer.width,this._renderer.height));var f=g-d,p=c-m,y=u-l,_=2*l/f,b=2*l/p,x=-2*u*l/y,S=(g+d)/f,E=(c+m)/p,C=-(u+l)/y;this.projMatrix=o.default.Matrix.identity(),this.projMatrix.set(_,0,0,0,0,b,0,0,S,E,C,-1,0,0,x,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom"},o.default.Camera.prototype._rotateView=function(d,g,m,c){var l=this.centerX,u=this.centerY,f=this.centerZ;l-=this.eyeX,u-=this.eyeY,f-=this.eyeZ;var p=o.default.Matrix.identity(this._renderer._pInst);p.rotate(this._renderer._pInst._toRadians(d),g,m,c);var y=[l*p.mat4[0]+u*p.mat4[4]+f*p.mat4[8],l*p.mat4[1]+u*p.mat4[5]+f*p.mat4[9],l*p.mat4[2]+u*p.mat4[6]+f*p.mat4[10]];y[0]+=this.eyeX,y[1]+=this.eyeY,y[2]+=this.eyeZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,y[0],y[1],y[2],this.upX,this.upY,this.upZ)},o.default.Camera.prototype.pan=function(d){var g=this._getLocalAxes();this._rotateView(d,g.y[0],g.y[1],g.y[2])},o.default.Camera.prototype.tilt=function(d){var g=this._getLocalAxes();this._rotateView(d,g.x[0],g.x[1],g.x[2])},o.default.Camera.prototype.lookAt=function(d,g,m){this.camera(this.eyeX,this.eyeY,this.eyeZ,d,g,m,this.upX,this.upY,this.upZ)},o.default.Camera.prototype.camera=function(d,g,m,c,l,u,f,p,y){d===void 0&&(d=this.defaultEyeX,g=this.defaultEyeY,m=this.defaultEyeZ,c=d,l=g,p=1,y=f=u=0),this.eyeX=d,this.eyeY=g,this.eyeZ=m,c!==void 0&&(this.centerX=c,this.centerY=l,this.centerZ=u),f!==void 0&&(this.upX=f,this.upY=p,this.upZ=y);var _=this._getLocalAxes();this.cameraMatrix.set(_.x[0],_.y[0],_.z[0],0,_.x[1],_.y[1],_.z[1],0,_.x[2],_.y[2],_.z[2],0,0,0,0,1);var b=-d,x=-g,S=-m;return this.cameraMatrix.translate([b,x,S]),this._isActive()&&this._renderer.uMVMatrix.set(this.cameraMatrix.mat4[0],this.cameraMatrix.mat4[1],this.cameraMatrix.mat4[2],this.cameraMatrix.mat4[3],this.cameraMatrix.mat4[4],this.cameraMatrix.mat4[5],this.cameraMatrix.mat4[6],this.cameraMatrix.mat4[7],this.cameraMatrix.mat4[8],this.cameraMatrix.mat4[9],this.cameraMatrix.mat4[10],this.cameraMatrix.mat4[11],this.cameraMatrix.mat4[12],this.cameraMatrix.mat4[13],this.cameraMatrix.mat4[14],this.cameraMatrix.mat4[15]),this},o.default.Camera.prototype.move=function(d,g,m){var c=this._getLocalAxes(),l=[c.x[0]*d,c.x[1]*d,c.x[2]*d],u=[c.y[0]*g,c.y[1]*g,c.y[2]*g],f=[c.z[0]*m,c.z[1]*m,c.z[2]*m];this.camera(this.eyeX+l[0]+u[0]+f[0],this.eyeY+l[1]+u[1]+f[1],this.eyeZ+l[2]+u[2]+f[2],this.centerX+l[0]+u[0]+f[0],this.centerY+l[1]+u[1]+f[1],this.centerZ+l[2]+u[2]+f[2],0,1,0)},o.default.Camera.prototype.setPosition=function(d,g,m){var c=d-this.eyeX,l=g-this.eyeY,u=m-this.eyeZ;this.camera(d,g,m,this.centerX+c,this.centerY+l,this.centerZ+u,0,1,0)},o.default.Camera.prototype._computeCameraDefaultSettings=function(){this.defaultCameraFOV=60/180*Math.PI,this.defaultAspectRatio=this._renderer.width/this._renderer.height,this.defaultEyeX=0,this.defaultEyeY=0,this.defaultEyeZ=this._renderer.height/2/Math.tan(this.defaultCameraFOV/2),this.defaultCenterX=0,this.defaultCenterY=0,this.defaultCenterZ=0,this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ},o.default.Camera.prototype._setDefaultCamera=function(){this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.eyeX=this.defaultEyeX,this.eyeY=this.defaultEyeY,this.eyeZ=this.defaultEyeZ,this.centerX=this.defaultCenterX,this.centerY=this.defaultCenterY,this.centerZ=this.defaultCenterZ,this.upX=0,this.upY=1,this.upZ=0,this.cameraNear=this.defaultCameraNear,this.cameraFar=this.defaultCameraFar,this.perspective(),this.camera(),this.cameraType="default"},o.default.Camera.prototype._resize=function(){this.cameraType==="default"?(this._computeCameraDefaultSettings(),this._setDefaultCamera()):this.perspective(this.cameraFOV,this._renderer.width/this._renderer.height)},o.default.Camera.prototype.copy=function(){var d=new o.default.Camera(this._renderer);return d.cameraFOV=this.cameraFOV,d.aspectRatio=this.aspectRatio,d.eyeX=this.eyeX,d.eyeY=this.eyeY,d.eyeZ=this.eyeZ,d.centerX=this.centerX,d.centerY=this.centerY,d.centerZ=this.centerZ,d.cameraNear=this.cameraNear,d.cameraFar=this.cameraFar,d.cameraType=this.cameraType,d.cameraMatrix=this.cameraMatrix.copy(),d.projMatrix=this.projMatrix.copy(),d},o.default.Camera.prototype._getLocalAxes=function(){var d=this.eyeX-this.centerX,g=this.eyeY-this.centerY,m=this.eyeZ-this.centerZ,c=Math.sqrt(d*d+g*g+m*m);c!==0&&(d/=c,g/=c,m/=c);var l=this.upX,u=this.upY,f=this.upZ,p=u*m-f*g,y=-l*m+f*d,_=l*g-u*d;l=g*_-m*y,u=-d*_+m*p,f=d*y-g*p;var b=Math.sqrt(p*p+y*y+_*_);b!==0&&(p/=b,y/=b,_/=b);var x=Math.sqrt(l*l+u*u+f*f);return x!==0&&(l/=x,u/=x,f/=x),{x:[p,y,_],y:[l,u,f],z:[d,g,m]}},o.default.Camera.prototype._orbit=function(d,g,m){var c=this.eyeX-this.centerX,l=this.eyeY-this.centerY,u=this.eyeZ-this.centerZ,f=Math.sqrt(c*c+l*l+u*u),p=Math.atan2(c,u),y=Math.acos(Math.max(-1,Math.min(1,l/f)));p+=d,(f+=m)<0&&(f=.1),(y+=g)>Math.PI?y=Math.PI:y<=0&&(y=.001);var _=Math.sin(y)*f*Math.sin(p),b=Math.cos(y)*f,x=Math.sin(y)*f*Math.cos(p);this.camera(_+this.centerX,b+this.centerY,x+this.centerZ,this.centerX,this.centerY,this.centerZ,0,1,0)},o.default.Camera.prototype._isActive=function(){return this===this._renderer._curCamera},o.default.prototype.setCamera=function(d){this._renderer._curCamera=d,this._renderer.uPMatrix.set(d.projMatrix.mat4[0],d.projMatrix.mat4[1],d.projMatrix.mat4[2],d.projMatrix.mat4[3],d.projMatrix.mat4[4],d.projMatrix.mat4[5],d.projMatrix.mat4[6],d.projMatrix.mat4[7],d.projMatrix.mat4[8],d.projMatrix.mat4[9],d.projMatrix.mat4[10],d.projMatrix.mat4[11],d.projMatrix.mat4[12],d.projMatrix.mat4[13],d.projMatrix.mat4[14],d.projMatrix.mat4[15])};var h=o.default.Camera;i.default=h},{"../core/main":264}],313:[function(r,s,i){r("core-js/modules/es.string.sub"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a,o=(a=r("../core/main"))&&a.__esModule?a:{default:a};o.default.Geometry=function(d,g,m){return this.vertices=[],this.lineVertices=[],this.lineNormals=[],this.vertexNormals=[],this.faces=[],this.uvs=[],this.edges=[],this.vertexColors=[],this.detailX=d!==void 0?d:1,this.detailY=g!==void 0?g:1,this.dirtyFlags={},m instanceof Function&&m.call(this),this},o.default.Geometry.prototype.reset=function(){this.lineVertices.length=0,this.lineNormals.length=0,this.vertices.length=0,this.edges.length=0,this.vertexColors.length=0,this.vertexNormals.length=0,this.uvs.length=0,this.dirtyFlags={}},o.default.Geometry.prototype.computeFaces=function(){this.faces.length=0;for(var d,g,m,c,l=this.detailX+1,u=0;u<this.detailY;u++)for(var f=0;f<this.detailX;f++)g=(d=u*l+f)+1,m=(u+1)*l+f+1,c=(u+1)*l+f,this.faces.push([d,g,c]),this.faces.push([c,g,m]);return this},o.default.Geometry.prototype._getFaceNormal=function(d){var g=this.faces[d],m=this.vertices[g[0]],c=this.vertices[g[1]],l=this.vertices[g[2]],u=o.default.Vector.sub(c,m),f=o.default.Vector.sub(l,m),p=o.default.Vector.cross(u,f),y=o.default.Vector.mag(p),_=y/(o.default.Vector.mag(u)*o.default.Vector.mag(f));return _===0||isNaN(_)?(console.warn("p5.Geometry.prototype._getFaceNormal:","face has colinear sides or a repeated vertex"),p):(1<_&&(_=1),p.mult(Math.asin(_)/y))},o.default.Geometry.prototype.computeNormals=function(){var d,g=this.vertexNormals,m=this.vertices,c=this.faces;for(d=g.length=0;d<m.length;++d)g.push(new o.default.Vector);for(var l=0;l<c.length;++l)for(var u=c[l],f=this._getFaceNormal(l),p=0;p<3;++p)g[u[p]].add(f);for(d=0;d<m.length;++d)g[d].normalize();return this},o.default.Geometry.prototype.averageNormals=function(){for(var d=0;d<=this.detailY;d++){var g=this.detailX+1,m=o.default.Vector.add(this.vertexNormals[d*g],this.vertexNormals[d*g+this.detailX]);m=o.default.Vector.div(m,2),this.vertexNormals[d*g]=m,this.vertexNormals[d*g+this.detailX]=m}return this},o.default.Geometry.prototype.averagePoleNormals=function(){for(var d=new o.default.Vector(0,0,0),g=0;g<this.detailX;g++)d.add(this.vertexNormals[g]);d=o.default.Vector.div(d,this.detailX);for(var m=0;m<this.detailX;m++)this.vertexNormals[m]=d;d=new o.default.Vector(0,0,0);for(var c=this.vertices.length-1;c>this.vertices.length-1-this.detailX;c--)d.add(this.vertexNormals[c]);d=o.default.Vector.div(d,this.detailX);for(var l=this.vertices.length-1;l>this.vertices.length-1-this.detailX;l--)this.vertexNormals[l]=d;return this},o.default.Geometry.prototype._makeTriangleEdges=function(){if(this.edges.length=0,Array.isArray(this.strokeIndices))for(var d=0,g=this.strokeIndices.length;d<g;d++)this.edges.push(this.strokeIndices[d]);else for(var m=0;m<this.faces.length;m++)this.edges.push([this.faces[m][0],this.faces[m][1]]),this.edges.push([this.faces[m][1],this.faces[m][2]]),this.edges.push([this.faces[m][2],this.faces[m][0]]);return this},o.default.Geometry.prototype._edgesToVertices=function(){this.lineVertices.length=0;for(var d=this.lineNormals.length=0;d<this.edges.length;d++){var g=this.vertices[this.edges[d][0]],m=this.vertices[this.edges[d][1]],c=m.copy().sub(g).normalize(),l=g.array(),u=g.array(),f=m.array(),p=m.array(),y=c.array(),_=c.array();y.push(1),_.push(-1),this.lineNormals.push(y,_,y,y,_,_),this.lineVertices.push(l,u,f,f,u,p)}return this},o.default.Geometry.prototype.normalize=function(){if(0<this.vertices.length){for(var d=this.vertices[0].copy(),g=this.vertices[0].copy(),m=0;m<this.vertices.length;m++)d.x=Math.max(d.x,this.vertices[m].x),g.x=Math.min(g.x,this.vertices[m].x),d.y=Math.max(d.y,this.vertices[m].y),g.y=Math.min(g.y,this.vertices[m].y),d.z=Math.max(d.z,this.vertices[m].z),g.z=Math.min(g.z,this.vertices[m].z);for(var c=o.default.Vector.lerp(d,g,.5),l=o.default.Vector.sub(d,g),u=200/Math.max(Math.max(l.x,l.y),l.z),f=0;f<this.vertices.length;f++)this.vertices[f].sub(c),this.vertices[f].mult(u)}return this};var h=o.default.Geometry;i.default=h},{"../core/main":264,"core-js/modules/es.string.sub":192}],314:[function(r,s,i){r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.typed-array.float32-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a,o=(a=r("../core/main"))&&a.__esModule?a:{default:a},h=Array,d=function(m){return m instanceof Array};typeof Float32Array<"u"&&(h=Float32Array,d=function(m){return m instanceof Array||m instanceof Float32Array}),o.default.Matrix=function(){for(var m=new Array(arguments.length),c=0;c<m.length;++c)m[c]=arguments[c];return m.length&&m[m.length-1]instanceof o.default&&(this.p5=m[m.length-1]),m[0]==="mat3"?this.mat3=Array.isArray(m[1])?m[1]:new h([1,0,0,0,1,0,0,0,1]):this.mat4=Array.isArray(m[0])?m[0]:new h([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this},o.default.Matrix.prototype.set=function(m){return m instanceof o.default.Matrix?this.mat4=m.mat4:d(m)?this.mat4=m:arguments.length===16&&(this.mat4[0]=m,this.mat4[1]=arguments[1],this.mat4[2]=arguments[2],this.mat4[3]=arguments[3],this.mat4[4]=arguments[4],this.mat4[5]=arguments[5],this.mat4[6]=arguments[6],this.mat4[7]=arguments[7],this.mat4[8]=arguments[8],this.mat4[9]=arguments[9],this.mat4[10]=arguments[10],this.mat4[11]=arguments[11],this.mat4[12]=arguments[12],this.mat4[13]=arguments[13],this.mat4[14]=arguments[14],this.mat4[15]=arguments[15]),this},o.default.Matrix.prototype.get=function(){return new o.default.Matrix(this.mat4,this.p5)},o.default.Matrix.prototype.copy=function(){var m=new o.default.Matrix(this.p5);return m.mat4[0]=this.mat4[0],m.mat4[1]=this.mat4[1],m.mat4[2]=this.mat4[2],m.mat4[3]=this.mat4[3],m.mat4[4]=this.mat4[4],m.mat4[5]=this.mat4[5],m.mat4[6]=this.mat4[6],m.mat4[7]=this.mat4[7],m.mat4[8]=this.mat4[8],m.mat4[9]=this.mat4[9],m.mat4[10]=this.mat4[10],m.mat4[11]=this.mat4[11],m.mat4[12]=this.mat4[12],m.mat4[13]=this.mat4[13],m.mat4[14]=this.mat4[14],m.mat4[15]=this.mat4[15],m},o.default.Matrix.identity=function(m){return new o.default.Matrix(m)},o.default.Matrix.prototype.transpose=function(m){var c,l,u,f,p,y;return m instanceof o.default.Matrix?(c=m.mat4[1],l=m.mat4[2],u=m.mat4[3],f=m.mat4[6],p=m.mat4[7],y=m.mat4[11],this.mat4[0]=m.mat4[0],this.mat4[1]=m.mat4[4],this.mat4[2]=m.mat4[8],this.mat4[3]=m.mat4[12],this.mat4[4]=c,this.mat4[5]=m.mat4[5],this.mat4[6]=m.mat4[9],this.mat4[7]=m.mat4[13],this.mat4[8]=l,this.mat4[9]=f,this.mat4[10]=m.mat4[10],this.mat4[11]=m.mat4[14],this.mat4[12]=u,this.mat4[13]=p,this.mat4[14]=y,this.mat4[15]=m.mat4[15]):d(m)&&(c=m[1],l=m[2],u=m[3],f=m[6],p=m[7],y=m[11],this.mat4[0]=m[0],this.mat4[1]=m[4],this.mat4[2]=m[8],this.mat4[3]=m[12],this.mat4[4]=c,this.mat4[5]=m[5],this.mat4[6]=m[9],this.mat4[7]=m[13],this.mat4[8]=l,this.mat4[9]=f,this.mat4[10]=m[10],this.mat4[11]=m[14],this.mat4[12]=u,this.mat4[13]=p,this.mat4[14]=y,this.mat4[15]=m[15]),this},o.default.Matrix.prototype.invert=function(m){var c,l,u,f,p,y,_,b,x,S,E,C,M,I,A,D;m instanceof o.default.Matrix?(c=m.mat4[0],l=m.mat4[1],u=m.mat4[2],f=m.mat4[3],p=m.mat4[4],y=m.mat4[5],_=m.mat4[6],b=m.mat4[7],x=m.mat4[8],S=m.mat4[9],E=m.mat4[10],C=m.mat4[11],M=m.mat4[12],I=m.mat4[13],A=m.mat4[14],D=m.mat4[15]):d(m)&&(c=m[0],l=m[1],u=m[2],f=m[3],p=m[4],y=m[5],_=m[6],b=m[7],x=m[8],S=m[9],E=m[10],C=m[11],M=m[12],I=m[13],A=m[14],D=m[15]);var L=c*y-l*p,O=c*_-u*p,N=c*b-f*p,U=l*_-u*y,K=l*b-f*y,J=u*b-f*_,z=x*I-S*M,H=x*A-E*M,$=x*D-C*M,ne=S*A-E*I,oe=S*D-C*I,_e=E*D-C*A,he=L*_e-O*oe+N*ne+U*$-K*H+J*z;return he?(he=1/he,this.mat4[0]=(y*_e-_*oe+b*ne)*he,this.mat4[1]=(u*oe-l*_e-f*ne)*he,this.mat4[2]=(I*J-A*K+D*U)*he,this.mat4[3]=(E*K-S*J-C*U)*he,this.mat4[4]=(_*$-p*_e-b*H)*he,this.mat4[5]=(c*_e-u*$+f*H)*he,this.mat4[6]=(A*N-M*J-D*O)*he,this.mat4[7]=(x*J-E*N+C*O)*he,this.mat4[8]=(p*oe-y*$+b*z)*he,this.mat4[9]=(l*$-c*oe-f*z)*he,this.mat4[10]=(M*K-I*N+D*L)*he,this.mat4[11]=(S*N-x*K-C*L)*he,this.mat4[12]=(y*H-p*ne-_*z)*he,this.mat4[13]=(c*ne-l*H+u*z)*he,this.mat4[14]=(I*O-M*U-A*L)*he,this.mat4[15]=(x*U-S*O+E*L)*he,this):null},o.default.Matrix.prototype.invert3x3=function(){var m=this.mat3[0],c=this.mat3[1],l=this.mat3[2],u=this.mat3[3],f=this.mat3[4],p=this.mat3[5],y=this.mat3[6],_=this.mat3[7],b=this.mat3[8],x=b*f-p*_,S=-b*u+p*y,E=_*u-f*y,C=m*x+c*S+l*E;return C?(C=1/C,this.mat3[0]=x*C,this.mat3[1]=(-b*c+l*_)*C,this.mat3[2]=(p*c-l*f)*C,this.mat3[3]=S*C,this.mat3[4]=(b*m-l*y)*C,this.mat3[5]=(-p*m+l*u)*C,this.mat3[6]=E*C,this.mat3[7]=(-_*m+c*y)*C,this.mat3[8]=(f*m-c*u)*C,this):null},o.default.Matrix.prototype.transpose3x3=function(m){var c=m[1],l=m[2],u=m[5];return this.mat3[1]=m[3],this.mat3[2]=m[6],this.mat3[3]=c,this.mat3[5]=m[7],this.mat3[6]=l,this.mat3[7]=u,this},o.default.Matrix.prototype.inverseTranspose=function(m){this.mat3===void 0?console.error("sorry, this function only works with mat3"):(this.mat3[0]=m.mat4[0],this.mat3[1]=m.mat4[1],this.mat3[2]=m.mat4[2],this.mat3[3]=m.mat4[4],this.mat3[4]=m.mat4[5],this.mat3[5]=m.mat4[6],this.mat3[6]=m.mat4[8],this.mat3[7]=m.mat4[9],this.mat3[8]=m.mat4[10]);var c=this.invert3x3();if(c)c.transpose3x3(this.mat3);else for(var l=0;l<9;l++)this.mat3[l]=0;return this},o.default.Matrix.prototype.determinant=function(){var m=this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4],c=this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4],l=this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4],u=this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5],f=this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5],p=this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6],y=this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12],_=this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12],b=this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12],x=this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13],S=this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13];return m*(this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14])-c*S+l*x+u*b-f*_+p*y},o.default.Matrix.prototype.mult=function(m){var c;if(m===this||m===this.mat4)c=this.copy().mat4;else if(m instanceof o.default.Matrix)c=m.mat4;else if(d(m))c=m;else{if(arguments.length!==16)return;c=arguments}var l=this.mat4[0],u=this.mat4[1],f=this.mat4[2],p=this.mat4[3];return this.mat4[0]=l*c[0]+u*c[4]+f*c[8]+p*c[12],this.mat4[1]=l*c[1]+u*c[5]+f*c[9]+p*c[13],this.mat4[2]=l*c[2]+u*c[6]+f*c[10]+p*c[14],this.mat4[3]=l*c[3]+u*c[7]+f*c[11]+p*c[15],l=this.mat4[4],u=this.mat4[5],f=this.mat4[6],p=this.mat4[7],this.mat4[4]=l*c[0]+u*c[4]+f*c[8]+p*c[12],this.mat4[5]=l*c[1]+u*c[5]+f*c[9]+p*c[13],this.mat4[6]=l*c[2]+u*c[6]+f*c[10]+p*c[14],this.mat4[7]=l*c[3]+u*c[7]+f*c[11]+p*c[15],l=this.mat4[8],u=this.mat4[9],f=this.mat4[10],p=this.mat4[11],this.mat4[8]=l*c[0]+u*c[4]+f*c[8]+p*c[12],this.mat4[9]=l*c[1]+u*c[5]+f*c[9]+p*c[13],this.mat4[10]=l*c[2]+u*c[6]+f*c[10]+p*c[14],this.mat4[11]=l*c[3]+u*c[7]+f*c[11]+p*c[15],l=this.mat4[12],u=this.mat4[13],f=this.mat4[14],p=this.mat4[15],this.mat4[12]=l*c[0]+u*c[4]+f*c[8]+p*c[12],this.mat4[13]=l*c[1]+u*c[5]+f*c[9]+p*c[13],this.mat4[14]=l*c[2]+u*c[6]+f*c[10]+p*c[14],this.mat4[15]=l*c[3]+u*c[7]+f*c[11]+p*c[15],this},o.default.Matrix.prototype.apply=function(m){var c;if(m===this||m===this.mat4)c=this.copy().mat4;else if(m instanceof o.default.Matrix)c=m.mat4;else if(d(m))c=m;else{if(arguments.length!==16)return;c=arguments}var l=this.mat4,u=l[0],f=l[4],p=l[8],y=l[12];l[0]=c[0]*u+c[1]*f+c[2]*p+c[3]*y,l[4]=c[4]*u+c[5]*f+c[6]*p+c[7]*y,l[8]=c[8]*u+c[9]*f+c[10]*p+c[11]*y,l[12]=c[12]*u+c[13]*f+c[14]*p+c[15]*y;var _=l[1],b=l[5],x=l[9],S=l[13];l[1]=c[0]*_+c[1]*b+c[2]*x+c[3]*S,l[5]=c[4]*_+c[5]*b+c[6]*x+c[7]*S,l[9]=c[8]*_+c[9]*b+c[10]*x+c[11]*S,l[13]=c[12]*_+c[13]*b+c[14]*x+c[15]*S;var E=l[2],C=l[6],M=l[10],I=l[14];l[2]=c[0]*E+c[1]*C+c[2]*M+c[3]*I,l[6]=c[4]*E+c[5]*C+c[6]*M+c[7]*I,l[10]=c[8]*E+c[9]*C+c[10]*M+c[11]*I,l[14]=c[12]*E+c[13]*C+c[14]*M+c[15]*I;var A=l[3],D=l[7],L=l[11],O=l[15];return l[3]=c[0]*A+c[1]*D+c[2]*L+c[3]*O,l[7]=c[4]*A+c[5]*D+c[6]*L+c[7]*O,l[11]=c[8]*A+c[9]*D+c[10]*L+c[11]*O,l[15]=c[12]*A+c[13]*D+c[14]*L+c[15]*O,this},o.default.Matrix.prototype.scale=function(m,c,l){return m instanceof o.default.Vector?(c=m.y,l=m.z,m=m.x):m instanceof Array&&(c=m[1],l=m[2],m=m[0]),this.mat4[0]*=m,this.mat4[1]*=m,this.mat4[2]*=m,this.mat4[3]*=m,this.mat4[4]*=c,this.mat4[5]*=c,this.mat4[6]*=c,this.mat4[7]*=c,this.mat4[8]*=l,this.mat4[9]*=l,this.mat4[10]*=l,this.mat4[11]*=l,this},o.default.Matrix.prototype.rotate=function(m,c,l,u){c instanceof o.default.Vector?(l=c.y,u=c.z,c=c.x):c instanceof Array&&(l=c[1],u=c[2],c=c[0]);var f=Math.sqrt(c*c+l*l+u*u);c*=1/f,l*=1/f,u*=1/f;var p=this.mat4[0],y=this.mat4[1],_=this.mat4[2],b=this.mat4[3],x=this.mat4[4],S=this.mat4[5],E=this.mat4[6],C=this.mat4[7],M=this.mat4[8],I=this.mat4[9],A=this.mat4[10],D=this.mat4[11],L=Math.sin(m),O=Math.cos(m),N=1-O,U=c*c*N+O,K=l*c*N+u*L,J=u*c*N-l*L,z=c*l*N-u*L,H=l*l*N+O,$=u*l*N+c*L,ne=c*u*N+l*L,oe=l*u*N-c*L,_e=u*u*N+O;return this.mat4[0]=p*U+x*K+M*J,this.mat4[1]=y*U+S*K+I*J,this.mat4[2]=_*U+E*K+A*J,this.mat4[3]=b*U+C*K+D*J,this.mat4[4]=p*z+x*H+M*$,this.mat4[5]=y*z+S*H+I*$,this.mat4[6]=_*z+E*H+A*$,this.mat4[7]=b*z+C*H+D*$,this.mat4[8]=p*ne+x*oe+M*_e,this.mat4[9]=y*ne+S*oe+I*_e,this.mat4[10]=_*ne+E*oe+A*_e,this.mat4[11]=b*ne+C*oe+D*_e,this},o.default.Matrix.prototype.translate=function(m){var c=m[0],l=m[1],u=m[2]||0;this.mat4[12]+=this.mat4[0]*c+this.mat4[4]*l+this.mat4[8]*u,this.mat4[13]+=this.mat4[1]*c+this.mat4[5]*l+this.mat4[9]*u,this.mat4[14]+=this.mat4[2]*c+this.mat4[6]*l+this.mat4[10]*u,this.mat4[15]+=this.mat4[3]*c+this.mat4[7]*l+this.mat4[11]*u},o.default.Matrix.prototype.rotateX=function(m){this.rotate(m,1,0,0)},o.default.Matrix.prototype.rotateY=function(m){this.rotate(m,0,1,0)},o.default.Matrix.prototype.rotateZ=function(m){this.rotate(m,0,0,1)},o.default.Matrix.prototype.perspective=function(m,c,l,u){var f=1/Math.tan(m/2),p=1/(l-u);return this.mat4[0]=f/c,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=f,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(u+l)*p,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*u*l*p,this.mat4[15]=0,this},o.default.Matrix.prototype.ortho=function(m,c,l,u,f,p){var y=1/(m-c),_=1/(l-u),b=1/(f-p);return this.mat4[0]=-2*y,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*_,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*b,this.mat4[11]=0,this.mat4[12]=(m+c)*y,this.mat4[13]=(u+l)*_,this.mat4[14]=(p+f)*b,this.mat4[15]=1,this};var g=o.default.Matrix;i.default=g},{"../core/main":264,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.float32-array":203,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223}],315:[function(r,s,i){r("core-js/modules/es.array.map"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a,o=(a=r("../core/main"))&&a.__esModule?a:{default:a};o.default.RenderBuffer=function(d,g,m,c,l,u){this.size=d,this.src=g,this.dst=m,this.attr=c,this._renderer=l,this.map=u},o.default.RenderBuffer.prototype._prepareBuffer=function(d,g){var m,c=g.attributes,l=this._renderer.GL;m=d.model?d.model:d;var u=c[this.attr];if(u){var f=d[this.dst],p=m[this.src];if(0<p.length){var y=!f;if(y&&(d[this.dst]=f=l.createBuffer()),l.bindBuffer(l.ARRAY_BUFFER,f),y||m.dirtyFlags[this.src]!==!1){var _=this.map,b=_?_(p):p;this._renderer._bindBuffer(f,l.ARRAY_BUFFER,b),m.dirtyFlags[this.src]=!1}g.enableAttrib(u,this.size)}}};var h=o.default.RenderBuffer;i.default=h},{"../core/main":264,"core-js/modules/es.array.map":161}],316:[function(r,s,i){function a(c){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(c)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.float32-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o,h=(o=r("../core/main"))&&o.__esModule?o:{default:o},d=function(c){if(c&&c.__esModule)return c;if(c===null||a(c)!=="object"&&typeof c!="function")return{default:c};var l=g();if(l&&l.has(c))return l.get(c);var u={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in c)if(Object.prototype.hasOwnProperty.call(c,p)){var y=f?Object.getOwnPropertyDescriptor(c,p):null;y&&(y.get||y.set)?Object.defineProperty(u,p,y):u[p]=c[p]}return u.default=c,l&&l.set(c,u),u}(r("../core/constants"));function g(){if(typeof WeakMap!="function")return null;var c=new WeakMap;return g=function(){return c},c}r("./p5.RenderBuffer"),h.default.RendererGL.prototype.beginShape=function(c){return this.immediateMode.shapeMode=c!==void 0?c:d.TRIANGLE_FAN,this.immediateMode.geometry.reset(),this},h.default.RendererGL.prototype.vertex=function(c,l){var u,f,p;u=f=p=0,arguments.length===3?u=arguments[2]:arguments.length===4?(f=arguments[2],p=arguments[3]):arguments.length===5&&(u=arguments[2],f=arguments[3],p=arguments[4]);var y=new h.default.Vector(c,l,u);this.immediateMode.geometry.vertices.push(y),this.immediateMode.geometry.vertexNormals.push(this._currentNormal);var _=this.curFillColor||[.5,.5,.5,1];return this.immediateMode.geometry.vertexColors.push(_[0],_[1],_[2],_[3]),this.textureMode===d.IMAGE&&(this._tex!==null?0<this._tex.width&&0<this._tex.height&&(f/=this._tex.width,p/=this._tex.height):this._tex===null&&4<=arguments.length&&console.warn("You must first call texture() before using vertex() with image based u and v coordinates")),this.immediateMode.geometry.uvs.push(f,p),this.immediateMode._bezierVertex[0]=c,this.immediateMode._bezierVertex[1]=l,this.immediateMode._bezierVertex[2]=u,this.immediateMode._quadraticVertex[0]=c,this.immediateMode._quadraticVertex[1]=l,this.immediateMode._quadraticVertex[2]=u,this},h.default.RendererGL.prototype.normal=function(c,l,u){return c instanceof h.default.Vector?this._currentNormal=c:this._currentNormal=new h.default.Vector(c,l,u),this},h.default.RendererGL.prototype.endShape=function(c,l,u,f,p,y){return this.immediateMode.shapeMode===d.POINTS?this._drawPoints(this.immediateMode.geometry.vertices,this.immediateMode.buffers.point):(this._processVertices.apply(this,arguments),this._doFill&&1<this.immediateMode.geometry.vertices.length&&this._drawImmediateFill(),this._doStroke&&1<this.immediateMode.geometry.lineVertices.length&&this._drawImmediateStroke(),this.isBezier=!1,this.isQuadratic=!1,this.isCurve=!1,this.immediateMode._bezierVertex.length=0,this.immediateMode._quadraticVertex.length=0,this.immediateMode._curveVertex.length=0),this},h.default.RendererGL.prototype._processVertices=function(c){if(this.immediateMode.geometry.vertices.length!==0){var l=this._doStroke&&this.drawMode!==d.TEXTURE,u=c===d.CLOSE;l&&(this.immediateMode.geometry.edges=this._calculateEdges(this.immediateMode.shapeMode,this.immediateMode.geometry.vertices,u),this.immediateMode.geometry._edgesToVertices());var f=this.immediateMode.shapeMode===d.TESS;(this.isBezier||this.isQuadratic||this.isCurve||f)&&this.immediateMode.shapeMode!==d.LINES&&this._tesselateShape()}},h.default.RendererGL.prototype._calculateEdges=function(c,l,u){var f=[],p=0;switch(c){case d.TRIANGLE_STRIP:for(p=0;p<l.length-2;p++)f.push([p,p+1]),f.push([p,p+2]);f.push([p,p+1]);break;case d.TRIANGLES:for(p=0;p<l.length-2;p+=3)f.push([p,p+1]),f.push([p+1,p+2]),f.push([p+2,p]);break;case d.LINES:for(p=0;p<l.length-1;p+=2)f.push([p,p+1]);break;default:for(p=0;p<l.length-1;p++)f.push([p,p+1])}return u&&f.push([l.length-1,0]),f},h.default.RendererGL.prototype._tesselateShape=function(){this.immediateMode.shapeMode=d.TRIANGLES;var c=[new Float32Array(this._vToNArray(this.immediateMode.geometry.vertices))],l=this._triangulate(c);this.immediateMode.geometry.vertices=[];for(var u=0,f=l.length;u<f;u+=3)this.vertex(l[u],l[u+1],l[u+2])},h.default.RendererGL.prototype._drawImmediateFill=function(){var c=this.GL,l=this._getImmediateFillShader();this._setFillUniforms(l);var u=!0,f=!1,p=void 0;try{for(var y,_=this.immediateMode.buffers.fill[Symbol.iterator]();!(u=(y=_.next()).done);u=!0)y.value._prepareBuffer(this.immediateMode.geometry,l)}catch(b){f=!0,p=b}finally{try{u||_.return==null||_.return()}finally{if(f)throw p}}this.immediateMode.shapeMode!==d.LINE_STRIP&&this.immediateMode.shapeMode!==d.LINES||(this.immediateMode.shapeMode=d.TRIANGLE_FAN),this._applyColorBlend(this.curFillColor),c.drawArrays(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length),l.unbindShader()},h.default.RendererGL.prototype._drawImmediateStroke=function(){var c=this.GL,l=this._getImmediateStrokeShader();this._setStrokeUniforms(l);var u=!0,f=!1,p=void 0;try{for(var y,_=this.immediateMode.buffers.stroke[Symbol.iterator]();!(u=(y=_.next()).done);u=!0)y.value._prepareBuffer(this.immediateMode.geometry,l)}catch(b){f=!0,p=b}finally{try{u||_.return==null||_.return()}finally{if(f)throw p}}this._applyColorBlend(this.curStrokeColor),c.drawArrays(c.TRIANGLES,0,this.immediateMode.geometry.lineVertices.length),l.unbindShader()};var m=h.default.RendererGL;i.default=m},{"../core/constants":253,"../core/main":264,"./p5.RenderBuffer":315,"core-js/modules/es.array.fill":151,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.float32-array":203,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/web.dom-collections.iterator":229}],317:[function(r,s,i){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.some"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.float32-array"),r("core-js/modules/es.typed-array.uint16-array"),r("core-js/modules/es.typed-array.uint32-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a,o=(a=r("../core/main"))&&a.__esModule?a:{default:a};r("./p5.RendererGL"),r("./p5.RenderBuffer");var h=0;o.default.RendererGL.prototype._initBufferDefaults=function(g){if(this._freeBuffers(g),1e3<++h){var m=Object.keys(this.retainedMode.geometry)[0];delete this.retainedMode.geometry[m],h--}return this.retainedMode.geometry[g]={}},o.default.RendererGL.prototype._freeBuffers=function(g){var m=this.retainedMode.geometry[g];if(m){delete this.retainedMode.geometry[g],h--;var c=this.GL;m.indexBuffer&&c.deleteBuffer(m.indexBuffer),l(this.retainedMode.buffers.stroke),l(this.retainedMode.buffers.fill)}function l(u){var f=!0,p=!1,y=void 0;try{for(var _,b=u[Symbol.iterator]();!(f=(_=b.next()).done);f=!0){var x=_.value;m[x.dst]&&(c.deleteBuffer(m[x.dst]),m[x.dst]=null)}}catch(S){p=!0,y=S}finally{try{f||b.return==null||b.return()}finally{if(p)throw y}}}},o.default.RendererGL.prototype.createBuffers=function(g,m){var c=this.GL,l=this._initBufferDefaults(g);l.model=m;var u=l.indexBuffer;if(m.faces.length){u=u||(l.indexBuffer=c.createBuffer());var f=o.default.RendererGL.prototype._flatten(m.faces),p=f.some(function(_){return 65535<_}),y=p?Uint32Array:Uint16Array;this._bindBuffer(u,c.ELEMENT_ARRAY_BUFFER,f,y),l.indexBufferType=p?c.UNSIGNED_INT:c.UNSIGNED_SHORT,l.vertexCount=3*m.faces.length}else u&&(c.deleteBuffer(u),l.indexBuffer=null),l.vertexCount=m.vertices?m.vertices.length:0;return l.lineVertexCount=m.lineVertices?m.lineVertices.length:0,l},o.default.RendererGL.prototype.drawBuffers=function(g){var m=this.GL,c=this.retainedMode.geometry[g];if(this._doStroke&&0<c.lineVertexCount){var l=this._getRetainedStrokeShader();this._setStrokeUniforms(l);var u=!0,f=!1,p=void 0;try{for(var y,_=this.retainedMode.buffers.stroke[Symbol.iterator]();!(u=(y=_.next()).done);u=!0)y.value._prepareBuffer(c,l)}catch(I){f=!0,p=I}finally{try{u||_.return==null||_.return()}finally{if(f)throw p}}this._applyColorBlend(this.curStrokeColor),this._drawArrays(m.TRIANGLES,g),l.unbindShader()}if(this._doFill){var b=this._getRetainedFillShader();this._setFillUniforms(b);var x=!0,S=!1,E=void 0;try{for(var C,M=this.retainedMode.buffers.fill[Symbol.iterator]();!(x=(C=M.next()).done);x=!0)C.value._prepareBuffer(c,b)}catch(I){S=!0,E=I}finally{try{x||M.return==null||M.return()}finally{if(S)throw E}}c.indexBuffer&&this._bindBuffer(c.indexBuffer,m.ELEMENT_ARRAY_BUFFER),this._applyColorBlend(this.curFillColor),this._drawElements(m.TRIANGLES,g),b.unbindShader()}return this},o.default.RendererGL.prototype.drawBuffersScaled=function(g,m,c,l){var u=this.uMVMatrix.copy();try{this.uMVMatrix.scale(m,c,l),this.drawBuffers(g)}finally{this.uMVMatrix=u}},o.default.RendererGL.prototype._drawArrays=function(g,m){return this.GL.drawArrays(g,0,this.retainedMode.geometry[m].lineVertexCount),this},o.default.RendererGL.prototype._drawElements=function(g,m){var c=this.retainedMode.geometry[m],l=this.GL;if(c.indexBuffer){if(c.indexBufferType===l.UNSIGNED_INT&&!l.getExtension("OES_element_index_uint"))throw new Error("Unable to render a 3d model with > 65535 triangles. Your web browser does not support the WebGL Extension OES_element_index_uint.");l.drawElements(l.TRIANGLES,c.vertexCount,c.indexBufferType,0)}else l.drawArrays(g||l.TRIANGLES,0,c.vertexCount)},o.default.RendererGL.prototype._drawPoints=function(g,m){var c=this.GL,l=this._getImmediatePointShader();this._setPointUniforms(l),this._bindBuffer(m,c.ARRAY_BUFFER,this._vToNArray(g),Float32Array,c.STATIC_DRAW),l.enableAttrib(l.attributes.aPosition,3),c.drawArrays(c.Points,0,g.length),l.unbindShader()};var d=o.default.RendererGL;i.default=d},{"../core/main":264,"./p5.RenderBuffer":315,"./p5.RendererGL":318,"core-js/modules/es.array.fill":151,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.some":163,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.float32-array":203,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint16-array":224,"core-js/modules/es.typed-array.uint32-array":225,"core-js/modules/web.dom-collections.iterator":229}],318:[function(r,s,i){function a(p){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(p)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.float32-array"),r("core-js/modules/es.typed-array.float64-array"),r("core-js/modules/es.typed-array.int16-array"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.uint16-array"),r("core-js/modules/es.typed-array.uint32-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=m(r("../core/main")),h=function(p){if(p&&p.__esModule)return p;if(p===null||a(p)!=="object"&&typeof p!="function")return{default:p};var y=g();if(y&&y.has(p))return y.get(p);var _={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var x in p)if(Object.prototype.hasOwnProperty.call(p,x)){var S=b?Object.getOwnPropertyDescriptor(p,x):null;S&&(S.get||S.set)?Object.defineProperty(_,x,S):_[x]=p[x]}return _.default=p,y&&y.set(p,_),_}(r("../core/constants")),d=m(r("libtess"));r("./p5.Shader"),r("./p5.Camera"),r("../core/p5.Renderer"),r("./p5.Matrix"),r("path");function g(){if(typeof WeakMap!="function")return null;var p=new WeakMap;return g=function(){return p},p}function m(p){return p&&p.__esModule?p:{default:p}}function c(p){return function(y){if(Array.isArray(y)){for(var _=0,b=new Array(y.length);_<y.length;_++)b[_]=y[_];return b}}(p)||function(y){if(Symbol.iterator in Object(y)||Object.prototype.toString.call(y)==="[object Arguments]")return Array.from(y)}(p)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var l=`precision highp float;
precision highp int;

uniform mat4 uViewMatrix;

uniform bool uUseLighting;

uniform int uAmbientLightCount;
uniform vec3 uAmbientColor[5];

uniform int uDirectionalLightCount;
uniform vec3 uLightingDirection[5];
uniform vec3 uDirectionalDiffuseColors[5];
uniform vec3 uDirectionalSpecularColors[5];

uniform int uPointLightCount;
uniform vec3 uPointLightLocation[5];
uniform vec3 uPointLightDiffuseColors[5];	
uniform vec3 uPointLightSpecularColors[5];

uniform int uSpotLightCount;
uniform float uSpotLightAngle[5];
uniform float uSpotLightConc[5];
uniform vec3 uSpotLightDiffuseColors[5];
uniform vec3 uSpotLightSpecularColors[5];
uniform vec3 uSpotLightLocation[5];
uniform vec3 uSpotLightDirection[5];

uniform bool uSpecular;
uniform float uShininess;

uniform float uConstantAttenuation;
uniform float uLinearAttenuation;
uniform float uQuadraticAttenuation;

const float specularFactor = 2.0;
const float diffuseFactor = 0.73;

struct LightResult {
  float specular;
  float diffuse;
};

float _phongSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float shininess) {

  vec3 R = reflect(lightDirection, surfaceNormal);
  return pow(max(0.0, dot(R, viewDirection)), shininess);
}

float _lambertDiffuse(vec3 lightDirection, vec3 surfaceNormal) {
  return max(0.0, dot(-lightDirection, surfaceNormal));
}

LightResult _light(vec3 viewDirection, vec3 normal, vec3 lightVector) {

  vec3 lightDir = normalize(lightVector);

  //compute our diffuse & specular terms
  LightResult lr;
  if (uSpecular)
    lr.specular = _phongSpecular(lightDir, viewDirection, normal, uShininess);
  lr.diffuse = _lambertDiffuse(lightDir, normal);
  return lr;
}

void totalLight(
  vec3 modelPosition,
  vec3 normal,
  out vec3 totalDiffuse,
  out vec3 totalSpecular
) {

  totalSpecular = vec3(0.0);

  if (!uUseLighting) {
    totalDiffuse = vec3(1.0);
    return;
  }

  totalDiffuse = vec3(0.0);

  vec3 viewDirection = normalize(-modelPosition);

  for (int j = 0; j < 5; j++) {
    if (j < uDirectionalLightCount) {
      vec3 lightVector = (uViewMatrix * vec4(uLightingDirection[j], 0.0)).xyz;
      vec3 lightColor = uDirectionalDiffuseColors[j];
      vec3 specularColor = uDirectionalSpecularColors[j];
      LightResult result = _light(viewDirection, normal, lightVector);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if (j < uPointLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uPointLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
    
      //calculate attenuation
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);
      vec3 lightColor = lightFalloff * uPointLightDiffuseColors[j];
      vec3 specularColor = lightFalloff * uPointLightSpecularColors[j];

      LightResult result = _light(viewDirection, normal, lightVector);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if(j < uSpotLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uSpotLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
    
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);

      vec3 lightDirection = (uViewMatrix * vec4(uSpotLightDirection[j], 0.0)).xyz;
      float spotDot = dot(normalize(lightVector), normalize(lightDirection));
      float spotFalloff;
      if(spotDot < uSpotLightAngle[j]) {
        spotFalloff = 0.0;
      }
      else {
        spotFalloff = pow(spotDot, uSpotLightConc[j]);
      }
      lightFalloff *= spotFalloff;

      vec3 lightColor = uSpotLightDiffuseColors[j];
      vec3 specularColor = uSpotLightSpecularColors[j];
     
      LightResult result = _light(viewDirection, normal, lightVector);
      
      totalDiffuse += result.diffuse * lightColor * lightFalloff;
      totalSpecular += result.specular * lightColor * specularColor * lightFalloff;
    }
  }

  totalDiffuse *= diffuseFactor;
  totalSpecular *= specularFactor;
}
`,u={immediateVert:`attribute vec3 aPosition;
attribute vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uResolution;
uniform float uPointSize;

varying vec4 vColor;
void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
  gl_PointSize = uPointSize;
}
`,vertexColorVert:`attribute vec3 aPosition;
attribute vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

varying vec4 vColor;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
}
`,vertexColorFrag:`precision mediump float;
varying vec4 vColor;
void main(void) {
  gl_FragColor = vColor;
}`,normalVert:`attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

varying vec3 vVertexNormal;
varying highp vec2 vVertTexCoord;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vVertexNormal = normalize(vec3( uNormalMatrix * aNormal ));
  vVertTexCoord = aTexCoord;
}
`,normalFrag:`precision mediump float;
varying vec3 vVertexNormal;
void main(void) {
  gl_FragColor = vec4(vVertexNormal, 1.0);
}`,basicFrag:`precision mediump float;
uniform vec4 uMaterialColor;
void main(void) {
  gl_FragColor = uMaterialColor;
}`,lightVert:l+`// include lighting.glgl

attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

varying highp vec2 vVertTexCoord;
varying vec3 vDiffuseColor;
varying vec3 vSpecularColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * viewModelPosition;

  vec3 vertexNormal = normalize(uNormalMatrix * aNormal);
  vVertTexCoord = aTexCoord;

  totalLight(viewModelPosition.xyz, vertexNormal, vDiffuseColor, vSpecularColor);

  for (int i = 0; i < 8; i++) {
    if (i < uAmbientLightCount) {
      vDiffuseColor += uAmbientColor[i];
    }
  }
}
`,lightTextureFrag:`precision highp float;

uniform vec4 uMaterialColor;
uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;
uniform bool uEmissive;

varying highp vec2 vVertTexCoord;
varying vec3 vDiffuseColor;
varying vec3 vSpecularColor;

void main(void) {
  if(uEmissive && !isTexture) {
    gl_FragColor = uMaterialColor;
  }
  else {
    gl_FragColor = isTexture ? texture2D(uSampler, vVertTexCoord) * (uTint / vec4(255, 255, 255, 255)) : uMaterialColor;
    gl_FragColor.rgb = gl_FragColor.rgb * vDiffuseColor + vSpecularColor;
  }
}`,phongVert:`precision highp float;
precision highp int;

attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;

uniform vec3 uAmbientColor[5];

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;
uniform int uAmbientLightCount;

varying vec3 vNormal;
varying vec2 vTexCoord;
varying vec3 vViewPosition;
varying vec3 vAmbientColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);

  // Pass varyings to fragment shader
  vViewPosition = viewModelPosition.xyz;
  gl_Position = uProjectionMatrix * viewModelPosition;  

  vNormal = uNormalMatrix * aNormal;
  vTexCoord = aTexCoord;

  // TODO: this should be a uniform
  vAmbientColor = vec3(0.0);
  for (int i = 0; i < 5; i++) {
    if (i < uAmbientLightCount) {
      vAmbientColor += uAmbientColor[i];
    }
  }
}
`,phongFrag:l+`// include lighting.glsl
precision highp float;
precision highp int;

uniform vec4 uMaterialColor;
uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;
uniform bool uEmissive;

varying vec3 vNormal;
varying vec2 vTexCoord;
varying vec3 vViewPosition;
varying vec3 vAmbientColor;

void main(void) {

  vec3 diffuse;
  vec3 specular;
  totalLight(vViewPosition, normalize(vNormal), diffuse, specular);

  if(uEmissive && !isTexture) {
    gl_FragColor = uMaterialColor;
  }
  else {
    gl_FragColor = isTexture ? texture2D(uSampler, vTexCoord) * (uTint / vec4(255, 255, 255, 255)) : uMaterialColor;
    gl_FragColor.rgb = gl_FragColor.rgb * (diffuse + vAmbientColor) + specular;
  }
}`,fontVert:`precision mediump float;

attribute vec3 aPosition;
attribute vec2 aTexCoord;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

uniform vec4 uGlyphRect;
uniform float uGlyphOffset;

varying vec2 vTexCoord;
varying float w;

void main() {
  vec4 positionVec4 = vec4(aPosition, 1.0);

  // scale by the size of the glyph's rectangle
  positionVec4.xy *= uGlyphRect.zw - uGlyphRect.xy;

  // move to the corner of the glyph
  positionVec4.xy += uGlyphRect.xy;

  // move to the letter's line offset
  positionVec4.x += uGlyphOffset;
  
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vTexCoord = aTexCoord;
  w = gl_Position.w;
}
`,fontFrag:`#extension GL_OES_standard_derivatives : enable
precision mediump float;

#if 0
  // simulate integer math using floats
	#define int float
	#define ivec2 vec2
	#define INT(x) float(x)

	int ifloor(float v) { return floor(v); }
	ivec2 ifloor(vec2 v) { return floor(v); }

#else
  // use native integer math
	precision highp int;
	#define INT(x) x

	int ifloor(float v) { return int(v); }
	int ifloor(int v) { return v; }
	ivec2 ifloor(vec2 v) { return ivec2(v); }

#endif

uniform sampler2D uSamplerStrokes;
uniform sampler2D uSamplerRowStrokes;
uniform sampler2D uSamplerRows;
uniform sampler2D uSamplerColStrokes;
uniform sampler2D uSamplerCols;

uniform ivec2 uStrokeImageSize;
uniform ivec2 uCellsImageSize;
uniform ivec2 uGridImageSize;

uniform ivec2 uGridOffset;
uniform ivec2 uGridSize;
uniform vec4 uMaterialColor;

varying vec2 vTexCoord;

// some helper functions
int round(float v) { return ifloor(v + 0.5); }
ivec2 round(vec2 v) { return ifloor(v + 0.5); }
float saturate(float v) { return clamp(v, 0.0, 1.0); }
vec2 saturate(vec2 v) { return clamp(v, 0.0, 1.0); }

int mul(float v1, int v2) {
  return ifloor(v1 * float(v2));
}

ivec2 mul(vec2 v1, ivec2 v2) {
  return ifloor(v1 * vec2(v2) + 0.5);
}

// unpack a 16-bit integer from a float vec2
int getInt16(vec2 v) {
  ivec2 iv = round(v * 255.0);
  return iv.x * INT(128) + iv.y;
}

vec2 pixelScale;
vec2 coverage = vec2(0.0);
vec2 weight = vec2(0.5);
const float minDistance = 1.0/8192.0;
const float hardness = 1.05; // amount of antialias

// the maximum number of curves in a glyph
const int N = INT(250);

// retrieves an indexed pixel from a sampler
vec4 getTexel(sampler2D sampler, int pos, ivec2 size) {
  int width = size.x;
  int y = ifloor(pos / width);
  int x = pos - y * width;  // pos % width

  return texture2D(sampler, (vec2(x, y) + 0.5) / vec2(size));
}

void calulateCrossings(vec2 p0, vec2 p1, vec2 p2, out vec2 C1, out vec2 C2) {

  // get the coefficients of the quadratic in t
  vec2 a = p0 - p1 * 2.0 + p2;
  vec2 b = p0 - p1;
  vec2 c = p0 - vTexCoord;

  // found out which values of 't' it crosses the axes
  vec2 surd = sqrt(max(vec2(0.0), b * b - a * c));
  vec2 t1 = ((b - surd) / a).yx;
  vec2 t2 = ((b + surd) / a).yx;

  // approximate straight lines to avoid rounding errors
  if (abs(a.y) < 0.001)
    t1.x = t2.x = c.y / (2.0 * b.y);

  if (abs(a.x) < 0.001)
    t1.y = t2.y = c.x / (2.0 * b.x);

  // plug into quadratic formula to find the corrdinates of the crossings
  C1 = ((a * t1 - b * 2.0) * t1 + c) * pixelScale;
  C2 = ((a * t2 - b * 2.0) * t2 + c) * pixelScale;
}

void coverageX(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  // determine on which side of the x-axis the points lie
  bool y0 = p0.y > vTexCoord.y;
  bool y1 = p1.y > vTexCoord.y;
  bool y2 = p2.y > vTexCoord.y;

  // could web be under the curve (after t1)?
  if (y1 ? !y2 : y0) {
    // add the coverage for t1
    coverage.x += saturate(C1.x + 0.5);
    // calculate the anti-aliasing for t1
    weight.x = min(weight.x, abs(C1.x));
  }

  // are we outside the curve (after t2)?
  if (y1 ? !y0 : y2) {
    // subtract the coverage for t2
    coverage.x -= saturate(C2.x + 0.5);
    // calculate the anti-aliasing for t2
    weight.x = min(weight.x, abs(C2.x));
  }
}

// this is essentially the same as coverageX, but with the axes swapped
void coverageY(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  bool x0 = p0.x > vTexCoord.x;
  bool x1 = p1.x > vTexCoord.x;
  bool x2 = p2.x > vTexCoord.x;

  if (x1 ? !x2 : x0) {
    coverage.y -= saturate(C1.y + 0.5);
    weight.y = min(weight.y, abs(C1.y));
  }

  if (x1 ? !x0 : x2) {
    coverage.y += saturate(C2.y + 0.5);
    weight.y = min(weight.y, abs(C2.y));
  }
}

void main() {

  // calculate the pixel scale based on screen-coordinates
  pixelScale = hardness / fwidth(vTexCoord);

  // which grid cell is this pixel in?
  ivec2 gridCoord = ifloor(vTexCoord * vec2(uGridSize));

  // intersect curves in this row
  {
    // the index into the row info bitmap
    int rowIndex = gridCoord.y + uGridOffset.y;
    // fetch the info texel
    vec4 rowInfo = getTexel(uSamplerRows, rowIndex, uGridImageSize);
    // unpack the rowInfo
    int rowStrokeIndex = getInt16(rowInfo.xy);
    int rowStrokeCount = getInt16(rowInfo.zw);

    for (int iRowStroke = INT(0); iRowStroke < N; iRowStroke++) {
      if (iRowStroke >= rowStrokeCount)
        break;

      // each stroke is made up of 3 points: the start and control point
      // and the start of the next curve.
      // fetch the indices of this pair of strokes:
      vec4 strokeIndices = getTexel(uSamplerRowStrokes, rowStrokeIndex++, uCellsImageSize);

      // unpack the stroke index
      int strokePos = getInt16(strokeIndices.xy);

      // fetch the two strokes
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);

      // calculate the coverage
      coverageX(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  // intersect curves in this column
  {
    int colIndex = gridCoord.x + uGridOffset.x;
    vec4 colInfo = getTexel(uSamplerCols, colIndex, uGridImageSize);
    int colStrokeIndex = getInt16(colInfo.xy);
    int colStrokeCount = getInt16(colInfo.zw);
    
    for (int iColStroke = INT(0); iColStroke < N; iColStroke++) {
      if (iColStroke >= colStrokeCount)
        break;

      vec4 strokeIndices = getTexel(uSamplerColStrokes, colStrokeIndex++, uCellsImageSize);

      int strokePos = getInt16(strokeIndices.xy);
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);
      coverageY(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  weight = saturate(1.0 - weight * 2.0);
  float distance = max(weight.x + weight.y, minDistance); // manhattan approx.
  float antialias = abs(dot(coverage, weight) / distance);
  float cover = min(abs(coverage.x), abs(coverage.y));
  gl_FragColor = uMaterialColor;
  gl_FragColor.a *= saturate(max(antialias, cover));
}`,lineVert:`/*
  Part of the Processing project - http://processing.org
  Copyright (c) 2012-15 The Processing Foundation
  Copyright (c) 2004-12 Ben Fry and Casey Reas
  Copyright (c) 2001-04 Massachusetts Institute of Technology
  This library is free software; you can redistribute it and/or
  modify it under the terms of the GNU Lesser General Public
  License as published by the Free Software Foundation, version 2.1.
  This library is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
  Lesser General Public License for more details.
  You should have received a copy of the GNU Lesser General
  Public License along with this library; if not, write to the
  Free Software Foundation, Inc., 59 Temple Place, Suite 330,
  Boston, MA  02111-1307  USA
*/

#define PROCESSING_LINE_SHADER

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uStrokeWeight;

uniform vec4 uViewport;
uniform int uPerspective;

attribute vec4 aPosition;
attribute vec4 aDirection;
  
void main() {
  // using a scale <1 moves the lines towards the camera
  // in order to prevent popping effects due to half of
  // the line disappearing behind the geometry faces.
  vec3 scale = vec3(0.9995);

  vec4 posp = uModelViewMatrix * aPosition;
  vec4 posq = uModelViewMatrix * (aPosition + vec4(aDirection.xyz, 0));

  // Moving vertices slightly toward the camera
  // to avoid depth-fighting with the fill triangles.
  // Discussed here:
  // http://www.opengl.org/discussion_boards/ubbthreads.php?ubb=showflat&Number=252848  
  posp.xyz = posp.xyz * scale;
  posq.xyz = posq.xyz * scale;

  vec4 p = uProjectionMatrix * posp;
  vec4 q = uProjectionMatrix * posq;

  // formula to convert from clip space (range -1..1) to screen space (range 0..[width or height])
  // screen_p = (p.xy/p.w + <1,1>) * 0.5 * uViewport.zw

  // prevent division by W by transforming the tangent formula (div by 0 causes
  // the line to disappear, see https://github.com/processing/processing/issues/5183)
  // t = screen_q - screen_p
  //
  // tangent is normalized and we don't care which aDirection it points to (+-)
  // t = +- normalize( screen_q - screen_p )
  // t = +- normalize( (q.xy/q.w+<1,1>)*0.5*uViewport.zw - (p.xy/p.w+<1,1>)*0.5*uViewport.zw )
  //
  // extract common factor, <1,1> - <1,1> cancels out
  // t = +- normalize( (q.xy/q.w - p.xy/p.w) * 0.5 * uViewport.zw )
  //
  // convert to common divisor
  // t = +- normalize( ((q.xy*p.w - p.xy*q.w) / (p.w*q.w)) * 0.5 * uViewport.zw )
  //
  // remove the common scalar divisor/factor, not needed due to normalize and +-
  // (keep uViewport - can't remove because it has different components for x and y
  //  and corrects for aspect ratio, see https://github.com/processing/processing/issues/5181)
  // t = +- normalize( (q.xy*p.w - p.xy*q.w) * uViewport.zw )

  vec2 tangent = normalize((q.xy*p.w - p.xy*q.w) * uViewport.zw);

  // flip tangent to normal (it's already normalized)
  vec2 normal = vec2(-tangent.y, tangent.x);

  float thickness = aDirection.w * uStrokeWeight;
  vec2 offset = normal * thickness / 2.0;

  vec2 curPerspScale;

  if(uPerspective == 1) {
    // Perspective ---
    // convert from world to clip by multiplying with projection scaling factor
    // to get the right thickness (see https://github.com/processing/processing/issues/5182)
    // invert Y, projections in Processing invert Y
    curPerspScale = (uProjectionMatrix * vec4(1, -1, 0, 0)).xy;
  } else {
    // No Perspective ---
    // multiply by W (to cancel out division by W later in the pipeline) and
    // convert from screen to clip (derived from clip to screen above)
    curPerspScale = p.w / (0.5 * uViewport.zw);
  }

  gl_Position.xy = p.xy + offset.xy * curPerspScale;
  gl_Position.zw = p.zw;
}
`,lineFrag:`precision mediump float;
precision mediump int;

uniform vec4 uMaterialColor;

void main() {
  gl_FragColor = uMaterialColor;
}`,pointVert:`attribute vec3 aPosition;
uniform float uPointSize;
varying float vStrokeWeight;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
void main() {
	vec4 positionVec4 =  vec4(aPosition, 1.0);
	gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
	gl_PointSize = uPointSize;
	vStrokeWeight = uPointSize;
}`,pointFrag:`precision mediump float;
precision mediump int;
uniform vec4 uMaterialColor;
varying float vStrokeWeight;

void main(){
	float mask = 0.0;

	// make a circular mask using the gl_PointCoord (goes from 0 - 1 on a point)
    // might be able to get a nicer edge on big strokeweights with smoothstep but slightly less performant

	mask = step(0.98, length(gl_PointCoord * 2.0 - 1.0));

	// if strokeWeight is 1 or less lets just draw a square
	// this prevents weird artifacting from carving circles when our points are really small
	// if strokeWeight is larger than 1, we just use it as is

	mask = mix(0.0, mask, clamp(floor(vStrokeWeight - 0.5),0.0,1.0));

	// throw away the borders of the mask
    // otherwise we get weird alpha blending issues

	if(mask > 0.98){
      discard;
  	}

  	gl_FragColor = vec4(uMaterialColor.rgb * (1.0 - mask), uMaterialColor.a) ;
}`};o.default.RendererGL=function(p,y,_,b){return o.default.Renderer.call(this,p,y,_),this._setAttributeDefaults(y),this._initContext(),this.isP3D=!0,this.GL=this.drawingContext,this._pInst._setProperty("drawingContext",this.drawingContext),this._isErasing=!1,this._enableLighting=!1,this.ambientLightColors=[],this.specularColors=[1,1,1],this.directionalLightDirections=[],this.directionalLightDiffuseColors=[],this.directionalLightSpecularColors=[],this.pointLightPositions=[],this.pointLightDiffuseColors=[],this.pointLightSpecularColors=[],this.spotLightPositions=[],this.spotLightDirections=[],this.spotLightDiffuseColors=[],this.spotLightSpecularColors=[],this.spotLightAngle=[],this.spotLightConc=[],this.drawMode=h.FILL,this.curFillColor=this._cachedFillStyle=[1,1,1,1],this.curStrokeColor=this._cachedStrokeStyle=[0,0,0,1],this.curBlendMode=h.BLEND,this._cachedBlendMode=void 0,this.blendExt=this.GL.getExtension("EXT_blend_minmax"),this._isBlending=!1,this._useSpecularMaterial=!1,this._useEmissiveMaterial=!1,this._useNormalMaterial=!1,this._useShininess=1,this._tint=[255,255,255,255],this.constantAttenuation=1,this.linearAttenuation=0,this.quadraticAttenuation=0,this.uMVMatrix=new o.default.Matrix,this.uPMatrix=new o.default.Matrix,this.uNMatrix=new o.default.Matrix("mat3"),this._currentNormal=new o.default.Vector(0,0,1),this._curCamera=new o.default.Camera(this),this._curCamera._computeCameraDefaultSettings(),this._curCamera._setDefaultCamera(),this._defaultLightShader=void 0,this._defaultImmediateModeShader=void 0,this._defaultNormalShader=void 0,this._defaultColorShader=void 0,this._defaultPointShader=void 0,this.userFillShader=void 0,this.userStrokeShader=void 0,this.userPointShader=void 0,this.retainedMode={geometry:{},buffers:{stroke:[new o.default.RenderBuffer(3,"lineVertices","lineVertexBuffer","aPosition",this,this._flatten),new o.default.RenderBuffer(4,"lineNormals","lineNormalBuffer","aDirection",this,this._flatten)],fill:[new o.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",this,this._vToNArray),new o.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",this,this._vToNArray),new o.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",this),new o.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",this),new o.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",this,this._flatten)],text:[new o.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",this,this._vToNArray),new o.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",this,this._flatten)]}},this.immediateMode={geometry:new o.default.Geometry,shapeMode:h.TRIANGLE_FAN,_bezierVertex:[],_quadraticVertex:[],_curveVertex:[],buffers:{fill:[new o.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",this,this._vToNArray),new o.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",this,this._vToNArray),new o.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",this),new o.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",this),new o.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",this,this._flatten)],stroke:[new o.default.RenderBuffer(3,"lineVertices","lineVertexBuffer","aPosition",this,this._flatten),new o.default.RenderBuffer(4,"lineNormals","lineNormalBuffer","aDirection",this,this._flatten)],point:this.GL.createBuffer()}},this.pointSize=5,this.curStrokeWeight=1,this.textures=[],this.textureMode=h.IMAGE,this.textureWrapX=h.CLAMP,this.textureWrapY=h.CLAMP,this._tex=null,this._curveTightness=6,this._lookUpTableBezier=[],this._lookUpTableQuadratic=[],this._lutBezierDetail=0,this._lutQuadraticDetail=0,this._tessy=this._initTessy(),this.fontInfos={},this._curShader=void 0,this},o.default.RendererGL.prototype=Object.create(o.default.Renderer.prototype),o.default.RendererGL.prototype._setAttributeDefaults=function(p){var y={alpha:!1,depth:!0,stencil:!0,antialias:navigator.userAgent.toLowerCase().includes("safari"),premultipliedAlpha:!1,preserveDrawingBuffer:!0,perPixelLighting:!0};p._glAttributes===null?p._glAttributes=y:p._glAttributes=Object.assign(y,p._glAttributes)},o.default.RendererGL.prototype._initContext=function(){try{if(this.drawingContext=this.canvas.getContext("webgl",this._pInst._glAttributes)||this.canvas.getContext("experimental-webgl",this._pInst._glAttributes),this.drawingContext===null)throw new Error("Error creating webgl context");var p=this.drawingContext;p.enable(p.DEPTH_TEST),p.depthFunc(p.LEQUAL),p.viewport(0,0,p.drawingBufferWidth,p.drawingBufferHeight),this._viewport=this.drawingContext.getParameter(this.drawingContext.VIEWPORT)}catch(y){throw y}},o.default.RendererGL.prototype._resetContext=function(p,y){var _=this.width,b=this.height,x=this.canvas.id,S=this._pInst instanceof o.default.Graphics;if(S){var E=this._pInst;E.canvas.parentNode.removeChild(E.canvas),E.canvas=document.createElement("canvas"),(E._pInst._userNode||document.body).appendChild(E.canvas),o.default.Element.call(E,E.canvas,E._pInst),E.width=_,E.height=b}else{var C=this.canvas;C&&C.parentNode.removeChild(C),(C=document.createElement("canvas")).id=x,this._pInst._userNode?this._pInst._userNode.appendChild(C):document.body.appendChild(C),this._pInst.canvas=C}var M=new o.default.RendererGL(this._pInst.canvas,this._pInst,!S);this._pInst._setProperty("_renderer",M),M.resize(_,b),M._applyDefaults(),S||this._pInst._elements.push(M),typeof y=="function"&&setTimeout(function(){y.apply(window._renderer,p)},0)},o.default.prototype.setAttributes=function(p,y){if(this._glAttributes!==void 0){var _=!0;if(y!==void 0?(this._glAttributes===null&&(this._glAttributes={}),this._glAttributes[p]!==y&&(this._glAttributes[p]=y,_=!1)):p instanceof Object&&this._glAttributes!==p&&(this._glAttributes=p,_=!1),this._renderer.isP3D&&!_){if(!this._setupDone){for(var b in this._renderer.retainedMode.geometry)if(this._renderer.retainedMode.geometry.hasOwnProperty(b))return void console.error("Sorry, Could not set the attributes, you need to call setAttributes() before calling the other drawing methods in setup()")}this.push(),this._renderer._resetContext(),this.pop(),this._renderer._curCamera&&(this._renderer._curCamera._renderer=this._renderer)}}else console.log("You are trying to use setAttributes on a p5.Graphics object that does not use a WEBGL renderer.")},o.default.RendererGL.prototype._update=function(){this.uMVMatrix.set(this._curCamera.cameraMatrix.mat4[0],this._curCamera.cameraMatrix.mat4[1],this._curCamera.cameraMatrix.mat4[2],this._curCamera.cameraMatrix.mat4[3],this._curCamera.cameraMatrix.mat4[4],this._curCamera.cameraMatrix.mat4[5],this._curCamera.cameraMatrix.mat4[6],this._curCamera.cameraMatrix.mat4[7],this._curCamera.cameraMatrix.mat4[8],this._curCamera.cameraMatrix.mat4[9],this._curCamera.cameraMatrix.mat4[10],this._curCamera.cameraMatrix.mat4[11],this._curCamera.cameraMatrix.mat4[12],this._curCamera.cameraMatrix.mat4[13],this._curCamera.cameraMatrix.mat4[14],this._curCamera.cameraMatrix.mat4[15]),this.ambientLightColors.length=0,this.specularColors=[1,1,1],this.directionalLightDirections.length=0,this.directionalLightDiffuseColors.length=0,this.directionalLightSpecularColors.length=0,this.pointLightPositions.length=0,this.pointLightDiffuseColors.length=0,this.pointLightSpecularColors.length=0,this.spotLightPositions.length=0,this.spotLightDirections.length=0,this.spotLightDiffuseColors.length=0,this.spotLightSpecularColors.length=0,this.spotLightAngle.length=0,this.spotLightConc.length=0,this._enableLighting=!1,this._tint=[255,255,255,255],this.GL.clear(this.GL.DEPTH_BUFFER_BIT)},o.default.RendererGL.prototype.background=function(){var p,y=(p=this._pInst).color.apply(p,arguments),_=y.levels[0]/255,b=y.levels[1]/255,x=y.levels[2]/255,S=y.levels[3]/255;this.GL.clearColor(_,b,x,S),this.GL.clear(this.GL.COLOR_BUFFER_BIT)},o.default.RendererGL.prototype.fill=function(p,y,_,b){var x=o.default.prototype.color.apply(this._pInst,arguments);this.curFillColor=x._array,this.drawMode=h.FILL,this._useNormalMaterial=!1,this._tex=null},o.default.RendererGL.prototype.stroke=function(p,y,_,b){arguments[3]=255;var x=o.default.prototype.color.apply(this._pInst,arguments);this.curStrokeColor=x._array},o.default.RendererGL.prototype.strokeCap=function(p){console.error("Sorry, strokeCap() is not yet implemented in WEBGL mode")},o.default.RendererGL.prototype.strokeJoin=function(p){console.error("Sorry, strokeJoin() is not yet implemented in WEBGL mode")},o.default.RendererGL.prototype.filter=function(p){console.error("filter() does not work in WEBGL mode")},o.default.RendererGL.prototype.blendMode=function(p){p===h.DARKEST||p===h.LIGHTEST||p===h.ADD||p===h.BLEND||p===h.SUBTRACT||p===h.SCREEN||p===h.EXCLUSION||p===h.REPLACE||p===h.MULTIPLY||p===h.REMOVE?this.curBlendMode=p:p!==h.BURN&&p!==h.OVERLAY&&p!==h.HARD_LIGHT&&p!==h.SOFT_LIGHT&&p!==h.DODGE||console.warn("BURN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, and DODGE only work for blendMode in 2D mode.")},o.default.RendererGL.prototype.erase=function(p,y){this._isErasing||(this._applyBlendMode(h.REMOVE),this._isErasing=!0,this._cachedFillStyle=this.curFillColor.slice(),this.curFillColor=[1,1,1,p/255],this._cachedStrokeStyle=this.curStrokeColor.slice(),this.curStrokeColor=[1,1,1,y/255])},o.default.RendererGL.prototype.noErase=function(){this._isErasing&&(this._isErasing=!1,this.curFillColor=this._cachedFillStyle.slice(),this.curStrokeColor=this._cachedStrokeStyle.slice(),this.blendMode(this._cachedBlendMode))},o.default.RendererGL.prototype.strokeWeight=function(p){this.curStrokeWeight!==p&&(this.pointSize=p,this.curStrokeWeight=p)},o.default.RendererGL.prototype._getPixel=function(p,y){var _;return _=new Uint8Array(4),this.drawingContext.readPixels(p,y,1,1,this.drawingContext.RGBA,this.drawingContext.UNSIGNED_BYTE,_),[_[0],_[1],_[2],_[3]]},o.default.RendererGL.prototype.loadPixels=function(){var p=this._pixelsState;if(this._pInst._glAttributes.preserveDrawingBuffer===!0){var y=p.pixels,_=this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4;y instanceof Uint8Array&&y.length===_||(y=new Uint8Array(_),this._pixelsState._setProperty("pixels",y));var b=this._pInst._pixelDensity;this.GL.readPixels(0,0,this.width*b,this.height*b,this.GL.RGBA,this.GL.UNSIGNED_BYTE,y)}else console.log("loadPixels only works in WebGL when preserveDrawingBuffer is true.")},o.default.RendererGL.prototype.geometryInHash=function(p){return this.retainedMode.geometry[p]!==void 0},o.default.RendererGL.prototype.resize=function(p,y){o.default.Renderer.prototype.resize.call(this,p,y),this.GL.viewport(0,0,this.GL.drawingBufferWidth,this.GL.drawingBufferHeight),this._viewport=this.GL.getParameter(this.GL.VIEWPORT),this._curCamera._resize();var _=this._pixelsState;_.pixels!==void 0&&_._setProperty("pixels",new Uint8Array(this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4))},o.default.RendererGL.prototype.clear=function(){var p=(arguments.length<=0?void 0:arguments[0])||0,y=(arguments.length<=1?void 0:arguments[1])||0,_=(arguments.length<=2?void 0:arguments[2])||0,b=(arguments.length<=3?void 0:arguments[3])||0;this.GL.clearColor(p,y,_,b),this.GL.clearDepth(1),this.GL.clear(this.GL.COLOR_BUFFER_BIT|this.GL.DEPTH_BUFFER_BIT)},o.default.RendererGL.prototype.applyMatrix=function(p,y,_,b,x,S){arguments.length===16?o.default.Matrix.prototype.apply.apply(this.uMVMatrix,arguments):this.uMVMatrix.apply([p,y,0,0,_,b,0,0,0,0,1,0,x,S,0,1])},o.default.RendererGL.prototype.translate=function(p,y,_){return p instanceof o.default.Vector&&(_=p.z,y=p.y,p=p.x),this.uMVMatrix.translate([p,y,_]),this},o.default.RendererGL.prototype.scale=function(p,y,_){return this.uMVMatrix.scale(p,y,_),this},o.default.RendererGL.prototype.rotate=function(p,y){return y===void 0?this.rotateZ(p):(o.default.Matrix.prototype.rotate.apply(this.uMVMatrix,arguments),this)},o.default.RendererGL.prototype.rotateX=function(p){return this.rotate(p,1,0,0),this},o.default.RendererGL.prototype.rotateY=function(p){return this.rotate(p,0,1,0),this},o.default.RendererGL.prototype.rotateZ=function(p){return this.rotate(p,0,0,1),this},o.default.RendererGL.prototype.push=function(){var p=o.default.Renderer.prototype.push.apply(this),y=p.properties;return y.uMVMatrix=this.uMVMatrix.copy(),y.uPMatrix=this.uPMatrix.copy(),y._curCamera=this._curCamera,this._curCamera=this._curCamera.copy(),y.ambientLightColors=this.ambientLightColors.slice(),y.specularColors=this.specularColors.slice(),y.directionalLightDirections=this.directionalLightDirections.slice(),y.directionalLightDiffuseColors=this.directionalLightDiffuseColors.slice(),y.directionalLightSpecularColors=this.directionalLightSpecularColors.slice(),y.pointLightPositions=this.pointLightPositions.slice(),y.pointLightDiffuseColors=this.pointLightDiffuseColors.slice(),y.pointLightSpecularColors=this.pointLightSpecularColors.slice(),y.spotLightPositions=this.spotLightPositions.slice(),y.spotLightDirections=this.spotLightDirections.slice(),y.spotLightDiffuseColors=this.spotLightDiffuseColors.slice(),y.spotLightSpecularColors=this.spotLightSpecularColors.slice(),y.spotLightAngle=this.spotLightAngle.slice(),y.spotLightConc=this.spotLightConc.slice(),y.userFillShader=this.userFillShader,y.userStrokeShader=this.userStrokeShader,y.userPointShader=this.userPointShader,y.pointSize=this.pointSize,y.curStrokeWeight=this.curStrokeWeight,y.curStrokeColor=this.curStrokeColor,y.curFillColor=this.curFillColor,y._useSpecularMaterial=this._useSpecularMaterial,y._useEmissiveMaterial=this._useEmissiveMaterial,y._useShininess=this._useShininess,y.constantAttenuation=this.constantAttenuation,y.linearAttenuation=this.linearAttenuation,y.quadraticAttenuation=this.quadraticAttenuation,y._enableLighting=this._enableLighting,y._useNormalMaterial=this._useNormalMaterial,y._tex=this._tex,y.drawMode=this.drawMode,y._currentNormal=this._currentNormal,p},o.default.RendererGL.prototype.resetMatrix=function(){return this.uMVMatrix=o.default.Matrix.identity(this._pInst),this},o.default.RendererGL.prototype._getImmediateStrokeShader=function(){var p=this.userStrokeShader;return p&&p.isStrokeShader()?p:this._getLineShader()},o.default.RendererGL.prototype._getRetainedStrokeShader=o.default.RendererGL.prototype._getImmediateStrokeShader,o.default.RendererGL.prototype._getImmediateFillShader=function(){var p=this.userFillShader;if(this._useNormalMaterial&&(!p||!p.isNormalShader()))return this._getNormalShader();if(this._enableLighting){if(!p||!p.isLightShader())return this._getLightShader()}else if(this._tex){if(!p||!p.isTextureShader())return this._getLightShader()}else if(!p)return this._getImmediateModeShader();return p},o.default.RendererGL.prototype._getRetainedFillShader=function(){if(this._useNormalMaterial)return this._getNormalShader();var p=this.userFillShader;if(this._enableLighting){if(!p||!p.isLightShader())return this._getLightShader()}else if(this._tex){if(!p||!p.isTextureShader())return this._getLightShader()}else if(!p)return this._getColorShader();return p},o.default.RendererGL.prototype._getImmediatePointShader=function(){var p=this.userPointShader;return p&&p.isPointShader()?p:this._getPointShader()},o.default.RendererGL.prototype._getRetainedLineShader=o.default.RendererGL.prototype._getImmediateLineShader,o.default.RendererGL.prototype._getLightShader=function(){return this._defaultLightShader||(this._pInst._glAttributes.perPixelLighting?this._defaultLightShader=new o.default.Shader(this,u.phongVert,u.phongFrag):this._defaultLightShader=new o.default.Shader(this,u.lightVert,u.lightTextureFrag)),this._defaultLightShader},o.default.RendererGL.prototype._getImmediateModeShader=function(){return this._defaultImmediateModeShader||(this._defaultImmediateModeShader=new o.default.Shader(this,u.immediateVert,u.vertexColorFrag)),this._defaultImmediateModeShader},o.default.RendererGL.prototype._getNormalShader=function(){return this._defaultNormalShader||(this._defaultNormalShader=new o.default.Shader(this,u.normalVert,u.normalFrag)),this._defaultNormalShader},o.default.RendererGL.prototype._getColorShader=function(){return this._defaultColorShader||(this._defaultColorShader=new o.default.Shader(this,u.normalVert,u.basicFrag)),this._defaultColorShader},o.default.RendererGL.prototype._getPointShader=function(){return this._defaultPointShader||(this._defaultPointShader=new o.default.Shader(this,u.pointVert,u.pointFrag)),this._defaultPointShader},o.default.RendererGL.prototype._getLineShader=function(){return this._defaultLineShader||(this._defaultLineShader=new o.default.Shader(this,u.lineVert,u.lineFrag)),this._defaultLineShader},o.default.RendererGL.prototype._getFontShader=function(){return this._defaultFontShader||(this.GL.getExtension("OES_standard_derivatives"),this._defaultFontShader=new o.default.Shader(this,u.fontVert,u.fontFrag)),this._defaultFontShader},o.default.RendererGL.prototype._getEmptyTexture=function(){if(!this._emptyTexture){var p=new o.default.Image(1,1);p.set(0,0,255),this._emptyTexture=new o.default.Texture(this,p)}return this._emptyTexture},o.default.RendererGL.prototype.getTexture=function(p){var y=this.textures,_=!0,b=!1,x=void 0;try{for(var S,E=y[Symbol.iterator]();!(_=(S=E.next()).done);_=!0){var C=S.value;if(C.src===p)return C}}catch(I){b=!0,x=I}finally{try{_||E.return==null||E.return()}finally{if(b)throw x}}var M=new o.default.Texture(this,p);return y.push(M),M},o.default.RendererGL.prototype._setStrokeUniforms=function(p){p.bindShader(),p.setUniform("uMaterialColor",this.curStrokeColor),p.setUniform("uStrokeWeight",this.curStrokeWeight)},o.default.RendererGL.prototype._setFillUniforms=function(p){p.bindShader(),p.setUniform("uMaterialColor",this.curFillColor),p.setUniform("isTexture",!!this._tex),this._tex&&p.setUniform("uSampler",this._tex),p.setUniform("uTint",this._tint),p.setUniform("uSpecular",this._useSpecularMaterial),p.setUniform("uEmissive",this._useEmissiveMaterial),p.setUniform("uShininess",this._useShininess),p.setUniform("uUseLighting",this._enableLighting);var y=this.pointLightDiffuseColors.length/3;p.setUniform("uPointLightCount",y),p.setUniform("uPointLightLocation",this.pointLightPositions),p.setUniform("uPointLightDiffuseColors",this.pointLightDiffuseColors),p.setUniform("uPointLightSpecularColors",this.pointLightSpecularColors);var _=this.directionalLightDiffuseColors.length/3;p.setUniform("uDirectionalLightCount",_),p.setUniform("uLightingDirection",this.directionalLightDirections),p.setUniform("uDirectionalDiffuseColors",this.directionalLightDiffuseColors),p.setUniform("uDirectionalSpecularColors",this.directionalLightSpecularColors);var b=this.ambientLightColors.length/3;p.setUniform("uAmbientLightCount",b),p.setUniform("uAmbientColor",this.ambientLightColors);var x=this.spotLightDiffuseColors.length/3;p.setUniform("uSpotLightCount",x),p.setUniform("uSpotLightAngle",this.spotLightAngle),p.setUniform("uSpotLightConc",this.spotLightConc),p.setUniform("uSpotLightDiffuseColors",this.spotLightDiffuseColors),p.setUniform("uSpotLightSpecularColors",this.spotLightSpecularColors),p.setUniform("uSpotLightLocation",this.spotLightPositions),p.setUniform("uSpotLightDirection",this.spotLightDirections),p.setUniform("uConstantAttenuation",this.constantAttenuation),p.setUniform("uLinearAttenuation",this.linearAttenuation),p.setUniform("uQuadraticAttenuation",this.quadraticAttenuation),p.bindTextures()},o.default.RendererGL.prototype._setPointUniforms=function(p){p.bindShader(),p.setUniform("uMaterialColor",this.curStrokeColor),p.setUniform("uPointSize",this.pointSize*this._pInst._pixelDensity)},o.default.RendererGL.prototype._bindBuffer=function(p,y,_,b,x){if(y=y||this.GL.ARRAY_BUFFER,this.GL.bindBuffer(y,p),_!==void 0){var S=new(b||Float32Array)(_);this.GL.bufferData(y,S,x||this.GL.STATIC_DRAW)}},o.default.RendererGL.prototype._arraysEqual=function(p,y){var _=p.length;if(_!==y.length)return!1;for(var b=0;b<_;b++)if(p[b]!==y[b])return!1;return!0},o.default.RendererGL.prototype._isTypedArray=function(p){return p instanceof Uint32Array},o.default.RendererGL.prototype._flatten=function(p){if(p.length===0)return[];if(2e4<p.length){var y,_=Object.prototype.toString,b=[],x=p.slice();for(y=x.pop();_.call(y)==="[object Array]"?x.push.apply(x,c(y)):b.push(y),x.length&&(y=x.pop())!==void 0;);return b.reverse(),b}var S;return(S=[]).concat.apply(S,c(p))},o.default.RendererGL.prototype._vToNArray=function(p){var y=[],_=!0,b=!1,x=void 0;try{for(var S,E=p[Symbol.iterator]();!(_=(S=E.next()).done);_=!0){var C=S.value;y.push(C.x,C.y,C.z)}}catch(M){b=!0,x=M}finally{try{_||E.return==null||E.return()}finally{if(b)throw x}}return y},o.default.prototype._assert3d=function(p){if(!this._renderer.isP3D)throw new Error("".concat(p,"() is only supported in WEBGL mode. If you'd like to use 3D graphics and WebGL, see  https://p5js.org/examples/form-3d-primitives.html for more information."))},o.default.RendererGL.prototype._initTessy=function(){var p=new d.default.GluTesselator;return p.gluTessCallback(d.default.gluEnum.GLU_TESS_VERTEX_DATA,function(y,_){_[_.length]=y[0],_[_.length]=y[1],_[_.length]=y[2]}),p.gluTessCallback(d.default.gluEnum.GLU_TESS_BEGIN,function(y){y!==d.default.primitiveType.GL_TRIANGLES&&console.log("expected TRIANGLES but got type: ".concat(y))}),p.gluTessCallback(d.default.gluEnum.GLU_TESS_ERROR,function(y){console.log("error callback"),console.log("error number: ".concat(y))}),p.gluTessCallback(d.default.gluEnum.GLU_TESS_COMBINE,function(y,_,b){return[y[0],y[1],y[2]]}),p.gluTessCallback(d.default.gluEnum.GLU_TESS_EDGE_FLAG,function(y){}),p},o.default.RendererGL.prototype._triangulate=function(p){this._tessy.gluTessNormal(0,0,1);var y=[];this._tessy.gluTessBeginPolygon(y);for(var _=0;_<p.length;_++){this._tessy.gluTessBeginContour();for(var b=p[_],x=0;x<b.length;x+=3){var S=[b[x],b[x+1],b[x+2]];this._tessy.gluTessVertex(S,S)}this._tessy.gluTessEndContour()}return this._tessy.gluTessEndPolygon(),y},o.default.RendererGL.prototype._bezierCoefficients=function(p){var y=p*p,_=1-p,b=_*_;return[b*_,3*b*p,3*_*y,y*p]},o.default.RendererGL.prototype._quadraticCoefficients=function(p){var y=1-p;return[y*y,2*y*p,p*p]},o.default.RendererGL.prototype._bezierToCatmull=function(p){return[p[1],p[1]+(p[2]-p[0])/this._curveTightness,p[2]-(p[3]-p[1])/this._curveTightness,p[2]]};var f=o.default.RendererGL;i.default=f},{"../core/constants":253,"../core/main":264,"../core/p5.Renderer":267,"./p5.Camera":312,"./p5.Matrix":314,"./p5.Shader":319,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.fill":151,"core-js/modules/es.array.filter":152,"core-js/modules/es.array.from":155,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.assign":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.float32-array":203,"core-js/modules/es.typed-array.float64-array":204,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.int16-array":208,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint16-array":224,"core-js/modules/es.typed-array.uint32-array":225,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/web.dom-collections.iterator":229,libtess:237,path:240}],319:[function(r,s,i){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a,o=(a=r("../core/main"))&&a.__esModule?a:{default:a};o.default.Shader=function(d,g,m){this._renderer=d,this._vertSrc=g,this._fragSrc=m,this._vertShader=-1,this._fragShader=-1,this._glProgram=0,this._loadedAttributes=!1,this.attributes={},this._loadedUniforms=!1,this.uniforms={},this._bound=!1,this.samplers=[]},o.default.Shader.prototype.init=function(){if(this._glProgram===0){var d=this._renderer.GL;if(this._vertShader=d.createShader(d.VERTEX_SHADER),d.shaderSource(this._vertShader,this._vertSrc),d.compileShader(this._vertShader),!d.getShaderParameter(this._vertShader,d.COMPILE_STATUS))return console.error("Yikes! An error occurred compiling the vertex shader:".concat(d.getShaderInfoLog(this._vertShader))),null;if(this._fragShader=d.createShader(d.FRAGMENT_SHADER),d.shaderSource(this._fragShader,this._fragSrc),d.compileShader(this._fragShader),!d.getShaderParameter(this._fragShader,d.COMPILE_STATUS))return console.error("Darn! An error occurred compiling the fragment shader:".concat(d.getShaderInfoLog(this._fragShader))),null;this._glProgram=d.createProgram(),d.attachShader(this._glProgram,this._vertShader),d.attachShader(this._glProgram,this._fragShader),d.linkProgram(this._glProgram),d.getProgramParameter(this._glProgram,d.LINK_STATUS)||console.error("Snap! Error linking shader program: ".concat(d.getProgramInfoLog(this._glProgram))),this._loadAttributes(),this._loadUniforms()}return this},o.default.Shader.prototype._loadAttributes=function(){if(!this._loadedAttributes){this.attributes={};for(var d=this._renderer.GL,g=d.getProgramParameter(this._glProgram,d.ACTIVE_ATTRIBUTES),m=0;m<g;++m){var c=d.getActiveAttrib(this._glProgram,m),l=c.name,u=d.getAttribLocation(this._glProgram,l),f={};f.name=l,f.location=u,f.index=m,f.type=c.type,f.size=c.size,this.attributes[l]=f}this._loadedAttributes=!0}},o.default.Shader.prototype._loadUniforms=function(){if(!this._loadedUniforms){for(var d=this._renderer.GL,g=d.getProgramParameter(this._glProgram,d.ACTIVE_UNIFORMS),m=0,c=0;c<g;++c){var l=d.getActiveUniform(this._glProgram,c),u={};u.location=d.getUniformLocation(this._glProgram,l.name),u.size=l.size;var f=l.name;1<l.size&&(f=f.substring(0,f.indexOf("[0]"))),u.name=f,u.type=l.type,u._cachedData=void 0,u.type===d.SAMPLER_2D&&(u.samplerIndex=m,m++,this.samplers.push(u)),u.isArray=1<l.size||u.type===d.FLOAT_MAT3||u.type===d.FLOAT_MAT4||u.type===d.FLOAT_VEC2||u.type===d.FLOAT_VEC3||u.type===d.FLOAT_VEC4||u.type===d.INT_VEC2||u.type===d.INT_VEC4||u.type===d.INT_VEC3,this.uniforms[f]=u}this._loadedUniforms=!0}},o.default.Shader.prototype.compile=function(){},o.default.Shader.prototype.bindShader=function(){this.init(),this._bound||(this.useProgram(),this._bound=!0,this._setMatrixUniforms(),this.setUniform("uViewport",this._renderer._viewport))},o.default.Shader.prototype.unbindShader=function(){return this._bound&&(this.unbindTextures(),this._bound=!1),this},o.default.Shader.prototype.bindTextures=function(){var d=this._renderer.GL,g=!0,m=!1,c=void 0;try{for(var l,u=this.samplers[Symbol.iterator]();!(g=(l=u.next()).done);g=!0){var f=l.value,p=f.texture;p===void 0&&(p=this._renderer._getEmptyTexture()),d.activeTexture(d.TEXTURE0+f.samplerIndex),p.bindTexture(),p.update(),d.uniform1i(f.location,f.samplerIndex)}}catch(y){m=!0,c=y}finally{try{g||u.return==null||u.return()}finally{if(m)throw c}}},o.default.Shader.prototype.updateTextures=function(){var d=!0,g=!1,m=void 0;try{for(var c,l=this.samplers[Symbol.iterator]();!(d=(c=l.next()).done);d=!0){var u=c.value.texture;u&&u.update()}}catch(f){g=!0,m=f}finally{try{d||l.return==null||l.return()}finally{if(g)throw m}}},o.default.Shader.prototype.unbindTextures=function(){},o.default.Shader.prototype._setMatrixUniforms=function(){var d=this._renderer._curCamera.cameraMatrix,g=this._renderer.uPMatrix,m=this._renderer.uMVMatrix,c=m.copy();c.mult(g),this.isStrokeShader()&&(this._renderer._curCamera.cameraType==="default"?this.setUniform("uPerspective",1):this.setUniform("uPerspective",0)),this.setUniform("uViewMatrix",d.mat4),this.setUniform("uProjectionMatrix",g.mat4),this.setUniform("uModelViewMatrix",m.mat4),this.setUniform("uModelViewProjectionMatrix",c.mat4),this.uniforms.uNormalMatrix&&(this._renderer.uNMatrix.inverseTranspose(this._renderer.uMVMatrix),this.setUniform("uNormalMatrix",this._renderer.uNMatrix.mat3))},o.default.Shader.prototype.useProgram=function(){var d=this._renderer.GL;return this._renderer._curShader!==this&&(d.useProgram(this._glProgram),this._renderer._curShader=this),this},o.default.Shader.prototype.setUniform=function(d,g){var m=this.uniforms[d];if(m){var c=this._renderer.GL;if(m.isArray){if(m._cachedData&&this._renderer._arraysEqual(m._cachedData,g))return;m._cachedData=g.slice(0)}else{if(m._cachedData&&m._cachedData===g)return;Array.isArray(g)?m._cachedData=g.slice(0):m._cachedData=g}var l=m.location;switch(this.useProgram(),m.type){case c.BOOL:g===!0?c.uniform1i(l,1):c.uniform1i(l,0);break;case c.INT:1<m.size?g.length&&c.uniform1iv(l,g):c.uniform1i(l,g);break;case c.FLOAT:1<m.size?g.length&&c.uniform1fv(l,g):c.uniform1f(l,g);break;case c.FLOAT_MAT3:c.uniformMatrix3fv(l,!1,g);break;case c.FLOAT_MAT4:c.uniformMatrix4fv(l,!1,g);break;case c.FLOAT_VEC2:1<m.size?g.length&&c.uniform2fv(l,g):c.uniform2f(l,g[0],g[1]);break;case c.FLOAT_VEC3:1<m.size?g.length&&c.uniform3fv(l,g):c.uniform3f(l,g[0],g[1],g[2]);break;case c.FLOAT_VEC4:1<m.size?g.length&&c.uniform4fv(l,g):c.uniform4f(l,g[0],g[1],g[2],g[3]);break;case c.INT_VEC2:1<m.size?g.length&&c.uniform2iv(l,g):c.uniform2i(l,g[0],g[1]);break;case c.INT_VEC3:1<m.size?g.length&&c.uniform3iv(l,g):c.uniform3i(l,g[0],g[1],g[2]);break;case c.INT_VEC4:1<m.size?g.length&&c.uniform4iv(l,g):c.uniform4i(l,g[0],g[1],g[2],g[3]);break;case c.SAMPLER_2D:c.activeTexture(c.TEXTURE0+m.samplerIndex),m.texture=g instanceof o.default.Texture?g:this._renderer.getTexture(g),c.uniform1i(l,m.samplerIndex)}return this}},o.default.Shader.prototype.isLightShader=function(){return this.attributes.aNormal!==void 0||this.uniforms.uUseLighting!==void 0||this.uniforms.uAmbientLightCount!==void 0||this.uniforms.uDirectionalLightCount!==void 0||this.uniforms.uPointLightCount!==void 0||this.uniforms.uAmbientColor!==void 0||this.uniforms.uDirectionalDiffuseColors!==void 0||this.uniforms.uDirectionalSpecularColors!==void 0||this.uniforms.uPointLightLocation!==void 0||this.uniforms.uPointLightDiffuseColors!==void 0||this.uniforms.uPointLightSpecularColors!==void 0||this.uniforms.uLightingDirection!==void 0||this.uniforms.uSpecular!==void 0},o.default.Shader.prototype.isNormalShader=function(){return this.attributes.aNormal!==void 0},o.default.Shader.prototype.isTextureShader=function(){return 0<this.samplers.length},o.default.Shader.prototype.isColorShader=function(){return this.attributes.aVertexColor!==void 0||this.uniforms.uMaterialColor!==void 0},o.default.Shader.prototype.isTexLightShader=function(){return this.isLightShader()&&this.isTextureShader()},o.default.Shader.prototype.isStrokeShader=function(){return this.uniforms.uStrokeWeight!==void 0},o.default.Shader.prototype.enableAttrib=function(d,g,m,c,l,u){if(d){var f=d.location;if(f!==-1){var p=this._renderer.GL;d.enabled||(p.enableVertexAttribArray(f),d.enabled=!0),this._renderer.GL.vertexAttribPointer(f,g,m||p.FLOAT,c||!1,l||0,u||0)}}return this};var h=o.default.Shader;i.default=h},{"../core/main":264,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.function.name":166,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":229}],320:[function(r,s,i){function a(c){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(c)}r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o,h=(o=r("../core/main"))&&o.__esModule?o:{default:o},d=function(c){if(c&&c.__esModule)return c;if(c===null||a(c)!=="object"&&typeof c!="function")return{default:c};var l=g();if(l&&l.has(c))return l.get(c);var u={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in c)if(Object.prototype.hasOwnProperty.call(c,p)){var y=f?Object.getOwnPropertyDescriptor(c,p):null;y&&(y.get||y.set)?Object.defineProperty(u,p,y):u[p]=c[p]}return u.default=c,l&&l.set(c,u),u}(r("../core/constants"));function g(){if(typeof WeakMap!="function")return null;var c=new WeakMap;return g=function(){return c},c}h.default.Texture=function(c,l,u){this._renderer=c;var f=this._renderer.GL;(u=u||{}).dataType===f.FLOAT&&(f.getExtension("OES_texture_float")||console.log("Oh no, your device doesn't support floating point textures!"),f.getExtension("OES_texture_float_linear")||console.log("Ack! Your device doesn't support linear filtering for floating point textures")),this.src=l,this.glTex=void 0,this.glTarget=f.TEXTURE_2D,this.glFormat=u.format||f.RGBA,this.mipmaps=!1,this.glMinFilter=u.minFilter||f.LINEAR,this.glMagFilter=u.magFilter||f.LINEAR,this.glWrapS=u.wrapS||f.CLAMP_TO_EDGE,this.glWrapT=u.wrapT||f.CLAMP_TO_EDGE,this.glDataType=u.dataType||f.UNSIGNED_BYTE,this.isSrcMediaElement=h.default.MediaElement!==void 0&&l instanceof h.default.MediaElement,this._videoPrevUpdateTime=0,this.isSrcHTMLElement=h.default.Element!==void 0&&l instanceof h.default.Element&&!(l instanceof h.default.Graphics),this.isSrcP5Image=l instanceof h.default.Image,this.isSrcP5Graphics=l instanceof h.default.Graphics,this.isImageData=typeof ImageData<"u"&&l instanceof ImageData;var p=this._getTextureDataFromSource();return this.width=p.width,this.height=p.height,this.init(p),this},h.default.Texture.prototype._getTextureDataFromSource=function(){var c;return this.isSrcP5Image?c=this.src.canvas:this.isSrcMediaElement||this.isSrcP5Graphics||this.isSrcHTMLElement?c=this.src.elt:this.isImageData&&(c=this.src),c},h.default.Texture.prototype.init=function(c){var l=this._renderer.GL;if(this.glTex=l.createTexture(),this.glWrapS=this._renderer.textureWrapX,this.glWrapT=this._renderer.textureWrapY,this.setWrapMode(this.glWrapS,this.glWrapT),this.bindTexture(),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,this.glMagFilter),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,this.glMinFilter),this.width===0||this.height===0||this.isSrcMediaElement&&!this.src.loadedmetadata){var u=new Uint8Array([1,1,1,1]);l.texImage2D(this.glTarget,0,l.RGBA,1,1,0,this.glFormat,this.glDataType,u)}else l.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,c)},h.default.Texture.prototype.update=function(){var c=this.src;if(c.width===0||c.height===0)return!1;var l=this._getTextureDataFromSource(),u=!1,f=this._renderer.GL;return l.width!==this.width||l.height!==this.height?(u=!0,this.width=l.width,this.height=l.height,this.isSrcP5Image?c.setModified(!1):(this.isSrcMediaElement||this.isSrcHTMLElement)&&c.setModified(!0)):this.isSrcP5Image?c.isModified()&&(u=!0,c.setModified(!1)):this.isSrcMediaElement?c.isModified()?(u=!0,c.setModified(!1)):c.loadedmetadata&&this._videoPrevUpdateTime!==c.time()&&(this._videoPrevUpdateTime=c.time(),u=!0):this.isImageData?c._dirty&&(u=!(c._dirty=!1)):u=!0,u&&(this.bindTexture(),f.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,l)),u},h.default.Texture.prototype.bindTexture=function(){return this._renderer.GL.bindTexture(this.glTarget,this.glTex),this},h.default.Texture.prototype.unbindTexture=function(){this._renderer.GL.bindTexture(this.glTarget,null)},h.default.Texture.prototype.setInterpolation=function(c,l){var u=this._renderer.GL;c===d.NEAREST?this.glMinFilter=u.NEAREST:this.glMinFilter=u.LINEAR,l===d.NEAREST?this.glMagFilter=u.NEAREST:this.glMagFilter=u.LINEAR,this.bindTexture(),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,this.glMinFilter),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,this.glMagFilter),this.unbindTexture()},h.default.Texture.prototype.setWrapMode=function(c,l){function u(_){return(_&_-1)==0}var f=this._renderer.GL,p=u(this.width),y=u(this.height);c===d.REPEAT?p&&y?this.glWrapS=f.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=f.CLAMP_TO_EDGE):c===d.MIRROR?p&&y?this.glWrapS=f.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=f.CLAMP_TO_EDGE):this.glWrapS=f.CLAMP_TO_EDGE,l===d.REPEAT?p&&y?this.glWrapT=f.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=f.CLAMP_TO_EDGE):l===d.MIRROR?p&&y?this.glWrapT=f.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=f.CLAMP_TO_EDGE):this.glWrapT=f.CLAMP_TO_EDGE,this.bindTexture(),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,this.glWrapS),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,this.glWrapT),this.unbindTexture()};var m=h.default.Texture;i.default=m},{"../core/constants":253,"../core/main":264,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226}],321:[function(r,s,i){function a(f){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(f)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.sub"),r("core-js/modules/web.dom-collections.iterator");var o,h=(o=r("../core/main"))&&o.__esModule?o:{default:o},d=function(f){if(f&&f.__esModule)return f;if(f===null||a(f)!=="object"&&typeof f!="function")return{default:f};var p=g();if(p&&p.has(f))return p.get(f);var y={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var b in f)if(Object.prototype.hasOwnProperty.call(f,b)){var x=_?Object.getOwnPropertyDescriptor(f,b):null;x&&(x.get||x.set)?Object.defineProperty(y,b,x):y[b]=f[b]}return y.default=f,p&&p.set(f,y),y}(r("../core/constants"));function g(){if(typeof WeakMap!="function")return null;var f=new WeakMap;return g=function(){return f},f}r("./p5.Shader"),r("./p5.RendererGL.Retained"),h.default.RendererGL.prototype._applyTextProperties=function(){},h.default.RendererGL.prototype.textWidth=function(f){return this._isOpenType()?this._textFont._textWidth(f,this._textSize):0};function m(f,p){this.width=f,this.height=p,this.infos=[],this.findImage=function(y){var _,b,x=this.width*this.height;if(x<y)throw new Error("font is too complex to render in 3D");for(var S=this.infos.length-1;0<=S;--S){var E=this.infos[S];if(E.index+y<x){b=(_=E).imageData;break}}if(!_){try{b=new ImageData(this.width,this.height)}catch{var C=document.getElementsByTagName("canvas")[0],M=!C;C||((C=document.createElement("canvas")).style.display="none",document.body.appendChild(C));var I=C.getContext("2d");I&&(b=I.createImageData(this.width,this.height)),M&&document.body.removeChild(C)}_={index:0,imageData:b},this.infos.push(_)}var A=_.index;return _.index+=y,b._dirty=!0,{imageData:b,index:A}}}function c(f,p,y,_,b){var x=f.imageData.data,S=4*f.index++;x[S++]=p,x[S++]=y,x[S++]=_,x[S++]=b}function l(f){this.font=f,this.strokeImageInfos=new m(64,64),this.colDimImageInfos=new m(64,64),this.rowDimImageInfos=new m(64,64),this.colCellImageInfos=new m(64,64),this.rowCellImageInfos=new m(64,64),this.glyphInfos={},this.getGlyphInfo=function(p){var y=this.glyphInfos[p.index];if(y)return y;var _,b=p.getBoundingBox(),x=b.x1,S=b.y1,E=b.x2-x,C=b.y2-S,M=p.path.commands;if(E==0||C==0||!M.length)return this.glyphInfos[p.index]={};var I,A,D,L,O=[],N=[],U=[];for(_=8;0<=_;--_)U.push([]);for(_=8;0<=_;--_)N.push([]);function K(Ee,Fe,Qe){var Ye=O.length;function Ve(X,G,Y){for(var le=X.length;0<le--;){var we=X[le];we<G&&(G=we),Y<we&&(Y=we)}return{min:G,max:Y}}O.push(Qe);for(var pt=Ve(Ee,1,0),Oe=Math.max(Math.floor(9*pt.min),0),De=Math.min(Math.ceil(9*pt.max),9),He=Oe;He<De;++He)U[He].push(Ye);for(var Xe=Ve(Fe,1,0),ve=Math.max(Math.floor(9*Xe.min),0),tt=Math.min(Math.ceil(9*Xe.max),9),B=ve;B<tt;++B)N[B].push(Ye)}function J(Ee){return(Fe=(Ye=255)*Ee)<(Qe=0)?Qe:Ye<Fe?Ye:Fe;var Fe,Qe,Ye}function z(Ee,Fe,Qe,Ye){this.p0=Ee,this.c0=Fe,this.c1=Qe,this.p1=Ye,this.toQuadratic=function(){return{x:this.p0.x,y:this.p0.y,x1:this.p1.x,y1:this.p1.y,cx:(3*(this.c0.x+this.c1.x)-(this.p0.x+this.p1.x))/4,cy:(3*(this.c0.y+this.c1.y)-(this.p0.y+this.p1.y))/4}},this.quadError=function(){return h.default.Vector.sub(h.default.Vector.sub(this.p1,this.p0),h.default.Vector.mult(h.default.Vector.sub(this.c1,this.c0),3)).mag()/2},this.split=function(Ve){var pt=h.default.Vector.lerp(this.p0,this.c0,Ve),Oe=h.default.Vector.lerp(this.c0,this.c1,Ve),De=h.default.Vector.lerp(pt,Oe,Ve);this.c1=h.default.Vector.lerp(this.c1,this.p1,Ve),this.c0=h.default.Vector.lerp(Oe,this.c1,Ve);var He=h.default.Vector.lerp(De,this.c0,Ve),Xe=new z(this.p0,pt,De,He);return this.p0=He,Xe},this.splitInflections=function(){var Ve=h.default.Vector.sub(this.c0,this.p0),pt=h.default.Vector.sub(h.default.Vector.sub(this.c1,this.c0),Ve),Oe=h.default.Vector.sub(h.default.Vector.sub(h.default.Vector.sub(this.p1,this.c1),Ve),h.default.Vector.mult(pt,2)),De=[],He=pt.x*Oe.y-pt.y*Oe.x;if(He!==0){var Xe=Ve.x*Oe.y-Ve.y*Oe.x,ve=Ve.x*pt.y-Ve.y*pt.x,tt=Xe*Xe-4*He*ve;if(0<=tt){He<0&&(He=-He,Xe=-Xe,ve=-ve);var B=Math.sqrt(tt),X=(-Xe-B)/(2*He),G=(-Xe+B)/(2*He);0<X&&X<1&&(De.push(this.split(X)),G=1-(1-G)/(1-X)),0<G&&G<1&&De.push(this.split(G))}}return De.push(this),De}}function H(Ee,Fe,Qe,Ye,Ve,pt,Oe,De){var He=new z(new h.default.Vector(Ee,Fe),new h.default.Vector(Qe,Ye),new h.default.Vector(Ve,pt),new h.default.Vector(Oe,De)).splitInflections(),Xe=[],ve=30/u,tt=!0,B=!1,X=void 0;try{for(var G,Y=He[Symbol.iterator]();!(tt=(G=Y.next()).done);tt=!0){for(var le=G.value,we=[],je=void 0;!(.125<=(je=ve/le.quadError()));){var Pe=Math.pow(je,.3333333333333333),ge=le.split(Pe),qe=le.split(1-Pe/(1-Pe));Xe.push(ge),we.push(le),le=qe}je<1&&Xe.push(le.split(.5)),Xe.push(le),Array.prototype.push.apply(Xe,we.reverse())}}catch(ot){B=!0,X=ot}finally{try{tt||Y.return==null||Y.return()}finally{if(B)throw X}}return Xe}function $(Ee,Fe,Qe,Ye){K([Ee,Qe],[Fe,Ye],{x:Ee,y:Fe,cx:(Ee+Qe)/2,cy:(Fe+Ye)/2})}function ne(Ee,Fe,Qe,Ye){return Math.abs(Qe-Ee)<1e-5&&Math.abs(Ye-Fe)<1e-5}var oe=!0,_e=!1,he=void 0;try{for(var Te,fe=M[Symbol.iterator]();!(oe=(Te=fe.next()).done);oe=!0){var pe=Te.value,R=(pe.x-x)/E,V=(pe.y-S)/C;if(!ne(I,A,R,V)){switch(pe.type){case"M":D=R,L=V;break;case"L":$(I,A,R,V);break;case"Q":var q=(pe.x1-x)/E,ee=(pe.y1-S)/C;K([I,R,q],[A,V,ee],{x:I,y:A,cx:q,cy:ee});break;case"Z":ne(I,A,D,L)?O.push({x:I,y:A}):($(I,A,D,L),O.push({x:D,y:L}));break;case"C":for(var se=H(I,A,(pe.x1-x)/E,(pe.y1-S)/C,(pe.x2-x)/E,(pe.y2-S)/C,R,V),re=0;re<se.length;re++){var xe=se[re].toQuadratic();K([xe.x,xe.x1,xe.cx],[xe.y,xe.y1,xe.cy],xe)}break;default:throw new Error("unknown command type: ".concat(pe.type))}I=R,A=V}}}catch(Ee){_e=!0,he=Ee}finally{try{oe||fe.return==null||fe.return()}finally{if(_e)throw he}}for(var Q=O.length,ce=this.strokeImageInfos.findImage(Q),de=ce.index,ae=0;ae<Q;++ae){var Se=O[ae];c(ce,J(Se.x),J(Se.y),J(Se.cx),J(Se.cy))}function ke(Ee,Fe,Qe){for(var Ye=Ee.length,Ve=Fe.findImage(Ye),pt=Ve.index,Oe=0,De=0;De<Ye;++De)Oe+=Ee[De].length;for(var He=Qe.findImage(Oe),Xe=0;Xe<Ye;++Xe){var ve=Ee[Xe],tt=ve.length,B=He.index;c(Ve,B>>7,127&B,tt>>7,127&tt);for(var X=0;X<tt;++X){var G=ve[X]+de;c(He,G>>7,127&G,0,0)}}return{cellImageInfo:He,dimOffset:pt,dimImageInfo:Ve}}return(y=this.glyphInfos[p.index]={glyph:p,uGlyphRect:[b.x1,-b.y1,b.x2,-b.y2],strokeImageInfo:ce,strokes:O,colInfo:ke(U,this.colDimImageInfos,this.colCellImageInfos),rowInfo:ke(N,this.rowDimImageInfos,this.rowCellImageInfos)}).uGridOffset=[y.colInfo.dimOffset,y.rowInfo.dimOffset],y}}var u=Math.sqrt(3);h.default.RendererGL.prototype._renderText=function(f,p,y,_,b){if(this._textFont&&typeof this._textFont!="string"){if(!(b<=_)&&this._doFill){if(!this._isOpenType())return console.log("WEBGL: only Opentype (.otf) and Truetype (.ttf) fonts are supported"),f;f.push();var x=this._doStroke,S=this.drawMode;this._doStroke=!1,this.drawMode=d.TEXTURE;var E=this._textFont.font,C=this._textFont._fontInfo;C=C||(this._textFont._fontInfo=new l(E));var M=this._textFont._handleAlignment(this,p,y,_),I=this._textSize/E.unitsPerEm;this.translate(M.x,M.y,0),this.scale(I,I,1);var A=this.GL,D=!this._defaultFontShader,L=this._getFontShader();L.init(),L.bindShader(),D&&(L.setUniform("uGridImageSize",[64,64]),L.setUniform("uCellsImageSize",[64,64]),L.setUniform("uStrokeImageSize",[64,64]),L.setUniform("uGridSize",[9,9])),this._applyColorBlend(this.curFillColor);var O=this.retainedMode.geometry.glyph;if(!O){var N=this._textGeom=new h.default.Geometry(1,1,function(){for(var se=0;se<=1;se++)for(var re=0;re<=1;re++)this.vertices.push(new h.default.Vector(re,se,0)),this.uvs.push(re,se)});N.computeFaces().computeNormals(),O=this.createBuffers("glyph",N)}var U=!0,K=!1,J=void 0;try{for(var z,H=this.retainedMode.buffers.text[Symbol.iterator]();!(U=(z=H.next()).done);U=!0)z.value._prepareBuffer(O,L)}catch(se){K=!0,J=se}finally{try{U||H.return==null||H.return()}finally{if(K)throw J}}this._bindBuffer(O.indexBuffer,A.ELEMENT_ARRAY_BUFFER),L.setUniform("uMaterialColor",this.curFillColor);try{var $=0,ne=null,oe=E.stringToGlyphs(p),_e=!0,he=!1,Te=void 0;try{for(var fe,pe=oe[Symbol.iterator]();!(_e=(fe=pe.next()).done);_e=!0){var R=fe.value;ne&&($+=E.getKerningValue(ne,R));var V=C.getGlyphInfo(R);if(V.uGlyphRect){var q=V.rowInfo,ee=V.colInfo;L.setUniform("uSamplerStrokes",V.strokeImageInfo.imageData),L.setUniform("uSamplerRowStrokes",q.cellImageInfo.imageData),L.setUniform("uSamplerRows",q.dimImageInfo.imageData),L.setUniform("uSamplerColStrokes",ee.cellImageInfo.imageData),L.setUniform("uSamplerCols",ee.dimImageInfo.imageData),L.setUniform("uGridOffset",V.uGridOffset),L.setUniform("uGlyphRect",V.uGlyphRect),L.setUniform("uGlyphOffset",$),L.bindTextures(),A.drawElements(A.TRIANGLES,6,this.GL.UNSIGNED_SHORT,0)}$+=R.advanceWidth,ne=R}}catch(se){he=!0,Te=se}finally{try{_e||pe.return==null||pe.return()}finally{if(he)throw Te}}}finally{L.unbindShader(),this._doStroke=x,this.drawMode=S,f.pop()}return f}}else console.log("WEBGL: you must load and set a font before drawing text. See `loadFont` and `textFont` for more details.")}},{"../core/constants":253,"../core/main":264,"./p5.RendererGL.Retained":317,"./p5.Shader":319,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.split":191,"core-js/modules/es.string.sub":192,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":229}]},{},[248])(248)})})(v2);const oA=lx(v2.exports),Yv="14.7.77",Tb=(t,e,n)=>({endTime:e,insertTime:n,type:"exponentialRampToValue",value:t}),Eb=(t,e,n)=>({endTime:e,insertTime:n,type:"linearRampToValue",value:t}),yy=(t,e)=>({startTime:e,type:"setValue",value:t}),_2=(t,e,n)=>({duration:n,startTime:e,type:"setValueCurve",values:t}),b2=(t,e,{startTime:n,target:r,timeConstant:s})=>r+(e-r)*Math.exp((n-t)/s),Ja=t=>t.type==="exponentialRampToValue",Qd=t=>t.type==="linearRampToValue",qi=t=>Ja(t)||Qd(t),Qv=t=>t.type==="setValue",ui=t=>t.type==="setValueCurve",Kd=(t,e,n,r)=>{const s=t[e];return s===void 0?r:qi(s)||Qv(s)?s.value:ui(s)?s.values[s.values.length-1]:b2(n,Kd(t,e-1,s.startTime,r),s)},kb=(t,e,n,r,s)=>n===void 0?[r.insertTime,s]:qi(n)?[n.endTime,n.value]:Qv(n)?[n.startTime,n.value]:ui(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,Kd(t,e-1,n.startTime,s)],vy=t=>t.type==="cancelAndHold",_y=t=>t.type==="cancelScheduledValues",Bi=t=>vy(t)||_y(t)?t.cancelTime:Ja(t)||Qd(t)?t.endTime:t.startTime,Cb=(t,e,n,{endTime:r,value:s})=>n===s?s:0<n&&0<s||n<0&&s<0?n*(s/n)**((t-e)/(r-e)):0,jb=(t,e,n,{endTime:r,value:s})=>n+(t-e)/(r-e)*(s-n),aA=(t,e)=>{const n=Math.floor(e),r=Math.ceil(e);return n===r?t[n]:(1-(e-n))*t[n]+(1-(r-e))*t[r]},lA=(t,{duration:e,startTime:n,values:r})=>{const s=(t-n)/e*(r.length-1);return aA(r,s)},Zh=t=>t.type==="setTarget";class uA{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const n=Bi(e);if(vy(e)||_y(e)){const r=this._automationEvents.findIndex(i=>_y(e)&&ui(i)?i.startTime+i.duration>=n:Bi(i)>=n),s=this._automationEvents[r];if(r!==-1&&(this._automationEvents=this._automationEvents.slice(0,r)),vy(e)){const i=this._automationEvents[this._automationEvents.length-1];if(s!==void 0&&qi(s)){if(Zh(i))throw new Error("The internal list is malformed.");const a=ui(i)?i.startTime+i.duration:Bi(i),o=ui(i)?i.values[i.values.length-1]:i.value,h=Ja(s)?Cb(n,a,o,s):jb(n,a,o,s),d=Ja(s)?Tb(h,n,this._currenTime):Eb(h,n,this._currenTime);this._automationEvents.push(d)}i!==void 0&&Zh(i)&&this._automationEvents.push(yy(this.getValue(n),n)),i!==void 0&&ui(i)&&i.startTime+i.duration>n&&(this._automationEvents[this._automationEvents.length-1]=_2(new Float32Array([6,7]),i.startTime,n-i.startTime))}}else{const r=this._automationEvents.findIndex(a=>Bi(a)>n),s=r===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[r-1];if(s!==void 0&&ui(s)&&Bi(s)+s.duration>n)return!1;const i=Ja(e)?Tb(e.value,e.endTime,this._currenTime):Qd(e)?Eb(e.value,n,this._currenTime):e;if(r===-1)this._automationEvents.push(i);else{if(ui(e)&&n+e.duration>Bi(this._automationEvents[r]))return!1;this._automationEvents.splice(r,0,i)}}return!0}flush(e){const n=this._automationEvents.findIndex(r=>Bi(r)>e);if(n>1){const r=this._automationEvents.slice(n-1),s=r[0];Zh(s)&&r.unshift(yy(Kd(this._automationEvents,n-2,s.startTime,this._defaultValue),s.startTime)),this._automationEvents=r}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const n=this._automationEvents.findIndex(a=>Bi(a)>e),r=this._automationEvents[n],s=(n===-1?this._automationEvents.length:n)-1,i=this._automationEvents[s];if(i!==void 0&&Zh(i)&&(r===void 0||!qi(r)||r.insertTime>e))return b2(e,Kd(this._automationEvents,s-1,i.startTime,this._defaultValue),i);if(i!==void 0&&Qv(i)&&(r===void 0||!qi(r)))return i.value;if(i!==void 0&&ui(i)&&(r===void 0||!qi(r)||i.startTime+i.duration>e))return e<i.startTime+i.duration?lA(e,i):i.values[i.values.length-1];if(i!==void 0&&qi(i)&&(r===void 0||!qi(r)))return i.value;if(r!==void 0&&Ja(r)){const[a,o]=kb(this._automationEvents,s,i,r,this._defaultValue);return Cb(e,a,o,r)}if(r!==void 0&&Qd(r)){const[a,o]=kb(this._automationEvents,s,i,r,this._defaultValue);return jb(e,a,o,r)}return this._defaultValue}}const cA=t=>({cancelTime:t,type:"cancelAndHold"}),hA=t=>({cancelTime:t,type:"cancelScheduledValues"}),dA=(t,e)=>({endTime:e,type:"exponentialRampToValue",value:t}),fA=(t,e)=>({endTime:e,type:"linearRampToValue",value:t}),pA=(t,e,n)=>({startTime:e,target:t,timeConstant:n,type:"setTarget"}),mA=()=>new DOMException("","AbortError"),gA=t=>(e,n,[r,s,i],a)=>{t(e[s],[n,r,i],o=>o[0]===n&&o[1]===r,a)},yA=t=>(e,n,r)=>{const s=[];for(let i=0;i<r.numberOfInputs;i+=1)s.push(new Set);t.set(e,{activeInputs:s,outputs:new Set,passiveInputs:new WeakMap,renderer:n})},vA=t=>(e,n)=>{t.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:n})},bl=new WeakSet,w2=new WeakMap,Kv=new WeakMap,x2=new WeakMap,Zv=new WeakMap,Pp=new WeakMap,S2=new WeakMap,by=new WeakMap,wy=new WeakMap,xy=new WeakMap,T2={construct(){return T2}},_A=t=>{try{const e=new Proxy(t,T2);new e}catch{return!1}return!0},Mb=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,Ab=(t,e)=>{const n=[];let r=t.replace(/^[\s]+/,""),s=r.match(Mb);for(;s!==null;){const i=s[1].slice(1,-1),a=s[0].replace(/([\s]+)?;?$/,"").replace(i,new URL(i,e).toString());n.push(a),r=r.slice(s[0].length).replace(/^[\s]+/,""),s=r.match(Mb)}return[n.join(";"),r]},Db=t=>{if(t!==void 0&&!Array.isArray(t))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},Ob=t=>{if(!_A(t))throw new TypeError("The given value for processorCtor should be a constructor.");if(t.prototype===null||typeof t.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},bA=(t,e,n,r,s,i,a,o,h,d,g,m,c)=>{let l=0;return(u,f,p={credentials:"omit"})=>{const y=g.get(u);if(y!==void 0&&y.has(f))return Promise.resolve();const _=d.get(u);if(_!==void 0){const S=_.get(f);if(S!==void 0)return S}const b=i(u),x=b.audioWorklet===void 0?s(f).then(([S,E])=>{const[C,M]=Ab(S,E),I=`${C};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${M}
})})(window,'_AWGS')`;return n(I)}).then(()=>{const S=c._AWGS.pop();if(S===void 0)throw new SyntaxError;r(b.currentTime,b.sampleRate,()=>S(class{},void 0,(E,C)=>{if(E.trim()==="")throw e();const M=wy.get(b);if(M!==void 0){if(M.has(E))throw e();Ob(C),Db(C.parameterDescriptors),M.set(E,C)}else Ob(C),Db(C.parameterDescriptors),wy.set(b,new Map([[E,C]]))},b.sampleRate,void 0,void 0))}):Promise.all([s(f),Promise.resolve(t(m,m))]).then(([[S,E],C])=>{const M=l+1;l=M;const[I,A]=Ab(S,E),N=`${I};((AudioWorkletProcessor,registerProcessor)=>{${A}
})(${C?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${C?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${C?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${M}',class extends AudioWorkletProcessor{process(){return !1}})`,U=new Blob([N],{type:"application/javascript; charset=utf-8"}),K=URL.createObjectURL(U);return b.audioWorklet.addModule(K,p).then(()=>{if(o(b))return b;const J=a(b);return J.audioWorklet.addModule(K,p).then(()=>J)}).then(J=>{if(h===null)throw new SyntaxError;try{new h(J,`__sac${M}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(K))});return _===void 0?d.set(u,new Map([[f,x]])):_.set(f,x),x.then(()=>{const S=g.get(u);S===void 0?g.set(u,new Set([f])):S.add(f)}).finally(()=>{const S=d.get(u);S!==void 0&&S.delete(f)}),x}},Ds=(t,e)=>{const n=t.get(e);if(n===void 0)throw new Error("A value with the given key could not be found.");return n},Lp=(t,e)=>{const n=Array.from(t).filter(e);if(n.length>1)throw Error("More than one element was found.");if(n.length===0)throw Error("No element was found.");const[r]=n;return t.delete(r),r},E2=(t,e,n,r)=>{const s=Ds(t,e),i=Lp(s,a=>a[0]===n&&a[1]===r);return s.size===0&&t.delete(e),i},Jc=t=>Ds(S2,t),wl=t=>{if(bl.has(t))throw new Error("The AudioNode is already stored.");bl.add(t),Jc(t).forEach(e=>e(!0))},k2=t=>"port"in t,eh=t=>{if(!bl.has(t))throw new Error("The AudioNode is not stored.");bl.delete(t),Jc(t).forEach(e=>e(!1))},Sy=(t,e)=>{!k2(t)&&e.every(n=>n.size===0)&&eh(t)},wA=(t,e,n,r,s,i,a,o,h,d,g,m,c)=>{const l=new WeakMap;return(u,f,p,y,_)=>{const{activeInputs:b,passiveInputs:x}=i(f),{outputs:S}=i(u),E=o(u),C=M=>{const I=h(f),A=h(u);if(M){const D=E2(x,u,p,y);t(b,u,D,!1),!_&&!m(u)&&n(A,I,p,y),c(f)&&wl(f)}else{const D=r(b,u,p,y);e(x,y,D,!1),!_&&!m(u)&&s(A,I,p,y);const L=a(f);if(L===0)g(f)&&Sy(f,b);else{const O=l.get(f);O!==void 0&&clearTimeout(O),l.set(f,setTimeout(()=>{g(f)&&Sy(f,b)},L*1e3))}}};return d(S,[f,p,y],M=>M[0]===f&&M[1]===p&&M[2]===y,!0)?(E.add(C),g(u)?t(b,u,[p,y,C],!0):e(x,y,[u,p,C],!0),!0):!1}},xA=t=>(e,n,[r,s,i],a)=>{const o=e.get(r);o===void 0?e.set(r,new Set([[s,n,i]])):t(o,[s,n,i],h=>h[0]===s&&h[1]===n,a)},SA=t=>(e,n)=>{const r=t(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(r).connect(e.destination);const s=()=>{n.removeEventListener("ended",s),n.disconnect(r),r.disconnect()};n.addEventListener("ended",s)},TA=t=>(e,n)=>{t(e).add(n)},EA={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},kA=(t,e,n,r,s,i)=>class extends t{constructor(o,h){const d=s(o),g={...EA,...h},m=r(d,g),c=i(d)?e():null;super(o,!1,m,c),this._nativeAnalyserNode=m}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(o){this._nativeAnalyserNode.fftSize=o}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(o){const h=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=o,!(o>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=h,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(o){const h=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=o,!(this._nativeAnalyserNode.maxDecibels>o))throw this._nativeAnalyserNode.minDecibels=h,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(o){this._nativeAnalyserNode.smoothingTimeConstant=o}getByteFrequencyData(o){this._nativeAnalyserNode.getByteFrequencyData(o)}getByteTimeDomainData(o){this._nativeAnalyserNode.getByteTimeDomainData(o)}getFloatFrequencyData(o){this._nativeAnalyserNode.getFloatFrequencyData(o)}getFloatTimeDomainData(o){this._nativeAnalyserNode.getFloatTimeDomainData(o)}},bn=(t,e)=>t.context===e,CA=(t,e,n)=>()=>{const r=new WeakMap,s=async(i,a)=>{let o=e(i);if(!bn(o,a)){const d={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,fftSize:o.fftSize,maxDecibels:o.maxDecibels,minDecibels:o.minDecibels,smoothingTimeConstant:o.smoothingTimeConstant};o=t(a,d)}return r.set(a,o),await n(i,a,o),o};return{render(i,a){const o=r.get(a);return o!==void 0?Promise.resolve(o):s(i,a)}}},Zd=t=>{try{t.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},ti=()=>new DOMException("","IndexSizeError"),Jv=t=>{t.getChannelData=(e=>n=>{try{return e.call(t,n)}catch(r){throw r.code===12?ti():r}})(t.getChannelData)},jA={numberOfChannels:1},MA=(t,e,n,r,s,i,a,o)=>{let h=null;return class C2{constructor(g){if(s===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:m,numberOfChannels:c,sampleRate:l}={...jA,...g};h===null&&(h=new s(1,1,44100));const u=r!==null&&e(i,i)?new r({length:m,numberOfChannels:c,sampleRate:l}):h.createBuffer(c,m,l);if(u.numberOfChannels===0)throw n();return typeof u.copyFromChannel!="function"?(a(u),Jv(u)):e(Zd,()=>Zd(u))||o(u),t.add(u),u}static[Symbol.hasInstance](g){return g!==null&&typeof g=="object"&&Object.getPrototypeOf(g)===C2.prototype||t.has(g)}}},Pn=-34028234663852886e22,Sn=-Pn,mi=t=>bl.has(t),AA={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},DA=(t,e,n,r,s,i,a,o)=>class extends t{constructor(d,g){const m=i(d),c={...AA,...g},l=s(m,c),u=a(m),f=u?e():null;super(d,!1,l,f),this._audioBufferSourceNodeRenderer=f,this._isBufferNullified=!1,this._isBufferSet=c.buffer!==null,this._nativeAudioBufferSourceNode=l,this._onended=null,this._playbackRate=n(this,u,l.playbackRate,Sn,Pn)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(d){if(this._nativeAudioBufferSourceNode.buffer=d,d!==null){if(this._isBufferSet)throw r();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(d){this._nativeAudioBufferSourceNode.loop=d}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(d){this._nativeAudioBufferSourceNode.loopEnd=d}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(d){this._nativeAudioBufferSourceNode.loopStart=d}get onended(){return this._onended}set onended(d){const g=typeof d=="function"?o(this,d):null;this._nativeAudioBufferSourceNode.onended=g;const m=this._nativeAudioBufferSourceNode.onended;this._onended=m!==null&&m===g?d:m}get playbackRate(){return this._playbackRate}start(d=0,g=0,m){if(this._nativeAudioBufferSourceNode.start(d,g,m),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=m===void 0?[d,g]:[d,g,m]),this.context.state!=="closed"){wl(this);const c=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",c),mi(this)&&eh(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",c)}}stop(d=0){this._nativeAudioBufferSourceNode.stop(d),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=d)}},OA=(t,e,n,r,s)=>()=>{const i=new WeakMap;let a=null,o=null;const h=async(d,g)=>{let m=n(d);const c=bn(m,g);if(!c){const l={buffer:m.buffer,channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,loop:m.loop,loopEnd:m.loopEnd,loopStart:m.loopStart,playbackRate:m.playbackRate.value};m=e(g,l),a!==null&&m.start(...a),o!==null&&m.stop(o)}return i.set(g,m),c?await t(g,d.playbackRate,m.playbackRate):await r(g,d.playbackRate,m.playbackRate),await s(d,g,m),m};return{set start(d){a=d},set stop(d){o=d},render(d,g){const m=i.get(g);return m!==void 0?Promise.resolve(m):h(d,g)}}},IA=t=>"playbackRate"in t,RA=t=>"frequency"in t&&"gain"in t,PA=t=>"offset"in t,LA=t=>!("frequency"in t)&&"gain"in t,NA=t=>"detune"in t&&"frequency"in t,FA=t=>"pan"in t,kn=t=>Ds(w2,t),th=t=>Ds(x2,t),Ty=(t,e)=>{const{activeInputs:n}=kn(t);n.forEach(s=>s.forEach(([i])=>{e.includes(t)||Ty(i,[...e,t])}));const r=IA(t)?[t.playbackRate]:k2(t)?Array.from(t.parameters.values()):RA(t)?[t.Q,t.detune,t.frequency,t.gain]:PA(t)?[t.offset]:LA(t)?[t.gain]:NA(t)?[t.detune,t.frequency]:FA(t)?[t.pan]:[];for(const s of r){const i=th(s);i!==void 0&&i.activeInputs.forEach(([a])=>Ty(a,e))}mi(t)&&eh(t)},j2=t=>{Ty(t.destination,[])},UA=t=>t===void 0||typeof t=="number"||typeof t=="string"&&(t==="balanced"||t==="interactive"||t==="playback"),VA=(t,e,n,r,s,i,a,o,h)=>class extends t{constructor(g={}){if(h===null)throw new Error("Missing the native AudioContext constructor.");let m;try{m=new h(g)}catch(u){throw u.code===12&&u.message==="sampleRate is not in range"?n():u}if(m===null)throw r();if(!UA(g.latencyHint))throw new TypeError(`The provided value '${g.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(g.sampleRate!==void 0&&m.sampleRate!==g.sampleRate)throw n();super(m,2);const{latencyHint:c}=g,{sampleRate:l}=m;if(this._baseLatency=typeof m.baseLatency=="number"?m.baseLatency:c==="balanced"?512/l:c==="interactive"||c===void 0?256/l:c==="playback"?1024/l:Math.max(2,Math.min(128,Math.round(c*l/128)))*128/l,this._nativeAudioContext=m,h.name==="webkitAudioContext"?(this._nativeGainNode=m.createGain(),this._nativeOscillatorNode=m.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(m.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,m.state==="running"){this._state="suspended";const u=()=>{this._state==="suspended"&&(this._state=null),m.removeEventListener("statechange",u)};m.addEventListener("statechange",u)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),j2(this)}))}createMediaElementSource(g){return new s(this,{mediaElement:g})}createMediaStreamDestination(){return new i(this)}createMediaStreamSource(g){return new a(this,{mediaStream:g})}createMediaStreamTrackSource(g){return new o(this,{mediaStreamTrack:g})}resume(){return this._state==="suspended"?new Promise((g,m)=>{const c=()=>{this._nativeAudioContext.removeEventListener("statechange",c),this._nativeAudioContext.state==="running"?g():this.resume().then(g,m)};this._nativeAudioContext.addEventListener("statechange",c)}):this._nativeAudioContext.resume().catch(g=>{throw g===void 0||g.code===15?e():g})}suspend(){return this._nativeAudioContext.suspend().catch(g=>{throw g===void 0?e():g})}},BA=(t,e,n,r,s,i,a,o)=>class extends t{constructor(d,g){const m=i(d),c=a(m),l=s(m,g,c),u=c?e(o):null;super(d,!1,l,u),this._isNodeOfNativeOfflineAudioContext=c,this._nativeAudioDestinationNode=l}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(d){if(this._isNodeOfNativeOfflineAudioContext)throw r();if(d>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=d}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(d){if(this._isNodeOfNativeOfflineAudioContext)throw r();this._nativeAudioDestinationNode.channelCountMode=d}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},GA=t=>{const e=new WeakMap,n=async(r,s)=>{const i=s.destination;return e.set(s,i),await t(r,s,i),i};return{render(r,s){const i=e.get(s);return i!==void 0?Promise.resolve(i):n(r,s)}}},zA=(t,e,n,r,s,i,a,o)=>(h,d)=>{const g=d.listener,m=()=>{const S=new Float32Array(1),E=e(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),C=a(d);let M=!1,I=[0,0,-1,0,1,0],A=[0,0,0];const D=()=>{if(M)return;M=!0;const U=r(d,256,9,0);U.onaudioprocess=({inputBuffer:K})=>{const J=[i(K,S,0),i(K,S,1),i(K,S,2),i(K,S,3),i(K,S,4),i(K,S,5)];J.some((H,$)=>H!==I[$])&&(g.setOrientation(...J),I=J);const z=[i(K,S,6),i(K,S,7),i(K,S,8)];z.some((H,$)=>H!==A[$])&&(g.setPosition(...z),A=z)},E.connect(U)},L=U=>K=>{K!==I[U]&&(I[U]=K,g.setOrientation(...I))},O=U=>K=>{K!==A[U]&&(A[U]=K,g.setPosition(...A))},N=(U,K,J)=>{const z=n(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:K});z.connect(E,0,U),z.start(),Object.defineProperty(z.offset,"defaultValue",{get(){return K}});const H=t({context:h},C,z.offset,Sn,Pn);return o(H,"value",$=>()=>$.call(H),$=>ne=>{try{$.call(H,ne)}catch(oe){if(oe.code!==9)throw oe}D(),C&&J(ne)}),H.cancelAndHoldAtTime=($=>C?()=>{throw s()}:(...ne)=>{const oe=$.apply(H,ne);return D(),oe})(H.cancelAndHoldAtTime),H.cancelScheduledValues=($=>C?()=>{throw s()}:(...ne)=>{const oe=$.apply(H,ne);return D(),oe})(H.cancelScheduledValues),H.exponentialRampToValueAtTime=($=>C?()=>{throw s()}:(...ne)=>{const oe=$.apply(H,ne);return D(),oe})(H.exponentialRampToValueAtTime),H.linearRampToValueAtTime=($=>C?()=>{throw s()}:(...ne)=>{const oe=$.apply(H,ne);return D(),oe})(H.linearRampToValueAtTime),H.setTargetAtTime=($=>C?()=>{throw s()}:(...ne)=>{const oe=$.apply(H,ne);return D(),oe})(H.setTargetAtTime),H.setValueAtTime=($=>C?()=>{throw s()}:(...ne)=>{const oe=$.apply(H,ne);return D(),oe})(H.setValueAtTime),H.setValueCurveAtTime=($=>C?()=>{throw s()}:(...ne)=>{const oe=$.apply(H,ne);return D(),oe})(H.setValueCurveAtTime),H};return{forwardX:N(0,0,L(0)),forwardY:N(1,0,L(1)),forwardZ:N(2,-1,L(2)),positionX:N(6,0,O(0)),positionY:N(7,0,O(1)),positionZ:N(8,0,O(2)),upX:N(3,0,L(3)),upY:N(4,1,L(4)),upZ:N(5,0,L(5))}},{forwardX:c,forwardY:l,forwardZ:u,positionX:f,positionY:p,positionZ:y,upX:_,upY:b,upZ:x}=g.forwardX===void 0?m():g;return{get forwardX(){return c},get forwardY(){return l},get forwardZ(){return u},get positionX(){return f},get positionY(){return p},get positionZ(){return y},get upX(){return _},get upY(){return b},get upZ(){return x}}},Jd=t=>"context"in t,rh=t=>Jd(t[0]),xa=(t,e,n,r)=>{for(const s of t)if(n(s)){if(r)return!1;throw Error("The set contains at least one similar element.")}return t.add(e),!0},Ib=(t,e,[n,r],s)=>{xa(t,[e,n,r],i=>i[0]===e&&i[1]===n,s)},Rb=(t,[e,n,r],s)=>{const i=t.get(e);i===void 0?t.set(e,new Set([[n,r]])):xa(i,[n,r],a=>a[0]===n,s)},ru=t=>"inputs"in t,ef=(t,e,n,r)=>{if(ru(e)){const s=e.inputs[r];return t.connect(s,n,0),[s,n,0]}return t.connect(e,n,r),[e,n,r]},M2=(t,e,n)=>{for(const r of t)if(r[0]===e&&r[1]===n)return t.delete(r),r;return null},qA=(t,e,n)=>Lp(t,r=>r[0]===e&&r[1]===n),A2=(t,e)=>{if(!Jc(t).delete(e))throw new Error("Missing the expected event listener.")},D2=(t,e,n)=>{const r=Ds(t,e),s=Lp(r,i=>i[0]===n);return r.size===0&&t.delete(e),s},tf=(t,e,n,r)=>{ru(e)?t.disconnect(e.inputs[r],n,0):t.disconnect(e,n,r)},pr=t=>Ds(Kv,t),jc=t=>Ds(Zv,t),ia=t=>by.has(t),_d=t=>!bl.has(t),Pb=(t,e)=>new Promise(n=>{if(e!==null)n(!0);else{const r=t.createScriptProcessor(256,1,1),s=t.createGain(),i=t.createBuffer(1,2,44100),a=i.getChannelData(0);a[0]=1,a[1]=1;const o=t.createBufferSource();o.buffer=i,o.loop=!0,o.connect(r).connect(t.destination),o.connect(s),o.disconnect(s),r.onaudioprocess=h=>{const d=h.inputBuffer.getChannelData(0);Array.prototype.some.call(d,g=>g===1)?n(!0):n(!1),o.stop(),r.onaudioprocess=null,o.disconnect(r),r.disconnect(t.destination)},o.start()}}),sg=(t,e)=>{const n=new Map;for(const r of t)for(const s of r){const i=n.get(s);n.set(s,i===void 0?1:i+1)}n.forEach((r,s)=>e(s,r))},rf=t=>"context"in t,WA=t=>{const e=new Map;t.connect=(n=>(r,s=0,i=0)=>{const a=rf(r)?n(r,s,i):n(r,s),o=e.get(r);return o===void 0?e.set(r,[{input:i,output:s}]):o.every(h=>h.input!==i||h.output!==s)&&o.push({input:i,output:s}),a})(t.connect.bind(t)),t.disconnect=(n=>(r,s,i)=>{if(n.apply(t),r===void 0)e.clear();else if(typeof r=="number")for(const[a,o]of e){const h=o.filter(d=>d.output!==r);h.length===0?e.delete(a):e.set(a,h)}else if(e.has(r))if(s===void 0)e.delete(r);else{const a=e.get(r);if(a!==void 0){const o=a.filter(h=>h.output!==s&&(h.input!==i||i===void 0));o.length===0?e.delete(r):e.set(r,o)}}for(const[a,o]of e)o.forEach(h=>{rf(a)?t.connect(a,h.output,h.input):t.connect(a,h.output)})})(t.disconnect)},$A=(t,e,n,r)=>{const{activeInputs:s,passiveInputs:i}=th(e),{outputs:a}=kn(t),o=Jc(t),h=d=>{const g=pr(t),m=jc(e);if(d){const c=D2(i,t,n);Ib(s,t,c,!1),!r&&!ia(t)&&g.connect(m,n)}else{const c=qA(s,t,n);Rb(i,c,!1),!r&&!ia(t)&&g.disconnect(m,n)}};return xa(a,[e,n],d=>d[0]===e&&d[1]===n,!0)?(o.add(h),mi(t)?Ib(s,t,[n,h],!0):Rb(i,[t,n,h],!0),!0):!1},HA=(t,e,n,r)=>{const{activeInputs:s,passiveInputs:i}=kn(e),a=M2(s[r],t,n);return a===null?[E2(i,t,n,r)[2],!1]:[a[2],!0]},XA=(t,e,n)=>{const{activeInputs:r,passiveInputs:s}=th(e),i=M2(r,t,n);return i===null?[D2(s,t,n)[1],!1]:[i[2],!0]},e0=(t,e,n,r,s)=>{const[i,a]=HA(t,n,r,s);if(i!==null&&(A2(t,i),a&&!e&&!ia(t)&&tf(pr(t),pr(n),r,s)),mi(n)){const{activeInputs:o}=kn(n);Sy(n,o)}},t0=(t,e,n,r)=>{const[s,i]=XA(t,n,r);s!==null&&(A2(t,s),i&&!e&&!ia(t)&&pr(t).disconnect(jc(n),r))},YA=(t,e)=>{const n=kn(t),r=[];for(const s of n.outputs)rh(s)?e0(t,e,...s):t0(t,e,...s),r.push(s[0]);return n.outputs.clear(),r},QA=(t,e,n)=>{const r=kn(t),s=[];for(const i of r.outputs)i[1]===n&&(rh(i)?e0(t,e,...i):t0(t,e,...i),s.push(i[0]),r.outputs.delete(i));return s},KA=(t,e,n,r,s)=>{const i=kn(t);return Array.from(i.outputs).filter(a=>a[0]===n&&(r===void 0||a[1]===r)&&(s===void 0||a[2]===s)).map(a=>(rh(a)?e0(t,e,...a):t0(t,e,...a),i.outputs.delete(a),a[0]))},ZA=(t,e,n,r,s,i,a,o,h,d,g,m,c,l,u,f)=>class extends d{constructor(y,_,b,x){super(b),this._context=y,this._nativeAudioNode=b;const S=g(y);m(S)&&n(Pb,()=>Pb(S,f))!==!0&&WA(b),Kv.set(this,b),S2.set(this,new Set),y.state!=="closed"&&_&&wl(this),t(this,x,b)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(y){this._nativeAudioNode.channelCount=y}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(y){this._nativeAudioNode.channelCountMode=y}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(y){this._nativeAudioNode.channelInterpretation=y}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(y,_=0,b=0){if(_<0||_>=this._nativeAudioNode.numberOfOutputs)throw s();const x=g(this._context),S=u(x);if(c(y)||l(y))throw i();if(Jd(y)){const M=pr(y);try{const A=ef(this._nativeAudioNode,M,_,b),D=_d(this);(S||D)&&this._nativeAudioNode.disconnect(...A),this.context.state!=="closed"&&!D&&_d(y)&&wl(y)}catch(A){throw A.code===12?i():A}if(e(this,y,_,b,S)){const A=h([this],y);sg(A,r(S))}return y}const E=jc(y);if(E.name==="playbackRate"&&E.maxValue===1024)throw a();try{this._nativeAudioNode.connect(E,_),(S||_d(this))&&this._nativeAudioNode.disconnect(E,_)}catch(M){throw M.code===12?i():M}if($A(this,y,_,S)){const M=h([this],y);sg(M,r(S))}}disconnect(y,_,b){let x;const S=g(this._context),E=u(S);if(y===void 0)x=YA(this,E);else if(typeof y=="number"){if(y<0||y>=this.numberOfOutputs)throw s();x=QA(this,E,y)}else{if(_!==void 0&&(_<0||_>=this.numberOfOutputs)||Jd(y)&&b!==void 0&&(b<0||b>=y.numberOfInputs))throw s();if(x=KA(this,E,y,_,b),x.length===0)throw i()}for(const C of x){const M=h([this],C);sg(M,o)}}},JA=(t,e,n,r,s,i,a,o,h,d,g,m,c)=>(l,u,f,p=null,y=null)=>{const _=new uA(f.defaultValue),b=u?r(_):null,x={get defaultValue(){return f.defaultValue},get maxValue(){return p===null?f.maxValue:p},get minValue(){return y===null?f.minValue:y},get value(){return f.value},set value(S){f.value=S,x.setValueAtTime(S,l.context.currentTime)},cancelAndHoldAtTime(S){if(typeof f.cancelAndHoldAtTime=="function")b===null&&_.flush(l.context.currentTime),_.add(s(S)),f.cancelAndHoldAtTime(S);else{const E=Array.from(_).pop();b===null&&_.flush(l.context.currentTime),_.add(s(S));const C=Array.from(_).pop();f.cancelScheduledValues(S),E!==C&&C!==void 0&&(C.type==="exponentialRampToValue"?f.exponentialRampToValueAtTime(C.value,C.endTime):C.type==="linearRampToValue"?f.linearRampToValueAtTime(C.value,C.endTime):C.type==="setValue"?f.setValueAtTime(C.value,C.startTime):C.type==="setValueCurve"&&f.setValueCurveAtTime(C.values,C.startTime,C.duration))}return x},cancelScheduledValues(S){return b===null&&_.flush(l.context.currentTime),_.add(i(S)),f.cancelScheduledValues(S),x},exponentialRampToValueAtTime(S,E){if(S===0)throw new RangeError;if(!Number.isFinite(E)||E<0)throw new RangeError;return b===null&&_.flush(l.context.currentTime),_.add(a(S,E)),f.exponentialRampToValueAtTime(S,E),x},linearRampToValueAtTime(S,E){return b===null&&_.flush(l.context.currentTime),_.add(o(S,E)),f.linearRampToValueAtTime(S,E),x},setTargetAtTime(S,E,C){return b===null&&_.flush(l.context.currentTime),_.add(h(S,E,C)),f.setTargetAtTime(S,E,C),x},setValueAtTime(S,E){return b===null&&_.flush(l.context.currentTime),_.add(d(S,E)),f.setValueAtTime(S,E),x},setValueCurveAtTime(S,E,C){const M=S instanceof Float32Array?S:new Float32Array(S);if(m!==null&&m.name==="webkitAudioContext"){const I=E+C,A=l.context.sampleRate,D=Math.ceil(E*A),L=Math.floor(I*A),O=L-D,N=new Float32Array(O);for(let K=0;K<O;K+=1){const J=(M.length-1)/C*((D+K)/A-E),z=Math.floor(J),H=Math.ceil(J);N[K]=z===H?M[z]:(1-(J-z))*M[z]+(1-(H-J))*M[H]}b===null&&_.flush(l.context.currentTime),_.add(g(N,E,C)),f.setValueCurveAtTime(N,E,C);const U=L/A;U<I&&c(x,N[N.length-1],U),c(x,M[M.length-1],I)}else b===null&&_.flush(l.context.currentTime),_.add(g(M,E,C)),f.setValueCurveAtTime(M,E,C);return x}};return n.set(x,f),e.set(x,l),t(x,b),x},eD=t=>({replay(e){for(const n of t)if(n.type==="exponentialRampToValue"){const{endTime:r,value:s}=n;e.exponentialRampToValueAtTime(s,r)}else if(n.type==="linearRampToValue"){const{endTime:r,value:s}=n;e.linearRampToValueAtTime(s,r)}else if(n.type==="setTarget"){const{startTime:r,target:s,timeConstant:i}=n;e.setTargetAtTime(s,r,i)}else if(n.type==="setValue"){const{startTime:r,value:s}=n;e.setValueAtTime(s,r)}else if(n.type==="setValueCurve"){const{duration:r,startTime:s,values:i}=n;e.setValueCurveAtTime(i,s,r)}else throw new Error("Can't apply an unknown automation.")}});class O2{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,n=null){return this._map.forEach((r,s)=>e.call(n,r,s,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const tD={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},rD=(t,e,n,r,s,i,a,o,h,d,g,m,c,l)=>class extends e{constructor(f,p,y){var _;const b=o(f),x=h(b),S=g({...tD,...y});c(S);const E=wy.get(b),C=E==null?void 0:E.get(p),M=x||b.state!=="closed"?b:(_=a(b))!==null&&_!==void 0?_:b,I=s(M,x?null:f.baseLatency,d,p,C,S),A=x?r(p,S,C):null;super(f,!0,I,A);const D=[];I.parameters.forEach((O,N)=>{const U=n(this,x,O);D.push([N,U])}),this._nativeAudioWorkletNode=I,this._onprocessorerror=null,this._parameters=new O2(D),x&&t(b,this);const{activeInputs:L}=i(this);m(I,L)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(f){const p=typeof f=="function"?l(this,f):null;this._nativeAudioWorkletNode.onprocessorerror=p;const y=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=y!==null&&y===p?f:y}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function nf(t,e,n,r,s){if(typeof t.copyFromChannel=="function")e[n].byteLength===0&&(e[n]=new Float32Array(128)),t.copyFromChannel(e[n],r,s);else{const i=t.getChannelData(r);if(e[n].byteLength===0)e[n]=i.slice(s,s+128);else{const a=new Float32Array(i.buffer,s*Float32Array.BYTES_PER_ELEMENT,128);e[n].set(a)}}}const I2=(t,e,n,r,s)=>{typeof t.copyToChannel=="function"?e[n].byteLength!==0&&t.copyToChannel(e[n],r,s):e[n].byteLength!==0&&t.getChannelData(r).set(e[n],s)},sf=(t,e)=>{const n=[];for(let r=0;r<t;r+=1){const s=[],i=typeof e=="number"?e:e[r];for(let a=0;a<i;a+=1)s.push(new Float32Array(128));n.push(s)}return n},nD=(t,e)=>{const n=Ds(xy,t),r=pr(e);return Ds(n,r)},sD=async(t,e,n,r,s,i,a)=>{const o=e===null?Math.ceil(t.context.length/128)*128:e.length,h=r.channelCount*r.numberOfInputs,d=s.reduce((p,y)=>p+y,0),g=d===0?null:n.createBuffer(d,o,n.sampleRate);if(i===void 0)throw new Error("Missing the processor constructor.");const m=kn(t),c=await nD(n,t),l=sf(r.numberOfInputs,r.channelCount),u=sf(r.numberOfOutputs,s),f=Array.from(t.parameters.keys()).reduce((p,y)=>({...p,[y]:new Float32Array(128)}),{});for(let p=0;p<o;p+=128){if(r.numberOfInputs>0&&e!==null)for(let y=0;y<r.numberOfInputs;y+=1)for(let _=0;_<r.channelCount;_+=1)nf(e,l[y],_,_,p);i.parameterDescriptors!==void 0&&e!==null&&i.parameterDescriptors.forEach(({name:y},_)=>{nf(e,f,y,h+_,p)});for(let y=0;y<r.numberOfInputs;y+=1)for(let _=0;_<s[y];_+=1)u[y][_].byteLength===0&&(u[y][_]=new Float32Array(128));try{const y=l.map((b,x)=>m.activeInputs[x].size===0?[]:b),_=a(p/n.sampleRate,n.sampleRate,()=>c.process(y,u,f));if(g!==null)for(let b=0,x=0;b<r.numberOfOutputs;b+=1){for(let S=0;S<s[b];S+=1)I2(g,u[b],S,x+S,p);x+=s[b]}if(!_)break}catch(y){t.dispatchEvent(new ErrorEvent("processorerror",{colno:y.colno,filename:y.filename,lineno:y.lineno,message:y.message}));break}}return g},iD=(t,e,n,r,s,i,a,o,h,d,g,m,c,l,u,f)=>(p,y,_)=>{const b=new WeakMap;let x=null;const S=async(E,C)=>{let M=g(E),I=null;const A=bn(M,C),D=Array.isArray(y.outputChannelCount)?y.outputChannelCount:Array.from(y.outputChannelCount);if(m===null){const L=D.reduce((K,J)=>K+J,0),O=s(C,{channelCount:Math.max(1,L),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,L)}),N=[];for(let K=0;K<E.numberOfOutputs;K+=1)N.push(r(C,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:D[K]}));const U=a(C,{channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,gain:1});U.connect=e.bind(null,N),U.disconnect=h.bind(null,N),I=[O,N,U]}else A||(M=new m(C,p));if(b.set(C,I===null?M:I[2]),I!==null){if(x===null){if(_===void 0)throw new Error("Missing the processor constructor.");if(c===null)throw new Error("Missing the native OfflineAudioContext constructor.");const J=E.channelCount*E.numberOfInputs,z=_.parameterDescriptors===void 0?0:_.parameterDescriptors.length,H=J+z;x=sD(E,H===0?null:await(async()=>{const ne=new c(H,Math.ceil(E.context.length/128)*128,C.sampleRate),oe=[],_e=[];for(let fe=0;fe<y.numberOfInputs;fe+=1)oe.push(a(ne,{channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,gain:1})),_e.push(s(ne,{channelCount:y.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:y.channelCount}));const he=await Promise.all(Array.from(E.parameters.values()).map(async fe=>{const pe=i(ne,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:fe.value});return await l(ne,fe,pe.offset),pe})),Te=r(ne,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,J+z)});for(let fe=0;fe<y.numberOfInputs;fe+=1){oe[fe].connect(_e[fe]);for(let pe=0;pe<y.channelCount;pe+=1)_e[fe].connect(Te,pe,fe*y.channelCount+pe)}for(const[fe,pe]of he.entries())pe.connect(Te,0,J+fe),pe.start(0);return Te.connect(ne.destination),await Promise.all(oe.map(fe=>u(E,ne,fe))),f(ne)})(),C,y,D,_,d)}const L=await x,O=n(C,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[N,U,K]=I;L!==null&&(O.buffer=L,O.start(0)),O.connect(N);for(let J=0,z=0;J<E.numberOfOutputs;J+=1){const H=U[J];for(let $=0;$<D[J];$+=1)N.connect(H,z+$,$);z+=D[J]}return K}if(A)for(const[L,O]of E.parameters.entries())await t(C,O,M.parameters.get(L));else for(const[L,O]of E.parameters.entries())await l(C,O,M.parameters.get(L));return await u(E,C,M),M};return{render(E,C){o(C,E);const M=b.get(C);return M!==void 0?Promise.resolve(M):S(E,C)}}},oD=(t,e,n,r,s,i,a,o,h,d,g,m,c,l,u,f,p,y,_,b)=>class extends u{constructor(S,E){super(S,E),this._nativeContext=S,this._audioWorklet=t===void 0?void 0:{addModule:(C,M)=>t(this,C,M)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new s(this)}createBuffer(S,E,C){return new n({length:E,numberOfChannels:S,sampleRate:C})}createBufferSource(){return new r(this)}createChannelMerger(S=6){return new i(this,{numberOfInputs:S})}createChannelSplitter(S=6){return new a(this,{numberOfOutputs:S})}createConstantSource(){return new o(this)}createConvolver(){return new h(this)}createDelay(S=1){return new g(this,{maxDelayTime:S})}createDynamicsCompressor(){return new m(this)}createGain(){return new c(this)}createIIRFilter(S,E){return new l(this,{feedback:E,feedforward:S})}createOscillator(){return new f(this)}createPanner(){return new p(this)}createPeriodicWave(S,E,C={disableNormalization:!1}){return new y(this,{...C,imag:E,real:S})}createStereoPanner(){return new _(this)}createWaveShaper(){return new b(this)}decodeAudioData(S,E,C){return d(this._nativeContext,S).then(M=>(typeof E=="function"&&E(M),M),M=>{throw typeof C=="function"&&C(M),M})}},aD={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},lD=(t,e,n,r,s,i,a,o)=>class extends t{constructor(d,g){const m=i(d),c={...aD,...g},l=s(m,c),u=a(m),f=u?n():null;super(d,!1,l,f),this._Q=e(this,u,l.Q,Sn,Pn),this._detune=e(this,u,l.detune,1200*Math.log2(Sn),-1200*Math.log2(Sn)),this._frequency=e(this,u,l.frequency,d.sampleRate/2,0),this._gain=e(this,u,l.gain,40*Math.log10(Sn),Pn),this._nativeBiquadFilterNode=l,o(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(d){this._nativeBiquadFilterNode.type=d}getFrequencyResponse(d,g,m){try{this._nativeBiquadFilterNode.getFrequencyResponse(d,g,m)}catch(c){throw c.code===11?r():c}if(d.length!==g.length||g.length!==m.length)throw r()}},uD=(t,e,n,r,s)=>()=>{const i=new WeakMap,a=async(o,h)=>{let d=n(o);const g=bn(d,h);if(!g){const m={Q:d.Q.value,channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,detune:d.detune.value,frequency:d.frequency.value,gain:d.gain.value,type:d.type};d=e(h,m)}return i.set(h,d),g?(await t(h,o.Q,d.Q),await t(h,o.detune,d.detune),await t(h,o.frequency,d.frequency),await t(h,o.gain,d.gain)):(await r(h,o.Q,d.Q),await r(h,o.detune,d.detune),await r(h,o.frequency,d.frequency),await r(h,o.gain,d.gain)),await s(o,h,d),d};return{render(o,h){const d=i.get(h);return d!==void 0?Promise.resolve(d):a(o,h)}}},cD=(t,e)=>(n,r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t.get(n);if(i!==void 0)return i;try{const a=r();return a instanceof Promise?(t.set(n,a),a.catch(()=>!1).then(o=>(t.delete(n),e.set(n,o),o))):(e.set(n,a),a)}catch{return e.set(n,!1),!1}},hD={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},dD=(t,e,n,r,s)=>class extends t{constructor(a,o){const h=r(a),d={...hD,...o},g=n(h,d),m=s(h)?e():null;super(a,!1,g,m)}},fD=(t,e,n)=>()=>{const r=new WeakMap,s=async(i,a)=>{let o=e(i);if(!bn(o,a)){const d={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,numberOfInputs:o.numberOfInputs};o=t(a,d)}return r.set(a,o),await n(i,a,o),o};return{render(i,a){const o=r.get(a);return o!==void 0?Promise.resolve(o):s(i,a)}}},pD={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},mD=(t,e,n,r,s,i)=>class extends t{constructor(o,h){const d=r(o),g=i({...pD,...h}),m=n(d,g),c=s(d)?e():null;super(o,!1,m,c)}},gD=(t,e,n)=>()=>{const r=new WeakMap,s=async(i,a)=>{let o=e(i);if(!bn(o,a)){const d={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,numberOfOutputs:o.numberOfOutputs};o=t(a,d)}return r.set(a,o),await n(i,a,o),o};return{render(i,a){const o=r.get(a);return o!==void 0?Promise.resolve(o):s(i,a)}}},yD=t=>(e,n,r)=>t(n,e,r),vD=t=>(e,n,r=0,s=0)=>{const i=e[r];if(i===void 0)throw t();return rf(n)?i.connect(n,0,s):i.connect(n,0)},_D=t=>(e,n)=>{const r=t(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),s=e.createBuffer(1,2,44100);return r.buffer=s,r.loop=!0,r.connect(n),r.start(),()=>{r.stop(),r.disconnect(n)}},bD={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},wD=(t,e,n,r,s,i,a)=>class extends t{constructor(h,d){const g=s(h),m={...bD,...d},c=r(g,m),l=i(g),u=l?n():null;super(h,!1,c,u),this._constantSourceNodeRenderer=u,this._nativeConstantSourceNode=c,this._offset=e(this,l,c.offset,Sn,Pn),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(h){const d=typeof h=="function"?a(this,h):null;this._nativeConstantSourceNode.onended=d;const g=this._nativeConstantSourceNode.onended;this._onended=g!==null&&g===d?h:g}start(h=0){if(this._nativeConstantSourceNode.start(h),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=h),this.context.state!=="closed"){wl(this);const d=()=>{this._nativeConstantSourceNode.removeEventListener("ended",d),mi(this)&&eh(this)};this._nativeConstantSourceNode.addEventListener("ended",d)}}stop(h=0){this._nativeConstantSourceNode.stop(h),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=h)}},xD=(t,e,n,r,s)=>()=>{const i=new WeakMap;let a=null,o=null;const h=async(d,g)=>{let m=n(d);const c=bn(m,g);if(!c){const l={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,offset:m.offset.value};m=e(g,l),a!==null&&m.start(a),o!==null&&m.stop(o)}return i.set(g,m),c?await t(g,d.offset,m.offset):await r(g,d.offset,m.offset),await s(d,g,m),m};return{set start(d){a=d},set stop(d){o=d},render(d,g){const m=i.get(g);return m!==void 0?Promise.resolve(m):h(d,g)}}},SD=t=>e=>(t[0]=e,t[0]),TD={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},ED=(t,e,n,r,s,i)=>class extends t{constructor(o,h){const d=r(o),g={...TD,...h},m=n(d,g),l=s(d)?e():null;super(o,!1,m,l),this._isBufferNullified=!1,this._nativeConvolverNode=m,g.buffer!==null&&i(this,g.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(o){if(this._nativeConvolverNode.buffer=o,o===null&&this._nativeConvolverNode.buffer!==null){const h=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=h.createBuffer(1,1,44100),this._isBufferNullified=!0,i(this,0)}else this._isBufferNullified=!1,i(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(o){this._nativeConvolverNode.normalize=o}},kD=(t,e,n)=>()=>{const r=new WeakMap,s=async(i,a)=>{let o=e(i);if(!bn(o,a)){const d={buffer:o.buffer,channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,disableNormalization:!o.normalize};o=t(a,d)}return r.set(a,o),ru(o)?await n(i,a,o.inputs[0]):await n(i,a,o),o};return{render(i,a){const o=r.get(a);return o!==void 0?Promise.resolve(o):s(i,a)}}},CD=(t,e)=>(n,r,s)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(n,r,s)}catch(i){throw i.name==="SyntaxError"?t():i}},jD=()=>new DOMException("","DataCloneError"),Lb=t=>{const{port1:e,port2:n}=new MessageChannel;return new Promise(r=>{const s=()=>{n.onmessage=null,e.close(),n.close(),r()};n.onmessage=()=>s();try{e.postMessage(t,[t])}finally{s()}})},MD=(t,e,n,r,s,i,a,o,h,d,g)=>(m,c)=>{const l=a(m)?m:i(m);if(s.has(c)){const u=n();return Promise.reject(u)}try{s.add(c)}catch{}return e(h,()=>h(l))?l.decodeAudioData(c).then(u=>(Lb(c).catch(()=>{}),e(o,()=>o(u))||g(u),t.add(u),u)):new Promise((u,f)=>{const p=async()=>{try{await Lb(c)}catch{}},y=_=>{f(_),p()};try{l.decodeAudioData(c,_=>{typeof _.copyFromChannel!="function"&&(d(_),Jv(_)),t.add(_),p().then(()=>u(_))},_=>{y(_===null?r():_)})}catch(_){y(_)}})},AD=(t,e,n,r,s,i,a,o)=>(h,d)=>{const g=e.get(h);if(g===void 0)throw new Error("Missing the expected cycle count.");const m=i(h.context),c=o(m);if(g===d){if(e.delete(h),!c&&a(h)){const l=r(h),{outputs:u}=n(h);for(const f of u)if(rh(f)){const p=r(f[0]);t(l,p,f[1],f[2])}else{const p=s(f[0]);l.connect(p,f[1])}}}else e.set(h,g-d)},DD={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},OD=(t,e,n,r,s,i,a)=>class extends t{constructor(h,d){const g=s(h),m={...DD,...d},c=r(g,m),l=i(g),u=l?n(m.maxDelayTime):null;super(h,!1,c,u),this._delayTime=e(this,l,c.delayTime),a(this,m.maxDelayTime)}get delayTime(){return this._delayTime}},ID=(t,e,n,r,s)=>i=>{const a=new WeakMap,o=async(h,d)=>{let g=n(h);const m=bn(g,d);if(!m){const c={channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,delayTime:g.delayTime.value,maxDelayTime:i};g=e(d,c)}return a.set(d,g),m?await t(d,h.delayTime,g.delayTime):await r(d,h.delayTime,g.delayTime),await s(h,d,g),g};return{render(h,d){const g=a.get(d);return g!==void 0?Promise.resolve(g):o(h,d)}}},RD=t=>(e,n,r,s)=>t(e[s],i=>i[0]===n&&i[1]===r),PD=t=>(e,n)=>{t(e).delete(n)},LD=t=>"delayTime"in t,ND=(t,e,n)=>function r(s,i){const a=Jd(i)?i:n(t,i);if(LD(a))return[];if(s[0]===a)return[s];if(s.includes(a))return[];const{outputs:o}=e(a);return Array.from(o).map(h=>r([...s,a],h[0])).reduce((h,d)=>h.concat(d),[])},Jh=(t,e,n)=>{const r=e[n];if(r===void 0)throw t();return r},FD=t=>(e,n=void 0,r=void 0,s=0)=>n===void 0?e.forEach(i=>i.disconnect()):typeof n=="number"?Jh(t,e,n).disconnect():rf(n)?r===void 0?e.forEach(i=>i.disconnect(n)):s===void 0?Jh(t,e,r).disconnect(n,0):Jh(t,e,r).disconnect(n,0,s):r===void 0?e.forEach(i=>i.disconnect(n)):Jh(t,e,r).disconnect(n,0),UD={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},VD=(t,e,n,r,s,i,a,o)=>class extends t{constructor(d,g){const m=i(d),c={...UD,...g},l=r(m,c),u=a(m),f=u?n():null;super(d,!1,l,f),this._attack=e(this,u,l.attack),this._knee=e(this,u,l.knee),this._nativeDynamicsCompressorNode=l,this._ratio=e(this,u,l.ratio),this._release=e(this,u,l.release),this._threshold=e(this,u,l.threshold),o(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(d){const g=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=d,d>2)throw this._nativeDynamicsCompressorNode.channelCount=g,s()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(d){const g=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=d,d==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=g,s()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},BD=(t,e,n,r,s)=>()=>{const i=new WeakMap,a=async(o,h)=>{let d=n(o);const g=bn(d,h);if(!g){const m={attack:d.attack.value,channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,knee:d.knee.value,ratio:d.ratio.value,release:d.release.value,threshold:d.threshold.value};d=e(h,m)}return i.set(h,d),g?(await t(h,o.attack,d.attack),await t(h,o.knee,d.knee),await t(h,o.ratio,d.ratio),await t(h,o.release,d.release),await t(h,o.threshold,d.threshold)):(await r(h,o.attack,d.attack),await r(h,o.knee,d.knee),await r(h,o.ratio,d.ratio),await r(h,o.release,d.release),await r(h,o.threshold,d.threshold)),await s(o,h,d),d};return{render(o,h){const d=i.get(h);return d!==void 0?Promise.resolve(d):a(o,h)}}},GD=()=>new DOMException("","EncodingError"),zD=t=>e=>new Promise((n,r)=>{if(t===null){r(new SyntaxError);return}const s=t.document.head;if(s===null)r(new SyntaxError);else{const i=t.document.createElement("script"),a=new Blob([e],{type:"application/javascript"}),o=URL.createObjectURL(a),h=t.onerror,d=()=>{t.onerror=h,URL.revokeObjectURL(o)};t.onerror=(g,m,c,l,u)=>{if(m===o||m===t.location.href&&c===1&&l===1)return d(),r(u),!1;if(h!==null)return h(g,m,c,l,u)},i.onerror=()=>{d(),r(new SyntaxError)},i.onload=()=>{d(),n()},i.src=o,i.type="module",s.appendChild(i)}}),qD=t=>class{constructor(n){this._nativeEventTarget=n,this._listeners=new WeakMap}addEventListener(n,r,s){if(r!==null){let i=this._listeners.get(r);i===void 0&&(i=t(this,r),typeof r=="function"&&this._listeners.set(r,i)),this._nativeEventTarget.addEventListener(n,i,s)}}dispatchEvent(n){return this._nativeEventTarget.dispatchEvent(n)}removeEventListener(n,r,s){const i=r===null?void 0:this._listeners.get(r);this._nativeEventTarget.removeEventListener(n,i===void 0?null:i,s)}},WD=t=>(e,n,r)=>{Object.defineProperties(t,{currentFrame:{configurable:!0,get(){return Math.round(e*n)}},currentTime:{configurable:!0,get(){return e}}});try{return r()}finally{t!==null&&(delete t.currentFrame,delete t.currentTime)}},$D=t=>async e=>{try{const n=await fetch(e);if(n.ok)return[await n.text(),n.url]}catch{}throw t()},HD={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},XD=(t,e,n,r,s,i)=>class extends t{constructor(o,h){const d=s(o),g={...HD,...h},m=r(d,g),c=i(d),l=c?n():null;super(o,!1,m,l),this._gain=e(this,c,m.gain,Sn,Pn)}get gain(){return this._gain}},YD=(t,e,n,r,s)=>()=>{const i=new WeakMap,a=async(o,h)=>{let d=n(o);const g=bn(d,h);if(!g){const m={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,gain:d.gain.value};d=e(h,m)}return i.set(h,d),g?await t(h,o.gain,d.gain):await r(h,o.gain,d.gain),await s(o,h,d),d};return{render(o,h){const d=i.get(h);return d!==void 0?Promise.resolve(d):a(o,h)}}},QD=(t,e)=>n=>e(t,n),KD=t=>e=>{const n=t(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer},ZD=t=>e=>{var n;return(n=t.get(e))!==null&&n!==void 0?n:0},JD=t=>e=>{const n=t(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer},eO=t=>e=>t.get(e),Xr=()=>new DOMException("","InvalidStateError"),tO=t=>e=>{const n=t.get(e);if(n===void 0)throw Xr();return n},rO=(t,e)=>n=>{let r=t.get(n);if(r!==void 0)return r;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return r=new e(1,1,44100),t.set(n,r),r},nO=t=>e=>{const n=t.get(e);if(n===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return n},Np=()=>new DOMException("","InvalidAccessError"),sO=t=>{t.getFrequencyResponse=(e=>(n,r,s)=>{if(n.length!==r.length||r.length!==s.length)throw Np();return e.call(t,n,r,s)})(t.getFrequencyResponse)},iO={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},oO=(t,e,n,r,s,i)=>class extends t{constructor(o,h){const d=r(o),g=s(d),m={...iO,...h},c=e(d,g?null:o.baseLatency,m),l=g?n(m.feedback,m.feedforward):null;super(o,!1,c,l),sO(c),this._nativeIIRFilterNode=c,i(this,1)}getFrequencyResponse(o,h,d){return this._nativeIIRFilterNode.getFrequencyResponse(o,h,d)}},R2=(t,e,n,r,s,i,a,o,h,d,g)=>{const m=d.length;let c=o;for(let l=0;l<m;l+=1){let u=n[0]*d[l];for(let f=1;f<s;f+=1){const p=c-f&h-1;u+=n[f]*i[p],u-=t[f]*a[p]}for(let f=s;f<r;f+=1)u+=n[f]*i[c-f&h-1];for(let f=s;f<e;f+=1)u-=t[f]*a[c-f&h-1];i[c]=d[l],a[c]=u,c=c+1&h-1,g[l]=u}return c},aO=(t,e,n,r)=>{const s=n instanceof Float64Array?n:new Float64Array(n),i=r instanceof Float64Array?r:new Float64Array(r),a=s.length,o=i.length,h=Math.min(a,o);if(s[0]!==1){for(let u=0;u<a;u+=1)i[u]/=s[0];for(let u=1;u<o;u+=1)s[u]/=s[0]}const d=32,g=new Float32Array(d),m=new Float32Array(d),c=e.createBuffer(t.numberOfChannels,t.length,t.sampleRate),l=t.numberOfChannels;for(let u=0;u<l;u+=1){const f=t.getChannelData(u),p=c.getChannelData(u);g.fill(0),m.fill(0),R2(s,a,i,o,h,g,m,0,d,f,p)}return c},lO=(t,e,n,r,s)=>(i,a)=>{const o=new WeakMap;let h=null;const d=async(g,m)=>{let c=null,l=e(g);const u=bn(l,m);if(m.createIIRFilter===void 0?c=t(m,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):u||(l=m.createIIRFilter(a,i)),o.set(m,c===null?l:c),c!==null){if(h===null){if(n===null)throw new Error("Missing the native OfflineAudioContext constructor.");const p=new n(g.context.destination.channelCount,g.context.length,m.sampleRate);h=(async()=>{await r(g,p,p.destination);const y=await s(p);return aO(y,m,i,a)})()}const f=await h;return c.buffer=f,c.start(0),c}return await r(g,m,l),l};return{render(g,m){const c=o.get(m);return c!==void 0?Promise.resolve(c):d(g,m)}}},uO=(t,e,n,r,s,i)=>a=>(o,h)=>{const d=t.get(o);if(d===void 0){if(!a&&i(o)){const g=r(o),{outputs:m}=n(o);for(const c of m)if(rh(c)){const l=r(c[0]);e(g,l,c[1],c[2])}else{const l=s(c[0]);g.disconnect(l,c[1])}}t.set(o,h)}else t.set(o,d+h)},cO=(t,e)=>n=>{const r=t.get(n);return e(r)||e(n)},hO=(t,e)=>n=>t.has(n)||e(n),dO=(t,e)=>n=>t.has(n)||e(n),fO=(t,e)=>n=>{const r=t.get(n);return e(r)||e(n)},pO=t=>e=>t!==null&&e instanceof t,mO=t=>e=>t!==null&&typeof t.AudioNode=="function"&&e instanceof t.AudioNode,gO=t=>e=>t!==null&&typeof t.AudioParam=="function"&&e instanceof t.AudioParam,yO=(t,e)=>n=>t(n)||e(n),vO=t=>e=>t!==null&&e instanceof t,_O=t=>t!==null&&t.isSecureContext,bO=async(t,e,n,r,s,i,a,o,h,d,g,m,c,l,u,f)=>t(e,e)&&t(n,n)&&t(s,s)&&t(i,i)&&t(o,o)&&t(h,h)&&t(d,d)&&t(g,g)&&t(m,m)&&t(c,c)&&t(l,l)?(await Promise.all([t(r,r),t(a,a),t(u,u),t(f,f)])).every(y=>y):!1,wO=(t,e,n,r)=>class extends t{constructor(i,a){const o=n(i),h=e(o,a);if(r(o))throw TypeError();super(i,!0,h,null),this._nativeMediaElementAudioSourceNode=h}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},xO={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},SO=(t,e,n,r)=>class extends t{constructor(i,a){const o=n(i);if(r(o))throw new TypeError;const h={...xO,...a},d=e(o,h);super(i,!1,d,null),this._nativeMediaStreamAudioDestinationNode=d}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},TO=(t,e,n,r)=>class extends t{constructor(i,a){const o=n(i),h=e(o,a);if(r(o))throw new TypeError;super(i,!0,h,null),this._nativeMediaStreamAudioSourceNode=h}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},EO=(t,e,n)=>class extends t{constructor(s,i){const a=n(s),o=e(a,i);super(s,!0,o,null)}},kO=(t,e,n,r,s,i)=>class extends n{constructor(o,h){super(o),this._nativeContext=o,Pp.set(this,o),r(o)&&s.set(o,new Set),this._destination=new t(this,h),this._listener=e(this,o),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(o){const h=typeof o=="function"?i(this,o):null;this._nativeContext.onstatechange=h;const d=this._nativeContext.onstatechange;this._onstatechange=d!==null&&d===h?o:d}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},Mc=t=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=t.decodeAudioData(e.buffer,()=>{});return n===void 0?!1:(n.catch(()=>{}),!0)}catch{}return!1},CO=(t,e)=>(n,r,s)=>{const i=new Set;return n.connect=(a=>(o,h=0,d=0)=>{const g=i.size===0;if(e(o))return a.call(n,o,h,d),t(i,[o,h,d],m=>m[0]===o&&m[1]===h&&m[2]===d,!0),g&&r(),o;a.call(n,o,h),t(i,[o,h],m=>m[0]===o&&m[1]===h,!0),g&&r()})(n.connect),n.disconnect=(a=>(o,h,d)=>{const g=i.size>0;if(o===void 0)a.apply(n),i.clear();else if(typeof o=="number"){a.call(n,o);for(const c of i)c[1]===o&&i.delete(c)}else{e(o)?a.call(n,o,h,d):a.call(n,o,h);for(const c of i)c[0]===o&&(h===void 0||c[1]===h)&&(d===void 0||c[2]===d)&&i.delete(c)}const m=i.size===0;g&&m&&s()})(n.disconnect),n},gr=(t,e,n)=>{const r=e[n];r!==void 0&&r!==t[n]&&(t[n]=r)},Br=(t,e)=>{gr(t,e,"channelCount"),gr(t,e,"channelCountMode"),gr(t,e,"channelInterpretation")},Nb=t=>typeof t.getFloatTimeDomainData=="function",jO=t=>{t.getFloatTimeDomainData=e=>{const n=new Uint8Array(e.length);t.getByteTimeDomainData(n);const r=Math.max(n.length,t.fftSize);for(let s=0;s<r;s+=1)e[s]=(n[s]-128)*.0078125;return e}},MO=(t,e)=>(n,r)=>{const s=n.createAnalyser();if(Br(s,r),!(r.maxDecibels>r.minDecibels))throw e();return gr(s,r,"fftSize"),gr(s,r,"maxDecibels"),gr(s,r,"minDecibels"),gr(s,r,"smoothingTimeConstant"),t(Nb,()=>Nb(s))||jO(s),s},AO=t=>t===null?null:t.hasOwnProperty("AudioBuffer")?t.AudioBuffer:null,kr=(t,e,n)=>{const r=e[n];r!==void 0&&r!==t[n].value&&(t[n].value=r)},DO=t=>{t.start=(e=>{let n=!1;return(r=0,s=0,i)=>{if(n)throw Xr();e.call(t,r,s,i),n=!0}})(t.start)},r0=t=>{t.start=(e=>(n=0,r=0,s)=>{if(typeof s=="number"&&s<0||r<0||n<0)throw new RangeError("The parameters can't be negative.");e.call(t,n,r,s)})(t.start)},n0=t=>{t.stop=(e=>(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");e.call(t,n)})(t.stop)},OO=(t,e,n,r,s,i,a,o,h,d,g)=>(m,c)=>{const l=m.createBufferSource();return Br(l,c),kr(l,c,"playbackRate"),gr(l,c,"buffer"),gr(l,c,"loop"),gr(l,c,"loopEnd"),gr(l,c,"loopStart"),e(n,()=>n(m))||DO(l),e(r,()=>r(m))||h(l),e(s,()=>s(m))||d(l,m),e(i,()=>i(m))||r0(l),e(a,()=>a(m))||g(l,m),e(o,()=>o(m))||n0(l),t(m,l),l},IO=t=>t===null?null:t.hasOwnProperty("AudioContext")?t.AudioContext:t.hasOwnProperty("webkitAudioContext")?t.webkitAudioContext:null,RO=(t,e)=>(n,r,s)=>{const i=n.destination;if(i.channelCount!==r)try{i.channelCount=r}catch{}s&&i.channelCountMode!=="explicit"&&(i.channelCountMode="explicit"),i.maxChannelCount===0&&Object.defineProperty(i,"maxChannelCount",{value:r});const a=t(n,{channelCount:r,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,gain:1});return e(a,"channelCount",o=>()=>o.call(a),o=>h=>{o.call(a,h);try{i.channelCount=h}catch(d){if(h>i.maxChannelCount)throw d}}),e(a,"channelCountMode",o=>()=>o.call(a),o=>h=>{o.call(a,h),i.channelCountMode=h}),e(a,"channelInterpretation",o=>()=>o.call(a),o=>h=>{o.call(a,h),i.channelInterpretation=h}),Object.defineProperty(a,"maxChannelCount",{get:()=>i.maxChannelCount}),a.connect(i),a},PO=t=>t===null?null:t.hasOwnProperty("AudioWorkletNode")?t.AudioWorkletNode:null,LO=t=>{const{port1:e}=new MessageChannel;try{e.postMessage(t)}finally{e.close()}},NO=(t,e,n,r,s)=>(i,a,o,h,d,g)=>{if(o!==null)try{const m=new o(i,h,g),c=new Map;let l=null;if(Object.defineProperties(m,{channelCount:{get:()=>g.channelCount,set:()=>{throw t()}},channelCountMode:{get:()=>"explicit",set:()=>{throw t()}},onprocessorerror:{get:()=>l,set:u=>{typeof l=="function"&&m.removeEventListener("processorerror",l),l=typeof u=="function"?u:null,typeof l=="function"&&m.addEventListener("processorerror",l)}}}),m.addEventListener=(u=>(...f)=>{if(f[0]==="processorerror"){const p=typeof f[1]=="function"?f[1]:typeof f[1]=="object"&&f[1]!==null&&typeof f[1].handleEvent=="function"?f[1].handleEvent:null;if(p!==null){const y=c.get(f[1]);y!==void 0?f[1]=y:(f[1]=_=>{_.type==="error"?(Object.defineProperties(_,{type:{value:"processorerror"}}),p(_)):p(new ErrorEvent(f[0],{..._}))},c.set(p,f[1]))}}return u.call(m,"error",f[1],f[2]),u.call(m,...f)})(m.addEventListener),m.removeEventListener=(u=>(...f)=>{if(f[0]==="processorerror"){const p=c.get(f[1]);p!==void 0&&(c.delete(f[1]),f[1]=p)}return u.call(m,"error",f[1],f[2]),u.call(m,f[0],f[1],f[2])})(m.removeEventListener),g.numberOfOutputs!==0){const u=n(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return m.connect(u).connect(i.destination),s(m,()=>u.disconnect(),()=>u.connect(i.destination))}return m}catch(m){throw m.code===11?r():m}if(d===void 0)throw r();return LO(g),e(i,a,d,g)},P2=(t,e)=>t===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(t*e))))),FO=t=>new Promise((e,n)=>{const{port1:r,port2:s}=new MessageChannel;r.onmessage=({data:i})=>{r.close(),s.close(),e(i)},r.onmessageerror=({data:i})=>{r.close(),s.close(),n(i)},s.postMessage(t)}),UO=async(t,e)=>{const n=await FO(e);return new t(n)},VO=(t,e,n,r)=>{let s=xy.get(t);s===void 0&&(s=new WeakMap,xy.set(t,s));const i=UO(n,r);return s.set(e,i),i},BO=(t,e,n,r,s,i,a,o,h,d,g,m,c)=>(l,u,f,p)=>{if(p.numberOfInputs===0&&p.numberOfOutputs===0)throw h();const y=Array.isArray(p.outputChannelCount)?p.outputChannelCount:Array.from(p.outputChannelCount);if(y.some(Q=>Q<1))throw h();if(y.length!==p.numberOfOutputs)throw e();if(p.channelCountMode!=="explicit")throw h();const _=p.channelCount*p.numberOfInputs,b=y.reduce((Q,ce)=>Q+ce,0),x=f.parameterDescriptors===void 0?0:f.parameterDescriptors.length;if(_+x>6||b>6)throw h();const S=new MessageChannel,E=[],C=[];for(let Q=0;Q<p.numberOfInputs;Q+=1)E.push(a(l,{channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,gain:1})),C.push(s(l,{channelCount:p.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:p.channelCount}));const M=[];if(f.parameterDescriptors!==void 0)for(const{defaultValue:Q,maxValue:ce,minValue:de,name:ae}of f.parameterDescriptors){const Se=i(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:p.parameterData[ae]!==void 0?p.parameterData[ae]:Q===void 0?0:Q});Object.defineProperties(Se.offset,{defaultValue:{get:()=>Q===void 0?0:Q},maxValue:{get:()=>ce===void 0?Sn:ce},minValue:{get:()=>de===void 0?Pn:de}}),M.push(Se)}const I=r(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,_+x)}),A=P2(u,l.sampleRate),D=o(l,A,_+x,Math.max(1,b)),L=s(l,{channelCount:Math.max(1,b),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,b)}),O=[];for(let Q=0;Q<p.numberOfOutputs;Q+=1)O.push(r(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:y[Q]}));for(let Q=0;Q<p.numberOfInputs;Q+=1){E[Q].connect(C[Q]);for(let ce=0;ce<p.channelCount;ce+=1)C[Q].connect(I,ce,Q*p.channelCount+ce)}const N=new O2(f.parameterDescriptors===void 0?[]:f.parameterDescriptors.map(({name:Q},ce)=>{const de=M[ce];return de.connect(I,0,_+ce),de.start(0),[Q,de.offset]}));I.connect(D);let U=p.channelInterpretation,K=null;const J=p.numberOfOutputs===0?[D]:O,z={get bufferSize(){return A},get channelCount(){return p.channelCount},set channelCount(Q){throw n()},get channelCountMode(){return p.channelCountMode},set channelCountMode(Q){throw n()},get channelInterpretation(){return U},set channelInterpretation(Q){for(const ce of E)ce.channelInterpretation=Q;U=Q},get context(){return D.context},get inputs(){return E},get numberOfInputs(){return p.numberOfInputs},get numberOfOutputs(){return p.numberOfOutputs},get onprocessorerror(){return K},set onprocessorerror(Q){typeof K=="function"&&z.removeEventListener("processorerror",K),K=typeof Q=="function"?Q:null,typeof K=="function"&&z.addEventListener("processorerror",K)},get parameters(){return N},get port(){return S.port2},addEventListener(...Q){return D.addEventListener(Q[0],Q[1],Q[2])},connect:t.bind(null,J),disconnect:d.bind(null,J),dispatchEvent(...Q){return D.dispatchEvent(Q[0])},removeEventListener(...Q){return D.removeEventListener(Q[0],Q[1],Q[2])}},H=new Map;S.port1.addEventListener=(Q=>(...ce)=>{if(ce[0]==="message"){const de=typeof ce[1]=="function"?ce[1]:typeof ce[1]=="object"&&ce[1]!==null&&typeof ce[1].handleEvent=="function"?ce[1].handleEvent:null;if(de!==null){const ae=H.get(ce[1]);ae!==void 0?ce[1]=ae:(ce[1]=Se=>{g(l.currentTime,l.sampleRate,()=>de(Se))},H.set(de,ce[1]))}}return Q.call(S.port1,ce[0],ce[1],ce[2])})(S.port1.addEventListener),S.port1.removeEventListener=(Q=>(...ce)=>{if(ce[0]==="message"){const de=H.get(ce[1]);de!==void 0&&(H.delete(ce[1]),ce[1]=de)}return Q.call(S.port1,ce[0],ce[1],ce[2])})(S.port1.removeEventListener);let $=null;Object.defineProperty(S.port1,"onmessage",{get:()=>$,set:Q=>{typeof $=="function"&&S.port1.removeEventListener("message",$),$=typeof Q=="function"?Q:null,typeof $=="function"&&(S.port1.addEventListener("message",$),S.port1.start())}}),f.prototype.port=S.port1;let ne=null;VO(l,z,f,p).then(Q=>ne=Q);const _e=sf(p.numberOfInputs,p.channelCount),he=sf(p.numberOfOutputs,y),Te=f.parameterDescriptors===void 0?[]:f.parameterDescriptors.reduce((Q,{name:ce})=>({...Q,[ce]:new Float32Array(128)}),{});let fe=!0;const pe=()=>{p.numberOfOutputs>0&&D.disconnect(L);for(let Q=0,ce=0;Q<p.numberOfOutputs;Q+=1){const de=O[Q];for(let ae=0;ae<y[Q];ae+=1)L.disconnect(de,ce+ae,ae);ce+=y[Q]}},R=new Map;D.onaudioprocess=({inputBuffer:Q,outputBuffer:ce})=>{if(ne!==null){const de=m(z);for(let ae=0;ae<A;ae+=128){for(let Se=0;Se<p.numberOfInputs;Se+=1)for(let ke=0;ke<p.channelCount;ke+=1)nf(Q,_e[Se],ke,ke,ae);f.parameterDescriptors!==void 0&&f.parameterDescriptors.forEach(({name:Se},ke)=>{nf(Q,Te,Se,_+ke,ae)});for(let Se=0;Se<p.numberOfInputs;Se+=1)for(let ke=0;ke<y[Se];ke+=1)he[Se][ke].byteLength===0&&(he[Se][ke]=new Float32Array(128));try{const Se=_e.map((Ee,Fe)=>{if(de[Fe].size>0)return R.set(Fe,A/128),Ee;const Ye=R.get(Fe);return Ye===void 0?[]:(Ee.every(Ve=>Ve.every(pt=>pt===0))&&(Ye===1?R.delete(Fe):R.set(Fe,Ye-1)),Ee)});fe=g(l.currentTime+ae/l.sampleRate,l.sampleRate,()=>ne.process(Se,he,Te));for(let Ee=0,Fe=0;Ee<p.numberOfOutputs;Ee+=1){for(let Qe=0;Qe<y[Ee];Qe+=1)I2(ce,he[Ee],Qe,Fe+Qe,ae);Fe+=y[Ee]}}catch(Se){fe=!1,z.dispatchEvent(new ErrorEvent("processorerror",{colno:Se.colno,filename:Se.filename,lineno:Se.lineno,message:Se.message}))}if(!fe){for(let Se=0;Se<p.numberOfInputs;Se+=1){E[Se].disconnect(C[Se]);for(let ke=0;ke<p.channelCount;ke+=1)C[ae].disconnect(I,ke,Se*p.channelCount+ke)}if(f.parameterDescriptors!==void 0){const Se=f.parameterDescriptors.length;for(let ke=0;ke<Se;ke+=1){const Ee=M[ke];Ee.disconnect(I,0,_+ke),Ee.stop()}}I.disconnect(D),D.onaudioprocess=null,V?pe():se();break}}}};let V=!1;const q=a(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),ee=()=>D.connect(q).connect(l.destination),se=()=>{D.disconnect(q),q.disconnect()},re=()=>{if(fe){se(),p.numberOfOutputs>0&&D.connect(L);for(let Q=0,ce=0;Q<p.numberOfOutputs;Q+=1){const de=O[Q];for(let ae=0;ae<y[Q];ae+=1)L.connect(de,ce+ae,ae);ce+=y[Q]}}V=!0},xe=()=>{fe&&(ee(),pe()),V=!1};return ee(),c(z,re,xe)},L2=(t,e)=>{const n=t.createBiquadFilter();return Br(n,e),kr(n,e,"Q"),kr(n,e,"detune"),kr(n,e,"frequency"),kr(n,e,"gain"),gr(n,e,"type"),n},GO=(t,e)=>(n,r)=>{const s=n.createChannelMerger(r.numberOfInputs);return t!==null&&t.name==="webkitAudioContext"&&e(n,s),Br(s,r),s},zO=t=>{const e=t.numberOfOutputs;Object.defineProperty(t,"channelCount",{get:()=>e,set:n=>{if(n!==e)throw Xr()}}),Object.defineProperty(t,"channelCountMode",{get:()=>"explicit",set:n=>{if(n!=="explicit")throw Xr()}}),Object.defineProperty(t,"channelInterpretation",{get:()=>"discrete",set:n=>{if(n!=="discrete")throw Xr()}})},nh=(t,e)=>{const n=t.createChannelSplitter(e.numberOfOutputs);return Br(n,e),zO(n),n},qO=(t,e,n,r,s)=>(i,a)=>{if(i.createConstantSource===void 0)return n(i,a);const o=i.createConstantSource();return Br(o,a),kr(o,a,"offset"),e(r,()=>r(i))||r0(o),e(s,()=>s(i))||n0(o),t(i,o),o},nu=(t,e)=>(t.connect=e.connect.bind(e),t.disconnect=e.disconnect.bind(e),t),WO=(t,e,n,r)=>(s,{offset:i,...a})=>{const o=s.createBuffer(1,2,44100),h=e(s,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),d=n(s,{...a,gain:i}),g=o.getChannelData(0);g[0]=1,g[1]=1,h.buffer=o,h.loop=!0;const m={get bufferSize(){},get channelCount(){return d.channelCount},set channelCount(u){d.channelCount=u},get channelCountMode(){return d.channelCountMode},set channelCountMode(u){d.channelCountMode=u},get channelInterpretation(){return d.channelInterpretation},set channelInterpretation(u){d.channelInterpretation=u},get context(){return d.context},get inputs(){return[]},get numberOfInputs(){return h.numberOfInputs},get numberOfOutputs(){return d.numberOfOutputs},get offset(){return d.gain},get onended(){return h.onended},set onended(u){h.onended=u},addEventListener(...u){return h.addEventListener(u[0],u[1],u[2])},dispatchEvent(...u){return h.dispatchEvent(u[0])},removeEventListener(...u){return h.removeEventListener(u[0],u[1],u[2])},start(u=0){h.start.call(h,u)},stop(u=0){h.stop.call(h,u)}},c=()=>h.connect(d),l=()=>h.disconnect(d);return t(s,h),r(nu(m,d),c,l)},$O=(t,e)=>(n,r)=>{const s=n.createConvolver();if(Br(s,r),r.disableNormalization===s.normalize&&(s.normalize=!r.disableNormalization),gr(s,r,"buffer"),r.channelCount>2||(e(s,"channelCount",i=>()=>i.call(s),i=>a=>{if(a>2)throw t();return i.call(s,a)}),r.channelCountMode==="max"))throw t();return e(s,"channelCountMode",i=>()=>i.call(s),i=>a=>{if(a==="max")throw t();return i.call(s,a)}),s},N2=(t,e)=>{const n=t.createDelay(e.maxDelayTime);return Br(n,e),kr(n,e,"delayTime"),n},HO=t=>(e,n)=>{const r=e.createDynamicsCompressor();if(Br(r,n),n.channelCount>2||n.channelCountMode==="max")throw t();return kr(r,n,"attack"),kr(r,n,"knee"),kr(r,n,"ratio"),kr(r,n,"release"),kr(r,n,"threshold"),r},qn=(t,e)=>{const n=t.createGain();return Br(n,e),kr(n,e,"gain"),n},XO=t=>(e,n,r)=>{if(e.createIIRFilter===void 0)return t(e,n,r);const s=e.createIIRFilter(r.feedforward,r.feedback);return Br(s,r),s};function YO(t,e){const n=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}function QO(t,e){return[t[0]*e[0]-t[1]*e[1],t[0]*e[1]+t[1]*e[0]]}function Fb(t,e){let n=[0,0];for(let r=t.length-1;r>=0;r-=1)n=QO(n,e),n[0]+=t[r];return n}const KO=(t,e,n,r)=>(s,i,{channelCount:a,channelCountMode:o,channelInterpretation:h,feedback:d,feedforward:g})=>{const m=P2(i,s.sampleRate),c=d instanceof Float64Array?d:new Float64Array(d),l=g instanceof Float64Array?g:new Float64Array(g),u=c.length,f=l.length,p=Math.min(u,f);if(u===0||u>20)throw r();if(c[0]===0)throw e();if(f===0||f>20)throw r();if(l[0]===0)throw e();if(c[0]!==1){for(let M=0;M<f;M+=1)l[M]/=c[0];for(let M=1;M<u;M+=1)c[M]/=c[0]}const y=n(s,m,a,a);y.channelCount=a,y.channelCountMode=o,y.channelInterpretation=h;const _=32,b=[],x=[],S=[];for(let M=0;M<a;M+=1){b.push(0);const I=new Float32Array(_),A=new Float32Array(_);I.fill(0),A.fill(0),x.push(I),S.push(A)}y.onaudioprocess=M=>{const I=M.inputBuffer,A=M.outputBuffer,D=I.numberOfChannels;for(let L=0;L<D;L+=1){const O=I.getChannelData(L),N=A.getChannelData(L);b[L]=R2(c,u,l,f,p,x[L],S[L],b[L],_,O,N)}};const E=s.sampleRate/2;return nu({get bufferSize(){return m},get channelCount(){return y.channelCount},set channelCount(M){y.channelCount=M},get channelCountMode(){return y.channelCountMode},set channelCountMode(M){y.channelCountMode=M},get channelInterpretation(){return y.channelInterpretation},set channelInterpretation(M){y.channelInterpretation=M},get context(){return y.context},get inputs(){return[y]},get numberOfInputs(){return y.numberOfInputs},get numberOfOutputs(){return y.numberOfOutputs},addEventListener(...M){return y.addEventListener(M[0],M[1],M[2])},dispatchEvent(...M){return y.dispatchEvent(M[0])},getFrequencyResponse(M,I,A){if(M.length!==I.length||I.length!==A.length)throw t();const D=M.length;for(let L=0;L<D;L+=1){const O=-Math.PI*(M[L]/E),N=[Math.cos(O),Math.sin(O)],U=Fb(l,N),K=Fb(c,N),J=YO(U,K);I[L]=Math.sqrt(J[0]*J[0]+J[1]*J[1]),A[L]=Math.atan2(J[1],J[0])}},removeEventListener(...M){return y.removeEventListener(M[0],M[1],M[2])}},y)},ZO=(t,e)=>t.createMediaElementSource(e.mediaElement),JO=(t,e)=>{const n=t.createMediaStreamDestination();return Br(n,e),n.numberOfOutputs===1&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n},eI=(t,{mediaStream:e})=>{const n=e.getAudioTracks();n.sort((i,a)=>i.id<a.id?-1:i.id>a.id?1:0);const r=n.slice(0,1),s=t.createMediaStreamSource(new MediaStream(r));return Object.defineProperty(s,"mediaStream",{value:e}),s},tI=(t,e)=>(n,{mediaStreamTrack:r})=>{if(typeof n.createMediaStreamTrackSource=="function")return n.createMediaStreamTrackSource(r);const s=new MediaStream([r]),i=n.createMediaStreamSource(s);if(r.kind!=="audio")throw t();if(e(n))throw new TypeError;return i},rI=t=>t===null?null:t.hasOwnProperty("OfflineAudioContext")?t.OfflineAudioContext:t.hasOwnProperty("webkitOfflineAudioContext")?t.webkitOfflineAudioContext:null,nI=(t,e,n,r,s,i)=>(a,o)=>{const h=a.createOscillator();return Br(h,o),kr(h,o,"detune"),kr(h,o,"frequency"),o.periodicWave!==void 0?h.setPeriodicWave(o.periodicWave):gr(h,o,"type"),e(n,()=>n(a))||r0(h),e(r,()=>r(a))||i(h,a),e(s,()=>s(a))||n0(h),t(a,h),h},sI=t=>(e,n)=>{const r=e.createPanner();return r.orientationX===void 0?t(e,n):(Br(r,n),kr(r,n,"orientationX"),kr(r,n,"orientationY"),kr(r,n,"orientationZ"),kr(r,n,"positionX"),kr(r,n,"positionY"),kr(r,n,"positionZ"),gr(r,n,"coneInnerAngle"),gr(r,n,"coneOuterAngle"),gr(r,n,"coneOuterGain"),gr(r,n,"distanceModel"),gr(r,n,"maxDistance"),gr(r,n,"panningModel"),gr(r,n,"refDistance"),gr(r,n,"rolloffFactor"),r)},iI=(t,e,n,r,s,i,a,o,h,d)=>(g,{coneInnerAngle:m,coneOuterAngle:c,coneOuterGain:l,distanceModel:u,maxDistance:f,orientationX:p,orientationY:y,orientationZ:_,panningModel:b,positionX:x,positionY:S,positionZ:E,refDistance:C,rolloffFactor:M,...I})=>{const A=g.createPanner();if(I.channelCount>2||I.channelCountMode==="max")throw a();Br(A,I);const D={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},L=n(g,{...D,channelInterpretation:"speakers",numberOfInputs:6}),O=r(g,{...I,gain:1}),N=r(g,{...D,gain:1}),U=r(g,{...D,gain:0}),K=r(g,{...D,gain:0}),J=r(g,{...D,gain:0}),z=r(g,{...D,gain:0}),H=r(g,{...D,gain:0}),$=s(g,256,6,1),ne=i(g,{...D,curve:new Float32Array([1,1]),oversample:"none"});let oe=[p,y,_],_e=[x,S,E];const he=new Float32Array(1);$.onaudioprocess=({inputBuffer:R})=>{const V=[h(R,he,0),h(R,he,1),h(R,he,2)];V.some((ee,se)=>ee!==oe[se])&&(A.setOrientation(...V),oe=V);const q=[h(R,he,3),h(R,he,4),h(R,he,5)];q.some((ee,se)=>ee!==_e[se])&&(A.setPosition(...q),_e=q)},Object.defineProperty(U.gain,"defaultValue",{get:()=>0}),Object.defineProperty(K.gain,"defaultValue",{get:()=>0}),Object.defineProperty(J.gain,"defaultValue",{get:()=>0}),Object.defineProperty(z.gain,"defaultValue",{get:()=>0}),Object.defineProperty(H.gain,"defaultValue",{get:()=>0});const Te={get bufferSize(){},get channelCount(){return A.channelCount},set channelCount(R){if(R>2)throw a();O.channelCount=R,A.channelCount=R},get channelCountMode(){return A.channelCountMode},set channelCountMode(R){if(R==="max")throw a();O.channelCountMode=R,A.channelCountMode=R},get channelInterpretation(){return A.channelInterpretation},set channelInterpretation(R){O.channelInterpretation=R,A.channelInterpretation=R},get coneInnerAngle(){return A.coneInnerAngle},set coneInnerAngle(R){A.coneInnerAngle=R},get coneOuterAngle(){return A.coneOuterAngle},set coneOuterAngle(R){A.coneOuterAngle=R},get coneOuterGain(){return A.coneOuterGain},set coneOuterGain(R){if(R<0||R>1)throw e();A.coneOuterGain=R},get context(){return A.context},get distanceModel(){return A.distanceModel},set distanceModel(R){A.distanceModel=R},get inputs(){return[O]},get maxDistance(){return A.maxDistance},set maxDistance(R){if(R<0)throw new RangeError;A.maxDistance=R},get numberOfInputs(){return A.numberOfInputs},get numberOfOutputs(){return A.numberOfOutputs},get orientationX(){return N.gain},get orientationY(){return U.gain},get orientationZ(){return K.gain},get panningModel(){return A.panningModel},set panningModel(R){A.panningModel=R},get positionX(){return J.gain},get positionY(){return z.gain},get positionZ(){return H.gain},get refDistance(){return A.refDistance},set refDistance(R){if(R<0)throw new RangeError;A.refDistance=R},get rolloffFactor(){return A.rolloffFactor},set rolloffFactor(R){if(R<0)throw new RangeError;A.rolloffFactor=R},addEventListener(...R){return O.addEventListener(R[0],R[1],R[2])},dispatchEvent(...R){return O.dispatchEvent(R[0])},removeEventListener(...R){return O.removeEventListener(R[0],R[1],R[2])}};m!==Te.coneInnerAngle&&(Te.coneInnerAngle=m),c!==Te.coneOuterAngle&&(Te.coneOuterAngle=c),l!==Te.coneOuterGain&&(Te.coneOuterGain=l),u!==Te.distanceModel&&(Te.distanceModel=u),f!==Te.maxDistance&&(Te.maxDistance=f),p!==Te.orientationX.value&&(Te.orientationX.value=p),y!==Te.orientationY.value&&(Te.orientationY.value=y),_!==Te.orientationZ.value&&(Te.orientationZ.value=_),b!==Te.panningModel&&(Te.panningModel=b),x!==Te.positionX.value&&(Te.positionX.value=x),S!==Te.positionY.value&&(Te.positionY.value=S),E!==Te.positionZ.value&&(Te.positionZ.value=E),C!==Te.refDistance&&(Te.refDistance=C),M!==Te.rolloffFactor&&(Te.rolloffFactor=M),(oe[0]!==1||oe[1]!==0||oe[2]!==0)&&A.setOrientation(...oe),(_e[0]!==0||_e[1]!==0||_e[2]!==0)&&A.setPosition(..._e);const fe=()=>{O.connect(A),t(O,ne,0,0),ne.connect(N).connect(L,0,0),ne.connect(U).connect(L,0,1),ne.connect(K).connect(L,0,2),ne.connect(J).connect(L,0,3),ne.connect(z).connect(L,0,4),ne.connect(H).connect(L,0,5),L.connect($).connect(g.destination)},pe=()=>{O.disconnect(A),o(O,ne,0,0),ne.disconnect(N),N.disconnect(L),ne.disconnect(U),U.disconnect(L),ne.disconnect(K),K.disconnect(L),ne.disconnect(J),J.disconnect(L),ne.disconnect(z),z.disconnect(L),ne.disconnect(H),H.disconnect(L),L.disconnect($),$.disconnect(g.destination)};return d(nu(Te,A),fe,pe)},oI=t=>(e,{disableNormalization:n,imag:r,real:s})=>{const i=r instanceof Float32Array?r:new Float32Array(r),a=s instanceof Float32Array?s:new Float32Array(s),o=e.createPeriodicWave(a,i,{disableNormalization:n});if(Array.from(r).length<2)throw t();return o},sh=(t,e,n,r)=>t.createScriptProcessor(e,n,r),aI=(t,e)=>(n,r)=>{const s=r.channelCountMode;if(s==="clamped-max")throw e();if(n.createStereoPanner===void 0)return t(n,r);const i=n.createStereoPanner();return Br(i,r),kr(i,r,"pan"),Object.defineProperty(i,"channelCountMode",{get:()=>s,set:a=>{if(a!==s)throw e()}}),i},lI=(t,e,n,r,s,i)=>{const o=new Float32Array([1,1]),h=Math.PI/2,d={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},g={...d,oversample:"none"},m=(u,f,p,y)=>{const _=new Float32Array(16385),b=new Float32Array(16385);for(let I=0;I<16385;I+=1){const A=I/16384*h;_[I]=Math.cos(A),b[I]=Math.sin(A)}const x=n(u,{...d,gain:0}),S=r(u,{...g,curve:_}),E=r(u,{...g,curve:o}),C=n(u,{...d,gain:0}),M=r(u,{...g,curve:b});return{connectGraph(){f.connect(x),f.connect(E.inputs===void 0?E:E.inputs[0]),f.connect(C),E.connect(p),p.connect(S.inputs===void 0?S:S.inputs[0]),p.connect(M.inputs===void 0?M:M.inputs[0]),S.connect(x.gain),M.connect(C.gain),x.connect(y,0,0),C.connect(y,0,1)},disconnectGraph(){f.disconnect(x),f.disconnect(E.inputs===void 0?E:E.inputs[0]),f.disconnect(C),E.disconnect(p),p.disconnect(S.inputs===void 0?S:S.inputs[0]),p.disconnect(M.inputs===void 0?M:M.inputs[0]),S.disconnect(x.gain),M.disconnect(C.gain),x.disconnect(y,0,0),C.disconnect(y,0,1)}}},c=(u,f,p,y)=>{const _=new Float32Array(16385),b=new Float32Array(16385),x=new Float32Array(16385),S=new Float32Array(16385),E=Math.floor(16385/2);for(let J=0;J<16385;J+=1)if(J>E){const z=(J-E)/(16384-E)*h;_[J]=Math.cos(z),b[J]=Math.sin(z),x[J]=0,S[J]=1}else{const z=J/(16384-E)*h;_[J]=1,b[J]=0,x[J]=Math.cos(z),S[J]=Math.sin(z)}const C=e(u,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),M=n(u,{...d,gain:0}),I=r(u,{...g,curve:_}),A=n(u,{...d,gain:0}),D=r(u,{...g,curve:b}),L=r(u,{...g,curve:o}),O=n(u,{...d,gain:0}),N=r(u,{...g,curve:x}),U=n(u,{...d,gain:0}),K=r(u,{...g,curve:S});return{connectGraph(){f.connect(C),f.connect(L.inputs===void 0?L:L.inputs[0]),C.connect(M,0),C.connect(A,0),C.connect(O,1),C.connect(U,1),L.connect(p),p.connect(I.inputs===void 0?I:I.inputs[0]),p.connect(D.inputs===void 0?D:D.inputs[0]),p.connect(N.inputs===void 0?N:N.inputs[0]),p.connect(K.inputs===void 0?K:K.inputs[0]),I.connect(M.gain),D.connect(A.gain),N.connect(O.gain),K.connect(U.gain),M.connect(y,0,0),O.connect(y,0,0),A.connect(y,0,1),U.connect(y,0,1)},disconnectGraph(){f.disconnect(C),f.disconnect(L.inputs===void 0?L:L.inputs[0]),C.disconnect(M,0),C.disconnect(A,0),C.disconnect(O,1),C.disconnect(U,1),L.disconnect(p),p.disconnect(I.inputs===void 0?I:I.inputs[0]),p.disconnect(D.inputs===void 0?D:D.inputs[0]),p.disconnect(N.inputs===void 0?N:N.inputs[0]),p.disconnect(K.inputs===void 0?K:K.inputs[0]),I.disconnect(M.gain),D.disconnect(A.gain),N.disconnect(O.gain),K.disconnect(U.gain),M.disconnect(y,0,0),O.disconnect(y,0,0),A.disconnect(y,0,1),U.disconnect(y,0,1)}}},l=(u,f,p,y,_)=>{if(f===1)return m(u,p,y,_);if(f===2)return c(u,p,y,_);throw s()};return(u,{channelCount:f,channelCountMode:p,pan:y,..._})=>{if(p==="max")throw s();const b=t(u,{..._,channelCount:1,channelCountMode:p,numberOfInputs:2}),x=n(u,{..._,channelCount:f,channelCountMode:p,gain:1}),S=n(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:y});let{connectGraph:E,disconnectGraph:C}=l(u,f,x,S,b);Object.defineProperty(S.gain,"defaultValue",{get:()=>0}),Object.defineProperty(S.gain,"maxValue",{get:()=>1}),Object.defineProperty(S.gain,"minValue",{get:()=>-1});const M={get bufferSize(){},get channelCount(){return x.channelCount},set channelCount(L){x.channelCount!==L&&(I&&C(),{connectGraph:E,disconnectGraph:C}=l(u,L,x,S,b),I&&E()),x.channelCount=L},get channelCountMode(){return x.channelCountMode},set channelCountMode(L){if(L==="clamped-max"||L==="max")throw s();x.channelCountMode=L},get channelInterpretation(){return x.channelInterpretation},set channelInterpretation(L){x.channelInterpretation=L},get context(){return x.context},get inputs(){return[x]},get numberOfInputs(){return x.numberOfInputs},get numberOfOutputs(){return x.numberOfOutputs},get pan(){return S.gain},addEventListener(...L){return x.addEventListener(L[0],L[1],L[2])},dispatchEvent(...L){return x.dispatchEvent(L[0])},removeEventListener(...L){return x.removeEventListener(L[0],L[1],L[2])}};let I=!1;const A=()=>{E(),I=!0},D=()=>{C(),I=!1};return i(nu(M,b),A,D)}},uI=(t,e,n,r,s,i,a)=>(o,h)=>{const d=o.createWaveShaper();if(i!==null&&i.name==="webkitAudioContext"&&o.createGain().gain.automationRate===void 0)return n(o,h);Br(d,h);const g=h.curve===null||h.curve instanceof Float32Array?h.curve:new Float32Array(h.curve);if(g!==null&&g.length<2)throw e();gr(d,{curve:g},"curve"),gr(d,h,"oversample");let m=null,c=!1;return a(d,"curve",f=>()=>f.call(d),f=>p=>(f.call(d,p),c&&(r(p)&&m===null?m=t(o,d):!r(p)&&m!==null&&(m(),m=null)),p)),s(d,()=>{c=!0,r(d.curve)&&(m=t(o,d))},()=>{c=!1,m!==null&&(m(),m=null)})},cI=(t,e,n,r,s)=>(i,{curve:a,oversample:o,...h})=>{const d=i.createWaveShaper(),g=i.createWaveShaper();Br(d,h),Br(g,h);const m=n(i,{...h,gain:1}),c=n(i,{...h,gain:-1}),l=n(i,{...h,gain:1}),u=n(i,{...h,gain:-1});let f=null,p=!1,y=null;const _={get bufferSize(){},get channelCount(){return d.channelCount},set channelCount(S){m.channelCount=S,c.channelCount=S,d.channelCount=S,l.channelCount=S,g.channelCount=S,u.channelCount=S},get channelCountMode(){return d.channelCountMode},set channelCountMode(S){m.channelCountMode=S,c.channelCountMode=S,d.channelCountMode=S,l.channelCountMode=S,g.channelCountMode=S,u.channelCountMode=S},get channelInterpretation(){return d.channelInterpretation},set channelInterpretation(S){m.channelInterpretation=S,c.channelInterpretation=S,d.channelInterpretation=S,l.channelInterpretation=S,g.channelInterpretation=S,u.channelInterpretation=S},get context(){return d.context},get curve(){return y},set curve(S){if(S!==null&&S.length<2)throw e();if(S===null)d.curve=S,g.curve=S;else{const E=S.length,C=new Float32Array(E+2-E%2),M=new Float32Array(E+2-E%2);C[0]=S[0],M[0]=-S[E-1];const I=Math.ceil((E+1)/2),A=(E+1)/2-1;for(let D=1;D<I;D+=1){const L=D/I*A,O=Math.floor(L),N=Math.ceil(L);C[D]=O===N?S[O]:(1-(L-O))*S[O]+(1-(N-L))*S[N],M[D]=O===N?-S[E-1-O]:-((1-(L-O))*S[E-1-O])-(1-(N-L))*S[E-1-N]}C[I]=E%2===1?S[I-1]:(S[I-2]+S[I-1])/2,d.curve=C,g.curve=M}y=S,p&&(r(y)&&f===null?f=t(i,m):f!==null&&(f(),f=null))},get inputs(){return[m]},get numberOfInputs(){return d.numberOfInputs},get numberOfOutputs(){return d.numberOfOutputs},get oversample(){return d.oversample},set oversample(S){d.oversample=S,g.oversample=S},addEventListener(...S){return m.addEventListener(S[0],S[1],S[2])},dispatchEvent(...S){return m.dispatchEvent(S[0])},removeEventListener(...S){return m.removeEventListener(S[0],S[1],S[2])}};a!==null&&(_.curve=a instanceof Float32Array?a:new Float32Array(a)),o!==_.oversample&&(_.oversample=o);const b=()=>{m.connect(d).connect(l),m.connect(c).connect(g).connect(u).connect(l),p=!0,r(y)&&(f=t(i,m))},x=()=>{m.disconnect(d),d.disconnect(l),m.disconnect(c),c.disconnect(g),g.disconnect(u),u.disconnect(l),p=!1,f!==null&&(f(),f=null)};return s(nu(_,l),b,x)},On=()=>new DOMException("","NotSupportedError"),hI={numberOfChannels:1},dI=(t,e,n,r,s)=>class extends t{constructor(a,o,h){let d;if(typeof a=="number"&&o!==void 0&&h!==void 0)d={length:o,numberOfChannels:a,sampleRate:h};else if(typeof a=="object")d=a;else throw new Error("The given parameters are not valid.");const{length:g,numberOfChannels:m,sampleRate:c}={...hI,...d},l=r(m,g,c);e(Mc,()=>Mc(l))||l.addEventListener("statechange",(()=>{let u=0;const f=p=>{this._state==="running"&&(u>0?(l.removeEventListener("statechange",f),p.stopImmediatePropagation(),this._waitForThePromiseToSettle(p)):u+=1)};return f})()),super(l,m),this._length=g,this._nativeOfflineAudioContext=l,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(n()):(this._state="running",s(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,j2(this)}))}_waitForThePromiseToSettle(a){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(a):setTimeout(()=>this._waitForThePromiseToSettle(a))}},fI={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},pI=(t,e,n,r,s,i,a)=>class extends t{constructor(h,d){const g=s(h),m={...fI,...d},c=n(g,m),l=i(g),u=l?r():null,f=h.sampleRate/2;super(h,!1,c,u),this._detune=e(this,l,c.detune,153600,-153600),this._frequency=e(this,l,c.frequency,f,-f),this._nativeOscillatorNode=c,this._onended=null,this._oscillatorNodeRenderer=u,this._oscillatorNodeRenderer!==null&&m.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=m.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(h){const d=typeof h=="function"?a(this,h):null;this._nativeOscillatorNode.onended=d;const g=this._nativeOscillatorNode.onended;this._onended=g!==null&&g===d?h:g}get type(){return this._nativeOscillatorNode.type}set type(h){this._nativeOscillatorNode.type=h,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(h){this._nativeOscillatorNode.setPeriodicWave(h),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=h)}start(h=0){if(this._nativeOscillatorNode.start(h),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=h),this.context.state!=="closed"){wl(this);const d=()=>{this._nativeOscillatorNode.removeEventListener("ended",d),mi(this)&&eh(this)};this._nativeOscillatorNode.addEventListener("ended",d)}}stop(h=0){this._nativeOscillatorNode.stop(h),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=h)}},mI=(t,e,n,r,s)=>()=>{const i=new WeakMap;let a=null,o=null,h=null;const d=async(g,m)=>{let c=n(g);const l=bn(c,m);if(!l){const u={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,detune:c.detune.value,frequency:c.frequency.value,periodicWave:a===null?void 0:a,type:c.type};c=e(m,u),o!==null&&c.start(o),h!==null&&c.stop(h)}return i.set(m,c),l?(await t(m,g.detune,c.detune),await t(m,g.frequency,c.frequency)):(await r(m,g.detune,c.detune),await r(m,g.frequency,c.frequency)),await s(g,m,c),c};return{set periodicWave(g){a=g},set start(g){o=g},set stop(g){h=g},render(g,m){const c=i.get(m);return c!==void 0?Promise.resolve(c):d(g,m)}}},gI={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},yI=(t,e,n,r,s,i,a)=>class extends t{constructor(h,d){const g=s(h),m={...gI,...d},c=n(g,m),l=i(g),u=l?r():null;super(h,!1,c,u),this._nativePannerNode=c,this._orientationX=e(this,l,c.orientationX,Sn,Pn),this._orientationY=e(this,l,c.orientationY,Sn,Pn),this._orientationZ=e(this,l,c.orientationZ,Sn,Pn),this._positionX=e(this,l,c.positionX,Sn,Pn),this._positionY=e(this,l,c.positionY,Sn,Pn),this._positionZ=e(this,l,c.positionZ,Sn,Pn),a(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(h){this._nativePannerNode.coneInnerAngle=h}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(h){this._nativePannerNode.coneOuterAngle=h}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(h){this._nativePannerNode.coneOuterGain=h}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(h){this._nativePannerNode.distanceModel=h}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(h){this._nativePannerNode.maxDistance=h}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(h){this._nativePannerNode.panningModel=h}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(h){this._nativePannerNode.refDistance=h}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(h){this._nativePannerNode.rolloffFactor=h}},vI=(t,e,n,r,s,i,a,o,h,d)=>()=>{const g=new WeakMap;let m=null;const c=async(l,u)=>{let f=null,p=i(l);const y={channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation},_={...y,coneInnerAngle:p.coneInnerAngle,coneOuterAngle:p.coneOuterAngle,coneOuterGain:p.coneOuterGain,distanceModel:p.distanceModel,maxDistance:p.maxDistance,panningModel:p.panningModel,refDistance:p.refDistance,rolloffFactor:p.rolloffFactor},b=bn(p,u);if("bufferSize"in p)f=r(u,{...y,gain:1});else if(!b){const x={..._,orientationX:p.orientationX.value,orientationY:p.orientationY.value,orientationZ:p.orientationZ.value,positionX:p.positionX.value,positionY:p.positionY.value,positionZ:p.positionZ.value};p=s(u,x)}if(g.set(u,f===null?p:f),f!==null){if(m===null){if(a===null)throw new Error("Missing the native OfflineAudioContext constructor.");const D=new a(6,l.context.length,u.sampleRate),L=e(D,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});L.connect(D.destination),m=(async()=>{const O=await Promise.all([l.orientationX,l.orientationY,l.orientationZ,l.positionX,l.positionY,l.positionZ].map(async(N,U)=>{const K=n(D,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:U===0?1:0});return await o(D,N,K.offset),K}));for(let N=0;N<6;N+=1)O[N].connect(L,0,N),O[N].start(0);return d(D)})()}const x=await m,S=r(u,{...y,gain:1});await h(l,u,S);const E=[];for(let D=0;D<x.numberOfChannels;D+=1)E.push(x.getChannelData(D));let C=[E[0][0],E[1][0],E[2][0]],M=[E[3][0],E[4][0],E[5][0]],I=r(u,{...y,gain:1}),A=s(u,{..._,orientationX:C[0],orientationY:C[1],orientationZ:C[2],positionX:M[0],positionY:M[1],positionZ:M[2]});S.connect(I).connect(A.inputs[0]),A.connect(f);for(let D=128;D<x.length;D+=128){const L=[E[0][D],E[1][D],E[2][D]],O=[E[3][D],E[4][D],E[5][D]];if(L.some((N,U)=>N!==C[U])||O.some((N,U)=>N!==M[U])){C=L,M=O;const N=D/u.sampleRate;I.gain.setValueAtTime(0,N),I=r(u,{...y,gain:0}),A=s(u,{..._,orientationX:C[0],orientationY:C[1],orientationZ:C[2],positionX:M[0],positionY:M[1],positionZ:M[2]}),I.gain.setValueAtTime(1,N),S.connect(I).connect(A.inputs[0]),A.connect(f)}}return f}return b?(await t(u,l.orientationX,p.orientationX),await t(u,l.orientationY,p.orientationY),await t(u,l.orientationZ,p.orientationZ),await t(u,l.positionX,p.positionX),await t(u,l.positionY,p.positionY),await t(u,l.positionZ,p.positionZ)):(await o(u,l.orientationX,p.orientationX),await o(u,l.orientationY,p.orientationY),await o(u,l.orientationZ,p.orientationZ),await o(u,l.positionX,p.positionX),await o(u,l.positionY,p.positionY),await o(u,l.positionZ,p.positionZ)),ru(p)?await h(l,u,p.inputs[0]):await h(l,u,p),p};return{render(l,u){const f=g.get(u);return f!==void 0?Promise.resolve(f):c(l,u)}}},_I={disableNormalization:!1},bI=(t,e,n,r)=>class F2{constructor(i,a){const o=e(i),h=r({..._I,...a}),d=t(o,h);return n.add(d),d}static[Symbol.hasInstance](i){return i!==null&&typeof i=="object"&&Object.getPrototypeOf(i)===F2.prototype||n.has(i)}},wI=(t,e)=>(n,r,s)=>(t(r).replay(s),e(r,n,s)),xI=(t,e,n)=>async(r,s,i)=>{const a=t(r);await Promise.all(a.activeInputs.map((o,h)=>Array.from(o).map(async([d,g])=>{const c=await e(d).render(d,s),l=r.context.destination;!n(d)&&(r!==l||!n(r))&&c.connect(i,g,h)})).reduce((o,h)=>[...o,...h],[]))},SI=(t,e,n)=>async(r,s,i)=>{const a=e(r);await Promise.all(Array.from(a.activeInputs).map(async([o,h])=>{const g=await t(o).render(o,s);n(o)||g.connect(i,h)}))},TI=(t,e,n,r)=>s=>t(Mc,()=>Mc(s))?Promise.resolve(t(r,r)).then(i=>{if(!i){const a=n(s,512,0,1);s.oncomplete=()=>{a.onaudioprocess=null,a.disconnect()},a.onaudioprocess=()=>s.currentTime,a.connect(s.destination)}return s.startRendering()}):new Promise(i=>{const a=e(s,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});s.oncomplete=o=>{a.disconnect(),i(o.renderedBuffer)},a.connect(s.destination),s.startRendering()}),EI=t=>(e,n)=>{t.set(e,n)},kI=t=>(e,n)=>t.set(e,n),CI=(t,e,n,r,s,i,a,o)=>(h,d)=>n(h).render(h,d).then(()=>Promise.all(Array.from(r(d)).map(g=>n(g).render(g,d)))).then(()=>s(d)).then(g=>(typeof g.copyFromChannel!="function"?(a(g),Jv(g)):e(i,()=>i(g))||o(g),t.add(g),g)),jI={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},MI=(t,e,n,r,s,i)=>class extends t{constructor(o,h){const d=s(o),g={...jI,...h},m=n(d,g),c=i(d),l=c?r():null;super(o,!1,m,l),this._pan=e(this,c,m.pan)}get pan(){return this._pan}},AI=(t,e,n,r,s)=>()=>{const i=new WeakMap,a=async(o,h)=>{let d=n(o);const g=bn(d,h);if(!g){const m={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,pan:d.pan.value};d=e(h,m)}return i.set(h,d),g?await t(h,o.pan,d.pan):await r(h,o.pan,d.pan),ru(d)?await s(o,h,d.inputs[0]):await s(o,h,d),d};return{render(o,h){const d=i.get(h);return d!==void 0?Promise.resolve(d):a(o,h)}}},DI=t=>()=>{if(t===null)return!1;try{new t({length:1,sampleRate:44100})}catch{return!1}return!0},OI=t=>()=>{if(t===null)return!1;const n=new t(1,1,44100).createBuffer(1,1,44100);if(n.copyToChannel===void 0)return!0;const r=new Float32Array(2);try{n.copyFromChannel(r,0,0)}catch{return!1}return!0},II=t=>()=>{if(t===null)return!1;if(t.prototype!==void 0&&t.prototype.close!==void 0)return!0;const e=new t,n=e.close!==void 0;try{e.close()}catch{}return n},RI=t=>()=>{if(t===null)return Promise.resolve(!1);const e=new t(1,1,44100);return new Promise(n=>{let r=!0;const s=a=>{r&&(r=!1,e.startRendering(),n(a instanceof TypeError))};let i;try{i=e.decodeAudioData(null,()=>{},s)}catch(a){s(a)}i!==void 0&&i.catch(s)})},PI=t=>()=>{if(t===null)return!1;let e;try{e=new t({latencyHint:"balanced"})}catch{return!1}return e.close(),!0},LI=t=>()=>{if(t===null)return!1;const n=new t(1,1,44100).createGain(),r=n.connect(n)===n;return n.disconnect(n),r},NI=(t,e)=>async()=>{if(t===null)return!0;if(e===null)return!1;const n=new Blob(['let c,p;class A extends AudioWorkletProcessor{constructor(){super();this.port.onmessage=(e)=>{p=e.data;p.onmessage=()=>{p.postMessage(c);p.close()};this.port.postMessage(0)}}process(){c=1}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),r=new MessageChannel,s=new e(1,128,44100),i=URL.createObjectURL(n);let a=!1;try{await s.audioWorklet.addModule(i);const o=new t(s,"a",{numberOfOutputs:0}),h=s.createOscillator();await new Promise(d=>{o.port.onmessage=()=>d(),o.port.postMessage(r.port2,[r.port2])}),o.port.onmessage=()=>a=!0,h.connect(o),h.start(0),await s.startRendering(),a=await new Promise(d=>{r.port1.onmessage=({data:g})=>d(g===1),r.port1.postMessage(0)})}catch{}finally{r.port1.close(),URL.revokeObjectURL(i)}return a},FI=(t,e)=>async()=>{if(t===null)return!0;if(e===null)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),r=new e(1,128,44100),s=URL.createObjectURL(n);let i=!1,a=!1;try{await r.audioWorklet.addModule(s);const o=new t(r,"a",{numberOfOutputs:0}),h=r.createOscillator();o.port.onmessage=()=>i=!0,o.onprocessorerror=()=>a=!0,h.connect(o),h.start(0),await r.startRendering()}catch{}finally{URL.revokeObjectURL(s)}return i&&!a},UI=t=>()=>{if(t===null)return!1;const n=new t(1,1,44100).createChannelMerger();if(n.channelCountMode==="max")return!0;try{n.channelCount=2}catch{return!0}return!1},VI=t=>()=>{if(t===null)return!1;const e=new t(1,1,44100);return e.createConstantSource===void 0?!0:e.createConstantSource().offset.maxValue!==Number.POSITIVE_INFINITY},BI=t=>()=>{if(t===null)return!1;const e=new t(1,1,44100),n=e.createConvolver();n.buffer=e.createBuffer(1,1,e.sampleRate);try{n.buffer=e.createBuffer(1,1,e.sampleRate)}catch{return!1}return!0},GI=t=>()=>{if(t===null)return!1;const n=new t(1,1,44100).createConvolver();try{n.channelCount=1}catch{return!1}return!0},zI=t=>()=>t!==null&&t.hasOwnProperty("isSecureContext"),qI=t=>()=>{if(t===null)return!1;const e=new t;try{return e.createMediaStreamSource(new MediaStream),!1}catch{return!0}finally{e.close()}},WI=(t,e)=>()=>{if(e===null)return Promise.resolve(!1);const n=new e(1,1,44100),r=t(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(s=>{n.oncomplete=()=>{r.disconnect(),s(n.currentTime!==0)},n.startRendering()})},$I=t=>()=>{if(t===null)return Promise.resolve(!1);const e=new t(1,1,44100);if(e.createStereoPanner===void 0||e.createConstantSource===void 0)return Promise.resolve(!0);const n=e.createConstantSource(),r=e.createStereoPanner();return n.channelCount=1,n.offset.value=1,r.channelCount=1,n.start(),n.connect(r).connect(e.destination),e.startRendering().then(s=>s.getChannelData(0)[0]!==1)},HI=()=>new DOMException("","UnknownError"),XI={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},YI=(t,e,n,r,s,i,a)=>class extends t{constructor(h,d){const g=s(h),m={...XI,...d},c=n(g,m),u=i(g)?r():null;super(h,!0,c,u),this._isCurveNullified=!1,this._nativeWaveShaperNode=c,a(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(h){if(h===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(h.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=h}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(h){this._nativeWaveShaperNode.oversample=h}},QI=(t,e,n)=>()=>{const r=new WeakMap,s=async(i,a)=>{let o=e(i);if(!bn(o,a)){const d={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,curve:o.curve,oversample:o.oversample};o=t(a,d)}return r.set(a,o),ru(o)?await n(i,a,o.inputs[0]):await n(i,a,o),o};return{render(i,a){const o=r.get(a);return o!==void 0?Promise.resolve(o):s(i,a)}}},KI=()=>typeof window>"u"?null:window,ZI=(t,e)=>n=>{n.copyFromChannel=(r,s,i=0)=>{const a=t(i),o=t(s);if(o>=n.numberOfChannels)throw e();const h=n.length,d=n.getChannelData(o),g=r.length;for(let m=a<0?-a:0;m+a<h&&m<g;m+=1)r[m]=d[m+a]},n.copyToChannel=(r,s,i=0)=>{const a=t(i),o=t(s);if(o>=n.numberOfChannels)throw e();const h=n.length,d=n.getChannelData(o),g=r.length;for(let m=a<0?-a:0;m+a<h&&m<g;m+=1)d[m+a]=r[m]}},JI=t=>e=>{e.copyFromChannel=(n=>(r,s,i=0)=>{const a=t(i),o=t(s);if(a<e.length)return n.call(e,r,o,a)})(e.copyFromChannel),e.copyToChannel=(n=>(r,s,i=0)=>{const a=t(i),o=t(s);if(a<e.length)return n.call(e,r,o,a)})(e.copyToChannel)},eR=t=>(e,n)=>{const r=n.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=r),t(e,"buffer",s=>()=>{const i=s.call(e);return i===r?null:i},s=>i=>s.call(e,i===null?r:i))},tR=(t,e)=>(n,r)=>{r.channelCount=1,r.channelCountMode="explicit",Object.defineProperty(r,"channelCount",{get:()=>1,set:()=>{throw t()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:()=>{throw t()}});const s=n.createBufferSource();e(r,()=>{const o=r.numberOfInputs;for(let h=0;h<o;h+=1)s.connect(r,0,h)},()=>s.disconnect(r))},U2=(t,e,n)=>t.copyFromChannel===void 0?t.getChannelData(n)[0]:(t.copyFromChannel(e,n),e[0]),V2=t=>{if(t===null)return!1;const e=t.length;return e%2!==0?t[Math.floor(e/2)]!==0:t[e/2-1]+t[e/2]!==0},ih=(t,e,n,r)=>{let s=t;for(;!s.hasOwnProperty(e);)s=Object.getPrototypeOf(s);const{get:i,set:a}=Object.getOwnPropertyDescriptor(s,e);Object.defineProperty(t,e,{get:n(i),set:r(a)})},rR=t=>({...t,outputChannelCount:t.outputChannelCount!==void 0?t.outputChannelCount:t.numberOfInputs===1&&t.numberOfOutputs===1?[t.channelCount]:Array.from({length:t.numberOfOutputs},()=>1)}),nR=t=>({...t,channelCount:t.numberOfOutputs}),sR=t=>{const{imag:e,real:n}=t;return e===void 0?n===void 0?{...t,imag:[0,0],real:[0,0]}:{...t,imag:Array.from(n,()=>0),real:n}:n===void 0?{...t,imag:e,real:Array.from(e,()=>0)}:{...t,imag:e,real:n}},B2=(t,e,n)=>{try{t.setValueAtTime(e,n)}catch(r){if(r.code!==9)throw r;B2(t,e,n+1e-7)}},iR=t=>{const e=t.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},oR=t=>{const e=t.createBufferSource(),n=t.createBuffer(1,1,44100);e.buffer=n;try{e.start(0,1)}catch{return!1}return!0},aR=t=>{const e=t.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},s0=t=>{const e=t.createOscillator();try{e.start(-1)}catch(n){return n instanceof RangeError}return!1},G2=t=>{const e=t.createBuffer(1,1,44100),n=t.createBufferSource();n.buffer=e,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},i0=t=>{const e=t.createOscillator();try{e.stop(-1)}catch(n){return n instanceof RangeError}return!1},lR=t=>{const{port1:e,port2:n}=new MessageChannel;try{e.postMessage(t)}finally{e.close(),n.close()}},uR=()=>{try{new DOMException}catch{return!1}return!0},cR=()=>new Promise(t=>{const e=new ArrayBuffer(0),{port1:n,port2:r}=new MessageChannel;n.onmessage=({data:s})=>t(s!==null),r.postMessage(e,[e])}),hR=t=>{t.start=(e=>(n=0,r=0,s)=>{const i=t.buffer,a=i===null?r:Math.min(i.duration,r);i!==null&&a>i.duration-.5/t.context.sampleRate?e.call(t,n,0,0):e.call(t,n,a,s)})(t.start)},z2=(t,e)=>{const n=e.createGain();t.connect(n);const r=(s=>()=>{s.call(t,n),t.removeEventListener("ended",r)})(t.disconnect);t.addEventListener("ended",r),nu(t,n),t.stop=(s=>{let i=!1;return(a=0)=>{if(i)try{s.call(t,a)}catch{n.gain.setValueAtTime(0,a)}else s.call(t,a),i=!0}})(t.stop)},su=(t,e)=>n=>{const r={value:t};return Object.defineProperties(n,{currentTarget:r,target:r}),typeof e=="function"?e.call(t,n):e.handleEvent.call(t,n)},dR=gA(xa),fR=xA(xa),pR=RD(Lp),q2=new WeakMap,mR=ZD(q2),_s=cD(new Map,new WeakMap),Os=KI(),W2=MO(_s,ti),o0=KD(kn),hn=xI(kn,o0,ia),gR=CA(W2,pr,hn),ir=tO(Pp),qr=rI(Os),Kt=vO(qr),$2=new WeakMap,H2=qD(su),oo=IO(Os),a0=pO(oo),l0=mO(Os),X2=gO(Os),xl=PO(Os),Ar=ZA(yA(w2),wA(dR,fR,ef,pR,tf,kn,mR,Jc,pr,xa,mi,ia,_d),_s,uO(by,tf,kn,pr,jc,mi),ti,Np,On,AD(ef,by,kn,pr,jc,ir,mi,Kt),ND($2,kn,Ds),H2,ir,a0,l0,X2,Kt,xl),yR=kA(Ar,gR,ti,W2,ir,Kt),u0=new WeakSet,Ub=AO(Os),Y2=SD(new Uint32Array(1)),c0=ZI(Y2,ti),h0=JI(Y2),vR=MA(u0,_s,On,Ub,qr,DI(Ub),c0,h0),Fp=SA(qn),Q2=SI(o0,th,ia),ri=yD(Q2),iu=OO(Fp,_s,iR,oR,aR,s0,G2,i0,hR,eR(ih),z2),ni=wI(JD(th),Q2),_R=OA(ri,iu,pr,ni,hn),Is=JA(vA(x2),$2,Zv,eD,cA,hA,dA,fA,pA,yy,_2,oo,B2),bR=DA(Ar,_R,Is,Xr,iu,ir,Kt,su),wR=BA(Ar,GA,ti,Xr,RO(qn,ih),ir,Kt,hn),xR=uD(ri,L2,pr,ni,hn),Sa=kI(q2),SR=lD(Ar,Is,xR,Np,L2,ir,Kt,Sa),To=CO(xa,l0),TR=tR(Xr,To),Eo=GO(oo,TR),ER=fD(Eo,pr,hn),kR=dD(Ar,ER,Eo,ir,Kt),CR=gD(nh,pr,hn),jR=mD(Ar,CR,nh,ir,Kt,nR),MR=WO(Fp,iu,qn,To),ou=qO(Fp,_s,MR,s0,i0),AR=xD(ri,ou,pr,ni,hn),DR=wD(Ar,Is,AR,ou,ir,Kt,su),K2=$O(On,ih),OR=kD(K2,pr,hn),IR=ED(Ar,OR,K2,ir,Kt,Sa),RR=ID(ri,N2,pr,ni,hn),PR=OD(Ar,Is,RR,N2,ir,Kt,Sa),Z2=HO(On),LR=BD(ri,Z2,pr,ni,hn),NR=VD(Ar,Is,LR,Z2,On,ir,Kt,Sa),FR=YD(ri,qn,pr,ni,hn),UR=XD(Ar,Is,FR,qn,ir,Kt),VR=KO(Np,Xr,sh,On),Up=TI(_s,qn,sh,WI(qn,qr)),BR=lO(iu,pr,qr,hn,Up),GR=XO(VR),zR=oO(Ar,GR,BR,ir,Kt,Sa),qR=zA(Is,Eo,ou,sh,On,U2,Kt,ih),J2=new WeakMap,WR=kO(wR,qR,H2,Kt,J2,su),eT=nI(Fp,_s,s0,G2,i0,z2),$R=mI(ri,eT,pr,ni,hn),HR=pI(Ar,Is,eT,$R,ir,Kt,su),tT=_D(iu),XR=cI(tT,Xr,qn,V2,To),Vp=uI(tT,Xr,XR,V2,To,oo,ih),YR=iI(ef,Xr,Eo,qn,sh,Vp,On,tf,U2,To),rT=sI(YR),QR=vI(ri,Eo,ou,qn,rT,pr,qr,ni,hn,Up),KR=yI(Ar,Is,rT,QR,ir,Kt,Sa),ZR=oI(ti),JR=bI(ZR,ir,new WeakSet,sR),eP=lI(Eo,nh,qn,Vp,On,To),nT=aI(eP,On),tP=AI(ri,nT,pr,ni,hn),rP=MI(Ar,Is,nT,tP,ir,Kt),nP=QI(Vp,pr,hn),sP=YI(Ar,Xr,Vp,nP,ir,Kt,Sa),sT=_O(Os),d0=WD(Os),iT=new WeakMap,iP=rO(iT,qr),oP=sT?bA(_s,On,zD(Os),d0,$D(mA),ir,iP,Kt,xl,new WeakMap,new WeakMap,FI(xl,qr),Os):void 0,aP=yO(a0,Kt),lP=MD(u0,_s,jD,GD,new WeakSet,ir,aP,Zd,Mc,c0,h0),oT=oD(oP,yR,vR,bR,SR,kR,jR,DR,IR,lP,PR,NR,UR,zR,WR,HR,KR,JR,rP,sP),uP=wO(Ar,ZO,ir,Kt),cP=SO(Ar,JO,ir,Kt),hP=TO(Ar,eI,ir,Kt),dP=tI(Xr,Kt),fP=EO(Ar,dP,ir),pP=VA(oT,Xr,On,HI,uP,cP,hP,fP,oo),f0=nO(J2),mP=TA(f0),aT=vD(ti),gP=PD(f0),lT=FD(ti),uT=new WeakMap,yP=QD(uT,Ds),vP=BO(aT,ti,Xr,Eo,nh,ou,qn,sh,On,lT,d0,yP,To),_P=NO(Xr,vP,qn,On,To),bP=iD(ri,aT,iu,Eo,nh,ou,qn,gP,lT,d0,pr,xl,qr,ni,hn,Up),wP=eO(iT),xP=EI(uT),Vb=sT?rD(mP,Ar,Is,bP,_P,kn,wP,ir,Kt,xl,rR,xP,lR,su):void 0,SP=CD(On,qr),TP=CI(u0,_s,o0,f0,Up,Zd,c0,h0),EP=dI(oT,_s,Xr,SP,TP),kP=cO(Pp,a0),CP=hO(Kv,l0),jP=dO(Zv,X2),MP=fO(Pp,Kt),AP=()=>bO(_s,OI(qr),II(oo),RI(qr),PI(oo),LI(qr),NI(xl,qr),UI(qr),VI(qr),BI(qr),GI(qr),uR,zI(Os),qI(oo),$I(qr),cR);function at(t,e){if(!t)throw new Error(e)}function tn(t,e,n=1/0){if(!(e<=t&&t<=n))throw new RangeError(`Value must be within [${e}, ${n}], got: ${t}`)}function p0(t){!t.isOffline&&t.state!=="running"&&oh('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let m0=console;function DP(t){m0=t}function cT(...t){m0.log(...t)}function oh(...t){m0.warn(...t)}const OP=Object.freeze(Object.defineProperty({__proto__:null,assert:at,assertRange:tn,assertContextRunning:p0,setLogger:DP,log:cT,warn:oh},Symbol.toStringTag,{value:"Module"}));function Gn(t){return typeof t>"u"}function St(t){return!Gn(t)}function hT(t){return typeof t=="function"}function Zn(t){return typeof t=="number"}function gi(t){return Object.prototype.toString.call(t)==="[object Object]"&&t.constructor===Object}function g0(t){return typeof t=="boolean"}function on(t){return Array.isArray(t)}function ys(t){return typeof t=="string"}function qu(t){return ys(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t)}function IP(t){return new pP(t)}function RP(t,e,n){return new EP(t,e,n)}const yi=typeof self=="object"?self:null,PP=yi&&(yi.hasOwnProperty("AudioContext")||yi.hasOwnProperty("webkitAudioContext"));function LP(t,e,n){return at(St(Vb),"This node only works in a secure context (https or localhost)"),new Vb(t,e,n)}function Rs(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(a=t[o])&&(i=(s<3?a(i):s>3?a(e,n,i):a(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function tr(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(g){try{d(r.next(g))}catch(m){a(m)}}function h(g){try{d(r.throw(g))}catch(m){a(m)}}function d(g){g.done?i(g.value):s(g.value).then(o,h)}d((r=r.apply(t,e||[])).next())})}class NP{constructor(e,n,r){this._callback=e,this._type=n,this._updateInterval=r,this._createClock()}_createWorker(){const e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),n=URL.createObjectURL(e),r=new Worker(n);r.onmessage=this._callback.bind(this),this._worker=r}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){this._updateInterval=Math.max(e,128/44100),this._type==="worker"&&this._worker.postMessage(Math.max(e*1e3,1))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function oa(t){return jP(t)}function ao(t){return CP(t)}function bd(t){return MP(t)}function Va(t){return kP(t)}function dT(t){return t instanceof AudioBuffer}function FP(t,e){return t==="value"||oa(e)||ao(e)||dT(e)}function hs(t,...e){if(!e.length)return t;const n=e.shift();if(gi(t)&&gi(n))for(const r in n)FP(r,n[r])?t[r]=n[r]:gi(n[r])?(t[r]||Object.assign(t,{[r]:{}}),hs(t[r],n[r])):Object.assign(t,{[r]:n[r]});return hs(t,...e)}function UP(t,e){return t.length===e.length&&t.every((n,r)=>e[r]===n)}function ye(t,e,n=[],r){const s={},i=Array.from(e);if(gi(i[0])&&r&&!Reflect.has(i[0],r)&&(Object.keys(i[0]).some(o=>Reflect.has(t,o))||(hs(s,{[r]:i[0]}),n.splice(n.indexOf(r),1),i.shift())),i.length===1&&gi(i[0]))hs(s,i[0]);else for(let a=0;a<n.length;a++)St(i[a])&&(s[n[a]]=i[a]);return hs(t,s)}function VP(t){return t.constructor.getDefaults()}function ds(t,e){return Gn(t)?e:t}function rn(t,e){return e.forEach(n=>{Reflect.has(t,n)&&delete t[n]}),t}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2019 Yotam Mann
 */class Ii{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||yi&&this.toString()===yi.TONE_DEBUG_CLASS)&&cT(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}Ii.version=Yv;const y0=1e-6;function of(t,e){return t>e+y0}function Ey(t,e){return of(t,e)||ks(t,e)}function fT(t,e){return t+y0<e}function ks(t,e){return Math.abs(t-e)<y0}function pT(t,e,n){return Math.max(Math.min(t,n),e)}class Ps extends Ii{constructor(){super(),this.name="Timeline",this._timeline=[];const e=ye(Ps.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(at(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const n=this._timeline[this.length-1];at(Ey(e.time,n.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const n=this._search(e.time);this._timeline.splice(n+1,0,e)}if(this.length>this.memory){const n=this.length-this.memory;this._timeline.splice(0,n)}return this}remove(e){const n=this._timeline.indexOf(e);return n!==-1&&this._timeline.splice(n,1),this}get(e,n="time"){const r=this._search(e,n);return r!==-1?this._timeline[r]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,n="time"){const r=this._search(e,n);return r+1<this._timeline.length?this._timeline[r+1]:null}getBefore(e){const n=this._timeline.length;if(n>0&&this._timeline[n-1].time<e)return this._timeline[n-1];const r=this._search(e);return r-1>=0?this._timeline[r-1]:null}cancel(e){if(this._timeline.length>1){let n=this._search(e);if(n>=0)if(ks(this._timeline[n].time,e)){for(let r=n;r>=0&&ks(this._timeline[r].time,e);r--)n=r;this._timeline=this._timeline.slice(0,n)}else this._timeline=this._timeline.slice(0,n+1);else this._timeline=[]}else this._timeline.length===1&&Ey(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const n=this._search(e);return n>=0&&(this._timeline=this._timeline.slice(n+1)),this}previousEvent(e){const n=this._timeline.indexOf(e);return n>0?this._timeline[n-1]:null}_search(e,n="time"){if(this._timeline.length===0)return-1;let r=0;const s=this._timeline.length;let i=s;if(s>0&&this._timeline[s-1][n]<=e)return s-1;for(;r<i;){let a=Math.floor(r+(i-r)/2);const o=this._timeline[a],h=this._timeline[a+1];if(ks(o[n],e)){for(let d=a;d<this._timeline.length;d++){const g=this._timeline[d];if(ks(g[n],e))a=d;else break}return a}else{if(fT(o[n],e)&&of(h[n],e))return a;of(o[n],e)?i=a:r=a+1}}return-1}_iterate(e,n=0,r=this._timeline.length-1){this._timeline.slice(n,r+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,n){const r=this._search(e);return r!==-1&&this._iterate(n,0,r),this}forEachAfter(e,n){const r=this._search(e);return this._iterate(n,r+1),this}forEachBetween(e,n,r){let s=this._search(e),i=this._search(n);return s!==-1&&i!==-1?(this._timeline[s].time!==e&&(s+=1),this._timeline[i].time===n&&(i-=1),this._iterate(r,s,i)):s===-1&&this._iterate(r,0,i),this}forEachFrom(e,n){let r=this._search(e);for(;r>=0&&this._timeline[r].time>=e;)r--;return this._iterate(n,r+1),this}forEachAtTime(e,n){const r=this._search(e);if(r!==-1&&ks(this._timeline[r].time,e)){let s=r;for(let i=r;i>=0&&ks(this._timeline[i].time,e);i--)s=i;this._iterate(i=>{n(i)},s,r)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const mT=[];function Bp(t){mT.push(t)}function BP(t){mT.forEach(e=>e(t))}const gT=[];function Gp(t){gT.push(t)}function GP(t){gT.forEach(e=>e(t))}class au extends Ii{constructor(){super(...arguments),this.name="Emitter"}on(e,n){return e.split(/\W+/).forEach(s=>{Gn(this._events)&&(this._events={}),this._events.hasOwnProperty(s)||(this._events[s]=[]),this._events[s].push(n)}),this}once(e,n){const r=(...s)=>{n(...s),this.off(e,r)};return this.on(e,r),this}off(e,n){return e.split(/\W+/).forEach(s=>{if(Gn(this._events)&&(this._events={}),this._events.hasOwnProperty(e))if(Gn(n))this._events[e]=[];else{const i=this._events[e];for(let a=i.length-1;a>=0;a--)i[a]===n&&i.splice(a,1)}}),this}emit(e,...n){if(this._events&&this._events.hasOwnProperty(e)){const r=this._events[e].slice(0);for(let s=0,i=r.length;s<i;s++)r[s].apply(this,n)}return this}static mixin(e){["on","once","off","emit"].forEach(n=>{const r=Object.getOwnPropertyDescriptor(au.prototype,n);Object.defineProperty(e.prototype,n,r)})}dispose(){return super.dispose(),this._events=void 0,this}}class v0 extends au{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class lu extends v0{constructor(){super(),this.name="Context",this._constants=new Map,this._timeouts=new Ps,this._timeoutIds=0,this._initialized=!1,this.isOffline=!1,this._workletModules=new Map;const e=ye(lu.getDefaults(),arguments,["context"]);e.context?this._context=e.context:this._context=IP({latencyHint:e.latencyHint}),this._ticker=new NP(this.emit.bind(this,"tick"),e.clockSource,e.updateInterval),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this._setLatencyHint(e.latencyHint),this.lookAhead=e.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(BP(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,n,r){return this._context.createBuffer(e,n,r)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,n){return this._context.createIIRFilter(e,n)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,n,r){return this._context.createPeriodicWave(e,n,r)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return at(Va(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return at(Va(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return at(Va(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){at(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){at(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){at(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){at(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,n){return LP(this.rawContext,e,n)}addAudioWorkletModule(e,n){return tr(this,void 0,void 0,function*(){at(St(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletModules.has(n)||this._workletModules.set(n,this.rawContext.audioWorklet.addModule(e)),yield this._workletModules.get(n)})}workletsAreReady(){return tr(this,void 0,void 0,function*(){const e=[];this._workletModules.forEach(n=>e.push(n)),yield Promise.all(e)})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get latencyHint(){return this._latencyHint}_setLatencyHint(e){let n=0;if(this._latencyHint=e,ys(e))switch(e){case"interactive":n=.1;break;case"playback":n=.5;break;case"balanced":n=.25;break}this.lookAhead=n,this.updateInterval=n/2}get rawContext(){return this._context}now(){return this._context.currentTime+this.lookAhead}immediate(){return this._context.currentTime}resume(){return Va(this._context)?this._context.resume():Promise.resolve()}close(){return tr(this,void 0,void 0,function*(){Va(this._context)&&(yield this._context.close()),this._initialized&&GP(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const n=this._context.createBuffer(1,128,this._context.sampleRate),r=n.getChannelData(0);for(let i=0;i<r.length;i++)r[i]=e;const s=this._context.createBufferSource();return s.channelCount=1,s.channelCountMode="explicit",s.buffer=n,s.loop=!0,s.start(0),this._constants.set(e,s),s}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this}_timeoutLoop(){const e=this.now();let n=this._timeouts.peek();for(;this._timeouts.length&&n&&n.time<=e;)n.callback(),this._timeouts.shift(),n=this._timeouts.peek()}setTimeout(e,n){this._timeoutIds++;const r=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:r+n}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(n=>{n.id===e&&this._timeouts.remove(n)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,n){const r=++this._timeoutIds,s=()=>{const i=this.now();this._timeouts.add({callback:()=>{e(),s()},id:r,time:i+n})};return s(),r}}class zP extends v0{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,n,r){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,n){return{}}createPanner(){return{}}createPeriodicWave(e,n,r){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,n){return{}}get rawContext(){return{}}addAudioWorkletModule(e,n){return tr(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,n){return 0}clearTimeout(e){return this}setInterval(e,n){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}}function ct(t,e){on(e)?e.forEach(n=>ct(t,n)):Object.defineProperty(t,e,{enumerable:!0,writable:!1})}function ah(t,e){on(e)?e.forEach(n=>ah(t,n)):Object.defineProperty(t,e,{writable:!0})}const Mt=()=>{};class Lt extends Ii{constructor(){super(),this.name="ToneAudioBuffer",this.onload=Mt;const e=ye(Lt.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,e.url&&dT(e.url)||e.url instanceof Lt?this.set(e.url):ys(e.url)&&this.load(e.url).catch(e.onerror)}static getDefaults(){return{onerror:Mt,onload:Mt,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:dr().sampleRate}set(e){return e instanceof Lt?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return tr(this,void 0,void 0,function*(){const n=Lt.load(e).then(r=>{this.set(r),this.onload(this)});Lt.downloads.push(n);try{yield n}finally{const r=Lt.downloads.indexOf(n);Lt.downloads.splice(r,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const n=on(e)&&e[0].length>0,r=n?e.length:1,s=n?e[0].length:e.length,i=dr(),a=i.createBuffer(r,s,i.sampleRate),o=!n&&r===1?[e]:e;for(let h=0;h<r;h++)a.copyToChannel(o[h],h);return this._buffer=a,this}toMono(e){if(Zn(e))this.fromArray(this.toArray(e));else{let n=new Float32Array(this.length);const r=this.numberOfChannels;for(let s=0;s<r;s++){const i=this.toArray(s);for(let a=0;a<i.length;a++)n[a]+=i[a]}n=n.map(s=>s/r),this.fromArray(n)}return this}toArray(e){if(Zn(e))return this.getChannelData(e);if(this.numberOfChannels===1)return this.toArray(0);{const n=[];for(let r=0;r<this.numberOfChannels;r++)n[r]=this.getChannelData(r);return n}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,n=this.duration){const r=Math.floor(e*this.sampleRate),s=Math.floor(n*this.sampleRate);at(r<s,"The start time must be less than the end time");const i=s-r,a=dr().createBuffer(this.numberOfChannels,i,this.sampleRate);for(let o=0;o<this.numberOfChannels;o++)a.copyToChannel(this.getChannelData(o).subarray(r,s),o);return new Lt(a)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new Lt().fromArray(e)}static fromUrl(e){return tr(this,void 0,void 0,function*(){return yield new Lt().load(e)})}static load(e){return tr(this,void 0,void 0,function*(){const n=e.match(/\[([^\]\[]+\|.+)\]$/);if(n){const o=n[1].split("|");let h=o[0];for(const d of o)if(Lt.supportsType(d)){h=d;break}e=e.replace(n[0],h)}const r=Lt.baseUrl===""||Lt.baseUrl.endsWith("/")?Lt.baseUrl:Lt.baseUrl+"/",s=yield fetch(r+e);if(!s.ok)throw new Error(`could not load url: ${e}`);const i=yield s.arrayBuffer();return yield dr().decodeAudioData(i)})}static supportsType(e){const n=e.split("."),r=n[n.length-1];return document.createElement("audio").canPlayType("audio/"+r)!==""}static loaded(){return tr(this,void 0,void 0,function*(){for(yield Promise.resolve();Lt.downloads.length;)yield Lt.downloads[0]})}}Lt.baseUrl="";Lt.downloads=[];class uu extends lu{constructor(){super({clockSource:"offline",context:bd(arguments[0])?arguments[0]:RP(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:bd(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=bd(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return tr(this,void 0,void 0,function*(){let n=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,n++;const r=Math.floor(this.sampleRate/128);e&&n%r===0&&(yield new Promise(s=>setTimeout(s,1)))}})}render(e=!0){return tr(this,void 0,void 0,function*(){yield this.workletsAreReady(),yield this._renderClock(e);const n=yield this._context.startRendering();return new Lt(n)})}close(){return Promise.resolve()}}const yT=new zP;let ul=yT;function dr(){return ul===yT&&PP&&af(new lu),ul}function af(t){Va(t)?ul=new lu(t):bd(t)?ul=new uu(t):ul=t}function qP(){return ul.resume()}if(yi&&!yi.TONE_SILENCE_LOGGING){const e=` * Tone.js v${Yv} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function Sl(t){return Math.pow(10,t/20)}function lh(t){return 20*(Math.log(t)/Math.LN10)}function Tl(t){return Math.pow(2,t/12)}let zp=440;function WP(){return zp}function $P(t){zp=t}function Qi(t){return Math.round(vT(t))}function vT(t){return 69+12*Math.log2(t/zp)}function _0(t){return zp*Math.pow(2,(t-69)/12)}class b0 extends Ii{constructor(e,n,r){super(),this.defaultUnits="s",this._val=n,this._units=r,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,n)=>{const r=parseInt(e,10),s=n==="."?1.5:1;return r===1?this._beatsToUnits(this._getTimeSignature())*s:this._beatsToUnits(4/r)*s},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const n=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(n)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,n,r)=>{let s=0;return e&&e!=="0"&&(s+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),n&&n!=="0"&&(s+=this._beatsToUnits(parseFloat(n))),r&&r!=="0"&&(s+=this._beatsToUnits(parseFloat(r)/4)),s},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof b0&&this.fromType(this._val),Gn(this._val))return this._noArg();if(ys(this._val)&&Gn(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(gi(this._val)){let e=0;for(const n in this._val)if(St(this._val[n])){const r=this._val[n];e+=new this.constructor(this.context,n).valueOf()*r}return e}if(St(this._units)){const e=this._expressions[this._units],n=this._val.toString().trim().match(e.regexp);return n?e.method.apply(this,n.slice(1)):e.method.call(this,this._val)}else return ys(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class Xn extends b0{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const n=new Xn(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(n))},regexp:/^@(.+)/}})}quantize(e,n=1){const r=new this.constructor(this.context,e).valueOf(),s=this.valueOf(),o=Math.round(s/r)*r-s;return s+o*n}toNotation(){const e=this.toSeconds(),n=["1m"];for(let i=1;i<9;i++){const a=Math.pow(2,i);n.push(a+"n."),n.push(a+"n"),n.push(a+"t")}n.push("0");let r=n[0],s=new Xn(this.context,n[0]).toSeconds();return n.forEach(i=>{const a=new Xn(this.context,i).toSeconds();Math.abs(a-e)<Math.abs(s-e)&&(r=i,s=a)}),r}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let n=this.valueOf()/e;n=parseFloat(n.toFixed(4));const r=Math.floor(n/this._getTimeSignature());let s=n%1*4;n=Math.floor(n)%this._getTimeSignature();const i=s.toString();return i.length>3&&(s=parseFloat(parseFloat(i).toFixed(3))),[r,n,s].join(":")}toTicks(){const e=this._beatsToUnits(1),n=this.valueOf()/e;return Math.round(n*this._getPPQ())}toSeconds(){return this.valueOf()}toMidi(){return Qi(this.toFrequency())}_now(){return this.context.now()}}function HP(t,e){return new Xn(dr(),t,e)}class Cn extends Xn{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return WP()}static set A4(e){$P(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:Cn.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method(e,n){const s=XP[e.toLowerCase()]+(parseInt(n,10)+1)*12;return this.defaultUnits==="midi"?s:Cn.mtof(s)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,n,r){let s=1;return e&&e!=="0"&&(s*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),n&&n!=="0"&&(s*=this._beatsToUnits(parseFloat(n))),r&&r!=="0"&&(s*=this._beatsToUnits(parseFloat(r)/4)),s}}})}transpose(e){return new Cn(this.context,this.valueOf()*Tl(e))}harmonize(e){return e.map(n=>this.transpose(n))}toMidi(){return Qi(this.valueOf())}toNote(){const e=this.toFrequency(),n=Math.log2(e/Cn.A4);let r=Math.round(12*n)+57;const s=Math.floor(r/12);return s<0&&(r+=-12*s),YP[r%12]+s.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),n=this.valueOf()/e;return Math.floor(n*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return _0(e)}static ftom(e){return Qi(e)}}const XP={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},YP=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function QP(t,e){return new Cn(dr(),t,e)}class Ir extends Xn{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}function KP(t,e){return new Ir(dr(),t,e)}class Yr extends Ii{constructor(){super();const e=ye(Yr.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:dr()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return new Xn(this.context,e).toSeconds()}toFrequency(e){return new Cn(this.context,e).toFrequency()}toTicks(e){return new Ir(this.context,e).toTicks()}_getPartialProperties(e){const n=this.get();return Object.keys(n).forEach(r=>{Gn(e[r])&&delete n[r]}),n}get(){const e=VP(this);return Object.keys(e).forEach(n=>{if(Reflect.has(this,n)){const r=this[n];St(r)&&St(r.value)&&St(r.setValueAtTime)?e[n]=r.value:r instanceof Yr?e[n]=r._getPartialProperties(e[n]):on(r)||Zn(r)||ys(r)||g0(r)?e[n]=r:delete e[n]}}),e}set(e){return Object.keys(e).forEach(n=>{Reflect.has(this,n)&&St(this[n])&&(this[n]&&St(this[n].value)&&St(this[n].setValueAtTime)?this[n].value!==e[n]&&(this[n].value=e[n]):this[n]instanceof Yr?this[n].set(e[n]):this[n]=e[n])}),this}}class cu extends Ps{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const n=this.get(e);return n!==null?n.state:this._initial}setStateAtTime(e,n,r){return tn(n,0),this.add(Object.assign({},r,{state:e,time:n})),this}getLastState(e,n){const r=this._search(n);for(let s=r;s>=0;s--){const i=this._timeline[s];if(i.state===e)return i}}getNextState(e,n){const r=this._search(n);if(r!==-1)for(let s=r;s<this._timeline.length;s++){const i=this._timeline[s];if(i.state===e)return i}}}class _t extends Yr{constructor(){super(ye(_t.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,this._minOutput=1e-7;const e=ye(_t.getDefaults(),arguments,["param","units","convert"]);for(at(St(e.param)&&(oa(e.param)||e.param instanceof _t),"param must be an AudioParam");!oa(e.param);)e.param=e.param._param;this._swappable=St(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new Ps(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,St(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Yr.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return St(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return St(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,n){return this.units===n}_assertRange(e){return St(this.maxValue)&&St(this.minValue)&&tn(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?Sl(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?lh(e):e}setValueAtTime(e,n){const r=this.toSeconds(n),s=this._fromType(e);return at(isFinite(s)&&isFinite(r),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._assertRange(s),this.log(this.units,"setValueAtTime",e,r),this._events.add({time:r,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,r),this}getValueAtTime(e){const n=Math.max(this.toSeconds(e),0),r=this._events.getAfter(n),s=this._events.get(n);let i=this._initialValue;if(s===null)i=this._initialValue;else if(s.type==="setTargetAtTime"&&(r===null||r.type==="setValueAtTime")){const a=this._events.getBefore(s.time);let o;a===null?o=this._initialValue:o=a.value,s.type==="setTargetAtTime"&&(i=this._exponentialApproach(s.time,o,s.value,s.constant,n))}else if(r===null)i=s.value;else if(r.type==="linearRampToValueAtTime"||r.type==="exponentialRampToValueAtTime"){let a=s.value;if(s.type==="setTargetAtTime"){const o=this._events.getBefore(s.time);o===null?a=this._initialValue:a=o.value}r.type==="linearRampToValueAtTime"?i=this._linearInterpolate(s.time,a,r.time,r.value,n):i=this._exponentialInterpolate(s.time,a,r.time,r.value,n)}else i=s.value;return this._toType(i)}setRampPoint(e){e=this.toSeconds(e);let n=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(n)===0&&(n=this._toType(this._minOutput)),this.setValueAtTime(n,e),this}linearRampToValueAtTime(e,n){const r=this._fromType(e),s=this.toSeconds(n);return at(isFinite(r)&&isFinite(s),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._assertRange(r),this._events.add({time:s,type:"linearRampToValueAtTime",value:r}),this.log(this.units,"linearRampToValueAtTime",e,s),this._param.linearRampToValueAtTime(r,s),this}exponentialRampToValueAtTime(e,n){let r=this._fromType(e);r=ks(r,0)?this._minOutput:r,this._assertRange(r);const s=this.toSeconds(n);return at(isFinite(r)&&isFinite(s),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._events.add({time:s,type:"exponentialRampToValueAtTime",value:r}),this.log(this.units,"exponentialRampToValueAtTime",e,s),this._param.exponentialRampToValueAtTime(r,s),this}exponentialRampTo(e,n,r){return r=this.toSeconds(r),this.setRampPoint(r),this.exponentialRampToValueAtTime(e,r+this.toSeconds(n)),this}linearRampTo(e,n,r){return r=this.toSeconds(r),this.setRampPoint(r),this.linearRampToValueAtTime(e,r+this.toSeconds(n)),this}targetRampTo(e,n,r){return r=this.toSeconds(r),this.setRampPoint(r),this.exponentialApproachValueAtTime(e,r,n),this}exponentialApproachValueAtTime(e,n,r){n=this.toSeconds(n),r=this.toSeconds(r);const s=Math.log(r+1)/Math.log(200);return this.setTargetAtTime(e,n,s),this.cancelAndHoldAtTime(n+r*.9),this.linearRampToValueAtTime(e,n+r),this}setTargetAtTime(e,n,r){const s=this._fromType(e);at(isFinite(r)&&r>0,"timeConstant must be a number greater than 0");const i=this.toSeconds(n);return this._assertRange(s),at(isFinite(s)&&isFinite(i),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._events.add({constant:r,time:i,type:"setTargetAtTime",value:s}),this.log(this.units,"setTargetAtTime",e,i,r),this._param.setTargetAtTime(s,i,r),this}setValueCurveAtTime(e,n,r,s=1){r=this.toSeconds(r),n=this.toSeconds(n);const i=this._fromType(e[0])*s;this.setValueAtTime(this._toType(i),n);const a=r/(e.length-1);for(let o=1;o<e.length;o++){const h=this._fromType(e[o])*s;this.linearRampToValueAtTime(this._toType(h),n+o*a)}return this}cancelScheduledValues(e){const n=this.toSeconds(e);return at(isFinite(n),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(n),this._param.cancelScheduledValues(n),this.log(this.units,"cancelScheduledValues",n),this}cancelAndHoldAtTime(e){const n=this.toSeconds(e),r=this._fromType(this.getValueAtTime(n));at(isFinite(n),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",n,"value="+r);const s=this._events.get(n),i=this._events.getAfter(n);return s&&ks(s.time,n)?i?(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time)):(this._param.cancelAndHoldAtTime(n),this._events.cancel(n+this.sampleTime)):i&&(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time),i.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(r),n):i.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(r),n)),this._events.add({time:n,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,n),this}rampTo(e,n=.1,r){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,n,r):this.linearRampTo(e,n,r),this}apply(e){const n=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(n),n);const r=this._events.get(n);if(r&&r.type==="setTargetAtTime"){const s=this._events.getAfter(r.time),i=s?s.time:n+2,a=(i-n)/10;for(let o=n;o<i;o+=a)e.linearRampToValueAtTime(this.getValueAtTime(o),o)}return this._events.forEachAfter(this.context.currentTime,s=>{s.type==="cancelScheduledValues"?e.cancelScheduledValues(s.time):s.type==="setTargetAtTime"?e.setTargetAtTime(s.value,s.time,s.constant):e[s.type](s.value,s.time)}),this}setParam(e){at(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const n=this.input;return n.disconnect(this._param),this.apply(e),this._param=e,n.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,n,r,s,i){return r+(n-r)*Math.exp(-(i-e)/s)}_linearInterpolate(e,n,r,s,i){return n+(s-n)*((i-e)/(r-e))}_exponentialInterpolate(e,n,r,s,i){return n*Math.pow(s/n,(i-e)/(r-e))}}class Ue extends Yr{constructor(){super(...arguments),this.name="ToneAudioNode",this._internalChannels=[]}get numberOfInputs(){return St(this.input)?oa(this.input)||this.input instanceof _t?1:this.input.numberOfInputs:0}get numberOfOutputs(){return St(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return St(e)&&(e instanceof Ue||ao(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(r=>{r.channelCount=e.channelCount,r.channelCountMode=e.channelCountMode,r.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();at(e.length>0,"ToneAudioNode does not have any internal nodes");const n=e[0];return{channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelInterpretation:e}))}connect(e,n=0,r=0){return Wn(this,e,n,r),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return oh("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,n=0,r=0){return w0(this,e,n,r),this}chain(...e){return Jn(this,...e),this}fan(...e){return e.forEach(n=>this.connect(n)),this}dispose(){return super.dispose(),St(this.input)&&(this.input instanceof Ue?this.input.dispose():ao(this.input)&&this.input.disconnect()),St(this.output)&&(this.output instanceof Ue?this.output.dispose():ao(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function Jn(...t){const e=t.shift();t.reduce((n,r)=>(n instanceof Ue?n.connect(r):ao(n)&&Wn(n,r),r),e)}function Wn(t,e,n=0,r=0){for(at(St(t),"Cannot connect from undefined node"),at(St(e),"Cannot connect to undefined node"),(e instanceof Ue||ao(e))&&at(e.numberOfInputs>0,"Cannot connect to node with no inputs"),at(t.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof Ue||e instanceof _t;)St(e.input)&&(e=e.input);for(;t instanceof Ue;)St(t.output)&&(t=t.output);oa(e)?t.connect(e,n):t.connect(e,n,r)}function w0(t,e,n=0,r=0){if(St(e))for(;e instanceof Ue;)e=e.input;for(;!ao(t);)St(t.output)&&(t=t.output);oa(e)?t.disconnect(e,n):ao(e)?t.disconnect(e,n,r):t.disconnect()}class it extends Ue{constructor(){super(ye(it.getDefaults(),arguments,["gain","units"])),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;const e=ye(it.getDefaults(),arguments,["gain","units"]);this.gain=new _t({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),ct(this,"gain")}static getDefaults(){return Object.assign(Ue.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class El extends Ue{constructor(e){super(e),this.onended=Mt,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new it({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(n){const r=this.toSeconds(n);return this._startTime!==-1&&r>=this._startTime&&(this._stopTime===-1||r<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(Ue.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:Mt})}_startGain(e,n=1){at(this._startTime===-1,"Source cannot be started more than once");const r=this.toSeconds(this._fadeIn);return this._startTime=e+r,this._startTime=Math.max(this._startTime,this.context.currentTime),r>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(n,e+r):this._gainNode.gain.exponentialApproachValueAtTime(n,e,r)):this._gainNode.gain.setValueAtTime(n,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){at(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const n=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+n,this._stopTime=Math.max(this._stopTime,this.context.currentTime),n>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,n,e):this._gainNode.gain.targetRampTo(0,n,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const r=this._curve==="exponential"?n*2:0;this._stopSource(this.now()+r),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==Mt&&(this.onended(this),this.onended=Mt,!this.context.isOffline)){const e=()=>this.dispose();typeof window.requestIdleCallback<"u"?window.requestIdleCallback(e):setTimeout(e,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),at(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.disconnect(),this}}class Ac extends El{constructor(){super(ye(Ac.getDefaults(),arguments,["offset"])),this.name="ToneConstantSource",this._source=this.context.createConstantSource();const e=ye(Ac.getDefaults(),arguments,["offset"]);Wn(this._source,this._gainNode),this.offset=new _t({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(El.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const n=this.toSeconds(e);return this.log("start",n),this._startGain(n),this._source.start(n),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class ft extends Ue{constructor(){super(ye(ft.getDefaults(),arguments,["value","units"])),this.name="Signal",this.override=!0;const e=ye(ft.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new Ac({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(Ue.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,n=0,r=0){return uh(this,e,n,r),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,n){return this._param.setValueAtTime(e,n),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,n){return this._param.linearRampToValueAtTime(e,n),this}exponentialRampToValueAtTime(e,n){return this._param.exponentialRampToValueAtTime(e,n),this}exponentialRampTo(e,n,r){return this._param.exponentialRampTo(e,n,r),this}linearRampTo(e,n,r){return this._param.linearRampTo(e,n,r),this}targetRampTo(e,n,r){return this._param.targetRampTo(e,n,r),this}exponentialApproachValueAtTime(e,n,r){return this._param.exponentialApproachValueAtTime(e,n,r),this}setTargetAtTime(e,n,r){return this._param.setTargetAtTime(e,n,r),this}setValueCurveAtTime(e,n,r,s){return this._param.setValueCurveAtTime(e,n,r,s),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,n,r){return this._param.rampTo(e,n,r),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function uh(t,e,n,r){(e instanceof _t||oa(e)||e instanceof ft&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof ft&&(e.overridden=!0)),Wn(t,e,n,r)}class lf extends _t{constructor(){super(ye(lf.getDefaults(),arguments,["value"])),this.name="TickParam",this._events=new Ps(1/0),this._multiplier=1;const e=ye(lf.getDefaults(),arguments,["value"]);this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(_t.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,n,r){n=this.toSeconds(n),this.setRampPoint(n);const s=this._fromType(e),i=this._events.get(n),a=Math.round(Math.max(1/r,1));for(let o=0;o<=a;o++){const h=r*o+n,d=this._exponentialApproach(i.time,i.value,s,r,h);this.linearRampToValueAtTime(this._toType(d),h)}return this}setValueAtTime(e,n){const r=this.toSeconds(n);super.setValueAtTime(e,n);const s=this._events.get(r),i=this._events.previousEvent(s),a=this._getTicksUntilEvent(i,r);return s.ticks=Math.max(a,0),this}linearRampToValueAtTime(e,n){const r=this.toSeconds(n);super.linearRampToValueAtTime(e,n);const s=this._events.get(r),i=this._events.previousEvent(s),a=this._getTicksUntilEvent(i,r);return s.ticks=Math.max(a,0),this}exponentialRampToValueAtTime(e,n){n=this.toSeconds(n);const r=this._fromType(e),s=this._events.get(n),i=Math.round(Math.max((n-s.time)*10,1)),a=(n-s.time)/i;for(let o=0;o<=i;o++){const h=a*o+s.time,d=this._exponentialInterpolate(s.time,s.value,n,r,h);this.linearRampToValueAtTime(this._toType(d),h)}return this}_getTicksUntilEvent(e,n){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(Gn(e.ticks)){const a=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(a,e.time)}const r=this._fromType(this.getValueAtTime(e.time));let s=this._fromType(this.getValueAtTime(n));const i=this._events.get(n);return i&&i.time===n&&i.type==="setValueAtTime"&&(s=this._fromType(this.getValueAtTime(n-this.sampleTime))),.5*(n-e.time)*(r+s)+e.ticks}getTicksAtTime(e){const n=this.toSeconds(e),r=this._events.get(n);return Math.max(this._getTicksUntilEvent(r,n),0)}getDurationOfTicks(e,n){const r=this.toSeconds(n),s=this.getTicksAtTime(n);return this.getTimeOfTick(s+e)-r}getTimeOfTick(e){const n=this._events.get(e,"ticks"),r=this._events.getAfter(e,"ticks");if(n&&n.ticks===e)return n.time;if(n&&r&&r.type==="linearRampToValueAtTime"&&n.value!==r.value){const s=this._fromType(this.getValueAtTime(n.time)),a=(this._fromType(this.getValueAtTime(r.time))-s)/(r.time-n.time),o=Math.sqrt(Math.pow(s,2)-2*a*(n.ticks-e)),h=(-s+o)/a,d=(-s-o)/a;return(h>0?h:d)+n.time}else return n?n.value===0?1/0:n.time+(e-n.ticks)/n.value:e/this._initialValue}ticksToTime(e,n){return this.getDurationOfTicks(e,n)}timeToTicks(e,n){const r=this.toSeconds(n),s=this.toSeconds(e),i=this.getTicksAtTime(r);return this.getTicksAtTime(r+s)-i}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const n=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(n,0)}}class uf extends ft{constructor(){super(ye(uf.getDefaults(),arguments,["value"])),this.name="TickSignal";const e=ye(uf.getDefaults(),arguments,["value"]);this.input=this._param=new lf({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(ft.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,n){return this._param.ticksToTime(e,n)}timeToTicks(e,n){return this._param.timeToTicks(e,n)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,n){return this._param.getDurationOfTicks(e,n)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class cf extends Yr{constructor(){super(ye(cf.getDefaults(),arguments,["frequency"])),this.name="TickSource",this._state=new cu,this._tickOffset=new Ps;const e=ye(cf.getDefaults(),arguments,["frequency"]);this.frequency=new uf({context:this.context,units:e.units,value:e.frequency}),ct(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},Yr.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,n){const r=this.toSeconds(e);return this._state.getValueAtTime(r)!=="started"&&(this._state.setStateAtTime("started",r),St(n)&&this.setTicksAtTime(n,r)),this}stop(e){const n=this.toSeconds(e);if(this._state.getValueAtTime(n)==="stopped"){const r=this._state.get(n);r&&r.time>0&&(this._tickOffset.cancel(r.time),this._state.cancel(r.time))}return this._state.cancel(n),this._state.setStateAtTime("stopped",n),this.setTicksAtTime(0,n),this}pause(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)==="started"&&this._state.setStateAtTime("paused",n),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this}getTicksAtTime(e){const n=this.toSeconds(e),r=this._state.getLastState("stopped",n),s={state:"paused",time:n};this._state.add(s);let i=r,a=0;return this._state.forEachBetween(r.time,n+this.sampleTime,o=>{let h=i.time;const d=this._tickOffset.get(o.time);d&&d.time>=i.time&&(a=d.ticks,h=d.time),i.state==="started"&&o.state!=="started"&&(a+=this.frequency.getTicksAtTime(o.time)-this.frequency.getTicksAtTime(h)),i=o}),this._state.remove(s),a}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const n=this.now(),r=this.frequency.timeToTicks(e,n);this.setTicksAtTime(r,n)}getSecondsAtTime(e){e=this.toSeconds(e);const n=this._state.getLastState("stopped",e),r={state:"paused",time:e};this._state.add(r);let s=n,i=0;return this._state.forEachBetween(n.time,e+this.sampleTime,a=>{let o=s.time;const h=this._tickOffset.get(a.time);h&&h.time>=s.time&&(i=h.seconds,o=h.time),s.state==="started"&&a.state!=="started"&&(i+=a.time-o),s=a}),this._state.remove(r),i}setTicksAtTime(e,n){return n=this.toSeconds(n),this._tickOffset.cancel(n),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,n),ticks:e,time:n}),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,n=this.now()){const r=this._tickOffset.get(n),s=this._state.get(n),i=Math.max(r.time,s.time),a=this.frequency.getTicksAtTime(i)+e-r.ticks;return this.frequency.getTimeOfTick(a)}forEachTickBetween(e,n,r){let s=this._state.get(e);this._state.forEachBetween(e,n,a=>{s&&s.state==="started"&&a.state!=="started"&&this.forEachTickBetween(Math.max(s.time,e),a.time-this.sampleTime,r),s=a});let i=null;if(s&&s.state==="started"){const a=Math.max(s.time,e),o=this.frequency.getTicksAtTime(a),h=this.frequency.getTicksAtTime(s.time),d=o-h;let g=Math.ceil(d)-d;g=ks(g,1)?0:g;let m=this.frequency.getTimeOfTick(o+g);for(;m<n;){try{r(m,Math.round(this.getTicksAtTime(m)))}catch(c){i=c;break}m+=this.frequency.getDurationOfTicks(1,m)}}if(i)throw i;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this.frequency.dispose(),this}}class aa extends Yr{constructor(){super(ye(aa.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",this.callback=Mt,this._lastUpdate=0,this._state=new cu("stopped"),this._boundLoop=this._loop.bind(this);const e=ye(aa.getDefaults(),arguments,["callback","frequency"]);this.callback=e.callback,this._tickSource=new cf({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,ct(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(Yr.getDefaults(),{callback:Mt,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,n){p0(this.context);const r=this.toSeconds(e);return this.log("start",r),this._state.getValueAtTime(r)!=="started"&&(this._state.setStateAtTime("started",r),this._tickSource.start(r,n),r<this._lastUpdate&&this.emit("start",r,n)),this}stop(e){const n=this.toSeconds(e);return this.log("stop",n),this._state.cancel(n),this._state.setStateAtTime("stopped",n),this._tickSource.stop(n),n<this._lastUpdate&&this.emit("stop",n),this}pause(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)==="started"&&(this._state.setStateAtTime("paused",n),this._tickSource.pause(n),n<this._lastUpdate&&this.emit("pause",n)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,n){return this._tickSource.setTicksAtTime(e,n),this}getTimeOfTick(e,n=this.now()){return this._tickSource.getTimeOfTick(e,n)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,n){const r=this.toSeconds(n),s=this.getTicksAtTime(r);return this._tickSource.getTimeOfTick(s+e,r)}_loop(){const e=this._lastUpdate,n=this.now();this._lastUpdate=n,this.log("loop",e,n),e!==n&&(this._state.forEachBetween(e,n,r=>{switch(r.state){case"started":const s=this._tickSource.getTicksAtTime(r.time);this.emit("start",r.time,s);break;case"stopped":r.time!==0&&this.emit("stop",r.time);break;case"paused":this.emit("pause",r.time);break}}),this._tickSource.forEachTickBetween(e,n,(r,s)=>{this.callback(r,s)}))}getStateAtTime(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}au.mixin(aa);class zn extends Ue{constructor(){super(ye(zn.getDefaults(),arguments,["delayTime","maxDelay"])),this.name="Delay";const e=ye(zn.getDefaults(),arguments,["delayTime","maxDelay"]),n=this.toSeconds(e.maxDelay);this._maxDelay=Math.max(n,this.toSeconds(e.delayTime)),this._delayNode=this.input=this.output=this.context.createDelay(n),this.delayTime=new _t({context:this.context,param:this._delayNode.delayTime,units:"time",value:e.delayTime,minValue:0,maxValue:this.maxDelay}),ct(this,"delayTime")}static getDefaults(){return Object.assign(Ue.getDefaults(),{delayTime:0,maxDelay:1})}get maxDelay(){return this._maxDelay}dispose(){return super.dispose(),this._delayNode.disconnect(),this.delayTime.dispose(),this}}function ZP(t,e,n=2,r=dr().sampleRate){return tr(this,void 0,void 0,function*(){const s=dr(),i=new uu(n,e,r);af(i),yield t(i);const a=i.render();af(s);const o=yield a;return new Lt(o)})}class hu extends Ii{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=ye(hu.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(n=>{this._loadingCount++;const r=e.urls[n];this.add(n,r,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:Mt,onload:Mt,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return at(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,n])=>n.loaded)}add(e,n,r=Mt,s=Mt){return ys(n)?this._buffers.set(e.toString(),new Lt(this.baseUrl+n,r,s)):this._buffers.set(e.toString(),new Lt(n,r,s)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class kl extends Cn{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(e){return Qi(super._frequencyToUnits(e))}_ticksToUnits(e){return Qi(super._ticksToUnits(e))}_beatsToUnits(e){return Qi(super._beatsToUnits(e))}_secondsToUnits(e){return Qi(super._secondsToUnits(e))}toMidi(){return this.valueOf()}toFrequency(){return _0(this.toMidi())}transpose(e){return new kl(this.context,this.toMidi()+e)}}function JP(t,e){return new kl(dr(),t,e)}class er extends Ir{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}function eL(t,e){return new er(dr(),t,e)}class tL extends Yr{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Ps,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,n){return this._events.add({callback:e,time:this.toSeconds(n)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=e;){const n=this._events.shift();n&&e-n.time<=this.expiration&&n.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}Bp(t=>{t.draw=new tL({context:t})});Gp(t=>{t.draw.dispose()});class _T extends Ii{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){at(St(e.time),"Events must have a time property"),at(St(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let n=new rL(e.time,e.time+e.duration,e);for(this._root===null?this._root=n:this._root.insert(n),this._length++;n!==null;)n.updateHeight(),n.updateMax(),this._rebalance(n),n=n.parent;return this}remove(e){if(this._root!==null){const n=[];this._root.search(e.time,n);for(const r of n)if(r.event===e){this._removeNode(r),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,n=>this.remove(n)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,n){e.parent!==null?(e.isLeftChild()?e.parent.left=n:e.parent.right=n,this._rebalance(e.parent)):this._setRoot(n)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{const n=e.getBalance();let r,s=null;if(n>0)if(e.left.right===null)r=e.left,r.right=e.right,s=r;else{for(r=e.left.right;r.right!==null;)r=r.right;r.parent&&(r.parent.right=r.left,s=r.parent,r.left=e.left,r.right=e.right)}else if(e.right.left===null)r=e.right,r.left=e.left,s=r;else{for(r=e.right.left;r.left!==null;)r=r.left;r.parent&&(r.parent.left=r.right,s=r.parent,r.left=e.left,r.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=r:e.parent.right=r:this._setRoot(r),s&&this._rebalance(s)}e.dispose()}_rotateLeft(e){const n=e.parent,r=e.isLeftChild(),s=e.right;s&&(e.right=s.left,s.left=e),n!==null?r?n.left=s:n.right=s:this._setRoot(s)}_rotateRight(e){const n=e.parent,r=e.isLeftChild(),s=e.left;s&&(e.left=s.right,s.right=e),n!==null?r?n.left=s:n.right=s:this._setRoot(s)}_rebalance(e){const n=e.getBalance();n>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):n<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){const n=[];if(this._root.search(e,n),n.length>0){let r=n[0];for(let s=1;s<n.length;s++)n[s].low>r.low&&(r=n[s]);return r.event}}return null}forEach(e){if(this._root!==null){const n=[];this._root.traverse(r=>n.push(r)),n.forEach(r=>{r.event&&e(r.event)})}return this}forEachAtTime(e,n){if(this._root!==null){const r=[];this._root.search(e,r),r.forEach(s=>{s.event&&n(s.event)})}return this}forEachFrom(e,n){if(this._root!==null){const r=[];this._root.searchAfter(e,r),r.forEach(s=>{s.event&&n(s.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class rL{constructor(e,n,r){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=r,this.low=e,this.high=n,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,n){e>this.max||(this.left!==null&&this.left.search(e,n),this.low<=e&&this.high>e&&n.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,n))}searchAfter(e,n){this.low>=e&&(n.push(this),this.left!==null&&this.left.searchAfter(e,n)),this.right!==null&&this.right.searchAfter(e,n)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}const nL=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));class Ys extends Ue{constructor(){super(ye(Ys.getDefaults(),arguments,["volume"])),this.name="Volume";const e=ye(Ys.getDefaults(),arguments,["volume"]);this.input=this.output=new it({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,ct(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(Ue.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class hf extends Ue{constructor(){super(ye(hf.getDefaults(),arguments)),this.name="Destination",this.input=new Ys({context:this.context}),this.output=new it({context:this.context}),this.volume=this.input.volume;const e=ye(hf.getDefaults(),arguments);Jn(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(Ue.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),Jn(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}Bp(t=>{t.destination=new hf({context:t})});Gp(t=>{t.destination.dispose()});class sL extends Ii{constructor(e){super(),this.name="TimelineValue",this._timeline=new Ps({memory:10}),this._initialValue=e}set(e,n){return this._timeline.add({value:e,time:n}),this}get(e){const n=this._timeline.get(e);return n?n.value:this._initialValue}}class fo{constructor(e,n){this.id=fo._eventId++;const r=Object.assign(fo.getDefaults(),n);this.transport=e,this.callback=r.callback,this._once=r.once,this.time=r.time}static getDefaults(){return{callback:Mt,once:!1,time:0}}invoke(e){this.callback&&(this.callback(e),this._once&&this.transport.clear(this.id))}dispose(){return this.callback=void 0,this}}fo._eventId=0;class x0 extends fo{constructor(e,n){super(e,n),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const r=Object.assign(x0.getDefaults(),n);this.duration=new er(e.context,r.duration).valueOf(),this._interval=new er(e.context,r.interval).valueOf(),this._nextTick=r.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},fo.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvents(e){const n=this.transport.getTicksAtTime(e);n>=this.time&&n>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new er(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.time;const n=this.transport.getTicksAtTime(e);n>this.time&&(this._nextTick=this.time+Math.ceil((n-this.time)/this._interval)*this._interval),this._currentId=this.transport.scheduleOnce(this.invoke.bind(this),new er(this.context,this._nextTick).toSeconds()),this._nextTick+=this._interval,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new er(this.context,this._nextTick).toSeconds())}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this}}class Dc extends Yr{constructor(){super(ye(Dc.getDefaults(),arguments)),this.name="Transport",this._loop=new sL(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Ps,this._repeatedEvents=new _T,this._syncedSignals=[],this._swingAmount=0;const e=ye(Dc.getDefaults(),arguments);this._ppq=e.ppq,this._clock=new aa({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),ct(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(Yr.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,n){if(this._loop.get(e)&&n>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),n=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&n%this._ppq!==0&&n%(this._swingTicks*2)!==0){const r=n%(this._swingTicks*2)/(this._swingTicks*2),s=Math.sin(r*Math.PI)*this._swingAmount;e+=new er(this.context,this._swingTicks*2/3).toSeconds()*s}this._timeline.forEachAtTime(n,r=>r.invoke(e))}schedule(e,n){const r=new fo(this,{callback:e,time:new Ir(this.context,n).toTicks()});return this._addEvent(r,this._timeline)}scheduleRepeat(e,n,r,s=1/0){const i=new x0(this,{callback:e,duration:new Xn(this.context,s).toTicks(),interval:new Xn(this.context,n).toTicks(),time:new Ir(this.context,r).toTicks()});return this._addEvent(i,this._repeatedEvents)}scheduleOnce(e,n){const r=new fo(this,{callback:e,once:!0,time:new Ir(this.context,n).toTicks()});return this._addEvent(r,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const n=this._scheduledEvents[e.toString()];n.timeline.remove(n.event),n.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,n){return this._scheduledEvents[e.id.toString()]={event:e,timeline:n},n.add(e),e.id}cancel(e=0){const n=this.toTicks(e);return this._timeline.forEachFrom(n,r=>this.clear(r.id)),this._repeatedEvents.forEachFrom(n,r=>this.clear(r.id)),this}_bindClockEvents(){this._clock.on("start",(e,n)=>{n=new er(this.context,n).toSeconds(),this.emit("start",e,n)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,n){let r;return St(n)&&(r=this.toTicks(n)),this._clock.start(e,r),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){on(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new Xn(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new Xn(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,n){return this.loopStart=e,this.loopEnd=n,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new er(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),n=this._clock.getTicksAtTime(e);return new er(this.context,n).toBarsBeatsSixteenths()}set position(e){const n=this.toTicks(e);this.ticks=n}get seconds(){return this._clock.seconds}set seconds(e){const n=this.now(),r=this._clock.frequency.timeToTicks(e,n);this.ticks=r}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const n=this.now();if(this.state==="started"){const r=this._clock.getTicksAtTime(n),s=this._clock.frequency.getDurationOfTicks(Math.ceil(r)-r,n),i=n+s;this.emit("stop",i),this._clock.setTicksAtTime(e,i),this.emit("start",i,this._clock.getSecondsAtTime(i))}else this._clock.setTicksAtTime(e,n)}}getTicksAtTime(e){return Math.round(this._clock.getTicksAtTime(e))}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{const n=this.now(),r=this.getTicksAtTime(n),s=e-r%e;return this._clock.nextTickTime(s,n)}}syncSignal(e,n){if(!n){const s=this.now();if(e.getValueAtTime(s)!==0){const i=this.bpm.getValueAtTime(s),a=1/(60/i/this.PPQ);n=e.getValueAtTime(s)/a}else n=0}const r=new it(n);return this.bpm.connect(r),r.connect(e._param),this._syncedSignals.push({initial:e.value,ratio:r,signal:e}),e.value=0,this}unsyncSignal(e){for(let n=this._syncedSignals.length-1;n>=0;n--){const r=this._syncedSignals[n];r.signal===e&&(r.ratio.dispose(),r.signal.value=r.initial,this._syncedSignals.splice(n,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),ah(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}au.mixin(Dc);Bp(t=>{t.transport=new Dc({context:t})});Gp(t=>{t.transport.dispose()});class Cr extends Ue{constructor(e){super(e),this.input=void 0,this._state=new cu("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=Mt,this._syncedStop=Mt,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Ys({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,ct(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(Ue.getDefaults(),{mute:!1,onstop:Mt,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,n,r){let s=Gn(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(s=this._clampToCurrentTime(s),!this._synced&&this._state.getValueAtTime(s)==="started")at(of(s,this._state.get(s).time),"Start time must be strictly greater than previous start time"),this._state.cancel(s),this._state.setStateAtTime("started",s),this.log("restart",s),this.restart(s,n,r);else if(this.log("start",s),this._state.setStateAtTime("started",s),this._synced){const i=this._state.get(s);i&&(i.offset=this.toSeconds(ds(n,0)),i.duration=r?this.toSeconds(r):void 0);const a=this.context.transport.schedule(o=>{this._start(o,n,r)},s);this._scheduled.push(a),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>s&&this._syncedStart(this.now(),this.context.transport.seconds)}else p0(this.context),this._start(s,n,r);return this}stop(e){let n=Gn(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(n=this._clampToCurrentTime(n),this._state.getValueAtTime(n)==="started"||St(this._state.getNextState("started",n))){if(this.log("stop",n),!this._synced)this._stop(n);else{const r=this.context.transport.schedule(this._stop.bind(this),n);this._scheduled.push(r)}this._state.cancel(n),this._state.setStateAtTime("stopped",n)}return this}restart(e,n,r){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,n,r)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,n)=>{if(n>0){const r=this._state.get(n);if(r&&r.state==="started"&&r.time!==n){const s=n-this.toSeconds(r.time);let i;r.duration&&(i=this.toSeconds(r.duration)-s),this._start(e,this.toSeconds(r.offset)+s,i)}}},this._syncedStop=e=>{const n=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(n)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=Mt,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class Ti extends El{constructor(){super(ye(Ti.getDefaults(),arguments,["url","onload"])),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;const e=ye(Ti.getDefaults(),arguments,["url","onload"]);Wn(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new _t({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new Lt(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(El.getDefaults(),{url:new Lt,loop:!1,loopEnd:0,loopStart:0,onload:Mt,onerror:Mt,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,n,r,s=1){at(this.buffer.loaded,"buffer is either not set or not loaded");const i=this.toSeconds(e);this._startGain(i,s),this.loop?n=ds(n,this.loopStart):n=ds(n,0);let a=Math.max(this.toSeconds(n),0);if(this.loop){const o=this.toSeconds(this.loopEnd)||this.buffer.duration,h=this.toSeconds(this.loopStart),d=o-h;Ey(a,o)&&(a=(a-h)%d+h),ks(a,this.buffer.duration)&&(a=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,fT(a,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(i,a)),St(r)){let o=this.toSeconds(r);o=Math.max(o,0),this.stop(i+o)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}class Ei extends Cr{constructor(){super(ye(Ei.getDefaults(),arguments,["type"])),this.name="Noise",this._source=null;const e=ye(Ei.getDefaults(),arguments,["type"]);this._playbackRate=e.playbackRate,this.type=e.type,this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut}static getDefaults(){return Object.assign(Cr.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(e){if(at(e in Bb,"Noise: invalid type: "+e),this._type!==e&&(this._type=e,this.state==="started")){const n=this.now();this._stop(n),this._start(n)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._source&&(this._source.playbackRate.value=e)}_start(e){const n=Bb[this._type];this._source=new Ti({url:n,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(e),Math.random()*(n.duration-.001))}_stop(e){this._source&&(this._source.stop(this.toSeconds(e)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(e){this._stop(e),this._start(e)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}const Fa=44100*5,ig=2,ai={brown:null,pink:null,white:null},Bb={get brown(){if(!ai.brown){const t=[];for(let e=0;e<ig;e++){const n=new Float32Array(Fa);t[e]=n;let r=0;for(let s=0;s<Fa;s++){const i=Math.random()*2-1;n[s]=(r+.02*i)/1.02,r=n[s],n[s]*=3.5}}ai.brown=new Lt().fromArray(t)}return ai.brown},get pink(){if(!ai.pink){const t=[];for(let e=0;e<ig;e++){const n=new Float32Array(Fa);t[e]=n;let r,s,i,a,o,h,d;r=s=i=a=o=h=d=0;for(let g=0;g<Fa;g++){const m=Math.random()*2-1;r=.99886*r+m*.0555179,s=.99332*s+m*.0750759,i=.969*i+m*.153852,a=.8665*a+m*.3104856,o=.55*o+m*.5329522,h=-.7616*h-m*.016898,n[g]=r+s+i+a+o+h+d+m*.5362,n[g]*=.11,d=m*.115926}}ai.pink=new Lt().fromArray(t)}return ai.pink},get white(){if(!ai.white){const t=[];for(let e=0;e<ig;e++){const n=new Float32Array(Fa);t[e]=n;for(let r=0;r<Fa;r++)n[r]=Math.random()*2-1}ai.white=new Lt().fromArray(t)}return ai.white}};class el extends Ue{constructor(){super(ye(el.getDefaults(),arguments,["volume"])),this.name="UserMedia";const e=ye(el.getDefaults(),arguments,["volume"]);this._volume=this.output=new Ys({context:this.context,volume:e.volume}),this.volume=this._volume.volume,ct(this,"volume"),this.mute=e.mute}static getDefaults(){return Object.assign(Ue.getDefaults(),{mute:!1,volume:0})}open(e){return tr(this,void 0,void 0,function*(){at(el.supported,"UserMedia is not supported"),this.state==="started"&&this.close();const n=yield el.enumerateDevices();Zn(e)?this._device=n[e]:(this._device=n.find(i=>i.label===e||i.deviceId===e),!this._device&&n.length>0&&(this._device=n[0]),at(St(this._device),`No matching device ${e}`));const r={audio:{echoCancellation:!1,sampleRate:this.context.sampleRate,noiseSuppression:!1,mozNoiseSuppression:!1}};this._device&&(r.audio.deviceId=this._device.deviceId);const s=yield navigator.mediaDevices.getUserMedia(r);if(!this._stream){this._stream=s;const i=this.context.createMediaStreamSource(s);Wn(i,this.output),this._mediaStream=i}return this})}close(){return this._stream&&this._mediaStream&&(this._stream.getAudioTracks().forEach(e=>{e.stop()}),this._stream=void 0,this._mediaStream.disconnect(),this._mediaStream=void 0),this._device=void 0,this}static enumerateDevices(){return tr(this,void 0,void 0,function*(){return(yield navigator.mediaDevices.enumerateDevices()).filter(n=>n.kind==="audioinput")})}get state(){return this._stream&&this._stream.active?"started":"stopped"}get deviceId(){if(this._device)return this._device.deviceId}get groupId(){if(this._device)return this._device.groupId}get label(){if(this._device)return this._device.label}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this.close(),this._volume.dispose(),this.volume.dispose(),this}static get supported(){return St(navigator.mediaDevices)&&St(navigator.mediaDevices.getUserMedia)}}function Ta(t,e){return tr(this,void 0,void 0,function*(){const n=e/t.context.sampleRate,r=new uu(1,n,t.context.sampleRate);return new t.constructor(Object.assign(t.get(),{frequency:2/n,detune:0,context:r})).toDestination().start(0),(yield r.render()).getChannelData(0)})}class Cl extends El{constructor(){super(ye(Cl.getDefaults(),arguments,["frequency","type"])),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];const e=ye(Cl.getDefaults(),arguments,["frequency","type"]);Wn(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new _t({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new _t({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),ct(this,["frequency","detune"])}static getDefaults(){return Object.assign(El.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const n=this.toSeconds(e);return this.log("start",n),this._startGain(n),this._oscillator.start(n),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class cr extends Cr{constructor(){super(ye(cr.getDefaults(),arguments,["frequency","type"])),this.name="Oscillator",this._oscillator=null;const e=ye(cr.getDefaults(),arguments,["frequency","type"]);this.frequency=new ft({context:this.context,units:"frequency",value:e.frequency}),ct(this,"frequency"),this.detune=new ft({context:this.context,units:"cents",value:e.detune}),ct(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&e.type!=="custom"&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(Cr.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const n=this.toSeconds(e),r=new Cl({context:this.context,onended:()=>this.onstop(this)});this._oscillator=r,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(n)}_stop(e){const n=this.toSeconds(e);this._oscillator&&this._oscillator.stop(n)}_restart(e){const n=this.toSeconds(e);return this.log("restart",n),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(n),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return cr._periodicWaveCache.find(n=>n.phase===this._phase&&UP(n.partials,this._partials));{const e=cr._periodicWaveCache.find(n=>n.type===this._type&&n.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const n=["sine","square","sawtooth","triangle"].indexOf(e)!==-1;if(this._phase===0&&n)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=e);else{const r=this._getCachedPeriodicWave();if(St(r)){const{partials:s,wave:i}=r;this._wave=i,this._partials=s,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[s,i]=this._getRealImaginary(e,this._phase),a=this.context.createPeriodicWave(s,i);this._wave=a,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),cr._periodicWaveCache.push({imag:i,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:s,type:this._type,wave:this._wave}),cr._periodicWaveCache.length>100&&cr._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&this._type!=="custom"&&e!=="custom"?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){tn(e,0);let n=this._type;const r=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(r&&(n=r[1]),this._type!=="custom")e===0?this.type=n:this.type=n+e.toString();else{const s=new Float32Array(e);this._partials.forEach((i,a)=>s[a]=i),this._partials=Array.from(s),this.type=this._type}}_getRealImaginary(e,n){let s=2048;const i=new Float32Array(s),a=new Float32Array(s);let o=1;if(e==="custom"){if(o=this._partials.length+1,this._partialCount=this._partials.length,s=o,this._partials.length===0)return[i,a]}else{const h=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);h?(o=parseInt(h[2],10)+1,this._partialCount=parseInt(h[2],10),e=h[1],o=Math.max(o,2),s=o):this._partialCount=0,this._partials=[]}for(let h=1;h<s;++h){const d=2/(h*Math.PI);let g;switch(e){case"sine":g=h<=o?1:0,this._partials[h-1]=g;break;case"square":g=h&1?2*d:0,this._partials[h-1]=g;break;case"sawtooth":g=d*(h&1?1:-1),this._partials[h-1]=g;break;case"triangle":h&1?g=2*(d*d)*(h-1>>1&1?-1:1):g=0,this._partials[h-1]=g;break;case"custom":g=this._partials[h-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}g!==0?(i[h]=-g*Math.sin(n*h),a[h]=g*Math.cos(n*h)):(i[h]=0,a[h]=0)}return[i,a]}_inverseFFT(e,n,r){let s=0;const i=e.length;for(let a=0;a<i;a++)s+=e[a]*Math.cos(a*r)+n[a]*Math.sin(a*r);return s}getInitialValue(){const[e,n]=this._getRealImaginary(this._type,0);let r=0;const s=Math.PI*2,i=32;for(let a=0;a<i;a++)r=Math.max(this._inverseFFT(e,n,a/i*s),r);return pT(-this._inverseFFT(e,n,this._phase)/r,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(e=1024){return tr(this,void 0,void 0,function*(){return Ta(this,e)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}cr._periodicWaveCache=[];class es extends Ue{constructor(){super(Object.assign(ye(es.getDefaults(),arguments,["context"])))}connect(e,n=0,r=0){return uh(this,e,n,r),this}}class vs extends es{constructor(){super(Object.assign(ye(vs.getDefaults(),arguments,["mapping","length"]))),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;const e=ye(vs.getDefaults(),arguments,["mapping","length"]);on(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):hT(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(ft.getDefaults(),{length:1024})}setMap(e,n=1024){const r=new Float32Array(n);for(let s=0,i=n;s<i;s++){const a=s/(i-1)*2-1;r[s]=e(a,s)}return this.curve=r,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){const n=["none","2x","4x"].some(r=>r.includes(e));at(n,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class qp extends es{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new vs({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class fr extends ft{constructor(){super(Object.assign(ye(fr.getDefaults(),arguments,["value"]))),this.name="Multiply",this.override=!1;const e=ye(fr.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new it({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(ft.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class jl extends Cr{constructor(){super(ye(jl.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="AMOscillator",this._modulationScale=new qp({context:this.context}),this._modulationNode=new it({context:this.context});const e=ye(jl.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new cr({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new cr({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new fr({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),ct(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(cr.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return tr(this,void 0,void 0,function*(){return Ta(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class la extends Cr{constructor(){super(ye(la.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="FMOscillator",this._modulationNode=new it({context:this.context,gain:0});const e=ye(la.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new cr({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new ft({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new cr({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new fr({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new fr({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),ct(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(cr.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return tr(this,void 0,void 0,function*(){return Ta(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class ua extends Cr{constructor(){super(ye(ua.getDefaults(),arguments,["frequency","width"])),this.name="PulseOscillator",this._widthGate=new it({context:this.context,gain:0}),this._thresh=new vs({context:this.context,mapping:n=>n<=0?-1:1});const e=ye(ua.getDefaults(),arguments,["frequency","width"]);this.width=new ft({context:this.context,units:"audioRange",value:e.width}),this._triangle=new cr({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),ct(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(Cr.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(e=1024){return tr(this,void 0,void 0,function*(){return Ta(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class Ml extends Cr{constructor(){super(ye(Ml.getDefaults(),arguments,["frequency","type","spread"])),this.name="FatOscillator",this._oscillators=[];const e=ye(Ml.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new ft({context:this.context,units:"frequency",value:e.frequency}),this.detune=new ft({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,ct(this,["frequency","detune"])}static getDefaults(){return Object.assign(cr.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(n=>n.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(n=>n.stop(e))}_restart(e){this._forEach(n=>n.restart(e))}_forEach(e){for(let n=0;n<this._oscillators.length;n++)e(this._oscillators[n],n)}get type(){return this._type}set type(e){this._type=e,this._forEach(n=>n.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const n=-e/2,r=e/(this._oscillators.length-1);this._forEach((s,i)=>s.detune.value=n+r*i)}}get count(){return this._oscillators.length}set count(e){if(tn(e,1),this._oscillators.length!==e){this._forEach(n=>n.dispose()),this._oscillators=[];for(let n=0;n<e;n++){const r=new cr({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+n/e*360,partialCount:this._partialCount,onstop:n===0?()=>this.onstop(this):Mt});this.type==="custom"&&(r.partials=this._partials),this.frequency.connect(r.frequency),this.detune.connect(r.detune),r.detune.overridden=!1,r.connect(this.output),this._oscillators[n]=r}this.spread=this._spread,this.state==="started"&&this._forEach(n=>n.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((n,r)=>n.phase=this._phase+r/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(n=>n.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(n=>n.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(n=>n.partialCount=e),this._type=this._oscillators[0].type}asArray(e=1024){return tr(this,void 0,void 0,function*(){return Ta(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class Al extends Cr{constructor(){super(ye(Al.getDefaults(),arguments,["frequency","modulationFrequency"])),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new fr({context:this.context,value:2});const e=ye(Al.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new ua({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new cr({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),ct(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(Cr.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(e=1024){return tr(this,void 0,void 0,function*(){return Ta(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const Gb={am:jl,fat:Ml,fm:la,oscillator:cr,pulse:ua,pwm:Al};class Qs extends Cr{constructor(){super(ye(Qs.getDefaults(),arguments,["frequency","type"])),this.name="OmniOscillator";const e=ye(Qs.getDefaults(),arguments,["frequency","type"]);this.frequency=new ft({context:this.context,units:"frequency",value:e.frequency}),this.detune=new ft({context:this.context,units:"cents",value:e.detune}),ct(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(cr.getDefaults(),la.getDefaults(),jl.getDefaults(),Ml.getDefaults(),ua.getDefaults(),Al.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(n=>this._sourceType===n)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const n=Gb[e],r=this.now();if(this._oscillator){const s=this._oscillator;s.stop(r),this.context.setTimeout(()=>s.dispose(),this.blockTime)}this._oscillator=new n({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(r)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let n="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(n=this._oscillator.type),e==="fm"?this.type="fm"+n:e==="am"?this.type="am"+n:e==="fat"?this.type="fat"+n:e==="oscillator"?this.type=n:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,n){return e instanceof Gb[n]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&Zn(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&Zn(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&ys(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(e=1024){return tr(this,void 0,void 0,function*(){return Ta(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class Ea extends ft{constructor(){super(Object.assign(ye(Ea.getDefaults(),arguments,["value"]))),this.override=!1,this.name="Add",this._sum=new it({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,Jn(this._constantSource,this._sum)}static getDefaults(){return Object.assign(ft.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class Ks extends es{constructor(){super(Object.assign(ye(Ks.getDefaults(),arguments,["min","max"]))),this.name="Scale";const e=ye(Ks.getDefaults(),arguments,["min","max"]);this._mult=this.input=new fr({context:this.context,value:e.max-e.min}),this._add=this.output=new Ea({context:this.context,value:e.min}),this._min=e.min,this._max=e.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(es.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(e){this._min=e,this._setRange()}get max(){return this._max}set max(e){this._max=e,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}class Wp extends es{constructor(){super(Object.assign(ye(Wp.getDefaults(),arguments))),this.name="Zero",this._gain=new it({context:this.context}),this.output=this._gain,this.input=void 0,Wn(this.context.getConstant(0),this._gain)}dispose(){return super.dispose(),w0(this.context.getConstant(0),this._gain),this}}class yn extends Ue{constructor(){super(ye(yn.getDefaults(),arguments,["frequency","min","max"])),this.name="LFO",this._stoppedValue=0,this._units="number",this.convert=!0,this._fromType=_t.prototype._fromType,this._toType=_t.prototype._toType,this._is=_t.prototype._is,this._clampValue=_t.prototype._clampValue;const e=ye(yn.getDefaults(),arguments,["frequency","min","max"]);this._oscillator=new cr(e),this.frequency=this._oscillator.frequency,this._amplitudeGain=new it({context:this.context,gain:e.amplitude,units:"normalRange"}),this.amplitude=this._amplitudeGain.gain,this._stoppedSignal=new ft({context:this.context,units:"audioRange",value:0}),this._zeros=new Wp({context:this.context}),this._a2g=new qp({context:this.context}),this._scaler=this.output=new Ks({context:this.context,max:e.max,min:e.min}),this.units=e.units,this.min=e.min,this.max=e.max,this._oscillator.chain(this._amplitudeGain,this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),ct(this,["amplitude","frequency"]),this.phase=e.phase}static getDefaults(){return Object.assign(cr.getDefaults(),{amplitude:1,frequency:"4n",max:1,min:0,type:"sine",units:"number"})}start(e){return e=this.toSeconds(e),this._stoppedSignal.setValueAtTime(0,e),this._oscillator.start(e),this}stop(e){return e=this.toSeconds(e),this._stoppedSignal.setValueAtTime(this._stoppedValue,e),this._oscillator.stop(e),this}sync(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this}unsync(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this}_setStoppedValue(){this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue}get min(){return this._toType(this._scaler.min)}set min(e){e=this._fromType(e),this._scaler.min=e}get max(){return this._toType(this._scaler.max)}set max(e){e=this._fromType(e),this._scaler.max=e}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e,this._setStoppedValue()}get partials(){return this._oscillator.partials}set partials(e){this._oscillator.partials=e,this._setStoppedValue()}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e,this._setStoppedValue()}get units(){return this._units}set units(e){const n=this.min,r=this.max;this._units=e,this.min=n,this.max=r}get state(){return this._oscillator.state}connect(e,n,r){return(e instanceof _t||e instanceof ft)&&(this.convert=e.convert,this.units=e.units),uh(this,e,n,r),this}dispose(){return super.dispose(),this._oscillator.dispose(),this._stoppedSignal.dispose(),this._zeros.dispose(),this._scaler.dispose(),this._a2g.dispose(),this._amplitudeGain.dispose(),this.amplitude.dispose(),this}}function bT(t,e=1/0){const n=new WeakMap;return function(r,s){Reflect.defineProperty(r,s,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(i){tn(i,t,e),n.set(this,i)}})}}function Ri(t,e=1/0){const n=new WeakMap;return function(r,s){Reflect.defineProperty(r,s,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(i){tn(this.toSeconds(i),t,e),n.set(this,i)}})}}class ca extends Cr{constructor(){super(ye(ca.getDefaults(),arguments,["url","onload"])),this.name="Player",this._activeSources=new Set;const e=ye(ca.getDefaults(),arguments,["url","onload"]);this._buffer=new Lt({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(Cr.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:Mt,onerror:Mt,playbackRate:1,reverse:!1})}load(e){return tr(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=Mt){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,n,r){return super.start(e,n,r),this}_start(e,n,r){this._loop?n=ds(n,this._loopStart):n=ds(n,0);const s=this.toSeconds(n),i=r;r=ds(r,Math.max(this._buffer.duration-s,0));let a=this.toSeconds(r);a=a/this._playbackRate,e=this.toSeconds(e);const o=new Ti({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+a),this._state.setStateAtTime("stopped",e+a,{implicitEnd:!0})),this._activeSources.add(o),this._loop&&Gn(i)?o.start(e,s):o.start(e,s,a-this.toSeconds(this.fadeOut))}_stop(e){const n=this.toSeconds(e);this._activeSources.forEach(r=>r.stop(n))}restart(e,n,r){return super.restart(e,n,r),this}_restart(e,n,r){this._stop(e),this._start(e,n,r)}seek(e,n){const r=this.toSeconds(n);if(this._state.getValueAtTime(r)==="started"){const s=this.toSeconds(e);this._stop(r),this._start(r,s)}return this}setLoopPoints(e,n){return this.loopStart=e,this.loopEnd=n,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&tn(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&tn(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(n=>{n.loop=e}),e)){const n=this._state.getNextState("stopped",this.now());n&&this._state.cancel(n.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const n=this.now(),r=this._state.getNextState("stopped",n);r&&r.implicitEnd&&(this._state.cancel(r.time),this._activeSources.forEach(s=>s.cancelStop())),this._activeSources.forEach(s=>{s.playbackRate.setValueAtTime(e,n)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}Rs([Ri(0)],ca.prototype,"fadeIn",void 0);Rs([Ri(0)],ca.prototype,"fadeOut",void 0);class df extends Ue{constructor(){super(ye(df.getDefaults(),arguments,["urls","onload"],"urls")),this.name="Players",this.input=void 0,this._players=new Map;const e=ye(df.getDefaults(),arguments,["urls","onload"],"urls");this._volume=this.output=new Ys({context:this.context,volume:e.volume}),this.volume=this._volume.volume,ct(this,"volume"),this._buffers=new hu({urls:e.urls,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.mute=e.mute,this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut}static getDefaults(){return Object.assign(Cr.getDefaults(),{baseUrl:"",fadeIn:0,fadeOut:0,mute:!1,onload:Mt,onerror:Mt,urls:{},volume:0})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e,this._players.forEach(n=>{n.fadeIn=e})}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e,this._players.forEach(n=>{n.fadeOut=e})}get state(){return Array.from(this._players).some(([n,r])=>r.state==="started")?"started":"stopped"}has(e){return this._buffers.has(e)}player(e){if(at(this.has(e),`No Player with the name ${e} exists on this object`),!this._players.has(e)){const n=new ca({context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,url:this._buffers.get(e)}).connect(this.output);this._players.set(e,n)}return this._players.get(e)}get loaded(){return this._buffers.loaded}add(e,n,r){return at(!this._buffers.has(e),"A buffer with that name already exists on this object"),this._buffers.add(e,n,r),this}stopAll(e){return this._players.forEach(n=>n.stop(e)),this}dispose(){return super.dispose(),this._volume.dispose(),this.volume.dispose(),this._players.forEach(e=>e.dispose()),this._buffers.dispose(),this}}class ff extends Cr{constructor(){super(ye(ff.getDefaults(),arguments,["url","onload"])),this.name="GrainPlayer",this._loopStart=0,this._loopEnd=0,this._activeSources=[];const e=ye(ff.getDefaults(),arguments,["url","onload"]);this.buffer=new Lt({onload:e.onload,onerror:e.onerror,reverse:e.reverse,url:e.url}),this._clock=new aa({context:this.context,callback:this._tick.bind(this),frequency:1/e.grainSize}),this._playbackRate=e.playbackRate,this._grainSize=e.grainSize,this._overlap=e.overlap,this.detune=e.detune,this.overlap=e.overlap,this.loop=e.loop,this.playbackRate=e.playbackRate,this.grainSize=e.grainSize,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.reverse=e.reverse,this._clock.on("stop",this._onstop.bind(this))}static getDefaults(){return Object.assign(Cr.getDefaults(),{onload:Mt,onerror:Mt,overlap:.1,grainSize:.2,playbackRate:1,detune:0,loop:!1,loopStart:0,loopEnd:0,reverse:!1})}_start(e,n,r){n=ds(n,0),n=this.toSeconds(n),e=this.toSeconds(e);const s=1/this._clock.frequency.getValueAtTime(e);this._clock.start(e,n/s),r&&this.stop(e+this.toSeconds(r))}restart(e,n,r){return super.restart(e,n,r),this}_restart(e,n,r){this._stop(e),this._start(e,n,r)}_stop(e){this._clock.stop(e)}_onstop(e){this._activeSources.forEach(n=>{n.fadeOut=0,n.stop(e)}),this.onstop(this)}_tick(e){const n=this._clock.getTicksAtTime(e),r=n*this._grainSize;if(this.log("offset",r),!this.loop&&r>this.buffer.duration){this.stop(e);return}const s=r<this._overlap?0:this._overlap,i=new Ti({context:this.context,url:this.buffer,fadeIn:s,fadeOut:this._overlap,loop:this.loop,loopStart:this._loopStart,loopEnd:this._loopEnd,playbackRate:Tl(this.detune/100)}).connect(this.output);i.start(e,this._grainSize*n),i.stop(e+this._grainSize/this.playbackRate),this._activeSources.push(i),i.onended=()=>{const a=this._activeSources.indexOf(i);a!==-1&&this._activeSources.splice(a,1)}}get playbackRate(){return this._playbackRate}set playbackRate(e){tn(e,.001),this._playbackRate=e,this.grainSize=this._grainSize}get loopStart(){return this._loopStart}set loopStart(e){this.buffer.loaded&&tn(this.toSeconds(e),0,this.buffer.duration),this._loopStart=this.toSeconds(e)}get loopEnd(){return this._loopEnd}set loopEnd(e){this.buffer.loaded&&tn(this.toSeconds(e),0,this.buffer.duration),this._loopEnd=this.toSeconds(e)}get reverse(){return this.buffer.reverse}set reverse(e){this.buffer.reverse=e}get grainSize(){return this._grainSize}set grainSize(e){this._grainSize=this.toSeconds(e),this._clock.frequency.setValueAtTime(this._playbackRate/this._grainSize,this.now())}get overlap(){return this._overlap}set overlap(e){const n=this.toSeconds(e);tn(n,0),this._overlap=n}get loaded(){return this.buffer.loaded}dispose(){return super.dispose(),this.buffer.dispose(),this._clock.dispose(),this._activeSources.forEach(e=>e.dispose()),this}}class wT extends es{constructor(){super(...arguments),this.name="Abs",this._abs=new vs({context:this.context,mapping:e=>Math.abs(e)<.001?0:Math.abs(e)}),this.input=this._abs,this.output=this._abs}dispose(){return super.dispose(),this._abs.dispose(),this}}class xT extends es{constructor(){super(...arguments),this.name="GainToAudio",this._norm=new vs({context:this.context,mapping:e=>Math.abs(e)*2-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class S0 extends es{constructor(){super(...arguments),this.name="Negate",this._multiply=new fr({context:this.context,value:-1}),this.input=this._multiply,this.output=this._multiply}dispose(){return super.dispose(),this._multiply.dispose(),this}}class ka extends ft{constructor(){super(Object.assign(ye(ka.getDefaults(),arguments,["value"]))),this.override=!1,this.name="Subtract",this._sum=new it({context:this.context}),this.input=this._sum,this.output=this._sum,this._neg=new S0({context:this.context}),this.subtrahend=this._param,Jn(this._constantSource,this._neg,this._sum)}static getDefaults(){return Object.assign(ft.getDefaults(),{value:0})}dispose(){return super.dispose(),this._neg.dispose(),this._sum.dispose(),this}}class $p extends es{constructor(){super(Object.assign(ye($p.getDefaults(),arguments))),this.name="GreaterThanZero",this._thresh=this.output=new vs({context:this.context,length:127,mapping:e=>e<=0?0:1}),this._scale=this.input=new fr({context:this.context,value:1e4}),this._scale.connect(this._thresh)}dispose(){return super.dispose(),this._scale.dispose(),this._thresh.dispose(),this}}class Oc extends ft{constructor(){super(Object.assign(ye(Oc.getDefaults(),arguments,["value"]))),this.name="GreaterThan",this.override=!1;const e=ye(Oc.getDefaults(),arguments,["value"]);this._subtract=this.input=new ka({context:this.context,value:e.value}),this._gtz=this.output=new $p({context:this.context}),this.comparator=this._param=this._subtract.subtrahend,ct(this,"comparator"),this._subtract.connect(this._gtz)}static getDefaults(){return Object.assign(ft.getDefaults(),{value:0})}dispose(){return super.dispose(),this._gtz.dispose(),this._subtract.dispose(),this.comparator.dispose(),this}}class Dl extends es{constructor(){super(Object.assign(ye(Dl.getDefaults(),arguments,["value"]))),this.name="Pow";const e=ye(Dl.getDefaults(),arguments,["value"]);this._exponentScaler=this.input=this.output=new vs({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(es.getDefaults(),{value:1})}_expFunc(e){return n=>Math.pow(Math.abs(n),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class Ic extends Ks{constructor(){super(Object.assign(ye(Ic.getDefaults(),arguments,["min","max","exponent"]))),this.name="ScaleExp";const e=ye(Ic.getDefaults(),arguments,["min","max","exponent"]);this.input=this._exp=new Dl({context:this.context,value:e.exponent}),this._exp.connect(this._mult)}static getDefaults(){return Object.assign(Ks.getDefaults(),{exponent:1})}get exponent(){return this._exp.value}set exponent(e){this._exp.value=e}dispose(){return super.dispose(),this._exp.dispose(),this}}class iL extends ft{constructor(){super(ye(ft.getDefaults(),arguments,["value","units"])),this.name="SyncedSignal",this.override=!1;const e=ye(ft.getDefaults(),arguments,["value","units"]);this._lastVal=e.value,this._synced=this.context.transport.scheduleRepeat(this._onTick.bind(this),"1i"),this._syncedCallback=this._anchorValue.bind(this),this.context.transport.on("start",this._syncedCallback),this.context.transport.on("pause",this._syncedCallback),this.context.transport.on("stop",this._syncedCallback),this._constantSource.disconnect(),this._constantSource.stop(0),this._constantSource=this.output=new Ac({context:this.context,offset:e.value,units:e.units}).start(0),this.setValueAtTime(e.value,0)}_onTick(e){const n=super.getValueAtTime(this.context.transport.seconds);this._lastVal!==n&&(this._lastVal=n,this._constantSource.offset.setValueAtTime(n,e))}_anchorValue(e){const n=super.getValueAtTime(this.context.transport.seconds);this._lastVal=n,this._constantSource.offset.cancelAndHoldAtTime(e),this._constantSource.offset.setValueAtTime(n,e)}getValueAtTime(e){const n=new Ir(this.context,e).toSeconds();return super.getValueAtTime(n)}setValueAtTime(e,n){const r=new Ir(this.context,n).toSeconds();return super.setValueAtTime(e,r),this}linearRampToValueAtTime(e,n){const r=new Ir(this.context,n).toSeconds();return super.linearRampToValueAtTime(e,r),this}exponentialRampToValueAtTime(e,n){const r=new Ir(this.context,n).toSeconds();return super.exponentialRampToValueAtTime(e,r),this}setTargetAtTime(e,n,r){const s=new Ir(this.context,n).toSeconds();return super.setTargetAtTime(e,s,r),this}cancelScheduledValues(e){const n=new Ir(this.context,e).toSeconds();return super.cancelScheduledValues(n),this}setValueCurveAtTime(e,n,r,s){const i=new Ir(this.context,n).toSeconds();return r=this.toSeconds(r),super.setValueCurveAtTime(e,i,r,s),this}cancelAndHoldAtTime(e){const n=new Ir(this.context,e).toSeconds();return super.cancelAndHoldAtTime(n),this}setRampPoint(e){const n=new Ir(this.context,e).toSeconds();return super.setRampPoint(n),this}exponentialRampTo(e,n,r){const s=new Ir(this.context,r).toSeconds();return super.exponentialRampTo(e,n,s),this}linearRampTo(e,n,r){const s=new Ir(this.context,r).toSeconds();return super.linearRampTo(e,n,s),this}targetRampTo(e,n,r){const s=new Ir(this.context,r).toSeconds();return super.targetRampTo(e,n,s),this}dispose(){return super.dispose(),this.context.transport.clear(this._synced),this.context.transport.off("start",this._syncedCallback),this.context.transport.off("pause",this._syncedCallback),this.context.transport.off("stop",this._syncedCallback),this._constantSource.dispose(),this}}class Qr extends Ue{constructor(){super(ye(Qr.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new ft({context:this.context,value:0}),this.output=this._sig,this.input=void 0;const e=ye(Qr.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(Ue.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,n){if(ys(e))return e;{let r;for(r in ed)if(ed[r][n]===e)return r;return e}}_setCurve(e,n,r){if(ys(r)&&Reflect.has(ed,r)){const s=ed[r];gi(s)?e!=="_decayCurve"&&(this[e]=s[n]):this[e]=s}else if(on(r)&&e!=="_decayCurve")this[e]=r;else throw new Error("Envelope: invalid curve: "+r)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._decayCurve}set decayCurve(e){at(["linear","exponential"].some(n=>n===e),`Invalid envelope curve: ${e}`),this._decayCurve=e}triggerAttack(e,n=1){this.log("triggerAttack",e,n),e=this.toSeconds(e);let s=this.toSeconds(this.attack);const i=this.toSeconds(this.decay),a=this.getValueAtTime(e);if(a>0){const o=1/s;s=(1-a)/o}if(s<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(n,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(n,s,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(n,s,e);else{this._sig.cancelAndHoldAtTime(e);let o=this._attackCurve;for(let h=1;h<o.length;h++)if(o[h-1]<=a&&a<=o[h]){o=this._attackCurve.slice(h),o[0]=a;break}this._sig.setValueCurveAtTime(o,e,s,n)}if(i&&this.sustain<1){const o=n*this.sustain,h=e+s;this.log("decay",h),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(o,i+h):this._sig.exponentialApproachValueAtTime(o,h,i)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const n=this.getValueAtTime(e);if(n>0){const r=this.toSeconds(this.release);r<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,r,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,r,e):(at(on(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,r,n))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,n,r=1){return n=this.toSeconds(n),this.triggerAttack(n,r),this.triggerRelease(n+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,n=0,r=0){return uh(this,e,n,r),this}asArray(e=1024){return tr(this,void 0,void 0,function*(){const n=e/this.context.sampleRate,r=new uu(1,n,this.context.sampleRate),s=this.toSeconds(this.attack)+this.toSeconds(this.decay),i=s+this.toSeconds(this.release),a=i*.1,o=i+a,h=new this.constructor(Object.assign(this.get(),{attack:n*this.toSeconds(this.attack)/o,decay:n*this.toSeconds(this.decay)/o,release:n*this.toSeconds(this.release)/o,context:r}));return h._sig.toDestination(),h.triggerAttackRelease(n*(s+a)/o,0),(yield r.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}Rs([Ri(0)],Qr.prototype,"attack",void 0);Rs([Ri(0)],Qr.prototype,"decay",void 0);Rs([bT(0,1)],Qr.prototype,"sustain",void 0);Rs([Ri(0)],Qr.prototype,"release",void 0);const ed=(()=>{let e,n;const r=[];for(e=0;e<128;e++)r[e]=Math.sin(e/(128-1)*(Math.PI/2));const s=[],i=6.4;for(e=0;e<128-1;e++){n=e/(128-1);const c=Math.sin(n*(Math.PI*2)*i-Math.PI/2)+1;s[e]=c/10+n*.83}s[128-1]=1;const a=[],o=5;for(e=0;e<128;e++)a[e]=Math.ceil(e/(128-1)*o)/o;const h=[];for(e=0;e<128;e++)n=e/(128-1),h[e]=.5*(1-Math.cos(Math.PI*n));const d=[];for(e=0;e<128;e++){n=e/(128-1);const c=Math.pow(n,3)*4+.2,l=Math.cos(c*Math.PI*2*n);d[e]=Math.abs(l*(1-n))}function g(c){const l=new Array(c.length);for(let u=0;u<c.length;u++)l[u]=1-c[u];return l}function m(c){return c.slice(0).reverse()}return{bounce:{In:g(d),Out:d},cosine:{In:r,Out:m(r)},exponential:"exponential",linear:"linear",ripple:{In:s,Out:g(s)},sine:{In:h,Out:g(h)},step:{In:a,Out:g(a)}}})();class ts extends Ue{constructor(){super(ye(ts.getDefaults(),arguments)),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease;const e=ye(ts.getDefaults(),arguments);this._volume=this.output=new Ys({context:this.context,volume:e.volume}),this.volume=this._volume.volume,ct(this,"volume")}static getDefaults(){return Object.assign(Ue.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,n){const r=this["_original_"+e]=this[e];this[e]=(...s)=>{const i=s[n],a=this.context.transport.schedule(o=>{s[n]=o,r.apply(this,s)},i);this._scheduledEvents.push(a)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease),this}triggerAttackRelease(e,n,r,s){const i=this.toSeconds(r),a=this.toSeconds(n);return this.triggerAttack(e,i,s),this.triggerRelease(i+a),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class nn extends ts{constructor(){super(ye(nn.getDefaults(),arguments));const e=ye(nn.getDefaults(),arguments);this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(ts.getDefaults(),{detune:0,onsilence:Mt,portamento:0})}triggerAttack(e,n,r=1){this.log("triggerAttack",e,n,r);const s=this.toSeconds(n);return this._triggerEnvelopeAttack(s,r),this.setNote(e,s),this}triggerRelease(e){this.log("triggerRelease",e);const n=this.toSeconds(e);return this._triggerEnvelopeRelease(n),this}setNote(e,n){const r=this.toSeconds(n),s=e instanceof Cn?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(r)>.05){const i=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(s,i,r)}else this.frequency.setValueAtTime(s,r);return this}}Rs([Ri(0)],nn.prototype,"portamento",void 0);class du extends Qr{constructor(){super(ye(du.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new it({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class Zs extends nn{constructor(){super(ye(Zs.getDefaults(),arguments)),this.name="Synth";const e=ye(Zs.getDefaults(),arguments);this.oscillator=new Qs(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new du(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),ct(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(nn.getDefaults(),{envelope:Object.assign(rn(Qr.getDefaults(),Object.keys(Ue.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(rn(Qs.getDefaults(),[...Object.keys(Cr.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,n){if(this.envelope.triggerAttack(e,n),this.oscillator.start(e),this.envelope.sustain===0){const r=this.toSeconds(this.envelope.attack),s=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+r+s)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class Ol extends nn{constructor(){super(ye(Ol.getDefaults(),arguments)),this.name="ModulationSynth";const e=ye(Ol.getDefaults(),arguments);this._carrier=new Zs({context:this.context,oscillator:e.oscillator,envelope:e.envelope,onsilence:()=>this.onsilence(this),volume:-10}),this._modulator=new Zs({context:this.context,oscillator:e.modulation,envelope:e.modulationEnvelope,volume:-10}),this.oscillator=this._carrier.oscillator,this.envelope=this._carrier.envelope,this.modulation=this._modulator.oscillator,this.modulationEnvelope=this._modulator.envelope,this.frequency=new ft({context:this.context,units:"frequency"}),this.detune=new ft({context:this.context,value:e.detune,units:"cents"}),this.harmonicity=new fr({context:this.context,value:e.harmonicity,minValue:0}),this._modulationNode=new it({context:this.context,gain:0}),ct(this,["frequency","harmonicity","oscillator","envelope","modulation","modulationEnvelope","detune"])}static getDefaults(){return Object.assign(nn.getDefaults(),{harmonicity:3,oscillator:Object.assign(rn(Qs.getDefaults(),[...Object.keys(Cr.getDefaults()),"frequency","detune"]),{type:"sine"}),envelope:Object.assign(rn(Qr.getDefaults(),Object.keys(Ue.getDefaults())),{attack:.01,decay:.01,sustain:1,release:.5}),modulation:Object.assign(rn(Qs.getDefaults(),[...Object.keys(Cr.getDefaults()),"frequency","detune"]),{type:"square"}),modulationEnvelope:Object.assign(rn(Qr.getDefaults(),Object.keys(Ue.getDefaults())),{attack:.5,decay:0,sustain:1,release:.5})})}_triggerEnvelopeAttack(e,n){this._carrier._triggerEnvelopeAttack(e,n),this._modulator._triggerEnvelopeAttack(e,n)}_triggerEnvelopeRelease(e){return this._carrier._triggerEnvelopeRelease(e),this._modulator._triggerEnvelopeRelease(e),this}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this._carrier.dispose(),this._modulator.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._modulationNode.dispose(),this}}class T0 extends Ol{constructor(){super(ye(T0.getDefaults(),arguments)),this.name="AMSynth",this._modulationScale=new qp({context:this.context}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output)}dispose(){return super.dispose(),this._modulationScale.dispose(),this}}class Il extends Ue{constructor(){super(ye(Il.getDefaults(),arguments,["frequency","type"])),this.name="BiquadFilter";const e=ye(Il.getDefaults(),arguments,["frequency","type"]);this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new _t({context:this.context,units:"number",value:e.Q,param:this._filter.Q}),this.frequency=new _t({context:this.context,units:"frequency",value:e.frequency,param:this._filter.frequency}),this.detune=new _t({context:this.context,units:"cents",value:e.detune,param:this._filter.detune}),this.gain=new _t({context:this.context,units:"decibels",convert:!1,value:e.gain,param:this._filter.gain}),this.type=e.type}static getDefaults(){return Object.assign(Ue.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(e){at(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._filter.type=e}getFrequencyResponse(e=128){const n=new Float32Array(e);for(let a=0;a<e;a++){const h=Math.pow(a/e,2)*(2e4-20)+20;n[a]=h}const r=new Float32Array(e),s=new Float32Array(e),i=this.context.createBiquadFilter();return i.type=this.type,i.Q.value=this.Q.value,i.frequency.value=this.frequency.value,i.gain.value=this.gain.value,i.getFrequencyResponse(n,r,s),r}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class Nn extends Ue{constructor(){super(ye(Nn.getDefaults(),arguments,["frequency","type","rolloff"])),this.name="Filter",this.input=new it({context:this.context}),this.output=new it({context:this.context}),this._filters=[];const e=ye(Nn.getDefaults(),arguments,["frequency","type","rolloff"]);this._filters=[],this.Q=new ft({context:this.context,units:"positive",value:e.Q}),this.frequency=new ft({context:this.context,units:"frequency",value:e.frequency}),this.detune=new ft({context:this.context,units:"cents",value:e.detune}),this.gain=new ft({context:this.context,units:"decibels",convert:!1,value:e.gain}),this._type=e.type,this.rolloff=e.rolloff,ct(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(Ue.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(e){at(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._type=e,this._filters.forEach(r=>r.type=e)}get rolloff(){return this._rolloff}set rolloff(e){const n=Zn(e)?e:parseInt(e,10),r=[-12,-24,-48,-96];let s=r.indexOf(n);at(s!==-1,`rolloff can only be ${r.join(", ")}`),s+=1,this._rolloff=n,this.input.disconnect(),this._filters.forEach(i=>i.disconnect()),this._filters=new Array(s);for(let i=0;i<s;i++){const a=new Il({context:this.context});a.type=this._type,this.frequency.connect(a.frequency),this.detune.connect(a.detune),this.Q.connect(a.Q),this.gain.connect(a.gain),this._filters[i]=a}this._internalChannels=this._filters,Jn(this.input,...this._internalChannels,this.output)}getFrequencyResponse(e=128){const n=new Il({frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),r=new Float32Array(e).map(()=>1);return this._filters.forEach(()=>{n.getFrequencyResponse(e).forEach((i,a)=>r[a]*=i)}),n.dispose(),r}dispose(){return super.dispose(),this._filters.forEach(e=>{e.dispose()}),ah(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}class Rl extends Qr{constructor(){super(ye(Rl.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="FrequencyEnvelope";const e=ye(Rl.getDefaults(),arguments,["attack","decay","sustain","release"]);this._octaves=e.octaves,this._baseFrequency=this.toFrequency(e.baseFrequency),this._exponent=this.input=new Dl({context:this.context,value:e.exponent}),this._scale=this.output=new Ks({context:this.context,min:this._baseFrequency,max:this._baseFrequency*Math.pow(2,this._octaves)}),this._sig.chain(this._exponent,this._scale)}static getDefaults(){return Object.assign(Qr.getDefaults(),{baseFrequency:200,exponent:1,octaves:4})}get baseFrequency(){return this._baseFrequency}set baseFrequency(e){const n=this.toFrequency(e);tn(n,0),this._baseFrequency=n,this._scale.min=this._baseFrequency,this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(e){this._octaves=e,this._scale.max=this._baseFrequency*Math.pow(2,e)}get exponent(){return this._exponent.value}set exponent(e){this._exponent.value=e}dispose(){return super.dispose(),this._exponent.dispose(),this._scale.dispose(),this}}class Ki extends nn{constructor(){super(ye(Ki.getDefaults(),arguments)),this.name="MonoSynth";const e=ye(Ki.getDefaults(),arguments);this.oscillator=new Qs(Object.assign(e.oscillator,{context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)})),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new Nn(Object.assign(e.filter,{context:this.context})),this.filterEnvelope=new Rl(Object.assign(e.filterEnvelope,{context:this.context})),this.envelope=new du(Object.assign(e.envelope,{context:this.context})),this.oscillator.chain(this.filter,this.envelope,this.output),this.filterEnvelope.connect(this.filter.frequency),ct(this,["oscillator","frequency","detune","filter","filterEnvelope","envelope"])}static getDefaults(){return Object.assign(nn.getDefaults(),{envelope:Object.assign(rn(Qr.getDefaults(),Object.keys(Ue.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.9}),filter:Object.assign(rn(Nn.getDefaults(),Object.keys(Ue.getDefaults())),{Q:1,rolloff:-12,type:"lowpass"}),filterEnvelope:Object.assign(rn(Rl.getDefaults(),Object.keys(Ue.getDefaults())),{attack:.6,baseFrequency:200,decay:.2,exponent:2,octaves:3,release:2,sustain:.5}),oscillator:Object.assign(rn(Qs.getDefaults(),Object.keys(Cr.getDefaults())),{type:"sawtooth"})})}_triggerEnvelopeAttack(e,n=1){if(this.envelope.triggerAttack(e,n),this.filterEnvelope.triggerAttack(e),this.oscillator.start(e),this.envelope.sustain===0){const r=this.toSeconds(this.envelope.attack),s=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+r+s)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.filterEnvelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this.filterEnvelope.dispose(),this.filter.dispose(),this}}class pf extends nn{constructor(){super(ye(pf.getDefaults(),arguments)),this.name="DuoSynth";const e=ye(pf.getDefaults(),arguments);this.voice0=new Ki(Object.assign(e.voice0,{context:this.context,onsilence:()=>this.onsilence(this)})),this.voice1=new Ki(Object.assign(e.voice1,{context:this.context})),this.harmonicity=new fr({context:this.context,units:"positive",value:e.harmonicity}),this._vibrato=new yn({frequency:e.vibratoRate,context:this.context,min:-50,max:50}),this._vibrato.start(),this.vibratoRate=this._vibrato.frequency,this._vibratoGain=new it({context:this.context,units:"normalRange",gain:e.vibratoAmount}),this.vibratoAmount=this._vibratoGain.gain,this.frequency=new ft({context:this.context,units:"frequency",value:440}),this.detune=new ft({context:this.context,units:"cents",value:e.detune}),this.frequency.connect(this.voice0.frequency),this.frequency.chain(this.harmonicity,this.voice1.frequency),this._vibrato.connect(this._vibratoGain),this._vibratoGain.fan(this.voice0.detune,this.voice1.detune),this.detune.fan(this.voice0.detune,this.voice1.detune),this.voice0.connect(this.output),this.voice1.connect(this.output),ct(this,["voice0","voice1","frequency","vibratoAmount","vibratoRate"])}getLevelAtTime(e){return e=this.toSeconds(e),this.voice0.envelope.getValueAtTime(e)+this.voice1.envelope.getValueAtTime(e)}static getDefaults(){return hs(nn.getDefaults(),{vibratoAmount:.5,vibratoRate:5,harmonicity:1.5,voice0:hs(rn(Ki.getDefaults(),Object.keys(nn.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}}),voice1:hs(rn(Ki.getDefaults(),Object.keys(nn.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}})})}_triggerEnvelopeAttack(e,n){this.voice0._triggerEnvelopeAttack(e,n),this.voice1._triggerEnvelopeAttack(e,n)}_triggerEnvelopeRelease(e){return this.voice0._triggerEnvelopeRelease(e),this.voice1._triggerEnvelopeRelease(e),this}dispose(){return super.dispose(),this.voice0.dispose(),this.voice1.dispose(),this.frequency.dispose(),this.detune.dispose(),this._vibrato.dispose(),this.vibratoRate.dispose(),this._vibratoGain.dispose(),this.harmonicity.dispose(),this}}class mf extends Ol{constructor(){super(ye(mf.getDefaults(),arguments)),this.name="FMSynth";const e=ye(mf.getDefaults(),arguments);this.modulationIndex=new fr({context:this.context,value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output)}static getDefaults(){return Object.assign(Ol.getDefaults(),{modulationIndex:10})}dispose(){return super.dispose(),this.modulationIndex.dispose(),this}}const zb=[1,1.483,1.932,2.546,2.63,3.897];class gf extends nn{constructor(){super(ye(gf.getDefaults(),arguments)),this.name="MetalSynth",this._oscillators=[],this._freqMultipliers=[];const e=ye(gf.getDefaults(),arguments);this.detune=new ft({context:this.context,units:"cents",value:e.detune}),this.frequency=new ft({context:this.context,units:"frequency"}),this._amplitude=new it({context:this.context,gain:0}).connect(this.output),this._highpass=new Nn({Q:0,context:this.context,type:"highpass"}).connect(this._amplitude);for(let n=0;n<zb.length;n++){const r=new la({context:this.context,harmonicity:e.harmonicity,modulationIndex:e.modulationIndex,modulationType:"square",onstop:n===0?()=>this.onsilence(this):Mt,type:"square"});r.connect(this._highpass),this._oscillators[n]=r;const s=new fr({context:this.context,value:zb[n]});this._freqMultipliers[n]=s,this.frequency.chain(s,r.frequency),this.detune.connect(r.detune)}this._filterFreqScaler=new Ks({context:this.context,max:7e3,min:this.toFrequency(e.resonance)}),this.envelope=new Qr({attack:e.envelope.attack,attackCurve:"linear",context:this.context,decay:e.envelope.decay,release:e.envelope.release,sustain:0}),this.envelope.chain(this._filterFreqScaler,this._highpass.frequency),this.envelope.connect(this._amplitude.gain),this._octaves=e.octaves,this.octaves=e.octaves}static getDefaults(){return hs(nn.getDefaults(),{envelope:Object.assign(rn(Qr.getDefaults(),Object.keys(Ue.getDefaults())),{attack:.001,decay:1.4,release:.2}),harmonicity:5.1,modulationIndex:32,octaves:1.5,resonance:4e3})}_triggerEnvelopeAttack(e,n=1){return this.envelope.triggerAttack(e,n),this._oscillators.forEach(r=>r.start(e)),this.envelope.sustain===0&&this._oscillators.forEach(r=>{r.stop(e+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay))}),this}_triggerEnvelopeRelease(e){return this.envelope.triggerRelease(e),this._oscillators.forEach(n=>n.stop(e+this.toSeconds(this.envelope.release))),this}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}get modulationIndex(){return this._oscillators[0].modulationIndex.value}set modulationIndex(e){this._oscillators.forEach(n=>n.modulationIndex.value=e)}get harmonicity(){return this._oscillators[0].harmonicity.value}set harmonicity(e){this._oscillators.forEach(n=>n.harmonicity.value=e)}get resonance(){return this._filterFreqScaler.min}set resonance(e){this._filterFreqScaler.min=this.toFrequency(e),this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(e){this._octaves=e,this._filterFreqScaler.max=this._filterFreqScaler.min*Math.pow(2,e)}dispose(){return super.dispose(),this._oscillators.forEach(e=>e.dispose()),this._freqMultipliers.forEach(e=>e.dispose()),this.frequency.dispose(),this.detune.dispose(),this._filterFreqScaler.dispose(),this._amplitude.dispose(),this.envelope.dispose(),this._highpass.dispose(),this}}class Pl extends Zs{constructor(){super(ye(Pl.getDefaults(),arguments)),this.name="MembraneSynth",this.portamento=0;const e=ye(Pl.getDefaults(),arguments);this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,ct(this,["oscillator","envelope"])}static getDefaults(){return hs(nn.getDefaults(),Zs.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,n){const r=this.toSeconds(n),s=this.toFrequency(e instanceof Cn?e.toFrequency():e),i=s*this.octaves;return this.oscillator.frequency.setValueAtTime(i,r),this.oscillator.frequency.exponentialRampToValueAtTime(s,r+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}Rs([bT(0)],Pl.prototype,"octaves",void 0);Rs([Ri(0)],Pl.prototype,"pitchDecay",void 0);class yf extends ts{constructor(){super(ye(yf.getDefaults(),arguments)),this.name="NoiseSynth";const e=ye(yf.getDefaults(),arguments);this.noise=new Ei(Object.assign({context:this.context},e.noise)),this.envelope=new du(Object.assign({context:this.context},e.envelope)),this.noise.chain(this.envelope,this.output)}static getDefaults(){return Object.assign(ts.getDefaults(),{envelope:Object.assign(rn(Qr.getDefaults(),Object.keys(Ue.getDefaults())),{decay:.1,sustain:0}),noise:Object.assign(rn(Ei.getDefaults(),Object.keys(Cr.getDefaults())),{type:"white"})})}triggerAttack(e,n=1){return e=this.toSeconds(e),this.envelope.triggerAttack(e,n),this.noise.start(e),this.envelope.sustain===0&&this.noise.stop(e+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay)),this}triggerRelease(e){return e=this.toSeconds(e),this.envelope.triggerRelease(e),this.noise.stop(e+this.toSeconds(this.envelope.release)),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",0),this._syncMethod("triggerRelease",0)),this}triggerAttackRelease(e,n,r=1){return n=this.toSeconds(n),e=this.toSeconds(e),this.triggerAttack(n,r),this.triggerRelease(n+e),this}dispose(){return super.dispose(),this.noise.dispose(),this.envelope.dispose(),this}}const E0=new Set;function k0(t){E0.add(t)}function ST(t,e){const n=`registerProcessor("${t}", ${e})`;E0.add(n)}function oL(){return Array.from(E0).join(`
`)}class ky extends Ue{constructor(e){super(e),this.name="ToneAudioWorklet",this.workletOptions={},this.onprocessorerror=Mt;const n=URL.createObjectURL(new Blob([oL()],{type:"text/javascript"})),r=this._audioWorkletName();this._dummyGain=this.context.createGain(),this._dummyParam=this._dummyGain.gain,this.context.addAudioWorkletModule(n,r).then(()=>{this.disposed||(this._worklet=this.context.createAudioWorkletNode(r,this.workletOptions),this._worklet.onprocessorerror=this.onprocessorerror.bind(this),this.onReady(this._worklet))})}dispose(){return super.dispose(),this._dummyGain.disconnect(),this._worklet&&(this._worklet.port.postMessage("dispose"),this._worklet.disconnect()),this}}const aL=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;k0(aL);const lL=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;k0(lL);const uL=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;k0(uL);const TT="feedback-comb-filter",cL=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;ST(TT,cL);class Ll extends ky{constructor(){super(ye(Ll.getDefaults(),arguments,["delayTime","resonance"])),this.name="FeedbackCombFilter";const e=ye(Ll.getDefaults(),arguments,["delayTime","resonance"]);this.input=new it({context:this.context}),this.output=new it({context:this.context}),this.delayTime=new _t({context:this.context,value:e.delayTime,units:"time",minValue:0,maxValue:1,param:this._dummyParam,swappable:!0}),this.resonance=new _t({context:this.context,value:e.resonance,units:"normalRange",param:this._dummyParam,swappable:!0}),ct(this,["resonance","delayTime"])}_audioWorkletName(){return TT}static getDefaults(){return Object.assign(Ue.getDefaults(),{delayTime:.1,resonance:.5})}onReady(e){Jn(this.input,e,this.output);const n=e.parameters.get("delayTime");this.delayTime.setParam(n);const r=e.parameters.get("feedback");this.resonance.setParam(r)}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.delayTime.dispose(),this.resonance.dispose(),this}}class Nl extends Ue{constructor(){super(ye(Nl.getDefaults(),arguments,["frequency","type"])),this.name="OnePoleFilter";const e=ye(Nl.getDefaults(),arguments,["frequency","type"]);this._frequency=e.frequency,this._type=e.type,this.input=new it({context:this.context}),this.output=new it({context:this.context}),this._createFilter()}static getDefaults(){return Object.assign(Ue.getDefaults(),{frequency:880,type:"lowpass"})}_createFilter(){const e=this._filter,n=this.toFrequency(this._frequency),r=1/(2*Math.PI*n);if(this._type==="lowpass"){const s=1/(r*this.context.sampleRate),i=s-1;this._filter=this.context.createIIRFilter([s,0],[1,i])}else{const s=1/(r*this.context.sampleRate)-1;this._filter=this.context.createIIRFilter([1,-1],[1,s])}this.input.chain(this._filter,this.output),e&&this.context.setTimeout(()=>{this.disposed||(this.input.disconnect(e),e.disconnect())},this.blockTime)}get frequency(){return this._frequency}set frequency(e){this._frequency=e,this._createFilter()}get type(){return this._type}set type(e){this._type=e,this._createFilter()}getFrequencyResponse(e=128){const n=new Float32Array(e);for(let i=0;i<e;i++){const o=Math.pow(i/e,2)*(2e4-20)+20;n[i]=o}const r=new Float32Array(e),s=new Float32Array(e);return this._filter.getFrequencyResponse(n,r,s),r}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this._filter.disconnect(),this}}class Fl extends Ue{constructor(){super(ye(Fl.getDefaults(),arguments,["delayTime","resonance","dampening"])),this.name="LowpassCombFilter";const e=ye(Fl.getDefaults(),arguments,["delayTime","resonance","dampening"]);this._combFilter=this.output=new Ll({context:this.context,delayTime:e.delayTime,resonance:e.resonance}),this.delayTime=this._combFilter.delayTime,this.resonance=this._combFilter.resonance,this._lowpass=this.input=new Nl({context:this.context,frequency:e.dampening,type:"lowpass"}),this._lowpass.connect(this._combFilter)}static getDefaults(){return Object.assign(Ue.getDefaults(),{dampening:3e3,delayTime:.1,resonance:.5})}get dampening(){return this._lowpass.frequency}set dampening(e){this._lowpass.frequency=e}dispose(){return super.dispose(),this._combFilter.dispose(),this._lowpass.dispose(),this}}class vf extends ts{constructor(){super(ye(vf.getDefaults(),arguments)),this.name="PluckSynth";const e=ye(vf.getDefaults(),arguments);this._noise=new Ei({context:this.context,type:"pink"}),this.attackNoise=e.attackNoise,this._lfcf=new Fl({context:this.context,dampening:e.dampening,resonance:e.resonance}),this.resonance=e.resonance,this.release=e.release,this._noise.connect(this._lfcf),this._lfcf.connect(this.output)}static getDefaults(){return hs(ts.getDefaults(),{attackNoise:1,dampening:4e3,resonance:.7,release:1})}get dampening(){return this._lfcf.dampening}set dampening(e){this._lfcf.dampening=e}triggerAttack(e,n){const r=this.toFrequency(e);n=this.toSeconds(n);const s=1/r;return this._lfcf.delayTime.setValueAtTime(s,n),this._noise.start(n),this._noise.stop(n+s*this.attackNoise),this._lfcf.resonance.cancelScheduledValues(n),this._lfcf.resonance.setValueAtTime(this.resonance,n),this}triggerRelease(e){return this._lfcf.resonance.linearRampTo(0,this.release,e),this}dispose(){return super.dispose(),this._noise.dispose(),this._lfcf.dispose(),this}}class _f extends ts{constructor(){super(ye(_f.getDefaults(),arguments,["voice","options"])),this.name="PolySynth",this._availableVoices=[],this._activeVoices=[],this._voices=[],this._gcTimeout=-1,this._averageActiveVoices=0;const e=ye(_f.getDefaults(),arguments,["voice","options"]);at(!Zn(e.voice),"DEPRECATED: The polyphony count is no longer the first argument.");const n=e.voice.getDefaults();this.options=Object.assign(n,e.options),this.voice=e.voice,this.maxPolyphony=e.maxPolyphony,this._dummyVoice=this._getNextAvailableVoice();const r=this._voices.indexOf(this._dummyVoice);this._voices.splice(r,1),this._gcTimeout=this.context.setInterval(this._collectGarbage.bind(this),1)}static getDefaults(){return Object.assign(ts.getDefaults(),{maxPolyphony:32,options:{},voice:Zs})}get activeVoices(){return this._activeVoices.length}_makeVoiceAvailable(e){this._availableVoices.push(e);const n=this._activeVoices.findIndex(r=>r.voice===e);this._activeVoices.splice(n,1)}_getNextAvailableVoice(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){const e=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return e.connect(this.output),this._voices.push(e),e}else oh("Max polyphony exceeded. Note dropped.")}_collectGarbage(){if(this._averageActiveVoices=Math.max(this._averageActiveVoices*.95,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){const e=this._availableVoices.shift(),n=this._voices.indexOf(e);this._voices.splice(n,1),this.context.isOffline||e.dispose()}}_triggerAttack(e,n,r){e.forEach(s=>{const i=new kl(this.context,s).toMidi(),a=this._getNextAvailableVoice();a&&(a.triggerAttack(s,n,r),this._activeVoices.push({midi:i,voice:a,released:!1}),this.log("triggerAttack",s,n))})}_triggerRelease(e,n){e.forEach(r=>{const s=new kl(this.context,r).toMidi(),i=this._activeVoices.find(({midi:a,released:o})=>a===s&&!o);i&&(i.voice.triggerRelease(n),i.released=!0,this.log("triggerRelease",r,n))})}_scheduleEvent(e,n,r,s){at(!this.disposed,"Synth was already disposed"),r<=this.now()?e==="attack"?this._triggerAttack(n,r,s):this._triggerRelease(n,r):this.context.setTimeout(()=>{this._scheduleEvent(e,n,r,s)},r-this.now())}triggerAttack(e,n,r){Array.isArray(e)||(e=[e]);const s=this.toSeconds(n);return this._scheduleEvent("attack",e,s,r),this}triggerRelease(e,n){Array.isArray(e)||(e=[e]);const r=this.toSeconds(n);return this._scheduleEvent("release",e,r),this}triggerAttackRelease(e,n,r,s){const i=this.toSeconds(r);if(this.triggerAttack(e,i,s),on(n)){at(on(e),"If the duration is an array, the notes must also be an array"),e=e;for(let a=0;a<e.length;a++){const o=n[Math.min(a,n.length-1)],h=this.toSeconds(o);at(h>0,"The duration must be greater than 0"),this.triggerRelease(e[a],i+h)}}else{const a=this.toSeconds(n);at(a>0,"The duration must be greater than 0"),this.triggerRelease(e,i+a)}return this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}set(e){const n=rn(e,["onsilence","context"]);return this.options=hs(this.options,n),this._voices.forEach(r=>r.set(n)),this._dummyVoice.set(n),this}get(){return this._dummyVoice.get()}releaseAll(e){const n=this.toSeconds(e);return this._activeVoices.forEach(({voice:r})=>{r.triggerRelease(n)}),this}dispose(){return super.dispose(),this._dummyVoice.dispose(),this._voices.forEach(e=>e.dispose()),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}}class Ul extends ts{constructor(){super(ye(Ul.getDefaults(),arguments,["urls","onload","baseUrl"],"urls")),this.name="Sampler",this._activeSources=new Map;const e=ye(Ul.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),n={};Object.keys(e.urls).forEach(r=>{const s=parseInt(r,10);if(at(qu(r)||Zn(s)&&isFinite(s),`url key is neither a note or midi pitch: ${r}`),qu(r)){const i=new Cn(this.context,r).toMidi();n[i]=e.urls[r]}else Zn(s)&&isFinite(s)&&(n[s]=e.urls[s])}),this._buffers=new hu({urls:n,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(ts.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:Mt,onerror:Mt,release:.1,urls:{}})}_findClosest(e){let r=0;for(;r<96;){if(this._buffers.has(e+r))return-r;if(this._buffers.has(e-r))return r;r++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,n,r=1){return this.log("triggerAttack",e,n,r),Array.isArray(e)||(e=[e]),e.forEach(s=>{const i=vT(new Cn(this.context,s).toFrequency()),a=Math.round(i),o=i-a,h=this._findClosest(a),d=a-h,g=this._buffers.get(d),m=Tl(h+o),c=new Ti({url:g,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:m}).connect(this.output);c.start(n,0,g.duration/m,r),on(this._activeSources.get(a))||this._activeSources.set(a,[]),this._activeSources.get(a).push(c),c.onended=()=>{if(this._activeSources&&this._activeSources.has(a)){const l=this._activeSources.get(a),u=l.indexOf(c);u!==-1&&l.splice(u,1)}}}),this}triggerRelease(e,n){return this.log("triggerRelease",e,n),Array.isArray(e)||(e=[e]),e.forEach(r=>{const s=new Cn(this.context,r).toMidi();if(this._activeSources.has(s)&&this._activeSources.get(s).length){const i=this._activeSources.get(s);n=this.toSeconds(n),i.forEach(a=>{a.stop(n)}),this._activeSources.set(s,[])}}),this}releaseAll(e){const n=this.toSeconds(e);return this._activeSources.forEach(r=>{for(;r.length;)r.shift().stop(n)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,n,r,s=1){const i=this.toSeconds(r);return this.triggerAttack(e,i,s),on(n)?(at(on(e),"notes must be an array when duration is array"),e.forEach((a,o)=>{const h=n[Math.min(o,n.length-1)];this.triggerRelease(a,i+this.toSeconds(h))})):this.triggerRelease(e,i+this.toSeconds(n)),this}add(e,n,r){if(at(qu(e)||isFinite(e),`note must be a pitch or midi: ${e}`),qu(e)){const s=new Cn(this.context,e).toMidi();this._buffers.add(s,n,r)}else this._buffers.add(e,n,r);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(n=>n.dispose())}),this._activeSources.clear(),this}}Rs([Ri(0)],Ul.prototype,"attack",void 0);Rs([Ri(0)],Ul.prototype,"release",void 0);class Cs extends Yr{constructor(){super(ye(Cs.getDefaults(),arguments,["callback","value"])),this.name="ToneEvent",this._state=new cu("stopped"),this._startOffset=0;const e=ye(Cs.getDefaults(),arguments,["callback","value"]);this._loop=e.loop,this.callback=e.callback,this.value=e.value,this._loopStart=this.toTicks(e.loopStart),this._loopEnd=this.toTicks(e.loopEnd),this._playbackRate=e.playbackRate,this._probability=e.probability,this._humanize=e.humanize,this.mute=e.mute,this._playbackRate=e.playbackRate,this._state.increasing=!0,this._rescheduleEvents()}static getDefaults(){return Object.assign(Yr.getDefaults(),{callback:Mt,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})}_rescheduleEvents(e=-1){this._state.forEachFrom(e,n=>{let r;if(n.state==="started"){n.id!==-1&&this.context.transport.clear(n.id);const s=n.time+Math.round(this.startOffset/this._playbackRate);if(this._loop===!0||Zn(this._loop)&&this._loop>1){r=1/0,Zn(this._loop)&&(r=this._loop*this._getLoopDuration());const i=this._state.getAfter(s);i!==null&&(r=Math.min(r,i.time-s)),r!==1/0&&(this._state.setStateAtTime("stopped",s+r+1,{id:-1}),r=new er(this.context,r));const a=new er(this.context,this._getLoopDuration());n.id=this.context.transport.scheduleRepeat(this._tick.bind(this),a,new er(this.context,s),r)}else n.id=this.context.transport.schedule(this._tick.bind(this),new er(this.context,s))}})}get state(){return this._state.getValueAtTime(this.context.transport.ticks)}get startOffset(){return this._startOffset}set startOffset(e){this._startOffset=e}get probability(){return this._probability}set probability(e){this._probability=e}get humanize(){return this._humanize}set humanize(e){this._humanize=e}start(e){const n=this.toTicks(e);return this._state.getValueAtTime(n)==="stopped"&&(this._state.add({id:-1,state:"started",time:n}),this._rescheduleEvents(n)),this}stop(e){this.cancel(e);const n=this.toTicks(e);if(this._state.getValueAtTime(n)==="started"){this._state.setStateAtTime("stopped",n,{id:-1});const r=this._state.getBefore(n);let s=n;r!==null&&(s=r.time),this._rescheduleEvents(s)}return this}cancel(e){e=ds(e,-1/0);const n=this.toTicks(e);return this._state.forEachFrom(n,r=>{this.context.transport.clear(r.id)}),this._state.cancel(n),this}_tick(e){const n=this.context.transport.getTicksAtTime(e);if(!this.mute&&this._state.getValueAtTime(n)==="started"){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){let r=.02;g0(this.humanize)||(r=this.toSeconds(this.humanize)),e+=(Math.random()*2-1)*r}this.callback(e,this.value)}}_getLoopDuration(){return Math.round((this._loopEnd-this._loopStart)/this._playbackRate)}get loop(){return this._loop}set loop(e){this._loop=e,this._rescheduleEvents()}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._rescheduleEvents()}get loopEnd(){return new er(this.context,this._loopEnd).toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e),this._loop&&this._rescheduleEvents()}get loopStart(){return new er(this.context,this._loopStart).toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e),this._loop&&this._rescheduleEvents()}get progress(){if(this._loop){const e=this.context.transport.ticks,n=this._state.get(e);if(n!==null&&n.state==="started"){const r=this._getLoopDuration();return(e-n.time)%r/r}else return 0}else return 0}dispose(){return super.dispose(),this.cancel(),this._state.dispose(),this}}class Vl extends Yr{constructor(){super(ye(Vl.getDefaults(),arguments,["callback","interval"])),this.name="Loop";const e=ye(Vl.getDefaults(),arguments,["callback","interval"]);this._event=new Cs({context:this.context,callback:this._tick.bind(this),loop:!0,loopEnd:e.interval,playbackRate:e.playbackRate,probability:e.probability}),this.callback=e.callback,this.iterations=e.iterations}static getDefaults(){return Object.assign(Yr.getDefaults(),{interval:"4n",callback:Mt,playbackRate:1,iterations:1/0,probability:1,mute:!1,humanize:!1})}start(e){return this._event.start(e),this}stop(e){return this._event.stop(e),this}cancel(e){return this._event.cancel(e),this}_tick(e){this.callback(e)}get state(){return this._event.state}get progress(){return this._event.progress}get interval(){return this._event.loopEnd}set interval(e){this._event.loopEnd=e}get playbackRate(){return this._event.playbackRate}set playbackRate(e){this._event.playbackRate=e}get humanize(){return this._event.humanize}set humanize(e){this._event.humanize=e}get probability(){return this._event.probability}set probability(e){this._event.probability=e}get mute(){return this._event.mute}set mute(e){this._event.mute=e}get iterations(){return this._event.loop===!0?1/0:this._event.loop}set iterations(e){e===1/0?this._event.loop=!0:this._event.loop=e}dispose(){return super.dispose(),this._event.dispose(),this}}class cl extends Cs{constructor(){super(ye(cl.getDefaults(),arguments,["callback","events"])),this.name="Part",this._state=new cu("stopped"),this._events=new Set;const e=ye(cl.getDefaults(),arguments,["callback","events"]);this._state.increasing=!0,e.events.forEach(n=>{on(n)?this.add(n[0],n[1]):this.add(n)})}static getDefaults(){return Object.assign(Cs.getDefaults(),{events:[]})}start(e,n){const r=this.toTicks(e);if(this._state.getValueAtTime(r)!=="started"){n=ds(n,this._loop?this._loopStart:0),this._loop?n=ds(n,this._loopStart):n=ds(n,0);const s=this.toTicks(n);this._state.add({id:-1,offset:s,state:"started",time:r}),this._forEach(i=>{this._startNote(i,r,s)})}return this}_startNote(e,n,r){n-=r,this._loop?e.startOffset>=this._loopStart&&e.startOffset<this._loopEnd?(e.startOffset<r&&(n+=this._getLoopDuration()),e.start(new er(this.context,n))):e.startOffset<this._loopStart&&e.startOffset>=r&&(e.loop=!1,e.start(new er(this.context,n))):e.startOffset>=r&&e.start(new er(this.context,n))}get startOffset(){return this._startOffset}set startOffset(e){this._startOffset=e,this._forEach(n=>{n.startOffset+=this._startOffset})}stop(e){const n=this.toTicks(e);return this._state.cancel(n),this._state.setStateAtTime("stopped",n),this._forEach(r=>{r.stop(e)}),this}at(e,n){const r=new Ir(this.context,e).toTicks(),s=new er(this.context,1).toSeconds(),i=this._events.values();let a=i.next();for(;!a.done;){const o=a.value;if(Math.abs(r-o.startOffset)<s)return St(n)&&(o.value=n),o;a=i.next()}return St(n)?(this.add(e,n),this.at(e)):null}add(e,n){e instanceof Object&&Reflect.has(e,"time")&&(n=e,e=n.time);const r=this.toTicks(e);let s;return n instanceof Cs?(s=n,s.callback=this._tick.bind(this)):s=new Cs({callback:this._tick.bind(this),context:this.context,value:n}),s.startOffset=r,s.set({humanize:this.humanize,loop:this.loop,loopEnd:this.loopEnd,loopStart:this.loopStart,playbackRate:this.playbackRate,probability:this.probability}),this._events.add(s),this._restartEvent(s),this}_restartEvent(e){this._state.forEach(n=>{n.state==="started"?this._startNote(e,n.time,n.offset):e.stop(new er(this.context,n.time))})}remove(e,n){return gi(e)&&e.hasOwnProperty("time")&&(n=e,e=n.time),e=this.toTicks(e),this._events.forEach(r=>{r.startOffset===e&&(Gn(n)||St(n)&&r.value===n)&&(this._events.delete(r),r.dispose())}),this}clear(){return this._forEach(e=>e.dispose()),this._events.clear(),this}cancel(e){return this._forEach(n=>n.cancel(e)),this._state.cancel(this.toTicks(e)),this}_forEach(e){return this._events&&this._events.forEach(n=>{n instanceof cl?n._forEach(e):e(n)}),this}_setAll(e,n){this._forEach(r=>{r[e]=n})}_tick(e,n){this.mute||this.callback(e,n)}_testLoopBoundries(e){this._loop&&(e.startOffset<this._loopStart||e.startOffset>=this._loopEnd)?e.cancel(0):e.state==="stopped"&&this._restartEvent(e)}get probability(){return this._probability}set probability(e){this._probability=e,this._setAll("probability",e)}get humanize(){return this._humanize}set humanize(e){this._humanize=e,this._setAll("humanize",e)}get loop(){return this._loop}set loop(e){this._loop=e,this._forEach(n=>{n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.loop=e,this._testLoopBoundries(n)})}get loopEnd(){return new er(this.context,this._loopEnd).toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e),this._loop&&this._forEach(n=>{n.loopEnd=e,this._testLoopBoundries(n)})}get loopStart(){return new er(this.context,this._loopStart).toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e),this._loop&&this._forEach(n=>{n.loopStart=this.loopStart,this._testLoopBoundries(n)})}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._setAll("playbackRate",e)}get length(){return this._events.size}dispose(){return super.dispose(),this.clear(),this}}function*hL(t){let e=0;for(;e<t.length;)e=fu(e,t),yield t[e],e++}function*dL(t){let e=t.length-1;for(;e>=0;)e=fu(e,t),yield t[e],e--}function*Lu(t,e){for(;;)yield*e(t)}function fu(t,e){return pT(t,0,e.length-1)}function*qb(t,e){let n=e?0:t.length-1;for(;;)n=fu(n,t),yield t[n],e?(n++,n>=t.length-1&&(e=!1)):(n--,n<=0&&(e=!0))}function*fL(t){let e=0,n=0;for(;e<t.length;)e=fu(e,t),yield t[e],n++,e+=n%2?2:-1}function*pL(t){let e=t.length-1,n=0;for(;e>=0;)e=fu(e,t),yield t[e],n++,e+=n%2?-2:1}function*mL(t){for(;;){const e=Math.floor(Math.random()*t.length);yield t[e]}}function*gL(t){const e=[];for(let n=0;n<t.length;n++)e.push(n);for(;e.length>0;){const n=e.splice(Math.floor(e.length*Math.random()),1),r=fu(n[0],t);yield t[r]}}function*yL(t){let e=Math.floor(Math.random()*t.length);for(;;)e===0?e++:e===t.length-1||Math.random()<.5?e--:e++,yield t[e]}function*Wb(t,e="up",n=0){switch(at(t.length>0,"The array must have more than one value in it"),e){case"up":yield*Lu(t,hL);case"down":yield*Lu(t,dL);case"upDown":yield*qb(t,!0);case"downUp":yield*qb(t,!1);case"alternateUp":yield*Lu(t,fL);case"alternateDown":yield*Lu(t,pL);case"random":yield*mL(t);case"randomOnce":yield*Lu(t,gL);case"randomWalk":yield*yL(t)}}class bf extends Vl{constructor(){super(ye(bf.getDefaults(),arguments,["callback","values","pattern"])),this.name="Pattern";const e=ye(bf.getDefaults(),arguments,["callback","values","pattern"]);this.callback=e.callback,this._values=e.values,this._pattern=Wb(e.values,e.pattern),this._type=e.pattern}static getDefaults(){return Object.assign(Vl.getDefaults(),{pattern:"up",values:[],callback:Mt})}_tick(e){const n=this._pattern.next();this._value=n.value,this.callback(e,this._value)}get values(){return this._values}set values(e){this._values=e,this.pattern=this._type}get value(){return this._value}get pattern(){return this._type}set pattern(e){this._type=e,this._pattern=Wb(this._values,this._type)}}class wf extends Cs{constructor(){super(ye(wf.getDefaults(),arguments,["callback","events","subdivision"])),this.name="Sequence",this._part=new cl({callback:this._seqCallback.bind(this),context:this.context}),this._events=[],this._eventsArray=[];const e=ye(wf.getDefaults(),arguments,["callback","events","subdivision"]);this._subdivision=this.toTicks(e.subdivision),this.events=e.events,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.playbackRate=e.playbackRate,this.probability=e.probability,this.humanize=e.humanize,this.mute=e.mute,this.playbackRate=e.playbackRate}static getDefaults(){return Object.assign(rn(Cs.getDefaults(),["value"]),{events:[],loop:!0,loopEnd:0,loopStart:0,subdivision:"8n"})}_seqCallback(e,n){n!==null&&this.callback(e,n)}get events(){return this._events}set events(e){this.clear(),this._eventsArray=e,this._events=this._createSequence(this._eventsArray),this._eventsUpdated()}start(e,n){return this._part.start(e,n&&this._indexTime(n)),this}stop(e){return this._part.stop(e),this}get subdivision(){return new er(this.context,this._subdivision).toSeconds()}_createSequence(e){return new Proxy(e,{get:(n,r)=>n[r],set:(n,r,s)=>(ys(r)&&isFinite(parseInt(r,10))&&on(s)?n[r]=this._createSequence(s):n[r]=s,this._eventsUpdated(),!0)})}_eventsUpdated(){this._part.clear(),this._rescheduleSequence(this._eventsArray,this._subdivision,this.startOffset),this.loopEnd=this.loopEnd}_rescheduleSequence(e,n,r){e.forEach((s,i)=>{const a=i*n+r;if(on(s))this._rescheduleSequence(s,n/s.length,a);else{const o=new er(this.context,a,"i").toSeconds();this._part.add(o,s)}})}_indexTime(e){return new er(this.context,e*this._subdivision+this.startOffset).toSeconds()}clear(){return this._part.clear(),this}dispose(){return super.dispose(),this._part.dispose(),this}get loop(){return this._part.loop}set loop(e){this._part.loop=e}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this._part.loopStart=this._indexTime(e)}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,e===0?this._part.loopEnd=this._indexTime(this._eventsArray.length):this._part.loopEnd=this._indexTime(e)}get startOffset(){return this._part.startOffset}set startOffset(e){this._part.startOffset=e}get playbackRate(){return this._part.playbackRate}set playbackRate(e){this._part.playbackRate=e}get probability(){return this._part.probability}set probability(e){this._part.probability=e}get progress(){return this._part.progress}get humanize(){return this._part.humanize}set humanize(e){this._part.humanize=e}get length(){return this._part.length}}class ha extends Ue{constructor(){super(Object.assign(ye(ha.getDefaults(),arguments,["fade"]))),this.name="CrossFade",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new xT({context:this.context}),this.a=new it({context:this.context,gain:0}),this.b=new it({context:this.context,gain:0}),this.output=new it({context:this.context}),this._internalChannels=[this.a,this.b];const e=ye(ha.getDefaults(),arguments,["fade"]);this.fade=new ft({context:this.context,units:"normalRange",value:e.fade}),ct(this,"fade"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode="explicit",Wn(this._split,this.a.gain,0),Wn(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(Ue.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}class Gr extends Ue{constructor(e){super(e),this.name="Effect",this._dryWet=new ha({context:this.context}),this.wet=this._dryWet.fade,this.effectSend=new it({context:this.context}),this.effectReturn=new it({context:this.context}),this.input=new it({context:this.context}),this.output=this._dryWet,this.input.fan(this._dryWet.a,this.effectSend),this.effectReturn.connect(this._dryWet.b),this.wet.setValueAtTime(e.wet,0),this._internalChannels=[this.effectReturn,this.effectSend],ct(this,"wet")}static getDefaults(){return Object.assign(Ue.getDefaults(),{wet:1})}connectEffect(e){return this._internalChannels.push(e),this.effectSend.chain(e,this.effectReturn),this}dispose(){return super.dispose(),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}}class xf extends Gr{constructor(e){super(e),this.name="LFOEffect",this._lfo=new yn({context:this.context,frequency:e.frequency,amplitude:e.depth}),this.depth=this._lfo.amplitude,this.frequency=this._lfo.frequency,this.type=e.type,ct(this,["frequency","depth"])}static getDefaults(){return Object.assign(Gr.getDefaults(),{frequency:1,type:"sine",depth:1})}start(e){return this._lfo.start(e),this}stop(e){return this._lfo.stop(e),this}sync(){return this._lfo.sync(),this}unsync(){return this._lfo.unsync(),this}get type(){return this._lfo.type}set type(e){this._lfo.type=e}dispose(){return super.dispose(),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class Sf extends xf{constructor(){super(ye(Sf.getDefaults(),arguments,["frequency","baseFrequency","octaves"])),this.name="AutoFilter";const e=ye(Sf.getDefaults(),arguments,["frequency","baseFrequency","octaves"]);this.filter=new Nn(Object.assign(e.filter,{context:this.context})),this.connectEffect(this.filter),this._lfo.connect(this.filter.frequency),this.octaves=e.octaves,this.baseFrequency=e.baseFrequency}static getDefaults(){return Object.assign(xf.getDefaults(),{baseFrequency:200,octaves:2.6,filter:{type:"lowpass",rolloff:-12,Q:1}})}get baseFrequency(){return this._lfo.min}set baseFrequency(e){this._lfo.min=this.toFrequency(e),this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(e){this._octaves=e,this._lfo.max=this._lfo.min*Math.pow(2,e)}dispose(){return super.dispose(),this.filter.dispose(),this}}class Bl extends Ue{constructor(){super(Object.assign(ye(Bl.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;const e=ye(Bl.getDefaults(),arguments,["pan"]);this.pan=new _t({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",ct(this,"pan")}static getDefaults(){return Object.assign(Ue.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}class Tf extends xf{constructor(){super(ye(Tf.getDefaults(),arguments,["frequency"])),this.name="AutoPanner";const e=ye(Tf.getDefaults(),arguments,["frequency"]);this._panner=new Bl({context:this.context,channelCount:e.channelCount}),this.connectEffect(this._panner),this._lfo.connect(this._panner.pan),this._lfo.min=-1,this._lfo.max=1}static getDefaults(){return Object.assign(xf.getDefaults(),{channelCount:1})}dispose(){return super.dispose(),this._panner.dispose(),this}}class Gl extends Ue{constructor(){super(ye(Gl.getDefaults(),arguments,["smoothing"])),this.name="Follower";const e=ye(Gl.getDefaults(),arguments,["smoothing"]);this._abs=this.input=new wT({context:this.context}),this._lowpass=this.output=new Nl({context:this.context,frequency:1/this.toSeconds(e.smoothing),type:"lowpass"}),this._abs.connect(this._lowpass),this._smoothing=e.smoothing}static getDefaults(){return Object.assign(Ue.getDefaults(),{smoothing:.05})}get smoothing(){return this._smoothing}set smoothing(e){this._smoothing=e,this._lowpass.frequency=1/this.toSeconds(this.smoothing)}dispose(){return super.dispose(),this._abs.dispose(),this._lowpass.dispose(),this}}class Ef extends Gr{constructor(){super(ye(Ef.getDefaults(),arguments,["baseFrequency","octaves","sensitivity"])),this.name="AutoWah";const e=ye(Ef.getDefaults(),arguments,["baseFrequency","octaves","sensitivity"]);this._follower=new Gl({context:this.context,smoothing:e.follower}),this._sweepRange=new Ic({context:this.context,min:0,max:1,exponent:.5}),this._baseFrequency=this.toFrequency(e.baseFrequency),this._octaves=e.octaves,this._inputBoost=new it({context:this.context}),this._bandpass=new Nn({context:this.context,rolloff:-48,frequency:0,Q:e.Q}),this._peaking=new Nn({context:this.context,type:"peaking"}),this._peaking.gain.value=e.gain,this.gain=this._peaking.gain,this.Q=this._bandpass.Q,this.effectSend.chain(this._inputBoost,this._follower,this._sweepRange),this._sweepRange.connect(this._bandpass.frequency),this._sweepRange.connect(this._peaking.frequency),this.effectSend.chain(this._bandpass,this._peaking,this.effectReturn),this._setSweepRange(),this.sensitivity=e.sensitivity,ct(this,["gain","Q"])}static getDefaults(){return Object.assign(Gr.getDefaults(),{baseFrequency:100,octaves:6,sensitivity:0,Q:2,gain:2,follower:.2})}get octaves(){return this._octaves}set octaves(e){this._octaves=e,this._setSweepRange()}get follower(){return this._follower.smoothing}set follower(e){this._follower.smoothing=e}get baseFrequency(){return this._baseFrequency}set baseFrequency(e){this._baseFrequency=this.toFrequency(e),this._setSweepRange()}get sensitivity(){return lh(1/this._inputBoost.gain.value)}set sensitivity(e){this._inputBoost.gain.value=1/Sl(e)}_setSweepRange(){this._sweepRange.min=this._baseFrequency,this._sweepRange.max=Math.min(this._baseFrequency*Math.pow(2,this._octaves),this.context.sampleRate/2)}dispose(){return super.dispose(),this._follower.dispose(),this._sweepRange.dispose(),this._bandpass.dispose(),this._peaking.dispose(),this._inputBoost.dispose(),this}}const ET="bit-crusher",vL=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;ST(ET,vL);class kf extends Gr{constructor(){super(ye(kf.getDefaults(),arguments,["bits"])),this.name="BitCrusher";const e=ye(kf.getDefaults(),arguments,["bits"]);this._bitCrusherWorklet=new Cf({context:this.context,bits:e.bits}),this.connectEffect(this._bitCrusherWorklet),this.bits=this._bitCrusherWorklet.bits}static getDefaults(){return Object.assign(Gr.getDefaults(),{bits:4})}dispose(){return super.dispose(),this._bitCrusherWorklet.dispose(),this}}class Cf extends ky{constructor(){super(ye(Cf.getDefaults(),arguments)),this.name="BitCrusherWorklet";const e=ye(Cf.getDefaults(),arguments);this.input=new it({context:this.context}),this.output=new it({context:this.context}),this.bits=new _t({context:this.context,value:e.bits,units:"positive",minValue:1,maxValue:16,param:this._dummyParam,swappable:!0})}static getDefaults(){return Object.assign(ky.getDefaults(),{bits:12})}_audioWorkletName(){return ET}onReady(e){Jn(this.input,e,this.output);const n=e.parameters.get("bits");this.bits.setParam(n)}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.bits.dispose(),this}}class jf extends Gr{constructor(){super(ye(jf.getDefaults(),arguments,["order"])),this.name="Chebyshev";const e=ye(jf.getDefaults(),arguments,["order"]);this._shaper=new vs({context:this.context,length:4096}),this._order=e.order,this.connectEffect(this._shaper),this.order=e.order,this.oversample=e.oversample}static getDefaults(){return Object.assign(Gr.getDefaults(),{order:1,oversample:"none"})}_getCoefficient(e,n,r){return r.has(n)||(n===0?r.set(n,0):n===1?r.set(n,e):r.set(n,2*e*this._getCoefficient(e,n-1,r)-this._getCoefficient(e,n-2,r))),r.get(n)}get order(){return this._order}set order(e){this._order=e,this._shaper.setMap(n=>this._getCoefficient(n,e,new Map))}get oversample(){return this._shaper.oversample}set oversample(e){this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.dispose(),this}}class po extends Ue{constructor(){super(ye(po.getDefaults(),arguments,["channels"])),this.name="Split";const e=ye(po.getDefaults(),arguments,["channels"]);this._splitter=this.input=this.output=this.context.createChannelSplitter(e.channels),this._internalChannels=[this._splitter]}static getDefaults(){return Object.assign(Ue.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._splitter.disconnect(),this}}class ki extends Ue{constructor(){super(ye(ki.getDefaults(),arguments,["channels"])),this.name="Merge";const e=ye(ki.getDefaults(),arguments,["channels"]);this._merger=this.output=this.input=this.context.createChannelMerger(e.channels)}static getDefaults(){return Object.assign(Ue.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._merger.disconnect(),this}}class Js extends Ue{constructor(e){super(e),this.name="StereoEffect",this.input=new it({context:this.context}),this.input.channelCount=2,this.input.channelCountMode="explicit",this._dryWet=this.output=new ha({context:this.context,fade:e.wet}),this.wet=this._dryWet.fade,this._split=new po({context:this.context,channels:2}),this._merge=new ki({context:this.context,channels:2}),this.input.connect(this._split),this.input.connect(this._dryWet.a),this._merge.connect(this._dryWet.b),ct(this,["wet"])}connectEffectLeft(...e){this._split.connect(e[0],0,0),Jn(...e),Wn(e[e.length-1],this._merge,0,0)}connectEffectRight(...e){this._split.connect(e[0],1,0),Jn(...e),Wn(e[e.length-1],this._merge,0,1)}static getDefaults(){return Object.assign(Ue.getDefaults(),{wet:1})}dispose(){return super.dispose(),this._dryWet.dispose(),this._split.dispose(),this._merge.dispose(),this}}class Cy extends Js{constructor(e){super(e),this.feedback=new ft({context:this.context,value:e.feedback,units:"normalRange"}),this._feedbackL=new it({context:this.context}),this._feedbackR=new it({context:this.context}),this._feedbackSplit=new po({context:this.context,channels:2}),this._feedbackMerge=new ki({context:this.context,channels:2}),this._merge.connect(this._feedbackSplit),this._feedbackMerge.connect(this._split),this._feedbackSplit.connect(this._feedbackL,0,0),this._feedbackL.connect(this._feedbackMerge,0,0),this._feedbackSplit.connect(this._feedbackR,1,0),this._feedbackR.connect(this._feedbackMerge,0,1),this.feedback.fan(this._feedbackL.gain,this._feedbackR.gain),ct(this,["feedback"])}static getDefaults(){return Object.assign(Js.getDefaults(),{feedback:.5})}dispose(){return super.dispose(),this.feedback.dispose(),this._feedbackL.dispose(),this._feedbackR.dispose(),this._feedbackSplit.dispose(),this._feedbackMerge.dispose(),this}}class Mf extends Cy{constructor(){super(ye(Mf.getDefaults(),arguments,["frequency","delayTime","depth"])),this.name="Chorus";const e=ye(Mf.getDefaults(),arguments,["frequency","delayTime","depth"]);this._depth=e.depth,this._delayTime=e.delayTime/1e3,this._lfoL=new yn({context:this.context,frequency:e.frequency,min:0,max:1}),this._lfoR=new yn({context:this.context,frequency:e.frequency,min:0,max:1,phase:180}),this._delayNodeL=new zn({context:this.context}),this._delayNodeR=new zn({context:this.context}),this.frequency=this._lfoL.frequency,ct(this,["frequency"]),this._lfoL.frequency.connect(this._lfoR.frequency),this.connectEffectLeft(this._delayNodeL),this.connectEffectRight(this._delayNodeR),this._lfoL.connect(this._delayNodeL.delayTime),this._lfoR.connect(this._delayNodeR.delayTime),this.depth=this._depth,this.type=e.type,this.spread=e.spread}static getDefaults(){return Object.assign(Cy.getDefaults(),{frequency:1.5,delayTime:3.5,depth:.7,type:"sine",spread:180,feedback:0,wet:.5})}get depth(){return this._depth}set depth(e){this._depth=e;const n=this._delayTime*e;this._lfoL.min=Math.max(this._delayTime-n,0),this._lfoL.max=this._delayTime+n,this._lfoR.min=Math.max(this._delayTime-n,0),this._lfoR.max=this._delayTime+n}get delayTime(){return this._delayTime*1e3}set delayTime(e){this._delayTime=e/1e3,this.depth=this._depth}get type(){return this._lfoL.type}set type(e){this._lfoL.type=e,this._lfoR.type=e}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(e){this._lfoL.phase=90-e/2,this._lfoR.phase=e/2+90}start(e){return this._lfoL.start(e),this._lfoR.start(e),this}stop(e){return this._lfoL.stop(e),this._lfoR.stop(e),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._delayNodeL.dispose(),this._delayNodeR.dispose(),this.frequency.dispose(),this}}class Af extends Gr{constructor(){super(ye(Af.getDefaults(),arguments,["distortion"])),this.name="Distortion";const e=ye(Af.getDefaults(),arguments,["distortion"]);this._shaper=new vs({context:this.context,length:4096}),this._distortion=e.distortion,this.connectEffect(this._shaper),this.distortion=e.distortion,this.oversample=e.oversample}static getDefaults(){return Object.assign(Gr.getDefaults(),{distortion:.4,oversample:"none"})}get distortion(){return this._distortion}set distortion(e){this._distortion=e;const n=e*100,r=Math.PI/180;this._shaper.setMap(s=>Math.abs(s)<.001?0:(3+n)*s*20*r/(Math.PI+n*Math.abs(s)))}get oversample(){return this._shaper.oversample}set oversample(e){this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.dispose(),this}}class Df extends Gr{constructor(e){super(e),this.name="FeedbackEffect",this._feedbackGain=new it({context:this.context,gain:e.feedback,units:"normalRange"}),this.feedback=this._feedbackGain.gain,ct(this,"feedback"),this.effectReturn.chain(this._feedbackGain,this.effectSend)}static getDefaults(){return Object.assign(Gr.getDefaults(),{feedback:.125})}dispose(){return super.dispose(),this._feedbackGain.dispose(),this.feedback.dispose(),this}}class Of extends Df{constructor(){super(ye(Of.getDefaults(),arguments,["delayTime","feedback"])),this.name="FeedbackDelay";const e=ye(Of.getDefaults(),arguments,["delayTime","feedback"]);this._delayNode=new zn({context:this.context,delayTime:e.delayTime,maxDelay:e.maxDelay}),this.delayTime=this._delayNode.delayTime,this.connectEffect(this._delayNode),ct(this,"delayTime")}static getDefaults(){return Object.assign(Df.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._delayNode.dispose(),this.delayTime.dispose(),this}}class _L extends Ue{constructor(e){super(e),this.name="PhaseShiftAllpass",this.input=new it({context:this.context}),this.output=new it({context:this.context}),this.offset90=new it({context:this.context});const n=[.6923878,.9360654322959,.988229522686,.9987488452737],r=[.4021921162426,.856171088242,.9722909545651,.9952884791278];this._bank0=this._createAllPassFilterBank(n),this._bank1=this._createAllPassFilterBank(r),this._oneSampleDelay=this.context.createIIRFilter([0,1],[1,0]),Jn(this.input,...this._bank0,this._oneSampleDelay,this.output),Jn(this.input,...this._bank1,this.offset90)}_createAllPassFilterBank(e){return e.map(r=>{const s=[[r*r,0,-1],[1,0,-(r*r)]];return this.context.createIIRFilter(s[0],s[1])})}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.offset90.dispose(),this._bank0.forEach(e=>e.disconnect()),this._bank1.forEach(e=>e.disconnect()),this._oneSampleDelay.disconnect(),this}}class If extends Gr{constructor(){super(ye(If.getDefaults(),arguments,["frequency"])),this.name="FrequencyShifter";const e=ye(If.getDefaults(),arguments,["frequency"]);this.frequency=new ft({context:this.context,units:"frequency",value:e.frequency,minValue:-this.context.sampleRate/2,maxValue:this.context.sampleRate/2}),this._sine=new Cl({context:this.context,type:"sine"}),this._cosine=new cr({context:this.context,phase:-90,type:"sine"}),this._sineMultiply=new fr({context:this.context}),this._cosineMultiply=new fr({context:this.context}),this._negate=new S0({context:this.context}),this._add=new Ea({context:this.context}),this._phaseShifter=new _L({context:this.context}),this.effectSend.connect(this._phaseShifter),this.frequency.fan(this._sine.frequency,this._cosine.frequency),this._phaseShifter.offset90.connect(this._cosineMultiply),this._cosine.connect(this._cosineMultiply.factor),this._phaseShifter.connect(this._sineMultiply),this._sine.connect(this._sineMultiply.factor),this._sineMultiply.connect(this._negate),this._cosineMultiply.connect(this._add),this._negate.connect(this._add.addend),this._add.connect(this.effectReturn);const n=this.immediate();this._sine.start(n),this._cosine.start(n)}static getDefaults(){return Object.assign(Gr.getDefaults(),{frequency:0})}dispose(){return super.dispose(),this.frequency.dispose(),this._add.dispose(),this._cosine.dispose(),this._cosineMultiply.dispose(),this._negate.dispose(),this._phaseShifter.dispose(),this._sine.dispose(),this._sineMultiply.dispose(),this}}const $b=[1557/44100,1617/44100,1491/44100,1422/44100,1277/44100,1356/44100,1188/44100,1116/44100],Hb=[225,556,441,341];class Rf extends Js{constructor(){super(ye(Rf.getDefaults(),arguments,["roomSize","dampening"])),this.name="Freeverb",this._combFilters=[],this._allpassFiltersL=[],this._allpassFiltersR=[];const e=ye(Rf.getDefaults(),arguments,["roomSize","dampening"]);this.roomSize=new ft({context:this.context,value:e.roomSize,units:"normalRange"}),this._allpassFiltersL=Hb.map(n=>{const r=this.context.createBiquadFilter();return r.type="allpass",r.frequency.value=n,r}),this._allpassFiltersR=Hb.map(n=>{const r=this.context.createBiquadFilter();return r.type="allpass",r.frequency.value=n,r}),this._combFilters=$b.map((n,r)=>{const s=new Fl({context:this.context,dampening:e.dampening,delayTime:n});return r<$b.length/2?this.connectEffectLeft(s,...this._allpassFiltersL):this.connectEffectRight(s,...this._allpassFiltersR),this.roomSize.connect(s.resonance),s}),ct(this,["roomSize"])}static getDefaults(){return Object.assign(Js.getDefaults(),{roomSize:.7,dampening:3e3})}get dampening(){return this._combFilters[0].dampening}set dampening(e){this._combFilters.forEach(n=>n.dampening=e)}dispose(){return super.dispose(),this._allpassFiltersL.forEach(e=>e.disconnect()),this._allpassFiltersR.forEach(e=>e.disconnect()),this._combFilters.forEach(e=>e.dispose()),this.roomSize.dispose(),this}}const Xb=[1687/25e3,1601/25e3,2053/25e3,2251/25e3],bL=[.773,.802,.753,.733],wL=[347,113,37];class Pf extends Js{constructor(){super(ye(Pf.getDefaults(),arguments,["roomSize"])),this.name="JCReverb",this._allpassFilters=[],this._feedbackCombFilters=[];const e=ye(Pf.getDefaults(),arguments,["roomSize"]);this.roomSize=new ft({context:this.context,value:e.roomSize,units:"normalRange"}),this._scaleRoomSize=new Ks({context:this.context,min:-.733,max:.197}),this._allpassFilters=wL.map(n=>{const r=this.context.createBiquadFilter();return r.type="allpass",r.frequency.value=n,r}),this._feedbackCombFilters=Xb.map((n,r)=>{const s=new Ll({context:this.context,delayTime:n});return this._scaleRoomSize.connect(s.resonance),s.resonance.value=bL[r],r<Xb.length/2?this.connectEffectLeft(...this._allpassFilters,s):this.connectEffectRight(...this._allpassFilters,s),s}),this.roomSize.connect(this._scaleRoomSize),ct(this,["roomSize"])}static getDefaults(){return Object.assign(Js.getDefaults(),{roomSize:.5})}dispose(){return super.dispose(),this._allpassFilters.forEach(e=>e.disconnect()),this._feedbackCombFilters.forEach(e=>e.dispose()),this.roomSize.dispose(),this._scaleRoomSize.dispose(),this}}class Yb extends Cy{constructor(e){super(e),this._feedbackL.disconnect(),this._feedbackL.connect(this._feedbackMerge,0,1),this._feedbackR.disconnect(),this._feedbackR.connect(this._feedbackMerge,0,0),ct(this,["feedback"])}}class Lf extends Yb{constructor(){super(ye(Lf.getDefaults(),arguments,["delayTime","feedback"])),this.name="PingPongDelay";const e=ye(Lf.getDefaults(),arguments,["delayTime","feedback"]);this._leftDelay=new zn({context:this.context,maxDelay:e.maxDelay}),this._rightDelay=new zn({context:this.context,maxDelay:e.maxDelay}),this._rightPreDelay=new zn({context:this.context,maxDelay:e.maxDelay}),this.delayTime=new ft({context:this.context,units:"time",value:e.delayTime}),this.connectEffectLeft(this._leftDelay),this.connectEffectRight(this._rightPreDelay,this._rightDelay),this.delayTime.fan(this._leftDelay.delayTime,this._rightDelay.delayTime,this._rightPreDelay.delayTime),this._feedbackL.disconnect(),this._feedbackL.connect(this._rightDelay),ct(this,["delayTime"])}static getDefaults(){return Object.assign(Yb.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._leftDelay.dispose(),this._rightDelay.dispose(),this._rightPreDelay.dispose(),this.delayTime.dispose(),this}}class Nf extends Df{constructor(){super(ye(Nf.getDefaults(),arguments,["pitch"])),this.name="PitchShift";const e=ye(Nf.getDefaults(),arguments,["pitch"]);this._frequency=new ft({context:this.context}),this._delayA=new zn({maxDelay:1,context:this.context}),this._lfoA=new yn({context:this.context,min:0,max:.1,type:"sawtooth"}).connect(this._delayA.delayTime),this._delayB=new zn({maxDelay:1,context:this.context}),this._lfoB=new yn({context:this.context,min:0,max:.1,type:"sawtooth",phase:180}).connect(this._delayB.delayTime),this._crossFade=new ha({context:this.context}),this._crossFadeLFO=new yn({context:this.context,min:0,max:1,type:"triangle",phase:90}).connect(this._crossFade.fade),this._feedbackDelay=new zn({delayTime:e.delayTime,context:this.context}),this.delayTime=this._feedbackDelay.delayTime,ct(this,"delayTime"),this._pitch=e.pitch,this._windowSize=e.windowSize,this._delayA.connect(this._crossFade.a),this._delayB.connect(this._crossFade.b),this._frequency.fan(this._lfoA.frequency,this._lfoB.frequency,this._crossFadeLFO.frequency),this.effectSend.fan(this._delayA,this._delayB),this._crossFade.chain(this._feedbackDelay,this.effectReturn);const n=this.now();this._lfoA.start(n),this._lfoB.start(n),this._crossFadeLFO.start(n),this.windowSize=this._windowSize}static getDefaults(){return Object.assign(Df.getDefaults(),{pitch:0,windowSize:.1,delayTime:0,feedback:0})}get pitch(){return this._pitch}set pitch(e){this._pitch=e;let n=0;e<0?(this._lfoA.min=0,this._lfoA.max=this._windowSize,this._lfoB.min=0,this._lfoB.max=this._windowSize,n=Tl(e-1)+1):(this._lfoA.min=this._windowSize,this._lfoA.max=0,this._lfoB.min=this._windowSize,this._lfoB.max=0,n=Tl(e)-1),this._frequency.value=n*(1.2/this._windowSize)}get windowSize(){return this._windowSize}set windowSize(e){this._windowSize=this.toSeconds(e),this.pitch=this._pitch}dispose(){return super.dispose(),this._frequency.dispose(),this._delayA.dispose(),this._delayB.dispose(),this._lfoA.dispose(),this._lfoB.dispose(),this._crossFade.dispose(),this._crossFadeLFO.dispose(),this._feedbackDelay.dispose(),this}}class Ff extends Js{constructor(){super(ye(Ff.getDefaults(),arguments,["frequency","octaves","baseFrequency"])),this.name="Phaser";const e=ye(Ff.getDefaults(),arguments,["frequency","octaves","baseFrequency"]);this._lfoL=new yn({context:this.context,frequency:e.frequency,min:0,max:1}),this._lfoR=new yn({context:this.context,frequency:e.frequency,min:0,max:1,phase:180}),this._baseFrequency=this.toFrequency(e.baseFrequency),this._octaves=e.octaves,this.Q=new ft({context:this.context,value:e.Q,units:"positive"}),this._filtersL=this._makeFilters(e.stages,this._lfoL),this._filtersR=this._makeFilters(e.stages,this._lfoR),this.frequency=this._lfoL.frequency,this.frequency.value=e.frequency,this.connectEffectLeft(...this._filtersL),this.connectEffectRight(...this._filtersR),this._lfoL.frequency.connect(this._lfoR.frequency),this.baseFrequency=e.baseFrequency,this.octaves=e.octaves,this._lfoL.start(),this._lfoR.start(),ct(this,["frequency","Q"])}static getDefaults(){return Object.assign(Js.getDefaults(),{frequency:.5,octaves:3,stages:10,Q:10,baseFrequency:350})}_makeFilters(e,n){const r=[];for(let s=0;s<e;s++){const i=this.context.createBiquadFilter();i.type="allpass",this.Q.connect(i.Q),n.connect(i.frequency),r.push(i)}return r}get octaves(){return this._octaves}set octaves(e){this._octaves=e;const n=this._baseFrequency*Math.pow(2,e);this._lfoL.max=n,this._lfoR.max=n}get baseFrequency(){return this._baseFrequency}set baseFrequency(e){this._baseFrequency=this.toFrequency(e),this._lfoL.min=this._baseFrequency,this._lfoR.min=this._baseFrequency,this.octaves=this._octaves}dispose(){return super.dispose(),this.Q.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._filtersL.forEach(e=>e.disconnect()),this._filtersR.forEach(e=>e.disconnect()),this.frequency.dispose(),this}}class Uf extends Gr{constructor(){super(ye(Uf.getDefaults(),arguments,["decay"])),this.name="Reverb",this._convolver=this.context.createConvolver(),this.ready=Promise.resolve();const e=ye(Uf.getDefaults(),arguments,["decay"]);this._decay=e.decay,this._preDelay=e.preDelay,this.generate(),this.connectEffect(this._convolver)}static getDefaults(){return Object.assign(Gr.getDefaults(),{decay:1.5,preDelay:.01})}get decay(){return this._decay}set decay(e){e=this.toSeconds(e),tn(e,.001),this._decay=e,this.generate()}get preDelay(){return this._preDelay}set preDelay(e){e=this.toSeconds(e),tn(e,0),this._preDelay=e,this.generate()}generate(){return tr(this,void 0,void 0,function*(){const e=this.ready,n=new uu(2,this._decay+this._preDelay,this.context.sampleRate),r=new Ei({context:n}),s=new Ei({context:n}),i=new ki({context:n});r.connect(i,0,0),s.connect(i,0,1);const a=new it({context:n}).toDestination();i.connect(a),r.start(0),s.start(0),a.gain.setValueAtTime(0,0),a.gain.setValueAtTime(1,this._preDelay),a.gain.exponentialApproachValueAtTime(0,this._preDelay,this.decay);const o=n.render();return this.ready=o.then(Mt),yield e,this._convolver.buffer=(yield o).get(),this})}dispose(){return super.dispose(),this._convolver.disconnect(),this}}class ch extends Ue{constructor(){super(ye(ch.getDefaults(),arguments)),this.name="MidSideSplit",this._split=this.input=new po({channels:2,context:this.context}),this._midAdd=new Ea({context:this.context}),this.mid=new fr({context:this.context,value:Math.SQRT1_2}),this._sideSubtract=new ka({context:this.context}),this.side=new fr({context:this.context,value:Math.SQRT1_2}),this._split.connect(this._midAdd,0),this._split.connect(this._midAdd.addend,1),this._split.connect(this._sideSubtract,0),this._split.connect(this._sideSubtract.subtrahend,1),this._midAdd.connect(this.mid),this._sideSubtract.connect(this.side)}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._midAdd.dispose(),this._sideSubtract.dispose(),this._split.dispose(),this}}class hh extends Ue{constructor(){super(ye(hh.getDefaults(),arguments)),this.name="MidSideMerge",this.mid=new it({context:this.context}),this.side=new it({context:this.context}),this._left=new Ea({context:this.context}),this._leftMult=new fr({context:this.context,value:Math.SQRT1_2}),this._right=new ka({context:this.context}),this._rightMult=new fr({context:this.context,value:Math.SQRT1_2}),this._merge=this.output=new ki({context:this.context}),this.mid.fan(this._left),this.side.connect(this._left.addend),this.mid.connect(this._right),this.side.connect(this._right.subtrahend),this._left.connect(this._leftMult),this._right.connect(this._rightMult),this._leftMult.connect(this._merge,0,0),this._rightMult.connect(this._merge,0,1)}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._leftMult.dispose(),this._rightMult.dispose(),this._left.dispose(),this._right.dispose(),this}}class Qb extends Gr{constructor(e){super(e),this.name="MidSideEffect",this._midSideMerge=new hh({context:this.context}),this._midSideSplit=new ch({context:this.context}),this._midSend=this._midSideSplit.mid,this._sideSend=this._midSideSplit.side,this._midReturn=this._midSideMerge.mid,this._sideReturn=this._midSideMerge.side,this.effectSend.connect(this._midSideSplit),this._midSideMerge.connect(this.effectReturn)}connectEffectMid(...e){this._midSend.chain(...e,this._midReturn)}connectEffectSide(...e){this._sideSend.chain(...e,this._sideReturn)}dispose(){return super.dispose(),this._midSideSplit.dispose(),this._midSideMerge.dispose(),this._midSend.dispose(),this._sideSend.dispose(),this._midReturn.dispose(),this._sideReturn.dispose(),this}}class Vf extends Qb{constructor(){super(ye(Vf.getDefaults(),arguments,["width"])),this.name="StereoWidener";const e=ye(Vf.getDefaults(),arguments,["width"]);this.width=new ft({context:this.context,value:e.width,units:"normalRange"}),ct(this,["width"]),this._twoTimesWidthMid=new fr({context:this.context,value:2}),this._twoTimesWidthSide=new fr({context:this.context,value:2}),this._midMult=new fr({context:this.context}),this._twoTimesWidthMid.connect(this._midMult.factor),this.connectEffectMid(this._midMult),this._oneMinusWidth=new ka({context:this.context}),this._oneMinusWidth.connect(this._twoTimesWidthMid),Wn(this.context.getConstant(1),this._oneMinusWidth),this.width.connect(this._oneMinusWidth.subtrahend),this._sideMult=new fr({context:this.context}),this.width.connect(this._twoTimesWidthSide),this._twoTimesWidthSide.connect(this._sideMult.factor),this.connectEffectSide(this._sideMult)}static getDefaults(){return Object.assign(Qb.getDefaults(),{width:.5})}dispose(){return super.dispose(),this.width.dispose(),this._midMult.dispose(),this._sideMult.dispose(),this._twoTimesWidthMid.dispose(),this._twoTimesWidthSide.dispose(),this._oneMinusWidth.dispose(),this}}class Bf extends Js{constructor(){super(ye(Bf.getDefaults(),arguments,["frequency","depth"])),this.name="Tremolo";const e=ye(Bf.getDefaults(),arguments,["frequency","depth"]);this._lfoL=new yn({context:this.context,type:e.type,min:1,max:0}),this._lfoR=new yn({context:this.context,type:e.type,min:1,max:0}),this._amplitudeL=new it({context:this.context}),this._amplitudeR=new it({context:this.context}),this.frequency=new ft({context:this.context,value:e.frequency,units:"frequency"}),this.depth=new ft({context:this.context,value:e.depth,units:"normalRange"}),ct(this,["frequency","depth"]),this.connectEffectLeft(this._amplitudeL),this.connectEffectRight(this._amplitudeR),this._lfoL.connect(this._amplitudeL.gain),this._lfoR.connect(this._amplitudeR.gain),this.frequency.fan(this._lfoL.frequency,this._lfoR.frequency),this.depth.fan(this._lfoR.amplitude,this._lfoL.amplitude),this.spread=e.spread}static getDefaults(){return Object.assign(Js.getDefaults(),{frequency:10,type:"sine",depth:.5,spread:180})}start(e){return this._lfoL.start(e),this._lfoR.start(e),this}stop(e){return this._lfoL.stop(e),this._lfoR.stop(e),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this.context.transport.syncSignal(this.frequency),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this.context.transport.unsyncSignal(this.frequency),this}get type(){return this._lfoL.type}set type(e){this._lfoL.type=e,this._lfoR.type=e}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(e){this._lfoL.phase=90-e/2,this._lfoR.phase=e/2+90}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._amplitudeL.dispose(),this._amplitudeR.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class Gf extends Gr{constructor(){super(ye(Gf.getDefaults(),arguments,["frequency","depth"])),this.name="Vibrato";const e=ye(Gf.getDefaults(),arguments,["frequency","depth"]);this._delayNode=new zn({context:this.context,delayTime:0,maxDelay:e.maxDelay}),this._lfo=new yn({context:this.context,type:e.type,min:0,max:e.maxDelay,frequency:e.frequency,phase:-90}).start().connect(this._delayNode.delayTime),this.frequency=this._lfo.frequency,this.depth=this._lfo.amplitude,this.depth.value=e.depth,ct(this,["frequency","depth"]),this.effectSend.chain(this._delayNode,this.effectReturn)}static getDefaults(){return Object.assign(Gr.getDefaults(),{maxDelay:.005,frequency:5,depth:.1,type:"sine"})}get type(){return this._lfo.type}set type(e){this._lfo.type=e}dispose(){return super.dispose(),this._delayNode.dispose(),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class zl extends Ue{constructor(){super(ye(zl.getDefaults(),arguments,["type","size"])),this.name="Analyser",this._analysers=[],this._buffers=[];const e=ye(zl.getDefaults(),arguments,["type","size"]);this.input=this.output=this._gain=new it({context:this.context}),this._split=new po({context:this.context,channels:e.channels}),this.input.connect(this._split),tn(e.channels,1);for(let n=0;n<e.channels;n++)this._analysers[n]=this.context.createAnalyser(),this._split.connect(this._analysers[n],n,0);this.size=e.size,this.type=e.type}static getDefaults(){return Object.assign(Ue.getDefaults(),{size:1024,smoothing:.8,type:"fft",channels:1})}getValue(){return this._analysers.forEach((e,n)=>{const r=this._buffers[n];this._type==="fft"?e.getFloatFrequencyData(r):this._type==="waveform"&&e.getFloatTimeDomainData(r)}),this.channels===1?this._buffers[0]:this._buffers}get size(){return this._analysers[0].frequencyBinCount}set size(e){this._analysers.forEach((n,r)=>{n.fftSize=e*2,this._buffers[r]=new Float32Array(e)})}get channels(){return this._analysers.length}get type(){return this._type}set type(e){at(e==="waveform"||e==="fft",`Analyser: invalid type: ${e}`),this._type=e}get smoothing(){return this._analysers[0].smoothingTimeConstant}set smoothing(e){this._analysers.forEach(n=>n.smoothingTimeConstant=e)}dispose(){return super.dispose(),this._analysers.forEach(e=>e.disconnect()),this._split.dispose(),this._gain.dispose(),this}}class mo extends Ue{constructor(){super(ye(mo.getDefaults(),arguments)),this.name="MeterBase",this.input=this.output=this._analyser=new zl({context:this.context,size:256,type:"waveform"})}dispose(){return super.dispose(),this._analyser.dispose(),this}}class zf extends mo{constructor(){super(ye(zf.getDefaults(),arguments,["smoothing"])),this.name="Meter",this._rms=0;const e=ye(zf.getDefaults(),arguments,["smoothing"]);this.input=this.output=this._analyser=new zl({context:this.context,size:256,type:"waveform",channels:e.channels}),this.smoothing=e.smoothing,this.normalRange=e.normalRange}static getDefaults(){return Object.assign(mo.getDefaults(),{smoothing:.8,normalRange:!1,channels:1})}getLevel(){return oh("'getLevel' has been changed to 'getValue'"),this.getValue()}getValue(){const e=this._analyser.getValue(),r=(this.channels===1?[e]:e).map(s=>{const i=s.reduce((o,h)=>o+h*h,0),a=Math.sqrt(i/s.length);return this._rms=Math.max(a,this._rms*this.smoothing),this.normalRange?this._rms:lh(this._rms)});return this.channels===1?r[0]:r}get channels(){return this._analyser.channels}dispose(){return super.dispose(),this._analyser.dispose(),this}}class qf extends mo{constructor(){super(ye(qf.getDefaults(),arguments,["size"])),this.name="FFT";const e=ye(qf.getDefaults(),arguments,["size"]);this.normalRange=e.normalRange,this._analyser.type="fft",this.size=e.size}static getDefaults(){return Object.assign(Ue.getDefaults(),{normalRange:!1,size:1024,smoothing:.8})}getValue(){return this._analyser.getValue().map(n=>this.normalRange?Sl(n):n)}get size(){return this._analyser.size}set size(e){this._analyser.size=e}get smoothing(){return this._analyser.smoothing}set smoothing(e){this._analyser.smoothing=e}getFrequencyOfIndex(e){return at(0<=e&&e<this.size,`index must be greater than or equal to 0 and less than ${this.size}`),e*this.context.sampleRate/(this.size*2)}}class C0 extends mo{constructor(){super(ye(C0.getDefaults(),arguments)),this.name="DCMeter",this._analyser.type="waveform",this._analyser.size=256}getValue(){return this._analyser.getValue()[0]}}class Wf extends mo{constructor(){super(ye(Wf.getDefaults(),arguments,["size"])),this.name="Waveform";const e=ye(Wf.getDefaults(),arguments,["size"]);this._analyser.type="waveform",this.size=e.size}static getDefaults(){return Object.assign(mo.getDefaults(),{size:1024})}getValue(){return this._analyser.getValue()}get size(){return this._analyser.size}set size(e){this._analyser.size=e}}class Tr extends Ue{constructor(){super(ye(Tr.getDefaults(),arguments,["solo"])),this.name="Solo";const e=ye(Tr.getDefaults(),arguments,["solo"]);this.input=this.output=new it({context:this.context}),Tr._allSolos.has(this.context)||Tr._allSolos.set(this.context,new Set),Tr._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(Ue.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),Tr._allSolos.get(this.context).forEach(n=>n._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){Tr._soloed.has(this.context)||Tr._soloed.set(this.context,new Set),Tr._soloed.get(this.context).add(this)}_removeSolo(){Tr._soloed.has(this.context)&&Tr._soloed.get(this.context).delete(this)}_isSoloed(){return Tr._soloed.has(this.context)&&Tr._soloed.get(this.context).has(this)}_noSolos(){return!Tr._soloed.has(this.context)||Tr._soloed.has(this.context)&&Tr._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),Tr._allSolos.get(this.context).delete(this),this._removeSolo(),this}}Tr._allSolos=new Map;Tr._soloed=new Map;class Rc extends Ue{constructor(){super(ye(Rc.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";const e=ye(Rc.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new Bl({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Ys({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,ct(this,["pan","volume"])}static getDefaults(){return Object.assign(Ue.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class Hi extends Ue{constructor(){super(ye(Hi.getDefaults(),arguments,["volume","pan"])),this.name="Channel";const e=ye(Hi.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new Tr({solo:e.solo,context:this.context}),this._panVol=this.output=new Rc({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),ct(this,["pan","volume"])}static getDefaults(){return Object.assign(Ue.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return Hi.buses.has(e)||Hi.buses.set(e,new it({context:this.context})),Hi.buses.get(e)}send(e,n=0){const r=this._getBus(e),s=new it({context:this.context,units:"decibels",gain:n});return this.connect(s),s.connect(r),s}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}Hi.buses=new Map;class j0 extends Ue{constructor(){super(ye(j0.getDefaults(),arguments)),this.name="Mono",this.input=new it({context:this.context}),this._merge=this.output=new ki({channels:2,context:this.context}),this.input.connect(this._merge,0,0),this.input.connect(this._merge,0,1)}dispose(){return super.dispose(),this._merge.dispose(),this.input.dispose(),this}}class ql extends Ue{constructor(){super(ye(ql.getDefaults(),arguments,["lowFrequency","highFrequency"])),this.name="MultibandSplit",this.input=new it({context:this.context}),this.output=void 0,this.low=new Nn({context:this.context,frequency:0,type:"lowpass"}),this._lowMidFilter=new Nn({context:this.context,frequency:0,type:"highpass"}),this.mid=new Nn({context:this.context,frequency:0,type:"lowpass"}),this.high=new Nn({context:this.context,frequency:0,type:"highpass"}),this._internalChannels=[this.low,this.mid,this.high];const e=ye(ql.getDefaults(),arguments,["lowFrequency","highFrequency"]);this.lowFrequency=new ft({context:this.context,units:"frequency",value:e.lowFrequency}),this.highFrequency=new ft({context:this.context,units:"frequency",value:e.highFrequency}),this.Q=new ft({context:this.context,units:"positive",value:e.Q}),this.input.fan(this.low,this.high),this.input.chain(this._lowMidFilter,this.mid),this.lowFrequency.fan(this.low.frequency,this._lowMidFilter.frequency),this.highFrequency.fan(this.mid.frequency,this.high.frequency),this.Q.connect(this.low.Q),this.Q.connect(this._lowMidFilter.Q),this.Q.connect(this.mid.Q),this.Q.connect(this.high.Q),ct(this,["high","mid","low","highFrequency","lowFrequency"])}static getDefaults(){return Object.assign(Ue.getDefaults(),{Q:1,highFrequency:2500,lowFrequency:400})}dispose(){return super.dispose(),ah(this,["high","mid","low","highFrequency","lowFrequency"]),this.low.dispose(),this._lowMidFilter.dispose(),this.mid.dispose(),this.high.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this.Q.dispose(),this}}class xL extends Ue{constructor(){super(...arguments),this.name="Listener",this.positionX=new _t({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new _t({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new _t({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new _t({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new _t({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new _t({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new _t({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new _t({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new _t({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(Ue.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}Bp(t=>{t.listener=new xL({context:t})});Gp(t=>{t.listener.dispose()});class $f extends Ue{constructor(){super(ye($f.getDefaults(),arguments,["positionX","positionY","positionZ"])),this.name="Panner3D";const e=ye($f.getDefaults(),arguments,["positionX","positionY","positionZ"]);this._panner=this.input=this.output=this.context.createPanner(),this.panningModel=e.panningModel,this.maxDistance=e.maxDistance,this.distanceModel=e.distanceModel,this.coneOuterGain=e.coneOuterGain,this.coneOuterAngle=e.coneOuterAngle,this.coneInnerAngle=e.coneInnerAngle,this.refDistance=e.refDistance,this.rolloffFactor=e.rolloffFactor,this.positionX=new _t({context:this.context,param:this._panner.positionX,value:e.positionX}),this.positionY=new _t({context:this.context,param:this._panner.positionY,value:e.positionY}),this.positionZ=new _t({context:this.context,param:this._panner.positionZ,value:e.positionZ}),this.orientationX=new _t({context:this.context,param:this._panner.orientationX,value:e.orientationX}),this.orientationY=new _t({context:this.context,param:this._panner.orientationY,value:e.orientationY}),this.orientationZ=new _t({context:this.context,param:this._panner.orientationZ,value:e.orientationZ})}static getDefaults(){return Object.assign(Ue.getDefaults(),{coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:0,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1})}setPosition(e,n,r){return this.positionX.value=e,this.positionY.value=n,this.positionZ.value=r,this}setOrientation(e,n,r){return this.orientationX.value=e,this.orientationY.value=n,this.orientationZ.value=r,this}get panningModel(){return this._panner.panningModel}set panningModel(e){this._panner.panningModel=e}get refDistance(){return this._panner.refDistance}set refDistance(e){this._panner.refDistance=e}get rolloffFactor(){return this._panner.rolloffFactor}set rolloffFactor(e){this._panner.rolloffFactor=e}get distanceModel(){return this._panner.distanceModel}set distanceModel(e){this._panner.distanceModel=e}get coneInnerAngle(){return this._panner.coneInnerAngle}set coneInnerAngle(e){this._panner.coneInnerAngle=e}get coneOuterAngle(){return this._panner.coneOuterAngle}set coneOuterAngle(e){this._panner.coneOuterAngle=e}get coneOuterGain(){return this._panner.coneOuterGain}set coneOuterGain(e){this._panner.coneOuterGain=e}get maxDistance(){return this._panner.maxDistance}set maxDistance(e){this._panner.maxDistance=e}dispose(){return super.dispose(),this._panner.disconnect(),this.orientationX.dispose(),this.orientationY.dispose(),this.orientationZ.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this}}class nc extends Ue{constructor(){super(ye(nc.getDefaults(),arguments)),this.name="Recorder";const e=ye(nc.getDefaults(),arguments);this.input=new it({context:this.context}),at(nc.supported,"Media Recorder API is not available"),this._stream=this.context.createMediaStreamDestination(),this.input.connect(this._stream),this._recorder=new MediaRecorder(this._stream.stream,{mimeType:e.mimeType})}static getDefaults(){return Ue.getDefaults()}get mimeType(){return this._recorder.mimeType}static get supported(){return yi!==null&&Reflect.has(yi,"MediaRecorder")}get state(){return this._recorder.state==="inactive"?"stopped":this._recorder.state==="paused"?"paused":"started"}start(){return tr(this,void 0,void 0,function*(){at(this.state!=="started","Recorder is already started");const e=new Promise(n=>{const r=()=>{this._recorder.removeEventListener("start",r,!1),n()};this._recorder.addEventListener("start",r,!1)});return this._recorder.start(),yield e})}stop(){return tr(this,void 0,void 0,function*(){at(this.state!=="stopped","Recorder is not started");const e=new Promise(n=>{const r=s=>{this._recorder.removeEventListener("dataavailable",r,!1),n(s.data)};this._recorder.addEventListener("dataavailable",r,!1)});return this._recorder.stop(),yield e})}pause(){return at(this.state==="started","Recorder must be started"),this._recorder.pause(),this}dispose(){return super.dispose(),this.input.dispose(),this._stream.disconnect(),this}}class $s extends Ue{constructor(){super(ye($s.getDefaults(),arguments,["threshold","ratio"])),this.name="Compressor",this._compressor=this.context.createDynamicsCompressor(),this.input=this._compressor,this.output=this._compressor;const e=ye($s.getDefaults(),arguments,["threshold","ratio"]);this.threshold=new _t({minValue:this._compressor.threshold.minValue,maxValue:this._compressor.threshold.maxValue,context:this.context,convert:!1,param:this._compressor.threshold,units:"decibels",value:e.threshold}),this.attack=new _t({minValue:this._compressor.attack.minValue,maxValue:this._compressor.attack.maxValue,context:this.context,param:this._compressor.attack,units:"time",value:e.attack}),this.release=new _t({minValue:this._compressor.release.minValue,maxValue:this._compressor.release.maxValue,context:this.context,param:this._compressor.release,units:"time",value:e.release}),this.knee=new _t({minValue:this._compressor.knee.minValue,maxValue:this._compressor.knee.maxValue,context:this.context,convert:!1,param:this._compressor.knee,units:"decibels",value:e.knee}),this.ratio=new _t({minValue:this._compressor.ratio.minValue,maxValue:this._compressor.ratio.maxValue,context:this.context,convert:!1,param:this._compressor.ratio,units:"positive",value:e.ratio}),ct(this,["knee","release","attack","ratio","threshold"])}static getDefaults(){return Object.assign(Ue.getDefaults(),{attack:.003,knee:30,ratio:12,release:.25,threshold:-24})}get reduction(){return this._compressor.reduction}dispose(){return super.dispose(),this._compressor.disconnect(),this.attack.dispose(),this.release.dispose(),this.threshold.dispose(),this.ratio.dispose(),this.knee.dispose(),this}}class Hf extends Ue{constructor(){super(Object.assign(ye(Hf.getDefaults(),arguments,["threshold","smoothing"]))),this.name="Gate";const e=ye(Hf.getDefaults(),arguments,["threshold","smoothing"]);this._follower=new Gl({context:this.context,smoothing:e.smoothing}),this._gt=new Oc({context:this.context,value:Sl(e.threshold)}),this.input=new it({context:this.context}),this._gate=this.output=new it({context:this.context}),this.input.connect(this._gate),this.input.chain(this._follower,this._gt,this._gate.gain)}static getDefaults(){return Object.assign(Ue.getDefaults(),{smoothing:.1,threshold:-40})}get threshold(){return lh(this._gt.value)}set threshold(e){this._gt.value=Sl(e)}get smoothing(){return this._follower.smoothing}set smoothing(e){this._follower.smoothing=e}dispose(){return super.dispose(),this.input.dispose(),this._follower.dispose(),this._gt.dispose(),this._gate.dispose(),this}}class Xf extends Ue{constructor(){super(Object.assign(ye(Xf.getDefaults(),arguments,["threshold"]))),this.name="Limiter";const e=ye(Xf.getDefaults(),arguments,["threshold"]);this._compressor=this.input=this.output=new $s({context:this.context,ratio:20,attack:.003,release:.01,threshold:e.threshold}),this.threshold=this._compressor.threshold,ct(this,"threshold")}static getDefaults(){return Object.assign(Ue.getDefaults(),{threshold:-12})}get reduction(){return this._compressor.reduction}dispose(){return super.dispose(),this._compressor.dispose(),this.threshold.dispose(),this}}class Yf extends Ue{constructor(){super(Object.assign(ye(Yf.getDefaults(),arguments))),this.name="MidSideCompressor";const e=ye(Yf.getDefaults(),arguments);this._midSideSplit=this.input=new ch({context:this.context}),this._midSideMerge=this.output=new hh({context:this.context}),this.mid=new $s(Object.assign(e.mid,{context:this.context})),this.side=new $s(Object.assign(e.side,{context:this.context})),this._midSideSplit.mid.chain(this.mid,this._midSideMerge.mid),this._midSideSplit.side.chain(this.side,this._midSideMerge.side),ct(this,["mid","side"])}static getDefaults(){return Object.assign(Ue.getDefaults(),{mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},side:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10}})}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._midSideSplit.dispose(),this._midSideMerge.dispose(),this}}class Qf extends Ue{constructor(){super(Object.assign(ye(Qf.getDefaults(),arguments))),this.name="MultibandCompressor";const e=ye(Qf.getDefaults(),arguments);this._splitter=this.input=new ql({context:this.context,lowFrequency:e.lowFrequency,highFrequency:e.highFrequency}),this.lowFrequency=this._splitter.lowFrequency,this.highFrequency=this._splitter.highFrequency,this.output=new it({context:this.context}),this.low=new $s(Object.assign(e.low,{context:this.context})),this.mid=new $s(Object.assign(e.mid,{context:this.context})),this.high=new $s(Object.assign(e.high,{context:this.context})),this._splitter.low.chain(this.low,this.output),this._splitter.mid.chain(this.mid,this.output),this._splitter.high.chain(this.high,this.output),ct(this,["high","mid","low","highFrequency","lowFrequency"])}static getDefaults(){return Object.assign(Ue.getDefaults(),{lowFrequency:250,highFrequency:2e3,low:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10},mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},high:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16}})}dispose(){return super.dispose(),this._splitter.dispose(),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this.output.dispose(),this}}class Kf extends Ue{constructor(){super(ye(Kf.getDefaults(),arguments,["low","mid","high"])),this.name="EQ3",this.output=new it({context:this.context}),this._internalChannels=[];const e=ye(Kf.getDefaults(),arguments,["low","mid","high"]);this.input=this._multibandSplit=new ql({context:this.context,highFrequency:e.highFrequency,lowFrequency:e.lowFrequency}),this._lowGain=new it({context:this.context,gain:e.low,units:"decibels"}),this._midGain=new it({context:this.context,gain:e.mid,units:"decibels"}),this._highGain=new it({context:this.context,gain:e.high,units:"decibels"}),this.low=this._lowGain.gain,this.mid=this._midGain.gain,this.high=this._highGain.gain,this.Q=this._multibandSplit.Q,this.lowFrequency=this._multibandSplit.lowFrequency,this.highFrequency=this._multibandSplit.highFrequency,this._multibandSplit.low.chain(this._lowGain,this.output),this._multibandSplit.mid.chain(this._midGain,this.output),this._multibandSplit.high.chain(this._highGain,this.output),ct(this,["low","mid","high","lowFrequency","highFrequency"]),this._internalChannels=[this._multibandSplit]}static getDefaults(){return Object.assign(Ue.getDefaults(),{high:0,highFrequency:2500,low:0,lowFrequency:400,mid:0})}dispose(){return super.dispose(),ah(this,["low","mid","high","lowFrequency","highFrequency"]),this._multibandSplit.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this._lowGain.dispose(),this._midGain.dispose(),this._highGain.dispose(),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this.Q.dispose(),this}}class Zf extends Ue{constructor(){super(ye(Zf.getDefaults(),arguments,["url","onload"])),this.name="Convolver",this._convolver=this.context.createConvolver();const e=ye(Zf.getDefaults(),arguments,["url","onload"]);this._buffer=new Lt(e.url,n=>{this.buffer=n,e.onload()}),this.input=new it({context:this.context}),this.output=new it({context:this.context}),this._buffer.loaded&&(this.buffer=this._buffer),this.normalize=e.normalize,this.input.chain(this._convolver,this.output)}static getDefaults(){return Object.assign(Ue.getDefaults(),{normalize:!0,onload:Mt})}load(e){return tr(this,void 0,void 0,function*(){this.buffer=yield this._buffer.load(e)})}get buffer(){return this._buffer.length?this._buffer:null}set buffer(e){e&&this._buffer.set(e),this._convolver.buffer&&(this.input.disconnect(),this._convolver.disconnect(),this._convolver=this.context.createConvolver(),this.input.chain(this._convolver,this.output));const n=this._buffer.get();this._convolver.buffer=n||null}get normalize(){return this._convolver.normalize}set normalize(e){this._convolver.normalize=e}dispose(){return super.dispose(),this._buffer.dispose(),this._convolver.disconnect(),this}}function SL(){return dr().now()}function TL(){return dr().immediate()}const EL=dr().transport;function kL(){return dr().transport}const CL=dr().destination,jL=dr().destination;function ML(){return dr().destination}const AL=dr().listener;function DL(){return dr().listener}const OL=dr().draw;function IL(){return dr().draw}const RL=dr();function PL(){return Lt.loaded()}const LL=Lt,NL=hu,FL=Ti,UL=Object.freeze(Object.defineProperty({__proto__:null,now:SL,immediate:TL,Transport:EL,getTransport:kL,Destination:CL,Master:jL,getDestination:ML,Listener:AL,getListener:DL,Draw:OL,getDraw:IL,context:RL,loaded:PL,Buffer:LL,Buffers:NL,BufferSource:FL,getContext:dr,setContext:af,start:qP,supported:AP,dbToGain:Sl,gainToDb:lh,intervalToFrequencyRatio:Tl,ftom:Qi,mtof:_0,optionsFromArguments:ye,defaultArg:ds,Clock:aa,Context:lu,BaseContext:v0,Delay:zn,Gain:it,Offline:ZP,OfflineContext:uu,Param:_t,ToneAudioBuffer:Lt,ToneAudioBuffers:hu,ToneAudioNode:Ue,connectSeries:Jn,connect:Wn,disconnect:w0,FrequencyClass:Cn,Frequency:QP,MidiClass:kl,Midi:JP,TimeClass:Xn,Time:HP,TicksClass:er,Ticks:eL,TransportTimeClass:Ir,TransportTime:KP,Emitter:au,IntervalTimeline:_T,StateTimeline:cu,Timeline:Ps,isUndef:Gn,isDefined:St,isFunction:hT,isNumber:Zn,isObject:gi,isBoolean:g0,isArray:on,isString:ys,isNote:qu,Unit:nL,debug:OP,Noise:Ei,UserMedia:el,Oscillator:cr,AMOscillator:jl,FMOscillator:la,PulseOscillator:ua,FatOscillator:Ml,PWMOscillator:Al,OmniOscillator:Qs,ToneOscillatorNode:Cl,LFO:yn,ToneBufferSource:Ti,Player:ca,Players:df,GrainPlayer:ff,Add:Ea,Abs:wT,AudioToGain:qp,GainToAudio:xT,GreaterThan:Oc,GreaterThanZero:$p,Multiply:fr,Negate:S0,Pow:Dl,Signal:ft,connectSignal:uh,Scale:Ks,ScaleExp:Ic,Subtract:ka,SyncedSignal:iL,WaveShaper:vs,Zero:Wp,AMSynth:T0,DuoSynth:pf,FMSynth:mf,MetalSynth:gf,MembraneSynth:Pl,MonoSynth:Ki,NoiseSynth:yf,PluckSynth:vf,PolySynth:_f,Sampler:Ul,Synth:Zs,Loop:Vl,Part:cl,Pattern:bf,Sequence:wf,ToneEvent:Cs,AutoFilter:Sf,AutoPanner:Tf,AutoWah:Ef,BitCrusher:kf,Chebyshev:jf,Chorus:Mf,Distortion:Af,FeedbackDelay:Of,FrequencyShifter:If,Freeverb:Rf,JCReverb:Pf,PingPongDelay:Lf,PitchShift:Nf,Phaser:Ff,Reverb:Uf,StereoWidener:Vf,Tremolo:Bf,Vibrato:Gf,Analyser:zl,Meter:zf,FFT:qf,DCMeter:C0,Waveform:Wf,Follower:Gl,Channel:Hi,CrossFade:ha,Merge:ki,MidSideMerge:hh,MidSideSplit:ch,Mono:j0,MultibandSplit:ql,Panner:Bl,Panner3D:$f,PanVol:Rc,Recorder:nc,Solo:Tr,Split:po,Volume:Ys,Compressor:$s,Gate:Hf,Limiter:Xf,MidSideCompressor:Yf,MultibandCompressor:Qf,AmplitudeEnvelope:du,Envelope:Qr,FrequencyEnvelope:Rl,EQ3:Kf,Filter:Nn,OnePoleFilter:Nl,FeedbackCombFilter:Ll,LowpassCombFilter:Fl,Convolver:Zf,BiquadFilter:Il,version:Yv},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kT=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},VL=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],o=t[n++],h=((s&7)<<18|(i&63)<<12|(a&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},BL={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,o=a?t[s+1]:0,h=s+2<t.length,d=h?t[s+2]:0,g=i>>2,m=(i&3)<<4|o>>4;let c=(o&15)<<2|d>>6,l=d&63;h||(l=64,a||(c=64)),r.push(n[g],n[m],n[c],n[l])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(kT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):VL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],o=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||o==null||d==null||m==null)throw Error();const c=i<<2|o>>4;if(r.push(c),d!==64){const l=o<<4&240|d>>2;if(r.push(l),m!==64){const u=d<<6&192|m;r.push(u)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},GL=function(t){const e=kT(t);return BL.encodeByteArray(e,!0)},CT=function(t){return GL(t).replace(/\./g,"")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hp(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Hp())}function jT(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function WL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $L(){return Hp().indexOf("Electron/")>=0}function HL(){const t=Hp();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function XL(){return Hp().indexOf("MSAppHost/")>=0}function MT(){return typeof indexedDB=="object"}function AT(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function YL(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QL="FirebaseError";class ko extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=QL,Object.setPrototypeOf(this,ko.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xp.prototype.create)}}class Xp{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?KL(i,r):"Error",o=`${this.serviceName}: ${a} (${s}).`;return new ko(s,o,r)}}function KL(t,e){return t.replace(ZL,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const ZL=/\{\$([^}]+)}/g;function Jf(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(Kb(i)&&Kb(a)){if(!Jf(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Kb(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JL=1e3,eN=2,tN=4*60*60*1e3,rN=.5;function Zb(t,e=JL,n=eN){const r=e*Math.pow(n,t),s=Math.round(rN*r*(Math.random()-.5)*2);return Math.min(tN,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function go(t){return t&&t._delegate?t._delegate:t}class Ci{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new zL;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(iN(e))try{this.getOrInitializeService({instanceIdentifier:Bo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Bo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Bo){return this.instances.has(e)}getOptions(e=Bo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);r===o&&a.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(!!r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:sN(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Bo){return this.component?this.component.multipleInstances?e:Bo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function sN(t){return t===Bo?void 0:t}function iN(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new nN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ht;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ht||(Ht={}));const aN={debug:Ht.DEBUG,verbose:Ht.VERBOSE,info:Ht.INFO,warn:Ht.WARN,error:Ht.ERROR,silent:Ht.SILENT},lN=Ht.INFO,uN={[Ht.DEBUG]:"log",[Ht.VERBOSE]:"log",[Ht.INFO]:"info",[Ht.WARN]:"warn",[Ht.ERROR]:"error"},cN=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=uN[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class M0{constructor(e){this.name=e,this._logLevel=lN,this._logHandler=cN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ht))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?aN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ht.DEBUG,...e),this._logHandler(this,Ht.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ht.VERBOSE,...e),this._logHandler(this,Ht.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ht.INFO,...e),this._logHandler(this,Ht.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ht.WARN,...e),this._logHandler(this,Ht.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ht.ERROR,...e),this._logHandler(this,Ht.ERROR,...e)}}const hN=(t,e)=>e.some(n=>t instanceof n);let Jb,ew;function dN(){return Jb||(Jb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function fN(){return ew||(ew=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const DT=new WeakMap,jy=new WeakMap,OT=new WeakMap,og=new WeakMap,A0=new WeakMap;function pN(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(lo(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&DT.set(n,t)}).catch(()=>{}),A0.set(e,t),e}function mN(t){if(jy.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});jy.set(t,e)}let My={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return jy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||OT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return lo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function gN(t){My=t(My)}function yN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ag(this),e,...n);return OT.set(r,e.sort?e.sort():[e]),lo(r)}:fN().includes(t)?function(...e){return t.apply(ag(this),e),lo(DT.get(this))}:function(...e){return lo(t.apply(ag(this),e))}}function vN(t){return typeof t=="function"?yN(t):(t instanceof IDBTransaction&&mN(t),hN(t,dN())?new Proxy(t,My):t)}function lo(t){if(t instanceof IDBRequest)return pN(t);if(og.has(t))return og.get(t);const e=vN(t);return e!==t&&(og.set(t,e),A0.set(e,t)),e}const ag=t=>A0.get(t);function IT(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),o=lo(a);return r&&a.addEventListener("upgradeneeded",h=>{r(lo(a.result),h.oldVersion,h.newVersion,lo(a.transaction))}),n&&a.addEventListener("blocked",()=>n()),o.then(h=>{i&&h.addEventListener("close",()=>i()),s&&h.addEventListener("versionchange",()=>s())}).catch(()=>{}),o}const _N=["get","getKey","getAll","getAllKeys","count"],bN=["put","add","delete","clear"],lg=new Map;function tw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(lg.get(e))return lg.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=bN.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||_N.includes(n)))return;const i=async function(a,...o){const h=this.transaction(a,s?"readwrite":"readonly");let d=h.store;return r&&(d=d.index(o.shift())),(await Promise.all([d[n](...o),s&&h.done]))[0]};return lg.set(e,i),i}gN(t=>({...t,get:(e,n,r)=>tw(e,n)||t.get(e,n,r),has:(e,n)=>!!tw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(xN(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function xN(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ay="@firebase/app",rw="0.7.30";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da=new M0("@firebase/app"),SN="@firebase/app-compat",TN="@firebase/analytics-compat",EN="@firebase/analytics",kN="@firebase/app-check-compat",CN="@firebase/app-check",jN="@firebase/auth",MN="@firebase/auth-compat",AN="@firebase/database",DN="@firebase/database-compat",ON="@firebase/functions",IN="@firebase/functions-compat",RN="@firebase/installations",PN="@firebase/installations-compat",LN="@firebase/messaging",NN="@firebase/messaging-compat",FN="@firebase/performance",UN="@firebase/performance-compat",VN="@firebase/remote-config",BN="@firebase/remote-config-compat",GN="@firebase/storage",zN="@firebase/storage-compat",qN="@firebase/firestore",WN="@firebase/firestore-compat",$N="firebase",HN="9.9.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT="[DEFAULT]",XN={[Ay]:"fire-core",[SN]:"fire-core-compat",[EN]:"fire-analytics",[TN]:"fire-analytics-compat",[CN]:"fire-app-check",[kN]:"fire-app-check-compat",[jN]:"fire-auth",[MN]:"fire-auth-compat",[AN]:"fire-rtdb",[DN]:"fire-rtdb-compat",[ON]:"fire-fn",[IN]:"fire-fn-compat",[RN]:"fire-iid",[PN]:"fire-iid-compat",[LN]:"fire-fcm",[NN]:"fire-fcm-compat",[FN]:"fire-perf",[UN]:"fire-perf-compat",[VN]:"fire-rc",[BN]:"fire-rc-compat",[GN]:"fire-gcs",[zN]:"fire-gcs-compat",[qN]:"fire-fst",[WN]:"fire-fst-compat","fire-js":"fire-js",[$N]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ep=new Map,Dy=new Map;function YN(t,e){try{t.container.addComponent(e)}catch(n){da.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function yo(t){const e=t.name;if(Dy.has(e))return da.debug(`There were multiple attempts to register component ${e}.`),!1;Dy.set(e,t);for(const n of ep.values())YN(n,t);return!0}function dh(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},fa=new Xp("app","Firebase",QN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ci("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fa.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN=HN;function JN(t,e={}){typeof e!="object"&&(e={name:e});const n=Object.assign({name:RT,automaticDataCollectionEnabled:!1},e),r=n.name;if(typeof r!="string"||!r)throw fa.create("bad-app-name",{appName:String(r)});const s=ep.get(r);if(s){if(Jf(t,s.options)&&Jf(n,s.config))return s;throw fa.create("duplicate-app",{appName:r})}const i=new oN(r);for(const o of Dy.values())i.addComponent(o);const a=new KN(t,n,i);return ep.set(r,a),a}function PT(t=RT){const e=ep.get(t);if(!e)throw fa.create("no-app",{appName:t});return e}function Hs(t,e,n){var r;let s=(r=XN[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const o=[`Unable to register library "${s}" with version "${e}":`];i&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),da.warn(o.join(" "));return}yo(new Ci(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e4="firebase-heartbeat-database",t4=1,Pc="firebase-heartbeat-store";let ug=null;function LT(){return ug||(ug=IT(e4,t4,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Pc)}}}).catch(t=>{throw fa.create("idb-open",{originalErrorMessage:t.message})})),ug}async function r4(t){var e;try{return(await LT()).transaction(Pc).objectStore(Pc).get(NT(t))}catch(n){if(n instanceof ko)da.warn(n.message);else{const r=fa.create("idb-get",{originalErrorMessage:(e=n)===null||e===void 0?void 0:e.message});da.warn(r.message)}}}async function nw(t,e){var n;try{const s=(await LT()).transaction(Pc,"readwrite");return await s.objectStore(Pc).put(e,NT(t)),s.done}catch(r){if(r instanceof ko)da.warn(r.message);else{const s=fa.create("idb-set",{originalErrorMessage:(n=r)===null||n===void 0?void 0:n.message});da.warn(s.message)}}}function NT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n4=1024,s4=30*24*60*60*1e3;class i4{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new a4(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=sw();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const i=new Date(s.date).valueOf();return Date.now()-i<=s4}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=sw(),{heartbeatsToSend:n,unsentEntries:r}=o4(this._heartbeatsCache.heartbeats),s=CT(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function sw(){return new Date().toISOString().substring(0,10)}function o4(t,e=n4){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),iw(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),iw(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class a4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return MT()?AT().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await r4(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return nw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return nw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function iw(t){return CT(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l4(t){yo(new Ci("platform-logger",e=>new wN(e),"PRIVATE")),yo(new Ci("heartbeat",e=>new i4(e),"PRIVATE")),Hs(Ay,rw,t),Hs(Ay,rw,"esm2017"),Hs("fire-js","")}l4("");var u4="firebase",c4="9.9.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hs(u4,c4,"app");const FT="@firebase/installations",D0="0.5.12";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT=1e4,VT=`w:${D0}`,BT="FIS_v2",h4="https://firebaseinstallations.googleapis.com/v1",d4=60*60*1e3,f4="installations",p4="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m4={["missing-app-config-values"]:'Missing App configuration value: "{$valueName}"',["not-registered"]:"Firebase Installation is not registered.",["installation-not-found"]:"Firebase Installation not found.",["request-failed"]:'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',["app-offline"]:"Could not process request. Application offline.",["delete-pending-registration"]:"Can't delete installation while there is a pending registration request."},pa=new Xp(f4,p4,m4);function GT(t){return t instanceof ko&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT({projectId:t}){return`${h4}/projects/${t}/installations`}function qT(t){return{token:t.token,requestStatus:2,expiresIn:y4(t.expiresIn),creationTime:Date.now()}}async function WT(t,e){const r=(await e.json()).error;return pa.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function $T({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function g4(t,{refreshToken:e}){const n=$T(t);return n.append("Authorization",v4(e)),n}async function HT(t){const e=await t();return e.status>=500&&e.status<600?t():e}function y4(t){return Number(t.replace("s","000"))}function v4(t){return`${BT} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _4({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=zT(t),s=$T(t),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const a={fid:n,authVersion:BT,appId:t.appId,sdkVersion:VT},o={method:"POST",headers:s,body:JSON.stringify(a)},h=await HT(()=>fetch(r,o));if(h.ok){const d=await h.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:qT(d.authToken)}}else throw await WT("Create Installation",h)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XT(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b4(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w4=/^[cdef][\w-]{21}$/,Oy="";function x4(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=S4(t);return w4.test(n)?n:Oy}catch{return Oy}}function S4(t){return b4(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yp(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YT=new Map;function QT(t,e){const n=Yp(t);KT(n,e),T4(n,e)}function KT(t,e){const n=YT.get(t);if(!!n)for(const r of n)r(e)}function T4(t,e){const n=E4();n&&n.postMessage({key:t,fid:e}),k4()}let Wo=null;function E4(){return!Wo&&"BroadcastChannel"in self&&(Wo=new BroadcastChannel("[Firebase] FID Change"),Wo.onmessage=t=>{KT(t.data.key,t.data.fid)}),Wo}function k4(){YT.size===0&&Wo&&(Wo.close(),Wo=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C4="firebase-installations-database",j4=1,ma="firebase-installations-store";let cg=null;function O0(){return cg||(cg=IT(C4,j4,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(ma)}}})),cg}async function tp(t,e){const n=Yp(t),s=(await O0()).transaction(ma,"readwrite"),i=s.objectStore(ma),a=await i.get(n);return await i.put(e,n),await s.done,(!a||a.fid!==e.fid)&&QT(t,e.fid),e}async function ZT(t){const e=Yp(t),r=(await O0()).transaction(ma,"readwrite");await r.objectStore(ma).delete(e),await r.done}async function Qp(t,e){const n=Yp(t),s=(await O0()).transaction(ma,"readwrite"),i=s.objectStore(ma),a=await i.get(n),o=e(a);return o===void 0?await i.delete(n):await i.put(o,n),await s.done,o&&(!a||a.fid!==o.fid)&&QT(t,o.fid),o}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I0(t){let e;const n=await Qp(t.appConfig,r=>{const s=M4(r),i=A4(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===Oy?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function M4(t){const e=t||{fid:x4(),registrationStatus:0};return JT(e)}function A4(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(pa.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=D4(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:O4(t)}:{installationEntry:e}}async function D4(t,e){try{const n=await _4(t,e);return tp(t.appConfig,n)}catch(n){throw GT(n)&&n.customData.serverCode===409?await ZT(t.appConfig):await tp(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function O4(t){let e=await ow(t.appConfig);for(;e.registrationStatus===1;)await XT(100),e=await ow(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await I0(t);return r||n}return e}function ow(t){return Qp(t,e=>{if(!e)throw pa.create("installation-not-found");return JT(e)})}function JT(t){return I4(t)?{fid:t.fid,registrationStatus:0}:t}function I4(t){return t.registrationStatus===1&&t.registrationTime+UT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R4({appConfig:t,heartbeatServiceProvider:e},n){const r=P4(t,n),s=g4(t,n),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const a={installation:{sdkVersion:VT,appId:t.appId}},o={method:"POST",headers:s,body:JSON.stringify(a)},h=await HT(()=>fetch(r,o));if(h.ok){const d=await h.json();return qT(d)}else throw await WT("Generate Auth Token",h)}function P4(t,{fid:e}){return`${zT(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R0(t,e=!1){let n;const r=await Qp(t.appConfig,i=>{if(!eE(i))throw pa.create("not-registered");const a=i.authToken;if(!e&&F4(a))return i;if(a.requestStatus===1)return n=L4(t,e),i;{if(!navigator.onLine)throw pa.create("app-offline");const o=V4(i);return n=N4(t,o),o}});return n?await n:r.authToken}async function L4(t,e){let n=await aw(t.appConfig);for(;n.authToken.requestStatus===1;)await XT(100),n=await aw(t.appConfig);const r=n.authToken;return r.requestStatus===0?R0(t,e):r}function aw(t){return Qp(t,e=>{if(!eE(e))throw pa.create("not-registered");const n=e.authToken;return B4(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function N4(t,e){try{const n=await R4(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await tp(t.appConfig,r),n}catch(n){if(GT(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await ZT(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await tp(t.appConfig,r)}throw n}}function eE(t){return t!==void 0&&t.registrationStatus===2}function F4(t){return t.requestStatus===2&&!U4(t)}function U4(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+d4}function V4(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function B4(t){return t.requestStatus===1&&t.requestTime+UT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G4(t){const e=t,{installationEntry:n,registrationPromise:r}=await I0(e);return r?r.catch(console.error):R0(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z4(t,e=!1){const n=t;return await q4(n),(await R0(n,e)).token}async function q4(t){const{registrationPromise:e}=await I0(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W4(t){if(!t||!t.options)throw hg("App Configuration");if(!t.name)throw hg("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw hg(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function hg(t){return pa.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE="installations",$4="installations-internal",H4=t=>{const e=t.getProvider("app").getImmediate(),n=W4(e),r=dh(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},X4=t=>{const e=t.getProvider("app").getImmediate(),n=dh(e,tE).getImmediate();return{getId:()=>G4(n),getToken:s=>z4(n,s)}};function Y4(){yo(new Ci(tE,H4,"PUBLIC")),yo(new Ci($4,X4,"PRIVATE"))}Y4();Hs(FT,D0);Hs(FT,D0,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rp="analytics",Q4="firebase_id",K4="origin",Z4=60*1e3,J4="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",rE="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn=new M0("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nE(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function e5(t,e){const n=document.createElement("script");n.src=`${rE}?l=${t}&id=${e}`,n.async=!0,document.head.appendChild(n)}function t5(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function r5(t,e,n,r,s,i){const a=r[s];try{if(a)await e[a];else{const h=(await nE(n)).find(d=>d.measurementId===s);h&&await e[h.appId]}}catch(o){Qn.error(o)}t("config",s,i)}async function n5(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let a=s.send_to;Array.isArray(a)||(a=[a]);const o=await nE(n);for(const h of a){const d=o.find(m=>m.measurementId===h),g=d&&e[d.appId];if(g)i.push(g);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){Qn.error(i)}}function s5(t,e,n,r){async function s(i,a,o){try{i==="event"?await n5(t,e,n,a,o):i==="config"?await r5(t,e,n,r,a,o):i==="consent"?t("consent","update",o):t("set",a)}catch(h){Qn.error(h)}}return s}function i5(t,e,n,r,s){let i=function(...a){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=s5(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function o5(){const t=window.document.getElementsByTagName("script");for(const e of Object.values(t))if(e.src&&e.src.includes(rE))return e;return null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a5={["already-exists"]:"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",["already-initialized"]:"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.",["already-initialized-settings"]:"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",["interop-component-reg-failed"]:"Firebase Analytics Interop Component failed to instantiate: {$reason}",["invalid-analytics-context"]:"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",["indexeddb-unavailable"]:"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",["fetch-throttle"]:"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",["config-fetch-failed"]:"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",["no-api-key"]:'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',["no-app-id"]:'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'},fs=new Xp("analytics","Analytics",a5);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l5=30,u5=1e3;class c5{constructor(e={},n=u5){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const sE=new c5;function h5(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function d5(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:h5(r)},i=J4.replace("{app-id}",n),a=await fetch(i,s);if(a.status!==200&&a.status!==304){let o="";try{const h=await a.json();!((e=h.error)===null||e===void 0)&&e.message&&(o=h.error.message)}catch{}throw fs.create("config-fetch-failed",{httpStatus:a.status,responseMessage:o})}return a.json()}async function f5(t,e=sE,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw fs.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw fs.create("no-api-key")}const a=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new g5;return setTimeout(async()=>{o.abort()},n!==void 0?n:Z4),iE({appId:r,apiKey:s,measurementId:i},a,o,e)}async function iE(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=sE){var i,a;const{appId:o,measurementId:h}=t;try{await p5(r,e)}catch(d){if(h)return Qn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${(i=d)===null||i===void 0?void 0:i.message}]`),{appId:o,measurementId:h};throw d}try{const d=await d5(t);return s.deleteThrottleMetadata(o),d}catch(d){const g=d;if(!m5(g)){if(s.deleteThrottleMetadata(o),h)return Qn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${g==null?void 0:g.message}]`),{appId:o,measurementId:h};throw d}const m=Number((a=g==null?void 0:g.customData)===null||a===void 0?void 0:a.httpStatus)===503?Zb(n,s.intervalMillis,l5):Zb(n,s.intervalMillis),c={throttleEndTimeMillis:Date.now()+m,backoffCount:n+1};return s.setThrottleMetadata(o,c),Qn.debug(`Calling attemptFetch again in ${m} millis`),iE(t,c,r,s)}}function p5(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(fs.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function m5(t){if(!(t instanceof ko)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class g5{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function y5(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,a=Object.assign(Object.assign({},r),{send_to:i});t("event",n,a)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v5(){var t;if(MT())try{await AT()}catch(e){return Qn.warn(fs.create("indexeddb-unavailable",{errorInfo:(t=e)===null||t===void 0?void 0:t.toString()}).message),!1}else return Qn.warn(fs.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function _5(t,e,n,r,s,i,a){var o;const h=f5(t);h.then(l=>{n[l.measurementId]=l.appId,t.options.measurementId&&l.measurementId!==t.options.measurementId&&Qn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${l.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(l=>Qn.error(l)),e.push(h);const d=v5().then(l=>{if(l)return r.getId()}),[g,m]=await Promise.all([h,d]);o5()||e5(i,g.measurementId),s("js",new Date);const c=(o=a==null?void 0:a.config)!==null&&o!==void 0?o:{};return c[K4]="firebase",c.update=!0,m!=null&&(c[Q4]=m),s("config",g.measurementId,c),g.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b5{constructor(e){this.app=e}_delete(){return delete sc[this.app.options.appId],Promise.resolve()}}let sc={},lw=[];const uw={};let dg="dataLayer",w5="gtag",cw,oE,hw=!1;function x5(){const t=[];if(jT()&&t.push("This is a browser extension environment."),YL()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=fs.create("invalid-analytics-context",{errorInfo:e});Qn.warn(n.message)}}function S5(t,e,n){x5();const r=t.options.appId;if(!r)throw fs.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Qn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw fs.create("no-api-key");if(sc[r]!=null)throw fs.create("already-exists",{id:r});if(!hw){t5(dg);const{wrappedGtag:i,gtagCore:a}=i5(sc,lw,uw,dg,w5);oE=i,cw=a,hw=!0}return sc[r]=_5(t,lw,uw,e,cw,dg,n),new b5(t)}function T5(t=PT()){t=go(t);const e=dh(t,rp);return e.isInitialized()?e.getImmediate():E5(t)}function E5(t,e={}){const n=dh(t,rp);if(n.isInitialized()){const s=n.getImmediate();if(Jf(e,n.getOptions()))return s;throw fs.create("already-initialized")}return n.initialize({options:e})}function k5(t,e,n,r){t=go(t),y5(oE,sc[t.app.options.appId],e,n,r).catch(s=>Qn.error(s))}const dw="@firebase/analytics",fw="0.8.0";function C5(){yo(new Ci(rp,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return S5(r,s,n)},"PUBLIC")),yo(new Ci("analytics-internal",t,"PRIVATE")),Hs(dw,fw),Hs(dw,fw,"esm2017");function t(e){try{const n=e.getProvider(rp).getImmediate();return{logEvent:(r,s,i)=>k5(n,r,s,i)}}catch(n){throw fs.create("interop-component-reg-failed",{reason:n})}}}C5();var j5=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},nt,P0=P0||{},xt=j5||self;function np(){}function Iy(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function fh(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function M5(t){return Object.prototype.hasOwnProperty.call(t,fg)&&t[fg]||(t[fg]=++A5)}var fg="closure_uid_"+(1e9*Math.random()>>>0),A5=0;function D5(t,e,n){return t.call.apply(t.bind,arguments)}function O5(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function an(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?an=D5:an=O5,an.apply(null,arguments)}function td(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function dn(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(r,s,i){for(var a=Array(arguments.length-2),o=2;o<arguments.length;o++)a[o-2]=arguments[o];return e.prototype[s].apply(r,a)}}function Co(){this.s=this.s,this.o=this.o}var I5=0;Co.prototype.s=!1;Co.prototype.na=function(){!this.s&&(this.s=!0,this.M(),I5!=0)&&M5(this)};Co.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const aE=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},lE=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){const r=t.length,s=typeof t=="string"?t.split(""):t;for(let i=0;i<r;i++)i in s&&e.call(n,s[i],i,t)};function R5(t){e:{var e=E3;const n=t.length,r=typeof t=="string"?t.split(""):t;for(let s=0;s<n;s++)if(s in r&&e.call(void 0,r[s],s,t)){e=s;break e}e=-1}return 0>e?null:typeof t=="string"?t.charAt(e):t[e]}function pw(t){return Array.prototype.concat.apply([],arguments)}function L0(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function sp(t){return/^[\s\xa0]*$/.test(t)}var mw=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Tn(t,e){return t.indexOf(e)!=-1}function pg(t,e){return t<e?-1:t>e?1:0}var En;e:{var gw=xt.navigator;if(gw){var yw=gw.userAgent;if(yw){En=yw;break e}}En=""}function N0(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function uE(t){const e={};for(const n in t)e[n]=t[n];return e}var vw="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function cE(t,e){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)t[n]=r[n];for(let i=0;i<vw.length;i++)n=vw[i],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function F0(t){return F0[" "](t),t}F0[" "]=np;function P5(t){var e=F5;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}var L5=Tn(En,"Opera"),Wl=Tn(En,"Trident")||Tn(En,"MSIE"),hE=Tn(En,"Edge"),Ry=hE||Wl,dE=Tn(En,"Gecko")&&!(Tn(En.toLowerCase(),"webkit")&&!Tn(En,"Edge"))&&!(Tn(En,"Trident")||Tn(En,"MSIE"))&&!Tn(En,"Edge"),N5=Tn(En.toLowerCase(),"webkit")&&!Tn(En,"Edge");function fE(){var t=xt.document;return t?t.documentMode:void 0}var ip;e:{var mg="",gg=function(){var t=En;if(dE)return/rv:([^\);]+)(\)|;)/.exec(t);if(hE)return/Edge\/([\d\.]+)/.exec(t);if(Wl)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(N5)return/WebKit\/(\S+)/.exec(t);if(L5)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(gg&&(mg=gg?gg[1]:""),Wl){var yg=fE();if(yg!=null&&yg>parseFloat(mg)){ip=String(yg);break e}}ip=mg}var F5={};function U5(){return P5(function(){let t=0;const e=mw(String(ip)).split("."),n=mw("9").split("."),r=Math.max(e.length,n.length);for(let a=0;t==0&&a<r;a++){var s=e[a]||"",i=n[a]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s[0].length==0&&i[0].length==0)break;t=pg(s[1].length==0?0:parseInt(s[1],10),i[1].length==0?0:parseInt(i[1],10))||pg(s[2].length==0,i[2].length==0)||pg(s[2],i[2]),s=s[3],i=i[3]}while(t==0)}return 0<=t})}var Py;if(xt.document&&Wl){var _w=fE();Py=_w||parseInt(ip,10)||void 0}else Py=void 0;var V5=Py,B5=function(){if(!xt.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{xt.addEventListener("test",np,e),xt.removeEventListener("test",np,e)}catch{}return t}();function vn(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}vn.prototype.h=function(){this.defaultPrevented=!0};function Lc(t,e){if(vn.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(dE){e:{try{F0(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:G5[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Lc.Z.h.call(this)}}dn(Lc,vn);var G5={2:"touch",3:"pen",4:"mouse"};Lc.prototype.h=function(){Lc.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var ph="closure_listenable_"+(1e6*Math.random()|0),z5=0;function q5(t,e,n,r,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=s,this.key=++z5,this.ca=this.fa=!1}function Kp(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function Zp(t){this.src=t,this.g={},this.h=0}Zp.prototype.add=function(t,e,n,r,s){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var a=Ny(t,e,r,s);return-1<a?(e=t[a],n||(e.fa=!1)):(e=new q5(e,this.src,i,!!r,s),e.fa=n,t.push(e)),e};function Ly(t,e){var n=e.type;if(n in t.g){var r=t.g[n],s=aE(r,e),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(Kp(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Ny(t,e,n,r){for(var s=0;s<t.length;++s){var i=t[s];if(!i.ca&&i.listener==e&&i.capture==!!n&&i.ia==r)return s}return-1}var U0="closure_lm_"+(1e6*Math.random()|0),vg={};function pE(t,e,n,r,s){if(r&&r.once)return gE(t,e,n,r,s);if(Array.isArray(e)){for(var i=0;i<e.length;i++)pE(t,e[i],n,r,s);return null}return n=G0(n),t&&t[ph]?t.N(e,n,fh(r)?!!r.capture:!!r,s):mE(t,e,n,!1,r,s)}function mE(t,e,n,r,s,i){if(!e)throw Error("Invalid event type");var a=fh(s)?!!s.capture:!!s,o=B0(t);if(o||(t[U0]=o=new Zp(t)),n=o.add(e,n,r,a,i),n.proxy)return n;if(r=W5(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)B5||(s=a),s===void 0&&(s=!1),t.addEventListener(e.toString(),r,s);else if(t.attachEvent)t.attachEvent(vE(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function W5(){function t(n){return e.call(t.src,t.listener,n)}var e=$5;return t}function gE(t,e,n,r,s){if(Array.isArray(e)){for(var i=0;i<e.length;i++)gE(t,e[i],n,r,s);return null}return n=G0(n),t&&t[ph]?t.O(e,n,fh(r)?!!r.capture:!!r,s):mE(t,e,n,!0,r,s)}function yE(t,e,n,r,s){if(Array.isArray(e))for(var i=0;i<e.length;i++)yE(t,e[i],n,r,s);else r=fh(r)?!!r.capture:!!r,n=G0(n),t&&t[ph]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=Ny(i,n,r,s),-1<n&&(Kp(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=B0(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Ny(e,n,r,s)),(n=-1<t?e[t]:null)&&V0(n))}function V0(t){if(typeof t!="number"&&t&&!t.ca){var e=t.src;if(e&&e[ph])Ly(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(vE(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=B0(e))?(Ly(n,t),n.h==0&&(n.src=null,e[U0]=null)):Kp(t)}}}function vE(t){return t in vg?vg[t]:vg[t]="on"+t}function $5(t,e){if(t.ca)t=!0;else{e=new Lc(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&V0(t),t=n.call(r,e)}return t}function B0(t){return t=t[U0],t instanceof Zp?t:null}var _g="__closure_events_fn_"+(1e9*Math.random()>>>0);function G0(t){return typeof t=="function"?t:(t[_g]||(t[_g]=function(e){return t.handleEvent(e)}),t[_g])}function Kr(){Co.call(this),this.i=new Zp(this),this.P=this,this.I=null}dn(Kr,Co);Kr.prototype[ph]=!0;Kr.prototype.removeEventListener=function(t,e,n,r){yE(this,t,e,n,r)};function ln(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,typeof e=="string")e=new vn(e,t);else if(e instanceof vn)e.target=e.target||t;else{var s=e;e=new vn(r,t),cE(e,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var a=e.g=n[i];s=rd(a,r,!0,e)&&s}if(a=e.g=t,s=rd(a,r,!0,e)&&s,s=rd(a,r,!1,e)&&s,n)for(i=0;i<n.length;i++)a=e.g=n[i],s=rd(a,r,!1,e)&&s}Kr.prototype.M=function(){if(Kr.Z.M.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Kp(n[r]);delete t.g[e],t.h--}}this.I=null};Kr.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};Kr.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function rd(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,i=0;i<e.length;++i){var a=e[i];if(a&&!a.ca&&a.capture==n){var o=a.listener,h=a.ia||a.src;a.fa&&Ly(t.i,a),s=o.call(h,r)!==!1&&s}}return s&&!r.defaultPrevented}var z0=xt.JSON.stringify;function H5(){var t=bE;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class X5{constructor(){this.h=this.g=null}add(e,n){const r=_E.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var _E=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new Y5,t=>t.reset());class Y5{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function Q5(t){xt.setTimeout(()=>{throw t},0)}function q0(t,e){Fy||K5(),Uy||(Fy(),Uy=!0),bE.add(t,e)}var Fy;function K5(){var t=xt.Promise.resolve(void 0);Fy=function(){t.then(Z5)}}var Uy=!1,bE=new X5;function Z5(){for(var t;t=H5();){try{t.h.call(t.g)}catch(n){Q5(n)}var e=_E;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Uy=!1}function Jp(t,e){Kr.call(this),this.h=t||1,this.g=e||xt,this.j=an(this.kb,this),this.l=Date.now()}dn(Jp,Kr);nt=Jp.prototype;nt.da=!1;nt.S=null;nt.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ln(this,"tick"),this.da&&(W0(this),this.start()))}};nt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function W0(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}nt.M=function(){Jp.Z.M.call(this),W0(this),delete this.g};function $0(t,e,n){if(typeof t=="function")n&&(t=an(t,n));else if(t&&typeof t.handleEvent=="function")t=an(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:xt.setTimeout(t,e||0)}function wE(t){t.g=$0(()=>{t.g=null,t.i&&(t.i=!1,wE(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class J5 extends Co{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:wE(this)}M(){super.M(),this.g&&(xt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Nc(t){Co.call(this),this.h=t,this.g={}}dn(Nc,Co);var bw=[];function xE(t,e,n,r){Array.isArray(n)||(n&&(bw[0]=n.toString()),n=bw);for(var s=0;s<n.length;s++){var i=pE(e,n[s],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function SE(t){N0(t.g,function(e,n){this.g.hasOwnProperty(n)&&V0(e)},t),t.g={}}Nc.prototype.M=function(){Nc.Z.M.call(this),SE(this)};Nc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function em(){this.g=!0}em.prototype.Aa=function(){this.g=!1};function e3(t,e,n,r,s,i){t.info(function(){if(t.g)if(i)for(var a="",o=i.split("&"),h=0;h<o.length;h++){var d=o[h].split("=");if(1<d.length){var g=d[0];d=d[1];var m=g.split("_");a=2<=m.length&&m[1]=="type"?a+(g+"="+d+"&"):a+(g+"=redacted&")}}else a=null;else a=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+`
`+n+`
`+a})}function t3(t,e,n,r,s,i,a){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+`
`+n+`
`+i+" "+a})}function tl(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+n3(t,n)+(r?" "+r:"")})}function r3(t,e){t.info(function(){return"TIMEOUT: "+e})}em.prototype.info=function(){};function n3(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var a=1;a<s.length;a++)s[a]=""}}}}return z0(n)}catch{return e}}var Ca={},ww=null;function tm(){return ww=ww||new Kr}Ca.Ma="serverreachability";function TE(t){vn.call(this,Ca.Ma,t)}dn(TE,vn);function Fc(t){const e=tm();ln(e,new TE(e))}Ca.STAT_EVENT="statevent";function EE(t,e){vn.call(this,Ca.STAT_EVENT,t),this.stat=e}dn(EE,vn);function jn(t){const e=tm();ln(e,new EE(e,t))}Ca.Na="timingevent";function kE(t,e){vn.call(this,Ca.Na,t),this.size=e}dn(kE,vn);function mh(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return xt.setTimeout(function(){t()},e)}var rm={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},CE={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function H0(){}H0.prototype.h=null;function xw(t){return t.h||(t.h=t.i())}function jE(){}var gh={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function X0(){vn.call(this,"d")}dn(X0,vn);function Y0(){vn.call(this,"c")}dn(Y0,vn);var Vy;function nm(){}dn(nm,H0);nm.prototype.g=function(){return new XMLHttpRequest};nm.prototype.i=function(){return{}};Vy=new nm;function yh(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new Nc(this),this.P=s3,t=Ry?125:void 0,this.W=new Jp(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new ME}function ME(){this.i=null,this.g="",this.h=!1}var s3=45e3,By={},op={};nt=yh.prototype;nt.setTimeout=function(t){this.P=t};function Gy(t,e,n){t.K=1,t.v=im(ji(e)),t.s=n,t.U=!0,AE(t,null)}function AE(t,e){t.F=Date.now(),vh(t),t.A=ji(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),NE(n.h,"t",r),t.C=0,n=t.l.H,t.h=new ME,t.g=nk(t.l,n?e:null,!t.s),0<t.O&&(t.L=new J5(an(t.Ia,t,t.g),t.O)),xE(t.V,t.g,"readystatechange",t.gb),e=t.H?uE(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Fc(),e3(t.j,t.u,t.A,t.m,t.X,t.s)}nt.gb=function(t){t=t.target;const e=this.L;e&&fi(t)==3?e.l():this.Ia(t)};nt.Ia=function(t){try{if(t==this.g)e:{const g=fi(this.g);var e=this.g.Da();const m=this.g.ba();if(!(3>g)&&(g!=3||Ry||this.g&&(this.h.h||this.g.ga()||kw(this.g)))){this.I||g!=4||e==7||(e==8||0>=m?Fc(3):Fc(2)),sm(this);var n=this.g.ba();this.N=n;t:if(DE(this)){var r=kw(this.g);t="";var s=r.length,i=fi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){$o(this),ic(this);var a="";break t}this.h.i=new xt.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:i&&e==s-1});r.splice(0,s),this.h.g+=t,this.C=0,a=this.h.g}else a=this.g.ga();if(this.i=n==200,t3(this.j,this.u,this.A,this.m,this.X,g,n),this.i){if(this.$&&!this.J){t:{if(this.g){var o,h=this.g;if((o=h.g?h.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!sp(o)){var d=o;break t}}d=null}if(n=d)tl(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,zy(this,n);else{this.i=!1,this.o=3,jn(12),$o(this),ic(this);break e}}this.U?(OE(this,g,a),Ry&&this.i&&g==3&&(xE(this.V,this.W,"tick",this.fb),this.W.start())):(tl(this.j,this.m,a,null),zy(this,a)),g==4&&$o(this),this.i&&!this.I&&(g==4?JE(this.l,this):(this.i=!1,vh(this)))}else n==400&&0<a.indexOf("Unknown SID")?(this.o=3,jn(12)):(this.o=0,jn(13)),$o(this),ic(this)}}}catch{}finally{}};function DE(t){return t.g?t.u=="GET"&&t.K!=2&&t.l.Ba:!1}function OE(t,e,n){let r=!0,s;for(;!t.I&&t.C<n.length;)if(s=i3(t,n),s==op){e==4&&(t.o=4,jn(14),r=!1),tl(t.j,t.m,null,"[Incomplete Response]");break}else if(s==By){t.o=4,jn(15),tl(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else tl(t.j,t.m,s,null),zy(t,s);DE(t)&&s!=op&&s!=By&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,jn(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.aa&&(t.aa=!0,e=t.l,e.g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),s1(e),e.L=!0,jn(11))):(tl(t.j,t.m,n,"[Invalid Chunked Response]"),$o(t),ic(t))}nt.fb=function(){if(this.g){var t=fi(this.g),e=this.g.ga();this.C<e.length&&(sm(this),OE(this,t,e),this.i&&t!=4&&vh(this))}};function i3(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?op:(n=Number(e.substring(n,r)),isNaN(n)?By:(r+=1,r+n>e.length?op:(e=e.substr(r,n),t.C=r+n,e)))}nt.cancel=function(){this.I=!0,$o(this)};function vh(t){t.Y=Date.now()+t.P,IE(t,t.P)}function IE(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=mh(an(t.eb,t),e)}function sm(t){t.B&&(xt.clearTimeout(t.B),t.B=null)}nt.eb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(r3(this.j,this.A),this.K!=2&&(Fc(),jn(17)),$o(this),this.o=2,ic(this)):IE(this,this.Y-t)};function ic(t){t.l.G==0||t.I||JE(t.l,t)}function $o(t){sm(t);var e=t.L;e&&typeof e.na=="function"&&e.na(),t.L=null,W0(t.W),SE(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function zy(t,e){try{var n=t.l;if(n.G!=0&&(n.g==t||qy(n.i,t))){if(n.I=t.N,!t.J&&qy(n.i,t)&&n.G==3){try{var r=n.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){e:if(!n.u){if(n.g)if(n.g.F+3e3<t.F)cp(n),lm(n);else break e;n1(n),jn(18)}}else n.ta=s[1],0<n.ta-n.U&&37500>s[2]&&n.N&&n.A==0&&!n.v&&(n.v=mh(an(n.ab,n),6e3));if(1>=VE(n.i)&&n.ka){try{n.ka()}catch{}n.ka=void 0}}else Ho(n,11)}else if((t.J||n.g==t)&&cp(n),!sp(e))for(s=n.Ca.g.parse(e),e=0;e<s.length;e++){let d=s[e];if(n.U=d[0],d=d[1],n.G==2)if(d[0]=="c"){n.J=d[1],n.la=d[2];const g=d[3];g!=null&&(n.ma=g,n.h.info("VER="+n.ma));const m=d[4];m!=null&&(n.za=m,n.h.info("SVER="+n.za));const c=d[5];c!=null&&typeof c=="number"&&0<c&&(r=1.5*c,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;const l=t.g;if(l){const u=l.g?l.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(u){var i=r.i;!i.g&&(Tn(u,"spdy")||Tn(u,"quic")||Tn(u,"h2"))&&(i.j=i.l,i.g=new Set,i.h&&(Z0(i,i.h),i.h=null))}if(r.D){const f=l.g?l.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,vr(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms")),r=n;var a=t;if(r.oa=rk(r,r.H?r.la:null,r.W),a.J){BE(r.i,a);var o=a,h=r.K;h&&o.setTimeout(h),o.B&&(sm(o),vh(o)),r.g=a}else KE(r);0<n.l.length&&um(n)}else d[0]!="stop"&&d[0]!="close"||Ho(n,7);else n.G==3&&(d[0]=="stop"||d[0]=="close"?d[0]=="stop"?Ho(n,7):r1(n):d[0]!="noop"&&n.j&&n.j.wa(d),n.A=0)}}Fc(4)}catch{}}function o3(t){if(t.R&&typeof t.R=="function")return t.R();if(typeof t=="string")return t.split("");if(Iy(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function Q0(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Iy(t)||typeof t=="string")lE(t,e,void 0);else{if(t.T&&typeof t.T=="function")var n=t.T();else if(t.R&&typeof t.R=="function")n=void 0;else if(Iy(t)||typeof t=="string"){n=[];for(var r=t.length,s=0;s<r;s++)n.push(s)}else for(s in n=[],r=0,t)n[r++]=s;r=o3(t),s=r.length;for(var i=0;i<s;i++)e.call(void 0,r[i],n&&n[i],t)}}function pu(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof pu)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}nt=pu.prototype;nt.R=function(){K0(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t};nt.T=function(){return K0(this),this.g.concat()};function K0(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];ga(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var s={};for(n=e=0;e<t.g.length;)r=t.g[e],ga(s,r)||(t.g[n++]=r,s[r]=1),e++;t.g.length=n}}nt.get=function(t,e){return ga(this.h,t)?this.h[t]:e};nt.set=function(t,e){ga(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e};nt.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var s=n[r],i=this.get(s);t.call(e,i,s,this)}};function ga(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var RE=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function a3(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),s=null;if(0<=r){var i=t[n].substring(0,r);s=t[n].substring(r+1)}else i=t[n];e(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function ya(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof ya){this.g=e!==void 0?e:t.g,ap(this,t.j),this.s=t.s,lp(this,t.i),up(this,t.m),this.l=t.l,e=t.h;var n=new Uc;n.i=e.i,e.g&&(n.g=new pu(e.g),n.h=e.h),Sw(this,n),this.o=t.o}else t&&(n=String(t).match(RE))?(this.g=!!e,ap(this,n[1]||"",!0),this.s=oc(n[2]||""),lp(this,n[3]||"",!0),up(this,n[4]),this.l=oc(n[5]||"",!0),Sw(this,n[6]||"",!0),this.o=oc(n[7]||"")):(this.g=!!e,this.h=new Uc(null,this.g))}ya.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Wu(e,Tw,!0),":");var n=this.i;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Wu(e,Tw,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.i&&n.charAt(0)!="/"&&t.push("/"),t.push(Wu(n,n.charAt(0)=="/"?d3:h3,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Wu(n,p3)),t.join("")};function ji(t){return new ya(t)}function ap(t,e,n){t.j=n?oc(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function lp(t,e,n){t.i=n?oc(e,!0):e}function up(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Sw(t,e,n){e instanceof Uc?(t.h=e,m3(t.h,t.g)):(n||(e=Wu(e,f3)),t.h=new Uc(e,t.g))}function vr(t,e,n){t.h.set(e,n)}function im(t){return vr(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function l3(t){return t instanceof ya?ji(t):new ya(t,void 0)}function u3(t,e,n,r){var s=new ya(null,void 0);return t&&ap(s,t),e&&lp(s,e),n&&up(s,n),r&&(s.l=r),s}function oc(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Wu(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,c3),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function c3(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Tw=/[#\/\?@]/g,h3=/[#\?:]/g,d3=/[#\?]/g,f3=/[#\?@]/g,p3=/#/g;function Uc(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function jo(t){t.g||(t.g=new pu,t.h=0,t.i&&a3(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}nt=Uc.prototype;nt.add=function(t,e){jo(this),this.i=null,t=mu(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function PE(t,e){jo(t),e=mu(t,e),ga(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,t=t.g,ga(t.h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&K0(t)))}function LE(t,e){return jo(t),e=mu(t,e),ga(t.g.h,e)}nt.forEach=function(t,e){jo(this),this.g.forEach(function(n,r){lE(n,function(s){t.call(e,s,r,this)},this)},this)};nt.T=function(){jo(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var s=t[r],i=0;i<s.length;i++)n.push(e[r]);return n};nt.R=function(t){jo(this);var e=[];if(typeof t=="string")LE(this,t)&&(e=pw(e,this.g.get(mu(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=pw(e,t[n])}return e};nt.set=function(t,e){return jo(this),this.i=null,t=mu(this,t),LE(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};nt.get=function(t,e){return t?(t=this.R(t),0<t.length?String(t[0]):e):e};function NE(t,e,n){PE(t,e),0<n.length&&(t.i=null,t.g.set(mu(t,e),L0(n)),t.h+=n.length)}nt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],s=encodeURIComponent(String(r));r=this.R(r);for(var i=0;i<r.length;i++){var a=s;r[i]!==""&&(a+="="+encodeURIComponent(String(r[i]))),t.push(a)}}return this.i=t.join("&")};function mu(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function m3(t,e){e&&!t.j&&(jo(t),t.i=null,t.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(PE(this,r),NE(this,s,n))},t)),t.j=e}var g3=class{constructor(t,e){this.h=t,this.g=e}};function FE(t){this.l=t||y3,xt.PerformanceNavigationTiming?(t=xt.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(xt.g&&xt.g.Ea&&xt.g.Ea()&&xt.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var y3=10;function UE(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function VE(t){return t.h?1:t.g?t.g.size:0}function qy(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Z0(t,e){t.g?t.g.add(e):t.h=e}function BE(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}FE.prototype.cancel=function(){if(this.i=GE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function GE(t){if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return L0(t.i)}function J0(){}J0.prototype.stringify=function(t){return xt.JSON.stringify(t,void 0)};J0.prototype.parse=function(t){return xt.JSON.parse(t,void 0)};function v3(){this.g=new J0}function _3(t,e,n){const r=n||"";try{Q0(t,function(s,i){let a=s;fh(s)&&(a=z0(s)),e.push(r+i+"="+encodeURIComponent(a))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function b3(t,e){const n=new em;if(xt.Image){const r=new Image;r.onload=td(nd,n,r,"TestLoadImage: loaded",!0,e),r.onerror=td(nd,n,r,"TestLoadImage: error",!1,e),r.onabort=td(nd,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=td(nd,n,r,"TestLoadImage: timeout",!1,e),xt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function nd(t,e,n,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function _h(t){this.l=t.$b||null,this.j=t.ib||!1}dn(_h,H0);_h.prototype.g=function(){return new om(this.l,this.j)};_h.prototype.i=function(t){return function(){return t}}({});function om(t,e){Kr.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=e1,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}dn(om,Kr);var e1=0;nt=om.prototype;nt.open=function(t,e){if(this.readyState!=e1)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Vc(this)};nt.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||xt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))};nt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,bh(this)),this.readyState=e1};nt.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Vc(this)),this.g&&(this.readyState=3,Vc(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof xt.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;zE(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))};function zE(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}nt.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?bh(this):Vc(this),this.readyState==3&&zE(this)}};nt.Ua=function(t){this.g&&(this.response=this.responseText=t,bh(this))};nt.Ta=function(t){this.g&&(this.response=t,bh(this))};nt.ha=function(){this.g&&bh(this)};function bh(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Vc(t)}nt.setRequestHeader=function(t,e){this.v.append(t,e)};nt.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};nt.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Vc(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(om.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var w3=xt.JSON.parse;function Lr(t){Kr.call(this),this.headers=new pu,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=qE,this.K=this.L=!1}dn(Lr,Kr);var qE="",x3=/^https?$/i,S3=["POST","PUT"];nt=Lr.prototype;nt.ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Vy.g(),this.C=this.u?xw(this.u):xw(Vy),this.g.onreadystatechange=an(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(i){Ew(this,i);return}t=n||"";const s=new pu(this.headers);r&&Q0(r,function(i,a){s.set(a,i)}),r=R5(s.T()),n=xt.FormData&&t instanceof xt.FormData,!(0<=aE(S3,e))||r||n||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(i,a){this.g.setRequestHeader(a,i)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{HE(this),0<this.B&&((this.K=T3(this.g))?(this.g.timeout=this.B,this.g.ontimeout=an(this.pa,this)):this.A=$0(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){Ew(this,i)}};function T3(t){return Wl&&U5()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}function E3(t){return t.toLowerCase()=="content-type"}nt.pa=function(){typeof P0<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ln(this,"timeout"),this.abort(8))};function Ew(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,WE(t),am(t)}function WE(t){t.D||(t.D=!0,ln(t,"complete"),ln(t,"error"))}nt.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,ln(this,"complete"),ln(this,"abort"),am(this))};nt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),am(this,!0)),Lr.Z.M.call(this)};nt.Fa=function(){this.s||(this.F||this.v||this.l?$E(this):this.cb())};nt.cb=function(){$E(this)};function $E(t){if(t.h&&typeof P0<"u"&&(!t.C[1]||fi(t)!=4||t.ba()!=2)){if(t.v&&fi(t)==4)$0(t.Fa,0,t);else if(ln(t,"readystatechange"),fi(t)==4){t.h=!1;try{const o=t.ba();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var s=String(t.H).match(RE)[1]||null;if(!s&&xt.self&&xt.self.location){var i=xt.self.location.protocol;s=i.substr(0,i.length-1)}r=!x3.test(s?s.toLowerCase():"")}n=r}if(n)ln(t,"complete"),ln(t,"success");else{t.m=6;try{var a=2<fi(t)?t.g.statusText:""}catch{a=""}t.j=a+" ["+t.ba()+"]",WE(t)}}finally{am(t)}}}}function am(t,e){if(t.g){HE(t);const n=t.g,r=t.C[0]?np:null;t.g=null,t.C=null,e||ln(t,"ready");try{n.onreadystatechange=r}catch{}}}function HE(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(xt.clearTimeout(t.A),t.A=null)}function fi(t){return t.g?t.g.readyState:0}nt.ba=function(){try{return 2<fi(this)?this.g.status:-1}catch{return-1}};nt.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}};nt.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),w3(e)}};function kw(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case qE:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}nt.Da=function(){return this.m};nt.La=function(){return typeof this.j=="string"?this.j:String(this.j)};function k3(t){let e="";return N0(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function t1(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=k3(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):vr(t,e,n))}function Nu(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function XE(t){this.za=0,this.l=[],this.h=new em,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Nu("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Nu("baseRetryDelayMs",5e3,t),this.$a=Nu("retryDelaySeedMs",1e4,t),this.Ya=Nu("forwardChannelMaxRetries",2,t),this.ra=Nu("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new FE(t&&t.concurrentRequestLimit),this.Ca=new v3,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||t.Xb!==!1}nt=XE.prototype;nt.ma=8;nt.G=1;function r1(t){if(YE(t),t.G==3){var e=t.V++,n=ji(t.F);vr(n,"SID",t.J),vr(n,"RID",e),vr(n,"TYPE","terminate"),wh(t,n),e=new yh(t,t.h,e,void 0),e.K=2,e.v=im(ji(n)),n=!1,xt.navigator&&xt.navigator.sendBeacon&&(n=xt.navigator.sendBeacon(e.v.toString(),"")),!n&&xt.Image&&(new Image().src=e.v,n=!0),n||(e.g=nk(e.l,null),e.g.ea(e.v)),e.F=Date.now(),vh(e)}tk(t)}nt.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch{}};function lm(t){t.g&&(s1(t),t.g.cancel(),t.g=null)}function YE(t){lm(t),t.u&&(xt.clearTimeout(t.u),t.u=null),cp(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&xt.clearTimeout(t.m),t.m=null)}function bg(t,e){t.l.push(new g3(t.Za++,e)),t.G==3&&um(t)}function um(t){UE(t.i)||t.m||(t.m=!0,q0(t.Ha,t),t.C=0)}function C3(t,e){return VE(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.l=e.D.concat(t.l),!0):t.G==1||t.G==2||t.C>=(t.Xa?0:t.Ya)?!1:(t.m=mh(an(t.Ha,t,e),ek(t,t.C)),t.C++,!0)}nt.Ha=function(t){if(this.m)if(this.m=null,this.G==1){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;const s=new yh(this,this.h,t,void 0);let i=this.s;if(this.P&&(i?(i=uE(i),cE(i,this.P)):i=this.P),this.o===null&&(s.H=i),this.ja)e:{for(var e=0,n=0;n<this.l.length;n++){t:{var r=this.l[n];if("__data__"in r.g&&(r=r.g.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.l.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=QE(this,s,e),n=ji(this.F),vr(n,"RID",t),vr(n,"CVER",22),this.D&&vr(n,"X-HTTP-Session-Id",this.D),wh(this,n),this.o&&i&&t1(n,this.o,i),Z0(this.i,s),this.Ra&&vr(n,"TYPE","init"),this.ja?(vr(n,"$req",e),vr(n,"SID","null"),s.$=!0,Gy(s,n,null)):Gy(s,n,e),this.G=2}}else this.G==3&&(t?Cw(this,t):this.l.length==0||UE(this.i)||Cw(this))};function Cw(t,e){var n;e?n=e.m:n=t.V++;const r=ji(t.F);vr(r,"SID",t.J),vr(r,"RID",n),vr(r,"AID",t.U),wh(t,r),t.o&&t.s&&t1(r,t.o,t.s),n=new yh(t,t.h,n,t.C+1),t.o===null&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=QE(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),Z0(t.i,n),Gy(n,r,e)}function wh(t,e){t.j&&Q0({},function(n,r){vr(e,r,n)})}function QE(t,e,n){n=Math.min(t.l.length,n);var r=t.j?an(t.j.Oa,t.j,t):null;e:{var s=t.l;let i=-1;for(;;){const a=["count="+n];i==-1?0<n?(i=s[0].h,a.push("ofs="+i)):i=0:a.push("ofs="+i);let o=!0;for(let h=0;h<n;h++){let d=s[h].h;const g=s[h].g;if(d-=i,0>d)i=Math.max(0,s[h].h-100),o=!1;else try{_3(g,a,"req"+d+"_")}catch{r&&r(g)}}if(o){r=a.join("&");break e}}}return t=t.l.splice(0,n),e.D=t,r}function KE(t){t.g||t.u||(t.Y=1,q0(t.Ga,t),t.A=0)}function n1(t){return t.g||t.u||3<=t.A?!1:(t.Y++,t.u=mh(an(t.Ga,t),ek(t,t.A)),t.A++,!0)}nt.Ga=function(){if(this.u=null,ZE(this),this.$&&!(this.L||this.g==null||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=mh(an(this.bb,this),t)}};nt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,jn(10),lm(this),ZE(this))};function s1(t){t.B!=null&&(xt.clearTimeout(t.B),t.B=null)}function ZE(t){t.g=new yh(t,t.h,"rpc",t.Y),t.o===null&&(t.g.H=t.s),t.g.O=0;var e=ji(t.oa);vr(e,"RID","rpc"),vr(e,"SID",t.J),vr(e,"CI",t.N?"0":"1"),vr(e,"AID",t.U),wh(t,e),vr(e,"TYPE","xmlhttp"),t.o&&t.s&&t1(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=im(ji(e)),n.s=null,n.U=!0,AE(n,t)}nt.ab=function(){this.v!=null&&(this.v=null,lm(this),n1(this),jn(19))};function cp(t){t.v!=null&&(xt.clearTimeout(t.v),t.v=null)}function JE(t,e){var n=null;if(t.g==e){cp(t),s1(t),t.g=null;var r=2}else if(qy(t.i,e))n=e.D,BE(t.i,e),r=1;else return;if(t.I=e.N,t.G!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.F;var s=t.C;r=tm(),ln(r,new kE(r,n)),um(t)}else KE(t);else if(s=e.o,s==3||s==0&&0<t.I||!(r==1&&C3(t,e)||r==2&&n1(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),s){case 1:Ho(t,5);break;case 4:Ho(t,10);break;case 3:Ho(t,6);break;default:Ho(t,2)}}}function ek(t,e){let n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function Ho(t,e){if(t.h.info("Error code "+e),e==2){var n=null;t.j&&(n=null);var r=an(t.jb,t);n||(n=new ya("//www.google.com/images/cleardot.gif"),xt.location&&xt.location.protocol=="http"||ap(n,"https"),im(n)),b3(n.toString(),r)}else jn(2);t.G=0,t.j&&t.j.va(e),tk(t),YE(t)}nt.jb=function(t){t?(this.h.info("Successfully pinged google.com"),jn(2)):(this.h.info("Failed to ping google.com"),jn(1))};function tk(t){t.G=0,t.I=-1,t.j&&((GE(t.i).length!=0||t.l.length!=0)&&(t.i.i.length=0,L0(t.l),t.l.length=0),t.j.ua())}function rk(t,e,n){let r=l3(n);if(r.i!="")e&&lp(r,e+"."+r.i),up(r,r.m);else{const s=xt.location;r=u3(s.protocol,e?e+"."+s.hostname:s.hostname,+s.port,n)}return t.aa&&N0(t.aa,function(s,i){vr(r,i,s)}),e=t.D,n=t.sa,e&&n&&vr(r,e,n),vr(r,"VER",t.ma),wh(t,r),r}function nk(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ba&&!t.qa?new Lr(new _h({ib:!0})):new Lr(t.qa),e.L=t.H,e}function sk(){}nt=sk.prototype;nt.xa=function(){};nt.wa=function(){};nt.va=function(){};nt.ua=function(){};nt.Oa=function(){};function hp(){if(Wl&&!(10<=Number(V5)))throw Error("Environmental error: no available transport.")}hp.prototype.g=function(t,e){return new rs(t,e)};function rs(t,e){Kr.call(this),this.g=new XE(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!sp(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!sp(e)&&(this.g.D=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new gu(this)}dn(rs,Kr);rs.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),q0(an(t.hb,t,e))),jn(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=rk(t,null,t.W),um(t)};rs.prototype.close=function(){r1(this.g)};rs.prototype.u=function(t){if(typeof t=="string"){var e={};e.__data__=t,bg(this.g,e)}else this.v?(e={},e.__data__=z0(t),bg(this.g,e)):bg(this.g,t)};rs.prototype.M=function(){this.g.j=null,delete this.j,r1(this.g),delete this.g,rs.Z.M.call(this)};function ik(t){X0.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}dn(ik,X0);function ok(){Y0.call(this),this.status=1}dn(ok,Y0);function gu(t){this.g=t}dn(gu,sk);gu.prototype.xa=function(){ln(this.g,"a")};gu.prototype.wa=function(t){ln(this.g,new ik(t))};gu.prototype.va=function(t){ln(this.g,new ok)};gu.prototype.ua=function(){ln(this.g,"b")};hp.prototype.createWebChannel=hp.prototype.g;rs.prototype.send=rs.prototype.u;rs.prototype.open=rs.prototype.m;rs.prototype.close=rs.prototype.close;rm.NO_ERROR=0;rm.TIMEOUT=8;rm.HTTP_ERROR=6;CE.COMPLETE="complete";jE.EventType=gh;gh.OPEN="a";gh.CLOSE="b";gh.ERROR="c";gh.MESSAGE="d";Kr.prototype.listen=Kr.prototype.N;Lr.prototype.listenOnce=Lr.prototype.O;Lr.prototype.getLastError=Lr.prototype.La;Lr.prototype.getLastErrorCode=Lr.prototype.Da;Lr.prototype.getStatus=Lr.prototype.ba;Lr.prototype.getResponseJson=Lr.prototype.Qa;Lr.prototype.getResponseText=Lr.prototype.ga;Lr.prototype.send=Lr.prototype.ea;var j3=function(){return new hp},M3=function(){return tm()},wg=rm,A3=CE,D3=Ca,jw={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},O3=_h,sd=jE,I3=Lr;const Mw="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}In.UNAUTHENTICATED=new In(null),In.GOOGLE_CREDENTIALS=new In("google-credentials-uid"),In.FIRST_PARTY=new In("first-party-uid"),In.MOCK_USER=new In("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yu="9.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va=new M0("@firebase/firestore");function Aw(){return va.logLevel}function ut(t,...e){if(va.logLevel<=Ht.DEBUG){const n=e.map(i1);va.debug(`Firestore (${yu}): ${t}`,...n)}}function Mi(t,...e){if(va.logLevel<=Ht.ERROR){const n=e.map(i1);va.error(`Firestore (${yu}): ${t}`,...n)}}function Dw(t,...e){if(va.logLevel<=Ht.WARN){const n=e.map(i1);va.warn(`Firestore (${yu}): ${t}`,...n)}}function i1(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(t="Unexpected state"){const e=`FIRESTORE (${yu}) INTERNAL ASSERTION FAILED: `+t;throw Mi(e),new Error(e)}function sr(t,e){t||Tt()}function Et(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $e={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class bt extends ko{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class P3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(In.UNAUTHENTICATED))}shutdown(){}}class L3{constructor(e){this.t=e,this.currentUser=In.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=h=>this.i!==r?(r=this.i,n(h)):Promise.resolve();let i=new Zo;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Zo,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const h=i;e.enqueueRetryable(async()=>{await h.promise,await s(this.currentUser)})},o=h=>{ut("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(h=>o(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?o(h):(ut("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Zo)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ut("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(sr(typeof r.accessToken=="string"),new R3(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return sr(e===null||typeof e=="string"),new In(e)}}class N3{constructor(e,n,r){this.type="FirstParty",this.user=In.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);const s=e.auth.getAuthHeaderValueForFirstParty([]);s&&this.headers.set("Authorization",s),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class F3{constructor(e,n,r){this.h=e,this.l=n,this.m=r}getToken(){return Promise.resolve(new N3(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(In.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class U3{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class V3{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,n){const r=i=>{i.error!=null&&ut("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.p;return this.p=i.token,ut("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{ut("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.g.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.g.getImmediate({optional:!0});i?s(i):ut("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(sr(typeof n.token=="string"),this.p=n.token,new U3(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B3(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=B3(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Xt(t,e){return t<e?-1:t>e?1:0}function $l(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new bt($e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new bt($e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new bt($e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new bt($e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ur.fromMillis(Date.now())}static fromDate(e){return Ur.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ur(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Xt(this.nanoseconds,e.nanoseconds):Xt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new jt(e)}static min(){return new jt(new Ur(0,0))}static max(){return new jt(new Ur(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e,n,r){n===void 0?n=0:n>e.length&&Tt(),r===void 0?r=e.length-n:r>e.length-n&&Tt(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Bc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Bc?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),a=n.get(s);if(i<a)return-1;if(i>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class _r extends Bc{construct(e,n,r){return new _r(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new bt($e.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new _r(n)}static emptyPath(){return new _r([])}}const G3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class gn extends Bc{construct(e,n,r){return new gn(e,n,r)}static isValidIdentifier(e){return G3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),gn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new gn(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new bt($e.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const o=e[s];if(o==="\\"){if(s+1===e.length)throw new bt($e.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[s+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new bt($e.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,s+=2}else o==="`"?(a=!a,s++):o!=="."||a?(r+=o,s++):(i(),s++)}if(i(),a)throw new bt($e.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new gn(n)}static emptyPath(){return new gn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.path=e}static fromPath(e){return new yt(_r.fromString(e))}static fromName(e){return new yt(_r.fromString(e).popFirst(5))}static empty(){return new yt(_r.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&_r.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return _r.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new yt(new _r(e.slice()))}}function z3(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=jt.fromTimestamp(r===1e9?new Ur(n+1,0):new Ur(n,r));return new vo(s,yt.empty(),e)}function q3(t){return new vo(t.readTime,t.key,-1)}class vo{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new vo(jt.min(),yt.empty(),-1)}static max(){return new vo(jt.max(),yt.empty(),-1)}}function W3(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=yt.comparator(t.documentKey,e.documentKey),n!==0?n:Xt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class H3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xh(t){if(t.code!==$e.FAILED_PRECONDITION||t.message!==$3)throw t;ut("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Tt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ze((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ze?n:ze.resolve(n)}catch(n){return ze.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ze.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ze.reject(n)}static resolve(e){return new ze((n,r)=>{n(e)})}static reject(e){return new ze((n,r)=>{r(e)})}static waitFor(e){return new ze((n,r)=>{let s=0,i=0,a=!1;e.forEach(o=>{++s,o.next(()=>{++i,a&&i===s&&n()},h=>r(h))}),a=!0,i===s&&n()})}static or(e){let n=ze.resolve(!1);for(const r of e)n=n.next(s=>s?ze.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new ze((r,s)=>{const i=e.length,a=new Array(i);let o=0;for(let h=0;h<i;h++){const d=h;n(e[d]).next(g=>{a[d]=g,++o,o===i&&r(a)},g=>s(g))}})}static doWhile(e,n){return new ze((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function Sh(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.it(r),this.rt=r=>n.writeSequenceNumber(r))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ow(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function vu(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function lk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */o1.ot=-1;class zr{constructor(e,n){this.comparator=e,this.root=n||Jr.EMPTY}insert(e,n){return new zr(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Jr.BLACK,null,null))}remove(e){return new zr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Jr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new id(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new id(this.root,e,this.comparator,!1)}getReverseIterator(){return new id(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new id(this.root,e,this.comparator,!0)}}class id{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Jr{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r!=null?r:Jr.RED,this.left=s!=null?s:Jr.EMPTY,this.right=i!=null?i:Jr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Jr(e!=null?e:this.key,n!=null?n:this.value,r!=null?r:this.color,s!=null?s:this.left,i!=null?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Jr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Jr.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Jr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Jr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Tt();const e=this.left.check();if(e!==this.right.check())throw Tt();return e+(this.isRed()?0:1)}}Jr.EMPTY=null,Jr.RED=!0,Jr.BLACK=!1;Jr.EMPTY=new class{constructor(){this.size=0}get key(){throw Tt()}get value(){throw Tt()}get color(){throw Tt()}get left(){throw Tt()}get right(){throw Tt()}copy(t,e,n,r,s){return this}insert(t,e,n){return new Jr(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e){this.comparator=e,this.data=new zr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Iw(this.data.getIterator())}getIteratorFrom(e){return new Iw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Vr)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Vr(this.comparator);return n.data=e,n}}class Iw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e){this.fields=e,e.sort(gn.comparator)}static empty(){return new Xs([])}unionWith(e){let n=new Vr(gn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Xs(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return $l(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=atob(e);return new cn(n)}static fromUint8Array(e){const n=function(r){let s="";for(let i=0;i<r.length;++i)s+=String.fromCharCode(r[i]);return s}(e);return new cn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Xt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}cn.EMPTY_BYTE_STRING=new cn("");const X3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _o(t){if(sr(!!t),typeof t=="string"){let e=0;const n=X3.exec(t);if(sr(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Rr(t.seconds),nanos:Rr(t.nanos)}}function Rr(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Hl(t){return typeof t=="string"?cn.fromBase64String(t):cn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uk(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function ck(t){const e=t.mapValue.fields.__previous_value__;return uk(e)?ck(e):e}function Gc(t){const e=_o(t.mapValue.fields.__local_write_time__.timestampValue);return new Ur(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y3{constructor(e,n,r,s,i,a,o,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.useFetchStreams=h}}class Xl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Xl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Xl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cm(t){return t==null}function dp(t){return t===0&&1/t==-1/0}function Q3(t){return typeof t=="number"&&Number.isInteger(t)&&!dp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const od={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function _a(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?uk(t)?4:K3(t)?9007199254740991:10:Tt()}function ei(t,e){if(t===e)return!0;const n=_a(t);if(n!==_a(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Gc(t).isEqual(Gc(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const i=_o(r.timestampValue),a=_o(s.timestampValue);return i.seconds===a.seconds&&i.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return Hl(r.bytesValue).isEqual(Hl(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return Rr(r.geoPointValue.latitude)===Rr(s.geoPointValue.latitude)&&Rr(r.geoPointValue.longitude)===Rr(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Rr(r.integerValue)===Rr(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const i=Rr(r.doubleValue),a=Rr(s.doubleValue);return i===a?dp(i)===dp(a):isNaN(i)&&isNaN(a)}return!1}(t,e);case 9:return $l(t.arrayValue.values||[],e.arrayValue.values||[],ei);case 10:return function(r,s){const i=r.mapValue.fields||{},a=s.mapValue.fields||{};if(Ow(i)!==Ow(a))return!1;for(const o in i)if(i.hasOwnProperty(o)&&(a[o]===void 0||!ei(i[o],a[o])))return!1;return!0}(t,e);default:return Tt()}}function zc(t,e){return(t.values||[]).find(n=>ei(n,e))!==void 0}function Yl(t,e){if(t===e)return 0;const n=_a(t),r=_a(e);if(n!==r)return Xt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Xt(t.booleanValue,e.booleanValue);case 2:return function(s,i){const a=Rr(s.integerValue||s.doubleValue),o=Rr(i.integerValue||i.doubleValue);return a<o?-1:a>o?1:a===o?0:isNaN(a)?isNaN(o)?0:-1:1}(t,e);case 3:return Rw(t.timestampValue,e.timestampValue);case 4:return Rw(Gc(t),Gc(e));case 5:return Xt(t.stringValue,e.stringValue);case 6:return function(s,i){const a=Hl(s),o=Hl(i);return a.compareTo(o)}(t.bytesValue,e.bytesValue);case 7:return function(s,i){const a=s.split("/"),o=i.split("/");for(let h=0;h<a.length&&h<o.length;h++){const d=Xt(a[h],o[h]);if(d!==0)return d}return Xt(a.length,o.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,i){const a=Xt(Rr(s.latitude),Rr(i.latitude));return a!==0?a:Xt(Rr(s.longitude),Rr(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,i){const a=s.values||[],o=i.values||[];for(let h=0;h<a.length&&h<o.length;++h){const d=Yl(a[h],o[h]);if(d)return d}return Xt(a.length,o.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,i){if(s===od.mapValue&&i===od.mapValue)return 0;if(s===od.mapValue)return 1;if(i===od.mapValue)return-1;const a=s.fields||{},o=Object.keys(a),h=i.fields||{},d=Object.keys(h);o.sort(),d.sort();for(let g=0;g<o.length&&g<d.length;++g){const m=Xt(o[g],d[g]);if(m!==0)return m;const c=Yl(a[o[g]],h[d[g]]);if(c!==0)return c}return Xt(o.length,d.length)}(t.mapValue,e.mapValue);default:throw Tt()}}function Rw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Xt(t,e);const n=_o(t),r=_o(e),s=Xt(n.seconds,r.seconds);return s!==0?s:Xt(n.nanos,r.nanos)}function hl(t){return Wy(t)}function Wy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const s=_o(r);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Hl(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,yt.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let s="[",i=!0;for(const a of r.values||[])i?i=!1:s+=",",s+=Wy(a);return s+"]"}(t.arrayValue):"mapValue"in t?function(r){const s=Object.keys(r.fields||{}).sort();let i="{",a=!0;for(const o of s)a?a=!1:i+=",",i+=`${o}:${Wy(r.fields[o])}`;return i+"}"}(t.mapValue):Tt();var e,n}function $y(t){return!!t&&"integerValue"in t}function a1(t){return!!t&&"arrayValue"in t}function Pw(t){return!!t&&"nullValue"in t}function Lw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function wd(t){return!!t&&"mapValue"in t}function ac(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return vu(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ac(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ac(t.arrayValue.values[n]);return e}return Object.assign({},t)}function K3(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e){this.value=e}static empty(){return new ls({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!wd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ac(n)}setAll(e){let n=gn.emptyPath(),r={},s=[];e.forEach((a,o)=>{if(!n.isImmediateParentOf(o)){const h=this.getFieldsMap(n);this.applyChanges(h,r,s),r={},s=[],n=o.popLast()}a?r[o.lastSegment()]=ac(a):s.push(o.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());wd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ei(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];wd(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){vu(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new ls(ac(this.value))}}function hk(t){const e=[];return vu(t.fields,(n,r)=>{const s=new gn([n]);if(wd(r)){const i=hk(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new Xs(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e,n,r,s,i,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.data=i,this.documentState=a}static newInvalidDocument(e){return new en(e,0,jt.min(),jt.min(),ls.empty(),0)}static newFoundDocument(e,n,r){return new en(e,1,n,jt.min(),r,0)}static newNoDocument(e,n){return new en(e,2,n,jt.min(),ls.empty(),0)}static newUnknownDocument(e,n){return new en(e,3,n,jt.min(),ls.empty(),2)}convertToFoundDocument(e,n){return this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ls.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ls.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=jt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof en&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new en(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z3{constructor(e,n=null,r=[],s=[],i=null,a=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=o,this.ut=null}}function Nw(t,e=null,n=[],r=[],s=null,i=null,a=null){return new Z3(t,e,n,r,s,i,a)}function l1(t){const e=Et(t);if(e.ut===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>{return(s=r).field.canonicalString()+s.op.toString()+hl(s.value);var s}).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),cm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>hl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>hl(r)).join(",")),e.ut=n}return e.ut}function J3(t){let e=t.path.canonicalString();return t.collectionGroup!==null&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(n=>{return`${(r=n).field.canonicalString()} ${r.op} ${hl(r.value)}`;var r}).join(", ")}]`),cm(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(n=>function(r){return`${r.field.canonicalString()} (${r.dir})`}(n)).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(n=>hl(n)).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(n=>hl(n)).join(",")),`Target(${e})`}function u1(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<t.orderBy.length;s++)if(!aF(t.orderBy[s],e.orderBy[s]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let s=0;s<t.filters.length;s++)if(n=t.filters[s],r=e.filters[s],n.op!==r.op||!n.field.isEqual(r.field)||!ei(n.value,r.value))return!1;var n,r;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Uw(t.startAt,e.startAt)&&Uw(t.endAt,e.endAt)}function Hy(t){return yt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class Fn extends class{}{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.ct(e,n,r):new eF(e,n,r):n==="array-contains"?new nF(e,r):n==="in"?new sF(e,r):n==="not-in"?new iF(e,r):n==="array-contains-any"?new oF(e,r):new Fn(e,n,r)}static ct(e,n,r){return n==="in"?new tF(e,r):new rF(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.at(Yl(n,this.value)):n!==null&&_a(this.value)===_a(n)&&this.at(Yl(n,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Tt()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class eF extends Fn{constructor(e,n,r){super(e,n,r),this.key=yt.fromName(r.referenceValue)}matches(e){const n=yt.comparator(e.key,this.key);return this.at(n)}}class tF extends Fn{constructor(e,n){super(e,"in",n),this.keys=dk("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class rF extends Fn{constructor(e,n){super(e,"not-in",n),this.keys=dk("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function dk(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>yt.fromName(r.referenceValue))}class nF extends Fn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return a1(n)&&zc(n.arrayValue,this.value)}}class sF extends Fn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&zc(this.value.arrayValue,n)}}class iF extends Fn{constructor(e,n){super(e,"not-in",n)}matches(e){if(zc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!zc(this.value.arrayValue,n)}}class oF extends Fn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!a1(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>zc(this.value.arrayValue,r))}}class fp{constructor(e,n){this.position=e,this.inclusive=n}}class lc{constructor(e,n="asc"){this.field=e,this.dir=n}}function aF(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Fw(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=yt.comparator(yt.fromName(a.referenceValue),n.key):r=Yl(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Uw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ei(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(e,n=null,r=[],s=[],i=null,a="F",o=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=o,this.endAt=h,this.lt=null,this.ft=null,this.startAt,this.endAt}}function lF(t,e,n,r,s,i,a,o){return new hm(t,e,n,r,s,i,a,o)}function c1(t){return new hm(t)}function Vw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function uF(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function cF(t){for(const e of t.filters)if(e.ht())return e.field;return null}function hF(t){return t.collectionGroup!==null}function qc(t){const e=Et(t);if(e.lt===null){e.lt=[];const n=cF(e),r=uF(e);if(n!==null&&r===null)n.isKeyField()||e.lt.push(new lc(n)),e.lt.push(new lc(gn.keyField(),"asc"));else{let s=!1;for(const i of e.explicitOrderBy)e.lt.push(i),i.field.isKeyField()&&(s=!0);if(!s){const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new lc(gn.keyField(),i))}}}return e.lt}function Ai(t){const e=Et(t);if(!e.ft)if(e.limitType==="F")e.ft=Nw(e.path,e.collectionGroup,qc(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const i of qc(e)){const a=i.dir==="desc"?"asc":"desc";n.push(new lc(i.field,a))}const r=e.endAt?new fp(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new fp(e.startAt.position,e.startAt.inclusive):null;e.ft=Nw(e.path,e.collectionGroup,n,e.filters,e.limit,r,s)}return e.ft}function Xy(t,e,n){return new hm(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function dm(t,e){return u1(Ai(t),Ai(e))&&t.limitType===e.limitType}function fk(t){return`${l1(Ai(t))}|lt:${t.limitType}`}function Yy(t){return`Query(target=${J3(Ai(t))}; limitType=${t.limitType})`}function h1(t,e){return e.isFoundDocument()&&function(n,r){const s=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):yt.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(t,e)&&function(n,r){for(const s of n.explicitOrderBy)if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(n,r){for(const s of n.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!function(s,i,a){const o=Fw(s,i,a);return s.inclusive?o<=0:o<0}(n.startAt,qc(n),r)||n.endAt&&!function(s,i,a){const o=Fw(s,i,a);return s.inclusive?o>=0:o>0}(n.endAt,qc(n),r))}(t,e)}function dF(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function pk(t){return(e,n)=>{let r=!1;for(const s of qc(t)){const i=fF(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function fF(t,e,n){const r=t.field.isKeyField()?yt.comparator(e.key,n.key):function(s,i,a){const o=i.data.field(s),h=a.data.field(s);return o!==null&&h!==null?Yl(o,h):Tt()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Tt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mk(t,e){if(t.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dp(e)?"-0":e}}function gk(t){return{integerValue:""+t}}function pF(t,e){return Q3(e)?gk(e):mk(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(){this._=void 0}}function mF(t,e,n){return t instanceof pp?function(r,s){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&(i.fields.__previous_value__=s),{mapValue:i}}(n,e):t instanceof Wc?vk(t,e):t instanceof $c?_k(t,e):function(r,s){const i=yk(r,s),a=Bw(i)+Bw(r._t);return $y(i)&&$y(r._t)?gk(a):mk(r.wt,a)}(t,e)}function gF(t,e,n){return t instanceof Wc?vk(t,e):t instanceof $c?_k(t,e):n}function yk(t,e){return t instanceof mp?$y(n=e)||function(r){return!!r&&"doubleValue"in r}(n)?e:{integerValue:0}:null;var n}class pp extends fm{}class Wc extends fm{constructor(e){super(),this.elements=e}}function vk(t,e){const n=bk(e);for(const r of t.elements)n.some(s=>ei(s,r))||n.push(r);return{arrayValue:{values:n}}}class $c extends fm{constructor(e){super(),this.elements=e}}function _k(t,e){let n=bk(e);for(const r of t.elements)n=n.filter(s=>!ei(s,r));return{arrayValue:{values:n}}}class mp extends fm{constructor(e,n){super(),this.wt=e,this._t=n}}function Bw(t){return Rr(t.integerValue||t.doubleValue)}function bk(t){return a1(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function yF(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof Wc&&r instanceof Wc||n instanceof $c&&r instanceof $c?$l(n.elements,r.elements,ei):n instanceof mp&&r instanceof mp?ei(n._t,r._t):n instanceof pp&&r instanceof pp}(t.transform,e.transform)}class vF{constructor(e,n){this.version=e,this.transformResults=n}}class vi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new vi}static exists(e){return new vi(void 0,e)}static updateTime(e){return new vi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class pm{}function wk(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Sk(t.key,vi.none()):new Th(t.key,t.data,vi.none());{const n=t.data,r=ls.empty();let s=new Vr(gn.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new ja(t.key,r,new Xs(s.toArray()),vi.none())}}function _F(t,e,n){t instanceof Th?function(r,s,i){const a=r.value.clone(),o=zw(r.fieldTransforms,s,i.transformResults);a.setAll(o),s.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ja?function(r,s,i){if(!xd(r.precondition,s))return void s.convertToUnknownDocument(i.version);const a=zw(r.fieldTransforms,s,i.transformResults),o=s.data;o.setAll(xk(r)),o.setAll(a),s.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,n):function(r,s,i){s.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function uc(t,e,n,r){return t instanceof Th?function(s,i,a,o){if(!xd(s.precondition,i))return a;const h=s.value.clone(),d=qw(s.fieldTransforms,o,i);return h.setAll(d),i.convertToFoundDocument(i.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof ja?function(s,i,a,o){if(!xd(s.precondition,i))return a;const h=qw(s.fieldTransforms,o,i),d=i.data;return d.setAll(xk(s)),d.setAll(h),i.convertToFoundDocument(i.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(t,e,n,r):function(s,i,a){return xd(s.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):a}(t,e,n)}function bF(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=yk(r.transform,s||null);i!=null&&(n===null&&(n=ls.empty()),n.set(r.field,i))}return n||null}function Gw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&$l(n,r,(s,i)=>yF(s,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Th extends pm{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ja extends pm{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function xk(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function zw(t,e,n){const r=new Map;sr(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,o=e.data.field(i.field);r.set(i.field,gF(a,o,n[s]))}return r}function qw(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,mF(i,a,e))}return r}class Sk extends pm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wF extends pm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xF{constructor(e){this.count=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Or,Ut;function SF(t){switch(t){default:return Tt();case $e.CANCELLED:case $e.UNKNOWN:case $e.DEADLINE_EXCEEDED:case $e.RESOURCE_EXHAUSTED:case $e.INTERNAL:case $e.UNAVAILABLE:case $e.UNAUTHENTICATED:return!1;case $e.INVALID_ARGUMENT:case $e.NOT_FOUND:case $e.ALREADY_EXISTS:case $e.PERMISSION_DENIED:case $e.FAILED_PRECONDITION:case $e.ABORTED:case $e.OUT_OF_RANGE:case $e.UNIMPLEMENTED:case $e.DATA_LOSS:return!0}}function Tk(t){if(t===void 0)return Mi("GRPC error has no .code"),$e.UNKNOWN;switch(t){case Or.OK:return $e.OK;case Or.CANCELLED:return $e.CANCELLED;case Or.UNKNOWN:return $e.UNKNOWN;case Or.DEADLINE_EXCEEDED:return $e.DEADLINE_EXCEEDED;case Or.RESOURCE_EXHAUSTED:return $e.RESOURCE_EXHAUSTED;case Or.INTERNAL:return $e.INTERNAL;case Or.UNAVAILABLE:return $e.UNAVAILABLE;case Or.UNAUTHENTICATED:return $e.UNAUTHENTICATED;case Or.INVALID_ARGUMENT:return $e.INVALID_ARGUMENT;case Or.NOT_FOUND:return $e.NOT_FOUND;case Or.ALREADY_EXISTS:return $e.ALREADY_EXISTS;case Or.PERMISSION_DENIED:return $e.PERMISSION_DENIED;case Or.FAILED_PRECONDITION:return $e.FAILED_PRECONDITION;case Or.ABORTED:return $e.ABORTED;case Or.OUT_OF_RANGE:return $e.OUT_OF_RANGE;case Or.UNIMPLEMENTED:return $e.UNIMPLEMENTED;case Or.DATA_LOSS:return $e.DATA_LOSS;default:return Tt()}}(Ut=Or||(Or={}))[Ut.OK=0]="OK",Ut[Ut.CANCELLED=1]="CANCELLED",Ut[Ut.UNKNOWN=2]="UNKNOWN",Ut[Ut.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ut[Ut.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ut[Ut.NOT_FOUND=5]="NOT_FOUND",Ut[Ut.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ut[Ut.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ut[Ut.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ut[Ut.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ut[Ut.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ut[Ut.ABORTED=10]="ABORTED",Ut[Ut.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ut[Ut.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ut[Ut.INTERNAL=13]="INTERNAL",Ut[Ut.UNAVAILABLE=14]="UNAVAILABLE",Ut[Ut.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){vu(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return lk(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TF=new zr(yt.comparator);function Di(){return TF}const Ek=new zr(yt.comparator);function $u(...t){let e=Ek;for(const n of t)e=e.insert(n.key,n);return e}function kk(t){let e=Ek;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Xo(){return cc()}function Ck(){return cc()}function cc(){return new _u(t=>t.toString(),(t,e)=>t.isEqual(e))}const EF=new zr(yt.comparator),kF=new Vr(yt.comparator);function Rt(...t){let e=kF;for(const n of t)e=e.add(n);return e}const CF=new Vr(Xt);function jk(){return CF}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n){const r=new Map;return r.set(e,Eh.createSynthesizedTargetChangeForCurrentChange(e,n)),new mm(jt.min(),r,jk(),Di(),Rt())}}class Eh{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n){return new Eh(cn.EMPTY_BYTE_STRING,n,Rt(),Rt(),Rt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e,n,r,s){this.gt=e,this.removedTargetIds=n,this.key=r,this.yt=s}}class Mk{constructor(e,n){this.targetId=e,this.It=n}}class Ak{constructor(e,n,r=cn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Ww{constructor(){this.Tt=0,this.Et=Hw(),this.At=cn.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return this.Tt!==0}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=Rt(),n=Rt(),r=Rt();return this.Et.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Tt()}}),new Eh(this.At,this.Rt,e,n,r)}Dt(){this.bt=!1,this.Et=Hw()}Ct(e,n){this.bt=!0,this.Et=this.Et.insert(e,n)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Mt(){this.bt=!0,this.Rt=!0}}class jF{constructor(e){this.Ot=e,this.Ft=new Map,this.$t=Di(),this.Bt=$w(),this.Lt=new Vr(Xt)}Ut(e){for(const n of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(n,e.yt):this.Kt(n,e.key,e.yt);for(const n of e.removedTargetIds)this.Kt(n,e.key,e.yt)}Gt(e){this.forEachTarget(e,n=>{const r=this.Qt(n);switch(e.state){case 0:this.jt(n)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||this.removeTarget(n);break;case 3:this.jt(n)&&(r.Mt(),r.Vt(e.resumeToken));break;case 4:this.jt(n)&&(this.Wt(n),r.Vt(e.resumeToken));break;default:Tt()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ft.forEach((r,s)=>{this.jt(s)&&n(s)})}zt(e){const n=e.targetId,r=e.It.count,s=this.Ht(n);if(s){const i=s.target;if(Hy(i))if(r===0){const a=new yt(i.path);this.Kt(n,a,en.newNoDocument(a,jt.min()))}else sr(r===1);else this.Jt(n)!==r&&(this.Wt(n),this.Lt=this.Lt.add(n))}}Yt(e){const n=new Map;this.Ft.forEach((i,a)=>{const o=this.Ht(a);if(o){if(i.current&&Hy(o.target)){const h=new yt(o.target.path);this.$t.get(h)!==null||this.Xt(a,h)||this.Kt(a,h,en.newNoDocument(h,e))}i.vt&&(n.set(a,i.St()),i.Dt())}});let r=Rt();this.Bt.forEach((i,a)=>{let o=!0;a.forEachWhile(h=>{const d=this.Ht(h);return!d||d.purpose===2||(o=!1,!1)}),o&&(r=r.add(i))}),this.$t.forEach((i,a)=>a.setReadTime(e));const s=new mm(e,n,this.Lt,this.$t,r);return this.$t=Di(),this.Bt=$w(),this.Lt=new Vr(Xt),s}qt(e,n){if(!this.jt(e))return;const r=this.Xt(e,n.key)?2:0;this.Qt(e).Ct(n.key,r),this.$t=this.$t.insert(n.key,n),this.Bt=this.Bt.insert(n.key,this.Zt(n.key).add(e))}Kt(e,n,r){if(!this.jt(e))return;const s=this.Qt(e);this.Xt(e,n)?s.Ct(n,1):s.xt(n),this.Bt=this.Bt.insert(n,this.Zt(n).delete(e)),r&&(this.$t=this.$t.insert(n,r))}removeTarget(e){this.Ft.delete(e)}Jt(e){const n=this.Qt(e).St();return this.Ot.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let n=this.Ft.get(e);return n||(n=new Ww,this.Ft.set(e,n)),n}Zt(e){let n=this.Bt.get(e);return n||(n=new Vr(Xt),this.Bt=this.Bt.insert(e,n)),n}jt(e){const n=this.Ht(e)!==null;return n||ut("WatchChangeAggregator","Detected inactive target",e),n}Ht(e){const n=this.Ft.get(e);return n&&n.Pt?null:this.Ot.te(e)}Wt(e){this.Ft.set(e,new Ww),this.Ot.getRemoteKeysForTarget(e).forEach(n=>{this.Kt(e,n,null)})}Xt(e,n){return this.Ot.getRemoteKeysForTarget(e).has(n)}}function $w(){return new zr(yt.comparator)}function Hw(){return new zr(yt.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MF=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),AF=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))();class DF{constructor(e,n){this.databaseId=e,this.dt=n}}function gp(t,e){return t.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Dk(t,e){return t.dt?e.toBase64():e.toUint8Array()}function OF(t,e){return gp(t,e.toTimestamp())}function _i(t){return sr(!!t),jt.fromTimestamp(function(e){const n=_o(e);return new Ur(n.seconds,n.nanos)}(t))}function d1(t,e){return function(n){return new _r(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function Ok(t){const e=_r.fromString(t);return sr(Pk(e)),e}function Qy(t,e){return d1(t.databaseId,e.path)}function xg(t,e){const n=Ok(e);if(n.get(1)!==t.databaseId.projectId)throw new bt($e.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new bt($e.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new yt(Ik(n))}function Ky(t,e){return d1(t.databaseId,e)}function IF(t){const e=Ok(t);return e.length===4?_r.emptyPath():Ik(e)}function Zy(t){return new _r(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Ik(t){return sr(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Xw(t,e,n){return{name:Qy(t,e),fields:n.value.mapValue.fields}}function RF(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Tt()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,d){return h.dt?(sr(d===void 0||typeof d=="string"),cn.fromBase64String(d||"")):(sr(d===void 0||d instanceof Uint8Array),cn.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(h){const d=h.code===void 0?$e.UNKNOWN:Tk(h.code);return new bt(d,h.message||"")}(a);n=new Ak(r,s,i,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=xg(t,r.document.name),i=_i(r.document.updateTime),a=new ls({mapValue:{fields:r.document.fields}}),o=en.newFoundDocument(s,i,a),h=r.targetIds||[],d=r.removedTargetIds||[];n=new Sd(h,d,o.key,o)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=xg(t,r.document),i=r.readTime?_i(r.readTime):jt.min(),a=en.newNoDocument(s,i),o=r.removedTargetIds||[];n=new Sd([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=xg(t,r.document),i=r.removedTargetIds||[];n=new Sd([],i,s,null)}else{if(!("filter"in e))return Tt();{e.filter;const r=e.filter;r.targetId;const s=r.count||0,i=new xF(s),a=r.targetId;n=new Mk(a,i)}}return n}function PF(t,e){let n;if(e instanceof Th)n={update:Xw(t,e.key,e.value)};else if(e instanceof Sk)n={delete:Qy(t,e.key)};else if(e instanceof ja)n={update:Xw(t,e.key,e.data),updateMask:WF(e.fieldMask)};else{if(!(e instanceof wF))return Tt();n={verify:Qy(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,i){const a=i.transform;if(a instanceof pp)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Wc)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof $c)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof mp)return{fieldPath:i.field.canonicalString(),increment:a._t};throw Tt()}(0,r))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:OF(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Tt()}(t,e.precondition)),n}function LF(t,e){return t&&t.length>0?(sr(e!==void 0),t.map(n=>function(r,s){let i=r.updateTime?_i(r.updateTime):_i(s);return i.isEqual(jt.min())&&(i=_i(s)),new vF(i,r.transformResults||[])}(n,e))):[]}function NF(t,e){return{documents:[Ky(t,e.path)]}}function FF(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=Ky(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Ky(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(h){if(h.length===0)return;const d=h.map(g=>function(m){if(m.op==="=="){if(Lw(m.value))return{unaryFilter:{field:Ua(m.field),op:"IS_NAN"}};if(Pw(m.value))return{unaryFilter:{field:Ua(m.field),op:"IS_NULL"}}}else if(m.op==="!="){if(Lw(m.value))return{unaryFilter:{field:Ua(m.field),op:"IS_NOT_NAN"}};if(Pw(m.value))return{unaryFilter:{field:Ua(m.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ua(m.field),op:GF(m.op),value:m.value}}}(g));return d.length===1?d[0]:{compositeFilter:{op:"AND",filters:d}}}(e.filters);s&&(n.structuredQuery.where=s);const i=function(h){if(h.length!==0)return h.map(d=>function(g){return{field:Ua(g.field),direction:BF(g.dir)}}(d))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const a=function(h,d){return h.dt||cm(d)?d:{value:d}}(t,e.limit);var o;return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt={before:(o=e.startAt).inclusive,values:o.position}),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),n}function UF(t){let e=IF(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){sr(r===1);const g=n.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let i=[];n.where&&(i=Rk(n.where));let a=[];n.orderBy&&(a=n.orderBy.map(g=>function(m){return new lc(rl(m.field),function(c){switch(c){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(g)));let o=null;n.limit&&(o=function(g){let m;return m=typeof g=="object"?g.value:g,cm(m)?null:m}(n.limit));let h=null;n.startAt&&(h=function(g){const m=!!g.before,c=g.values||[];return new fp(c,m)}(n.startAt));let d=null;return n.endAt&&(d=function(g){const m=!g.before,c=g.values||[];return new fp(c,m)}(n.endAt)),lF(e,s,a,i,o,"F",h,d)}function VF(t,e){const n=function(r,s){switch(s){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Tt()}}(0,e.purpose);return n==null?null:{"goog-listen-tags":n}}function Rk(t){return t?t.unaryFilter!==void 0?[qF(t)]:t.fieldFilter!==void 0?[zF(t)]:t.compositeFilter!==void 0?t.compositeFilter.filters.map(e=>Rk(e)).reduce((e,n)=>e.concat(n)):Tt():[]}function BF(t){return MF[t]}function GF(t){return AF[t]}function Ua(t){return{fieldPath:t.canonicalString()}}function rl(t){return gn.fromServerFormat(t.fieldPath)}function zF(t){return Fn.create(rl(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Tt()}}(t.fieldFilter.op),t.fieldFilter.value)}function qF(t){switch(t.unaryFilter.op){case"IS_NAN":const e=rl(t.unaryFilter.field);return Fn.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=rl(t.unaryFilter.field);return Fn.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=rl(t.unaryFilter.field);return Fn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=rl(t.unaryFilter.field);return Fn.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Tt()}}function WF(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Pk(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $F{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&_F(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=uc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=uc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Ck();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let o=this.applyToLocalView(a,i.mutatedFields);o=n.has(s.key)?null:o;const h=wk(a,o);h!==null&&r.set(s.key,h),a.isValidDocument()||a.convertToNoDocument(jt.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Rt())}isEqual(e){return this.batchId===e.batchId&&$l(this.mutations,e.mutations,(n,r)=>Gw(n,r))&&$l(this.baseMutations,e.baseMutations,(n,r)=>Gw(n,r))}}class f1{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){sr(e.mutations.length===r.length);let s=EF;const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new f1(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HF{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e,n,r,s,i=jt.min(),a=jt.min(),o=cn.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o}withSequenceNumber(e){return new Jo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new Jo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Jo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XF{constructor(e){this.ne=e}}function YF(t){const e=UF({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Xy(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QF{constructor(){this.ze=new KF}addToCollectionParentIndex(e,n){return this.ze.add(n),ze.resolve()}getCollectionParents(e,n){return ze.resolve(this.ze.getEntries(n))}addFieldIndex(e,n){return ze.resolve()}deleteFieldIndex(e,n){return ze.resolve()}getDocumentsMatchingTarget(e,n){return ze.resolve(null)}getIndexType(e,n){return ze.resolve(0)}getFieldIndexes(e,n){return ze.resolve([])}getNextCollectionGroupToUpdate(e){return ze.resolve(null)}getMinOffset(e,n){return ze.resolve(vo.min())}getMinOffsetFromCollectionGroup(e,n){return ze.resolve(vo.min())}updateCollectionGroup(e,n,r){return ze.resolve()}updateIndexEntries(e,n){return ze.resolve()}}class KF{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Vr(_r.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Vr(_r.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new Ql(0)}static Rn(){return new Ql(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZF{constructor(){this.changes=new _u(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,en.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ze.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JF{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e6{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.getBaseDocument(e,n,r))).next(s=>(r!==null&&uc(r.mutation,s,Xs.empty(),Ur.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Rt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Rt()){const s=Xo();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=$u();return i.forEach((o,h)=>{a=a.insert(o,h.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=Xo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Rt()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,o)=>{n.set(a,o)})})}computeViews(e,n,r,s){let i=Di();const a=cc(),o=cc();return n.forEach((h,d)=>{const g=r.get(d.key);s.has(d.key)&&(g===void 0||g.mutation instanceof ja)?i=i.insert(d.key,d):g!==void 0&&(a.set(d.key,g.mutation.getFieldMask()),uc(g.mutation,d,g.mutation.getFieldMask(),Ur.now()))}),this.recalculateAndSaveOverlays(e,i).next(h=>(h.forEach((d,g)=>a.set(d,g)),n.forEach((d,g)=>{var m;return o.set(d,new JF(g,(m=a.get(d))!==null&&m!==void 0?m:null))}),o))}recalculateAndSaveOverlays(e,n){const r=cc();let s=new zr((a,o)=>a-o),i=Rt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const o of a)o.keys().forEach(h=>{const d=n.get(h);if(d===null)return;let g=r.get(h)||Xs.empty();g=o.applyToLocalView(d,g),r.set(h,g);const m=(s.get(o.batchId)||Rt()).add(h);s=s.insert(o.batchId,m)})}).next(()=>{const a=[],o=s.getReverseIterator();for(;o.hasNext();){const h=o.getNext(),d=h.key,g=h.value,m=Ck();g.forEach(c=>{if(!i.has(c)){const l=wk(n.get(c),r.get(c));l!==null&&m.set(c,l),i=i.add(c)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,m))}return ze.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(s){return yt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):hF(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):ze.resolve(Xo());let o=-1,h=i;return a.next(d=>ze.forEach(d,(g,m)=>(o<m.largestBatchId&&(o=m.largestBatchId),i.get(g)?ze.resolve():this.getBaseDocument(e,g,m).next(c=>{h=h.insert(g,c)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,h,d,Rt())).next(g=>({batchId:o,changes:kk(g)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new yt(n)).next(r=>{let s=$u();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const s=n.collectionGroup;let i=$u();return this.indexManager.getCollectionParents(e,s).next(a=>ze.forEach(a,o=>{const h=function(d,g){return new hm(g,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,o.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r).next(d=>{d.forEach((g,m)=>{i=i.insert(g,m)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,r){let s;return this.remoteDocumentCache.getAllFromCollection(e,n.path,r).next(i=>(s=i,this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId))).next(i=>{i.forEach((o,h)=>{const d=h.getKey();s.get(d)===null&&(s=s.insert(d,en.newInvalidDocument(d)))});let a=$u();return s.forEach((o,h)=>{const d=i.get(o);d!==void 0&&uc(d.mutation,h,Xs.empty(),Ur.now()),h1(n,h)&&(a=a.insert(o,h))}),a})}getBaseDocument(e,n,r){return r===null||r.mutation.type===1?this.remoteDocumentCache.getEntry(e,n):ze.resolve(en.newInvalidDocument(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,n){return ze.resolve(this.Jn.get(n))}saveBundleMetadata(e,n){var r;return this.Jn.set(n.id,{id:(r=n).id,version:r.version,createTime:_i(r.createTime)}),ze.resolve()}getNamedQuery(e,n){return ze.resolve(this.Yn.get(n))}saveNamedQuery(e,n){return this.Yn.set(n.name,function(r){return{name:r.name,query:YF(r.bundledQuery),readTime:_i(r.readTime)}}(n)),ze.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r6{constructor(){this.overlays=new zr(yt.comparator),this.Xn=new Map}getOverlay(e,n){return ze.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Xo();return ze.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ie(e,n,i)}),ze.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Xn.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Xn.delete(r)),ze.resolve()}getOverlaysForCollection(e,n,r){const s=Xo(),i=n.length+1,a=new yt(n.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const h=o.getNext().value,d=h.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&h.largestBatchId>r&&s.set(h.getKey(),h)}return ze.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new zr((d,g)=>d-g);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let g=i.get(d.largestBatchId);g===null&&(g=Xo(),i=i.insert(d.largestBatchId,g)),g.set(d.getKey(),d)}}const o=Xo(),h=i.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((d,g)=>o.set(d,g)),!(o.size()>=s)););return ze.resolve(o)}ie(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.Xn.get(s.largestBatchId).delete(r.key);this.Xn.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new HF(n,r));let i=this.Xn.get(n);i===void 0&&(i=Rt(),this.Xn.set(n,i)),this.Xn.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(){this.Zn=new Vr(Wr.ts),this.es=new Vr(Wr.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,n){const r=new Wr(e,n);this.Zn=this.Zn.add(r),this.es=this.es.add(r)}ss(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.rs(new Wr(e,n))}os(e,n){e.forEach(r=>this.removeReference(r,n))}us(e){const n=new yt(new _r([])),r=new Wr(n,e),s=new Wr(n,e+1),i=[];return this.es.forEachInRange([r,s],a=>{this.rs(a),i.push(a.key)}),i}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const n=new yt(new _r([])),r=new Wr(n,e),s=new Wr(n,e+1);let i=Rt();return this.es.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new Wr(e,0),r=this.Zn.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Wr{constructor(e,n){this.key=e,this.ls=n}static ts(e,n){return yt.comparator(e.key,n.key)||Xt(e.ls,n.ls)}static ns(e,n){return Xt(e.ls,n.ls)||yt.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n6{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.fs=1,this.ds=new Vr(Wr.ts)}checkEmpty(e){return ze.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.fs;this.fs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new $F(i,n,r,s);this.mutationQueue.push(a);for(const o of s)this.ds=this.ds.add(new Wr(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return ze.resolve(a)}lookupMutationBatch(e,n){return ze.resolve(this._s(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ws(r),i=s<0?0:s;return ze.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ze.resolve(this.mutationQueue.length===0?-1:this.fs-1)}getAllMutationBatches(e){return ze.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Wr(n,0),s=new Wr(n,Number.POSITIVE_INFINITY),i=[];return this.ds.forEachInRange([r,s],a=>{const o=this._s(a.ls);i.push(o)}),ze.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Vr(Xt);return n.forEach(s=>{const i=new Wr(s,0),a=new Wr(s,Number.POSITIVE_INFINITY);this.ds.forEachInRange([i,a],o=>{r=r.add(o.ls)})}),ze.resolve(this.gs(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;yt.isDocumentKey(i)||(i=i.child(""));const a=new Wr(new yt(i),0);let o=new Vr(Xt);return this.ds.forEachWhile(h=>{const d=h.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(o=o.add(h.ls)),!0)},a),ze.resolve(this.gs(o))}gs(e){const n=[];return e.forEach(r=>{const s=this._s(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){sr(this.ys(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.ds;return ze.forEach(n.mutations,s=>{const i=new Wr(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.ds=r})}In(e){}containsKey(e,n){const r=new Wr(n,0),s=this.ds.firstAfterOrEqual(r);return ze.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ze.resolve()}ys(e,n){return this.ws(e)}ws(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}_s(e){const n=this.ws(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s6{constructor(e){this.ps=e,this.docs=new zr(yt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.ps(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ze.resolve(r?r.document.mutableCopy():en.newInvalidDocument(n))}getEntries(e,n){let r=Di();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():en.newInvalidDocument(s))}),ze.resolve(r)}getAllFromCollection(e,n,r){let s=Di();const i=new yt(n.child("")),a=this.docs.getIteratorFrom(i);for(;a.hasNext();){const{key:o,value:{document:h}}=a.getNext();if(!n.isPrefixOf(o.path))break;o.path.length>n.length+1||W3(q3(h),r)<=0||(s=s.insert(h.key,h.mutableCopy()))}return ze.resolve(s)}getAllFromCollectionGroup(e,n,r,s){Tt()}Is(e,n){return ze.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new i6(this)}getSize(e){return ze.resolve(this.size)}}class i6 extends ZF{constructor(e){super(),this.zn=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.zn.addEntry(e,s)):this.zn.removeEntry(r)}),ze.waitFor(n)}getFromCache(e,n){return this.zn.getEntry(e,n)}getAllFromCache(e,n){return this.zn.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o6{constructor(e){this.persistence=e,this.Ts=new _u(n=>l1(n),u1),this.lastRemoteSnapshotVersion=jt.min(),this.highestTargetId=0,this.Es=0,this.As=new p1,this.targetCount=0,this.Rs=Ql.An()}forEachTarget(e,n){return this.Ts.forEach((r,s)=>n(s)),ze.resolve()}getLastRemoteSnapshotVersion(e){return ze.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ze.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),ze.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Es&&(this.Es=n),ze.resolve()}vn(e){this.Ts.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Rs=new Ql(n),this.highestTargetId=n),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,n){return this.vn(n),this.targetCount+=1,ze.resolve()}updateTargetData(e,n){return this.vn(n),ze.resolve()}removeTargetData(e,n){return this.Ts.delete(n.target),this.As.us(n.targetId),this.targetCount-=1,ze.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Ts.forEach((a,o)=>{o.sequenceNumber<=n&&r.get(o.targetId)===null&&(this.Ts.delete(a),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),s++)}),ze.waitFor(i).next(()=>s)}getTargetCount(e){return ze.resolve(this.targetCount)}getTargetData(e,n){const r=this.Ts.get(n)||null;return ze.resolve(r)}addMatchingKeys(e,n,r){return this.As.ss(n,r),ze.resolve()}removeMatchingKeys(e,n,r){this.As.os(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),ze.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.As.us(n),ze.resolve()}getMatchingKeysForTargetId(e,n){const r=this.As.hs(n);return ze.resolve(r)}containsKey(e,n){return ze.resolve(this.As.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a6{constructor(e,n){this.bs={},this.overlays={},this.Ps=new o1(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new o6(this),this.indexManager=new QF,this.remoteDocumentCache=function(r){return new s6(r)}(r=>this.referenceDelegate.Ss(r)),this.wt=new XF(n),this.Ds=new t6(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new r6,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.bs[e.toKey()];return r||(r=new n6(n,this.referenceDelegate),this.bs[e.toKey()]=r),r}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,n,r){ut("MemoryPersistence","Starting transaction:",e);const s=new l6(this.Ps.next());return this.referenceDelegate.Cs(),r(s).next(i=>this.referenceDelegate.xs(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ns(e,n){return ze.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,n)))}}class l6 extends H3{constructor(e){super(),this.currentSequenceNumber=e}}class m1{constructor(e){this.persistence=e,this.ks=new p1,this.Ms=null}static Os(e){return new m1(e)}get Fs(){if(this.Ms)return this.Ms;throw Tt()}addReference(e,n,r){return this.ks.addReference(r,n),this.Fs.delete(r.toString()),ze.resolve()}removeReference(e,n,r){return this.ks.removeReference(r,n),this.Fs.add(r.toString()),ze.resolve()}markPotentiallyOrphaned(e,n){return this.Fs.add(n.toString()),ze.resolve()}removeTarget(e,n){this.ks.us(n.targetId).forEach(s=>this.Fs.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Fs.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Cs(){this.Ms=new Set}xs(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ze.forEach(this.Fs,r=>{const s=yt.fromPath(r);return this.$s(e,s).next(i=>{i||n.removeEntry(s,jt.min())})}).next(()=>(this.Ms=null,n.apply(e)))}updateLimboDocument(e,n){return this.$s(e,n).next(r=>{r?this.Fs.delete(n.toString()):this.Fs.add(n.toString())})}Ss(e){return 0}$s(e,n){return ze.or([()=>ze.resolve(this.ks.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ns(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Pi=r,this.vi=s}static Vi(e,n){let r=Rt(),s=Rt();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new g1(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u6{constructor(){this.Si=!1}initialize(e,n){this.Di=e,this.indexManager=n,this.Si=!0}getDocumentsMatchingQuery(e,n,r,s){return this.Ci(e,n).next(i=>i||this.xi(e,n,s,r)).next(i=>i||this.Ni(e,n))}Ci(e,n){if(Vw(n))return ze.resolve(null);let r=Ai(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Xy(n,null,"F"),r=Ai(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=Rt(...i);return this.Di.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,r).next(h=>{const d=this.ki(n,o);return this.Mi(n,d,a,h.readTime)?this.Ci(e,Xy(n,null,"F")):this.Oi(e,d,n,h)}))})))}xi(e,n,r,s){return Vw(n)||s.isEqual(jt.min())?this.Ni(e,n):this.Di.getDocuments(e,r).next(i=>{const a=this.ki(n,i);return this.Mi(n,a,r,s)?this.Ni(e,n):(Aw()<=Ht.DEBUG&&ut("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Yy(n)),this.Oi(e,a,n,z3(s,-1)))})}ki(e,n){let r=new Vr(pk(e));return n.forEach((s,i)=>{h1(e,i)&&(r=r.add(i))}),r}Mi(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ni(e,n){return Aw()<=Ht.DEBUG&&ut("QueryEngine","Using full collection scan to execute query:",Yy(n)),this.Di.getDocumentsMatchingQuery(e,n,vo.min())}Oi(e,n,r,s){return this.Di.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c6{constructor(e,n,r,s){this.persistence=e,this.Fi=n,this.wt=s,this.$i=new zr(Xt),this.Bi=new _u(i=>l1(i),u1),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(r)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new e6(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.$i))}}function h6(t,e,n,r){return new c6(t,e,n,r)}async function Lk(t,e){const n=Et(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.qi(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],o=[];let h=Rt();for(const d of s){a.push(d.batchId);for(const g of d.mutations)h=h.add(g.key)}for(const d of i){o.push(d.batchId);for(const g of d.mutations)h=h.add(g.key)}return n.localDocuments.getDocuments(r,h).next(d=>({Ki:d,removedBatchIds:a,addedBatchIds:o}))})})}function d6(t,e){const n=Et(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ui.newChangeBuffer({trackRemovals:!0});return function(a,o,h,d){const g=h.batch,m=g.keys();let c=ze.resolve();return m.forEach(l=>{c=c.next(()=>d.getEntry(o,l)).next(u=>{const f=h.docVersions.get(l);sr(f!==null),u.version.compareTo(f)<0&&(g.applyToRemoteDocument(u,h),u.isValidDocument()&&(u.setReadTime(h.commitVersion),d.addEntry(u)))})}),c.next(()=>a.mutationQueue.removeMutationBatch(o,g))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let o=Rt();for(let h=0;h<a.mutationResults.length;++h)a.mutationResults[h].transformResults.length>0&&(o=o.add(a.batch.mutations[h].key));return o}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Nk(t){const e=Et(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Vs.getLastRemoteSnapshotVersion(n))}function f6(t,e){const n=Et(t),r=e.snapshotVersion;let s=n.$i;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.Ui.newChangeBuffer({trackRemovals:!0});s=n.$i;const o=[];e.targetChanges.forEach((g,m)=>{const c=s.get(m);if(!c)return;o.push(n.Vs.removeMatchingKeys(i,g.removedDocuments,m).next(()=>n.Vs.addMatchingKeys(i,g.addedDocuments,m)));let l=c.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.has(m)?l=l.withResumeToken(cn.EMPTY_BYTE_STRING,jt.min()).withLastLimboFreeSnapshotVersion(jt.min()):g.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(g.resumeToken,r)),s=s.insert(m,l),function(u,f,p){return u.resumeToken.approximateByteSize()===0||f.snapshotVersion.toMicroseconds()-u.snapshotVersion.toMicroseconds()>=3e8?!0:p.addedDocuments.size+p.modifiedDocuments.size+p.removedDocuments.size>0}(c,l,g)&&o.push(n.Vs.updateTargetData(i,l))});let h=Di(),d=Rt();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(i,g))}),o.push(p6(i,a,e.documentUpdates).next(g=>{h=g.Gi,d=g.Qi})),!r.isEqual(jt.min())){const g=n.Vs.getLastRemoteSnapshotVersion(i).next(m=>n.Vs.setTargetsMetadata(i,i.currentSequenceNumber,r));o.push(g)}return ze.waitFor(o).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,h,d)).next(()=>h)}).then(i=>(n.$i=s,i))}function p6(t,e,n){let r=Rt(),s=Rt();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=Di();return n.forEach((o,h)=>{const d=i.get(o);h.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(o)),h.isNoDocument()&&h.version.isEqual(jt.min())?(e.removeEntry(o,h.readTime),a=a.insert(o,h)):!d.isValidDocument()||h.version.compareTo(d.version)>0||h.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(h),a=a.insert(o,h)):ut("LocalStore","Ignoring outdated watch update for ",o,". Current version:",d.version," Watch version:",h.version)}),{Gi:a,Qi:s}})}function m6(t,e){const n=Et(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function g6(t,e){const n=Et(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Vs.getTargetData(r,e).next(i=>i?(s=i,ze.resolve(s)):n.Vs.allocateTargetId(r).next(a=>(s=new Jo(e,a,0,r.currentSequenceNumber),n.Vs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.$i.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.$i=n.$i.insert(r.targetId,r),n.Bi.set(e,r.targetId)),r})}async function Jy(t,e,n){const r=Et(t),s=r.$i.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Sh(a))throw a;ut("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.$i=r.$i.remove(e),r.Bi.delete(s.target)}function Yw(t,e,n){const r=Et(t);let s=jt.min(),i=Rt();return r.persistence.runTransaction("Execute query","readonly",a=>function(o,h,d){const g=Et(o),m=g.Bi.get(d);return m!==void 0?ze.resolve(g.$i.get(m)):g.Vs.getTargetData(h,d)}(r,a,Ai(e)).next(o=>{if(o)return s=o.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(a,o.targetId).next(h=>{i=h})}).next(()=>r.Fi.getDocumentsMatchingQuery(a,e,n?s:jt.min(),n?i:Rt())).next(o=>(y6(r,dF(e),o),{documents:o,ji:i})))}function y6(t,e,n){let r=jt.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Li.set(e,r)}class Qw{constructor(){this.activeTargetIds=jk()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class v6{constructor(){this.Fr=new Qw,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,n,r){this.$r[e]=n}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new Qw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _6{Br(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){ut("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){ut("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x6 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.so=n+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,n,r,s,i){const a=this.oo(e,n);ut("RestConnection","Sending: ",a,r);const o={};return this.uo(o,s,i),this.co(e,a,o,r).then(h=>(ut("RestConnection","Received: ",h),h),h=>{throw Dw("RestConnection",`${e} failed with error: `,h,"url: ",a,"request:",r),h})}ao(e,n,r,s,i,a){return this.ro(e,n,r,s,i)}uo(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+yu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}oo(e,n){const r=b6[e];return`${this.so}/v1/${n}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,n,r,s){return new Promise((i,a)=>{const o=new I3;o.listenOnce(A3.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case wg.NO_ERROR:const d=o.getResponseJson();ut("Connection","XHR received:",JSON.stringify(d)),i(d);break;case wg.TIMEOUT:ut("Connection",'RPC "'+e+'" timed out'),a(new bt($e.DEADLINE_EXCEEDED,"Request time out"));break;case wg.HTTP_ERROR:const g=o.getStatus();if(ut("Connection",'RPC "'+e+'" failed with status:',g,"response text:",o.getResponseText()),g>0){const m=o.getResponseJson().error;if(m&&m.status&&m.message){const c=function(l){const u=l.toLowerCase().replace(/_/g,"-");return Object.values($e).indexOf(u)>=0?u:$e.UNKNOWN}(m.status);a(new bt(c,m.message))}else a(new bt($e.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new bt($e.UNAVAILABLE,"Connection failed."));break;default:Tt()}}finally{ut("Connection",'RPC "'+e+'" completed.')}});const h=JSON.stringify(s);o.send(n,"POST",h,r,15)})}ho(e,n,r){const s=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=j3(),a=M3(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new O3({})),this.uo(o.initMessageHeaders,n,r),qL()||WL()||$L()||HL()||XL()||jT()||(o.httpHeadersOverwriteParam="$httpHeaders");const h=s.join("");ut("Connection","Creating WebChannel: "+h,o);const d=i.createWebChannel(h,o);let g=!1,m=!1;const c=new w6({jr:u=>{m?ut("Connection","Not sending because WebChannel is closed:",u):(g||(ut("Connection","Opening WebChannel transport."),d.open(),g=!0),ut("Connection","WebChannel sending:",u),d.send(u))},Wr:()=>d.close()}),l=(u,f,p)=>{u.listen(f,y=>{try{p(y)}catch(_){setTimeout(()=>{throw _},0)}})};return l(d,sd.EventType.OPEN,()=>{m||ut("Connection","WebChannel transport opened.")}),l(d,sd.EventType.CLOSE,()=>{m||(m=!0,ut("Connection","WebChannel transport closed"),c.eo())}),l(d,sd.EventType.ERROR,u=>{m||(m=!0,Dw("Connection","WebChannel transport errored:",u),c.eo(new bt($e.UNAVAILABLE,"The operation could not be completed")))}),l(d,sd.EventType.MESSAGE,u=>{var f;if(!m){const p=u.data[0];sr(!!p);const y=p,_=y.error||((f=y[0])===null||f===void 0?void 0:f.error);if(_){ut("Connection","WebChannel received error:",_);const b=_.status;let x=function(E){const C=Or[E];if(C!==void 0)return Tk(C)}(b),S=_.message;x===void 0&&(x=$e.INTERNAL,S="Unknown error status: "+b+" with message "+_.message),m=!0,c.eo(new bt(x,S)),d.close()}else ut("Connection","WebChannel received:",p),c.no(p)}}),l(a,D3.STAT_EVENT,u=>{u.stat===jw.PROXY?ut("Connection","Detected buffering proxy"):u.stat===jw.NOPROXY&&ut("Connection","Detected no buffering proxy")}),setTimeout(()=>{c.Zr()},0),c}}function Sg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gm(t){return new DF(t,!0)}class Fk{constructor(e,n,r=1e3,s=1.5,i=6e4){this.js=e,this.timerId=n,this.lo=r,this.fo=s,this._o=i,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const n=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),s=Math.max(0,n-r);s>0&&ut("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.wo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,s,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){this.mo!==null&&(this.mo.skipDelay(),this.mo=null)}cancel(){this.mo!==null&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e,n,r,s,i,a,o,h){this.js=e,this.Ao=r,this.Ro=s,this.bo=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=h,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new Fk(e,n)}Do(){return this.state===1||this.state===5||this.Co()}Co(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.xo()}async stop(){this.Do()&&await this.close(0)}No(){this.state=0,this.So.reset()}ko(){this.Co()&&this.vo===null&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}async Mo(){if(this.Co())return this.close(0)}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}async close(e,n){this.Fo(),this.$o(),this.So.cancel(),this.Po++,e!==4?this.So.reset():n&&n.code===$e.RESOURCE_EXHAUSTED?(Mi(n.toString()),Mi("Using maximum backoff delay to prevent overloading the backend."),this.So.po()):n&&n.code===$e.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Bo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Jr(n)}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),n=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Po===n&&this.Uo(r,s)},r=>{e(()=>{const s=new bt($e.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(s)})})}Uo(e,n){const r=this.Lo(this.Po);this.stream=this.Ko(e,n),this.stream.zr(()=>{r(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(s=>{r(()=>this.qo(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}xo(){this.state=5,this.So.Io(async()=>{this.state=0,this.start()})}qo(e){return ut("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return n=>{this.js.enqueueAndForget(()=>this.Po===e?n():(ut("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class S6 extends Uk{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.wt=i}Ko(e,n){return this.bo.ho("Listen",e,n)}onMessage(e){this.So.reset();const n=RF(this.wt,e),r=function(s){if(!("targetChange"in s))return jt.min();const i=s.targetChange;return i.targetIds&&i.targetIds.length?jt.min():i.readTime?_i(i.readTime):jt.min()}(e);return this.listener.Go(n,r)}Qo(e){const n={};n.database=Zy(this.wt),n.addTarget=function(s,i){let a;const o=i.target;return a=Hy(o)?{documents:NF(s,o)}:{query:FF(s,o)},a.targetId=i.targetId,i.resumeToken.approximateByteSize()>0?a.resumeToken=Dk(s,i.resumeToken):i.snapshotVersion.compareTo(jt.min())>0&&(a.readTime=gp(s,i.snapshotVersion.toTimestamp())),a}(this.wt,e);const r=VF(this.wt,e);r&&(n.labels=r),this.Oo(n)}jo(e){const n={};n.database=Zy(this.wt),n.removeTarget=e,this.Oo(n)}}class T6 extends Uk{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.wt=i,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,n){return this.bo.ho("Write",e,n)}onMessage(e){if(sr(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const n=LF(e.writeResults,e.commitTime),r=_i(e.commitTime);return this.listener.Jo(r,n)}return sr(!e.writeResults||e.writeResults.length===0),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=Zy(this.wt),this.Oo(e)}Ho(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>PF(this.wt,r))};this.Oo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E6 extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.bo=r,this.wt=s,this.Zo=!1}tu(){if(this.Zo)throw new bt($e.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,n,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.bo.ro(e,n,r,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===$e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new bt($e.UNKNOWN,s.toString())})}ao(e,n,r,s){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.bo.ao(e,n,r,i,a,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===$e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new bt($e.UNKNOWN,i.toString())})}terminate(){this.Zo=!0}}class k6{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){this.eu===0&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){this.state==="Online"?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,e==="Online"&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Mi(n),this.su=!1):ut("OnlineStateTracker",n)}cu(){this.nu!==null&&(this.nu.cancel(),this.nu=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C6{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=i,this.du.Br(a=>{r.enqueueAndForget(async()=>{Ma(this)&&(ut("RemoteStore","Restarting streams for network reachability change."),await async function(o){const h=Et(o);h.lu.add(4),await kh(h),h._u.set("Unknown"),h.lu.delete(4),await ym(h)}(this))})}),this._u=new k6(r,s)}}async function ym(t){if(Ma(t))for(const e of t.fu)await e(!0)}async function kh(t){for(const e of t.fu)await e(!1)}function Vk(t,e){const n=Et(t);n.hu.has(e.targetId)||(n.hu.set(e.targetId,e),_1(n)?v1(n):bu(n).Co()&&y1(n,e))}function Bk(t,e){const n=Et(t),r=bu(n);n.hu.delete(e),r.Co()&&Gk(n,e),n.hu.size===0&&(r.Co()?r.ko():Ma(n)&&n._u.set("Unknown"))}function y1(t,e){t.wu.Nt(e.targetId),bu(t).Qo(e)}function Gk(t,e){t.wu.Nt(e),bu(t).jo(e)}function v1(t){t.wu=new jF({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),te:e=>t.hu.get(e)||null}),bu(t).start(),t._u.iu()}function _1(t){return Ma(t)&&!bu(t).Do()&&t.hu.size>0}function Ma(t){return Et(t).lu.size===0}function zk(t){t.wu=void 0}async function j6(t){t.hu.forEach((e,n)=>{y1(t,e)})}async function M6(t,e){zk(t),_1(t)?(t._u.uu(e),v1(t)):t._u.set("Unknown")}async function A6(t,e,n){if(t._u.set("Online"),e instanceof Ak&&e.state===2&&e.cause)try{await async function(r,s){const i=s.cause;for(const a of s.targetIds)r.hu.has(a)&&(await r.remoteSyncer.rejectListen(a,i),r.hu.delete(a),r.wu.removeTarget(a))}(t,e)}catch(r){ut("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await yp(t,r)}else if(e instanceof Sd?t.wu.Ut(e):e instanceof Mk?t.wu.zt(e):t.wu.Gt(e),!n.isEqual(jt.min()))try{const r=await Nk(t.localStore);n.compareTo(r)>=0&&await function(s,i){const a=s.wu.Yt(i);return a.targetChanges.forEach((o,h)=>{if(o.resumeToken.approximateByteSize()>0){const d=s.hu.get(h);d&&s.hu.set(h,d.withResumeToken(o.resumeToken,i))}}),a.targetMismatches.forEach(o=>{const h=s.hu.get(o);if(!h)return;s.hu.set(o,h.withResumeToken(cn.EMPTY_BYTE_STRING,h.snapshotVersion)),Gk(s,o);const d=new Jo(h.target,o,1,h.sequenceNumber);y1(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){ut("RemoteStore","Failed to raise snapshot:",r),await yp(t,r)}}async function yp(t,e,n){if(!Sh(e))throw e;t.lu.add(1),await kh(t),t._u.set("Offline"),n||(n=()=>Nk(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ut("RemoteStore","Retrying IndexedDB access"),await n(),t.lu.delete(1),await ym(t)})}function qk(t,e){return e().catch(n=>yp(t,n,e))}async function vm(t){const e=Et(t),n=bo(e);let r=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;D6(e);)try{const s=await m6(e.localStore,r);if(s===null){e.au.length===0&&n.ko();break}r=s.batchId,O6(e,s)}catch(s){await yp(e,s)}Wk(e)&&$k(e)}function D6(t){return Ma(t)&&t.au.length<10}function O6(t,e){t.au.push(e);const n=bo(t);n.Co()&&n.zo&&n.Ho(e.mutations)}function Wk(t){return Ma(t)&&!bo(t).Do()&&t.au.length>0}function $k(t){bo(t).start()}async function I6(t){bo(t).Xo()}async function R6(t){const e=bo(t);for(const n of t.au)e.Ho(n.mutations)}async function P6(t,e,n){const r=t.au.shift(),s=f1.from(r,e,n);await qk(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await vm(t)}async function L6(t,e){e&&bo(t).zo&&await async function(n,r){if(s=r.code,SF(s)&&s!==$e.ABORTED){const i=n.au.shift();bo(n).No(),await qk(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,r)),await vm(n)}var s}(t,e),Wk(t)&&$k(t)}async function Zw(t,e){const n=Et(t);n.asyncQueue.verifyOperationInProgress(),ut("RemoteStore","RemoteStore received new credentials");const r=Ma(n);n.lu.add(3),await kh(n),r&&n._u.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.lu.delete(3),await ym(n)}async function N6(t,e){const n=Et(t);e?(n.lu.delete(2),await ym(n)):e||(n.lu.add(2),await kh(n),n._u.set("Unknown"))}function bu(t){return t.mu||(t.mu=function(e,n,r){const s=Et(e);return s.tu(),new S6(n,s.bo,s.authCredentials,s.appCheckCredentials,s.wt,r)}(t.datastore,t.asyncQueue,{zr:j6.bind(null,t),Jr:M6.bind(null,t),Go:A6.bind(null,t)}),t.fu.push(async e=>{e?(t.mu.No(),_1(t)?v1(t):t._u.set("Unknown")):(await t.mu.stop(),zk(t))})),t.mu}function bo(t){return t.gu||(t.gu=function(e,n,r){const s=Et(e);return s.tu(),new T6(n,s.bo,s.authCredentials,s.appCheckCredentials,s.wt,r)}(t.datastore,t.asyncQueue,{zr:I6.bind(null,t),Jr:L6.bind(null,t),Yo:R6.bind(null,t),Jo:P6.bind(null,t)}),t.fu.push(async e=>{e?(t.gu.No(),await vm(t)):(await t.gu.stop(),t.au.length>0&&(ut("RemoteStore",`Stopping write stream with ${t.au.length} pending writes`),t.au=[]))})),t.gu}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Zo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,o=new b1(e,n,a,s,i);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new bt($e.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function w1(t,e){if(Mi("AsyncQueue",`${e}: ${t}`),Sh(t))return new bt($e.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e){this.comparator=e?(n,r)=>e(n,r)||yt.comparator(n.key,r.key):(n,r)=>yt.comparator(n.key,r.key),this.keyedMap=$u(),this.sortedSet=new zr(this.comparator)}static emptySet(e){return new dl(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof dl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new dl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(){this.yu=new zr(yt.comparator)}track(e){const n=e.doc.key,r=this.yu.get(n);r?e.type!==0&&r.type===3?this.yu=this.yu.insert(n,e):e.type===3&&r.type!==1?this.yu=this.yu.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.yu=this.yu.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.yu=this.yu.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.yu=this.yu.remove(n):e.type===1&&r.type===2?this.yu=this.yu.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.yu=this.yu.insert(n,{type:2,doc:e.doc}):Tt():this.yu=this.yu.insert(n,e)}pu(){const e=[];return this.yu.inorderTraversal((n,r)=>{e.push(r)}),e}}class Kl{constructor(e,n,r,s,i,a,o,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=h}static fromInitialDocuments(e,n,r,s){const i=[];return n.forEach(a=>{i.push({type:0,doc:a})}),new Kl(e,n,dl.emptySet(n),i,r,s,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F6{constructor(){this.Iu=void 0,this.listeners=[]}}class U6{constructor(){this.queries=new _u(e=>fk(e),dm),this.onlineState="Unknown",this.Tu=new Set}}async function V6(t,e){const n=Et(t),r=e.query;let s=!1,i=n.queries.get(r);if(i||(s=!0,i=new F6),s)try{i.Iu=await n.onListen(r)}catch(a){const o=w1(a,`Initialization of query '${Yy(e.query)}' failed`);return void e.onError(o)}n.queries.set(r,i),i.listeners.push(e),e.Eu(n.onlineState),i.Iu&&e.Au(i.Iu)&&x1(n)}async function B6(t,e){const n=Et(t),r=e.query;let s=!1;const i=n.queries.get(r);if(i){const a=i.listeners.indexOf(e);a>=0&&(i.listeners.splice(a,1),s=i.listeners.length===0)}if(s)return n.queries.delete(r),n.onUnlisten(r)}function G6(t,e){const n=Et(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const o of a.listeners)o.Au(s)&&(r=!0);a.Iu=s}}r&&x1(n)}function z6(t,e,n){const r=Et(t),s=r.queries.get(e);if(s)for(const i of s.listeners)i.onError(n);r.queries.delete(e)}function x1(t){t.Tu.forEach(e=>{e.next()})}class q6{constructor(e,n,r){this.query=e,this.Ru=n,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Kl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let n=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),n=!0):this.Vu(e,this.onlineState)&&(this.Su(e),n=!0),this.Pu=e,n}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let n=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),n=!0),n}Vu(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.Du||!r)&&(!e.docs.isEmpty()||n==="Offline")}vu(e){if(e.docChanges.length>0)return!0;const n=this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Su(e){e=Kl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(e){this.key=e}}class Xk{constructor(e){this.key=e}}class W6{constructor(e,n){this.query=e,this.Fu=n,this.$u=null,this.current=!1,this.Bu=Rt(),this.mutatedKeys=Rt(),this.Lu=pk(e),this.Uu=new dl(this.Lu)}get qu(){return this.Fu}Ku(e,n){const r=n?n.Gu:new Jw,s=n?n.Uu:this.Uu;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,o=!1;const h=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((g,m)=>{const c=s.get(g),l=h1(this.query,m)?m:null,u=!!c&&this.mutatedKeys.has(c.key),f=!!l&&(l.hasLocalMutations||this.mutatedKeys.has(l.key)&&l.hasCommittedMutations);let p=!1;c&&l?c.data.isEqual(l.data)?u!==f&&(r.track({type:3,doc:l}),p=!0):this.Qu(c,l)||(r.track({type:2,doc:l}),p=!0,(h&&this.Lu(l,h)>0||d&&this.Lu(l,d)<0)&&(o=!0)):!c&&l?(r.track({type:0,doc:l}),p=!0):c&&!l&&(r.track({type:1,doc:c}),p=!0,(h||d)&&(o=!0)),p&&(l?(a=a.add(l),i=f?i.add(g):i.delete(g)):(a=a.delete(g),i=i.delete(g)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const g=this.query.limitType==="F"?a.last():a.first();a=a.delete(g.key),i=i.delete(g.key),r.track({type:1,doc:g})}return{Uu:a,Gu:r,Mi:o,mutatedKeys:i}}Qu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const s=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const i=e.Gu.pu();i.sort((d,g)=>function(m,c){const l=u=>{switch(u){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Tt()}};return l(m)-l(c)}(d.type,g.type)||this.Lu(d.doc,g.doc)),this.ju(r);const a=n?this.Wu():[],o=this.Bu.size===0&&this.current?1:0,h=o!==this.$u;return this.$u=o,i.length!==0||h?{snapshot:new Kl(this.query,e.Uu,s,i,e.mutatedKeys,o===0,h,!1),zu:a}:{zu:a}}Eu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new Jw,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(n=>this.Fu=this.Fu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Fu=this.Fu.delete(n)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=Rt(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const n=[];return e.forEach(r=>{this.Bu.has(r)||n.push(new Xk(r))}),this.Bu.forEach(r=>{e.has(r)||n.push(new Hk(r))}),n}Ju(e){this.Fu=e.ji,this.Bu=Rt();const n=this.Ku(e.documents);return this.applyChanges(n,!0)}Yu(){return Kl.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,this.$u===0)}}class $6{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class H6{constructor(e){this.key=e,this.Xu=!1}}class X6{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Zu={},this.tc=new _u(o=>fk(o),dm),this.ec=new Map,this.nc=new Set,this.sc=new zr(yt.comparator),this.ic=new Map,this.rc=new p1,this.oc={},this.uc=new Map,this.cc=Ql.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return this.ac===!0}}async function Y6(t,e){const n=iU(t);let r,s;const i=n.tc.get(e);if(i)r=i.targetId,n.sharedClientState.addLocalQueryTarget(r),s=i.view.Yu();else{const a=await g6(n.localStore,Ai(e));n.isPrimaryClient&&Vk(n.remoteStore,a);const o=n.sharedClientState.addLocalQueryTarget(a.targetId);r=a.targetId,s=await Q6(n,e,r,o==="current")}return s}async function Q6(t,e,n,r){t.hc=(g,m,c)=>async function(l,u,f,p){let y=u.view.Ku(f);y.Mi&&(y=await Yw(l.localStore,u.query,!1).then(({documents:x})=>u.view.Ku(x,y)));const _=p&&p.targetChanges.get(u.targetId),b=u.view.applyChanges(y,l.isPrimaryClient,_);return tx(l,u.targetId,b.zu),b.snapshot}(t,g,m,c);const s=await Yw(t.localStore,e,!0),i=new W6(e,s.ji),a=i.Ku(s.documents),o=Eh.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline"),h=i.applyChanges(a,t.isPrimaryClient,o);tx(t,n,h.zu);const d=new $6(e,n,i);return t.tc.set(e,d),t.ec.has(n)?t.ec.get(n).push(e):t.ec.set(n,[e]),h.snapshot}async function K6(t,e){const n=Et(t),r=n.tc.get(e),s=n.ec.get(r.targetId);if(s.length>1)return n.ec.set(r.targetId,s.filter(i=>!dm(i,e))),void n.tc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Jy(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Bk(n.remoteStore,r.targetId),ev(n,r.targetId)}).catch(xh)):(ev(n,r.targetId),await Jy(n.localStore,r.targetId,!0))}async function Z6(t,e,n){const r=oU(t);try{const s=await function(i,a){const o=Et(i),h=Ur.now(),d=a.reduce((c,l)=>c.add(l.key),Rt());let g,m;return o.persistence.runTransaction("Locally write mutations","readwrite",c=>{let l=Di(),u=Rt();return o.Ui.getEntries(c,d).next(f=>{l=f,l.forEach((p,y)=>{y.isValidDocument()||(u=u.add(p))})}).next(()=>o.localDocuments.getOverlayedDocuments(c,l)).next(f=>{g=f;const p=[];for(const y of a){const _=bF(y,g.get(y.key).overlayedDocument);_!=null&&p.push(new ja(y.key,_,hk(_.value.mapValue),vi.exists(!0)))}return o.mutationQueue.addMutationBatch(c,h,p,a)}).next(f=>{m=f;const p=f.applyToLocalDocumentSet(g,u);return o.documentOverlayCache.saveOverlays(c,f.batchId,p)})}).then(()=>({batchId:m.batchId,changes:kk(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(i,a,o){let h=i.oc[i.currentUser.toKey()];h||(h=new zr(Xt)),h=h.insert(a,o),i.oc[i.currentUser.toKey()]=h}(r,s.batchId,n),await Ch(r,s.changes),await vm(r.remoteStore)}catch(s){const i=w1(s,"Failed to persist write");n.reject(i)}}async function Yk(t,e){const n=Et(t);try{const r=await f6(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.ic.get(i);a&&(sr(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.Xu=!0:s.modifiedDocuments.size>0?sr(a.Xu):s.removedDocuments.size>0&&(sr(a.Xu),a.Xu=!1))}),await Ch(n,r,e)}catch(r){await xh(r)}}function ex(t,e,n){const r=Et(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.tc.forEach((i,a)=>{const o=a.view.Eu(e);o.snapshot&&s.push(o.snapshot)}),function(i,a){const o=Et(i);o.onlineState=a;let h=!1;o.queries.forEach((d,g)=>{for(const m of g.listeners)m.Eu(a)&&(h=!0)}),h&&x1(o)}(r.eventManager,e),s.length&&r.Zu.Go(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function J6(t,e,n){const r=Et(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.ic.get(e),i=s&&s.key;if(i){let a=new zr(yt.comparator);a=a.insert(i,en.newNoDocument(i,jt.min()));const o=Rt().add(i),h=new mm(jt.min(),new Map,new Vr(Xt),a,o);await Yk(r,h),r.sc=r.sc.remove(i),r.ic.delete(e),S1(r)}else await Jy(r.localStore,e,!1).then(()=>ev(r,e,n)).catch(xh)}async function eU(t,e){const n=Et(t),r=e.batch.batchId;try{const s=await d6(n.localStore,e);Kk(n,r,null),Qk(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ch(n,s)}catch(s){await xh(s)}}async function tU(t,e,n){const r=Et(t);try{const s=await function(i,a){const o=Et(i);return o.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let d;return o.mutationQueue.lookupMutationBatch(h,a).next(g=>(sr(g!==null),d=g.keys(),o.mutationQueue.removeMutationBatch(h,g))).next(()=>o.mutationQueue.performConsistencyCheck(h)).next(()=>o.documentOverlayCache.removeOverlaysForBatchId(h,d,a)).next(()=>o.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d)).next(()=>o.localDocuments.getDocuments(h,d))})}(r.localStore,e);Kk(r,e,n),Qk(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ch(r,s)}catch(s){await xh(s)}}function Qk(t,e){(t.uc.get(e)||[]).forEach(n=>{n.resolve()}),t.uc.delete(e)}function Kk(t,e,n){const r=Et(t);let s=r.oc[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.oc[r.currentUser.toKey()]=s}}function ev(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.ec.get(e))t.tc.delete(r),n&&t.Zu.lc(r,n);t.ec.delete(e),t.isPrimaryClient&&t.rc.us(e).forEach(r=>{t.rc.containsKey(r)||Zk(t,r)})}function Zk(t,e){t.nc.delete(e.path.canonicalString());const n=t.sc.get(e);n!==null&&(Bk(t.remoteStore,n),t.sc=t.sc.remove(e),t.ic.delete(n),S1(t))}function tx(t,e,n){for(const r of n)r instanceof Hk?(t.rc.addReference(r.key,e),rU(t,r)):r instanceof Xk?(ut("SyncEngine","Document no longer in limbo: "+r.key),t.rc.removeReference(r.key,e),t.rc.containsKey(r.key)||Zk(t,r.key)):Tt()}function rU(t,e){const n=e.key,r=n.path.canonicalString();t.sc.get(n)||t.nc.has(r)||(ut("SyncEngine","New document in limbo: "+n),t.nc.add(r),S1(t))}function S1(t){for(;t.nc.size>0&&t.sc.size<t.maxConcurrentLimboResolutions;){const e=t.nc.values().next().value;t.nc.delete(e);const n=new yt(_r.fromString(e)),r=t.cc.next();t.ic.set(r,new H6(n)),t.sc=t.sc.insert(n,r),Vk(t.remoteStore,new Jo(Ai(c1(n.path)),r,2,o1.ot))}}async function Ch(t,e,n){const r=Et(t),s=[],i=[],a=[];r.tc.isEmpty()||(r.tc.forEach((o,h)=>{a.push(r.hc(h,e,n).then(d=>{if(d){r.isPrimaryClient&&r.sharedClientState.updateQueryState(h.targetId,d.fromCache?"not-current":"current"),s.push(d);const g=g1.Vi(h.targetId,d);i.push(g)}}))}),await Promise.all(a),r.Zu.Go(s),await async function(o,h){const d=Et(o);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>ze.forEach(h,m=>ze.forEach(m.Pi,c=>d.persistence.referenceDelegate.addReference(g,m.targetId,c)).next(()=>ze.forEach(m.vi,c=>d.persistence.referenceDelegate.removeReference(g,m.targetId,c)))))}catch(g){if(!Sh(g))throw g;ut("LocalStore","Failed to update sequence numbers: "+g)}for(const g of h){const m=g.targetId;if(!g.fromCache){const c=d.$i.get(m),l=c.snapshotVersion,u=c.withLastLimboFreeSnapshotVersion(l);d.$i=d.$i.insert(m,u)}}}(r.localStore,i))}async function nU(t,e){const n=Et(t);if(!n.currentUser.isEqual(e)){ut("SyncEngine","User change. New user:",e.toKey());const r=await Lk(n.localStore,e);n.currentUser=e,function(s,i){s.uc.forEach(a=>{a.forEach(o=>{o.reject(new bt($e.CANCELLED,i))})}),s.uc.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ch(n,r.Ki)}}function sU(t,e){const n=Et(t),r=n.ic.get(e);if(r&&r.Xu)return Rt().add(r.key);{let s=Rt();const i=n.ec.get(e);if(!i)return s;for(const a of i){const o=n.tc.get(a);s=s.unionWith(o.view.qu)}return s}}function iU(t){const e=Et(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Yk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=sU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=J6.bind(null,e),e.Zu.Go=G6.bind(null,e.eventManager),e.Zu.lc=z6.bind(null,e.eventManager),e}function oU(t){const e=Et(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=eU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tU.bind(null,e),e}class aU{constructor(){this.synchronizeTabs=!1}async initialize(e){this.wt=gm(e.databaseInfo.databaseId),this.sharedClientState=this.dc(e),this.persistence=this._c(e),await this.persistence.start(),this.localStore=this.wc(e),this.gcScheduler=this.mc(e,this.localStore),this.indexBackfillerScheduler=this.gc(e,this.localStore)}mc(e,n){return null}gc(e,n){return null}wc(e){return h6(this.persistence,new u6,e.initialUser,this.wt)}_c(e){return new a6(m1.Os,this.wt)}dc(e){return new v6}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class lU{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ex(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=nU.bind(null,this.syncEngine),await N6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new U6}createDatastore(e){const n=gm(e.databaseInfo.databaseId),r=(s=e.databaseInfo,new x6(s));var s;return function(i,a,o,h){return new E6(i,a,o,h)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,s=e.asyncQueue,i=o=>ex(this.syncEngine,o,0),a=Kw.V()?new Kw:new _6,new C6(n,r,s,i,a);var n,r,s,i,a}createSyncEngine(e,n){return function(r,s,i,a,o,h,d){const g=new X6(r,s,i,a,o,h);return d&&(g.ac=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=Et(e);ut("RemoteStore","RemoteStore shutting down."),n.lu.add(5),await kh(n),n.du.shutdown(),n._u.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uU{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):Mi("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cU{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=In.UNAUTHENTICATED,this.clientId=ak.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{ut("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(ut("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new bt($e.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Zo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=w1(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function hU(t,e){t.asyncQueue.verifyOperationInProgress(),ut("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Lk(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}async function dU(t,e){t.asyncQueue.verifyOperationInProgress();const n=await fU(t);ut("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(s=>Zw(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,i)=>Zw(e.remoteStore,i)),t.onlineComponents=e}async function fU(t){return t.offlineComponents||(ut("FirestoreClient","Using default OfflineComponentProvider"),await hU(t,new aU)),t.offlineComponents}async function Jk(t){return t.onlineComponents||(ut("FirestoreClient","Using default OnlineComponentProvider"),await dU(t,new lU)),t.onlineComponents}function pU(t){return Jk(t).then(e=>e.syncEngine)}async function rx(t){const e=await Jk(t),n=e.eventManager;return n.onListen=Y6.bind(null,e.syncEngine),n.onUnlisten=K6.bind(null,e.syncEngine),n}const nx=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eC(t,e,n){if(!n)throw new bt($e.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function mU(t,e,n,r){if(e===!0&&r===!0)throw new bt($e.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function sx(t){if(!yt.isDocumentKey(t))throw new bt($e.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function ix(t){if(yt.isDocumentKey(t))throw new bt($e.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function T1(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Tt()}function Td(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new bt($e.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=T1(t);throw new bt($e.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new bt($e.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new bt($e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,mU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(e,n,r){this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ox({}),this._settingsFrozen=!1,e instanceof Xl?this._databaseId=e:(this._app=e,this._databaseId=function(s){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new bt($e.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xl(s.options.projectId)}(e))}get app(){if(!this._app)throw new bt($e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new bt($e.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ox(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new P3;switch(n.type){case"gapi":const r=n.client;return sr(!(typeof r!="object"||r===null||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new F3(r,n.sessionIndex||"0",n.iamToken||null);case"provider":return n.client;default:throw new bt($e.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=nx.get(e);n&&(ut("ComponentProvider","Removing Datastore"),nx.delete(e),n.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new uo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ps(this.firestore,e,this._key)}}class _m{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new _m(this.firestore,e,this._query)}}class uo extends _m{constructor(e,n,r){super(e,n,c1(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ps(this.firestore,null,new yt(e))}withConverter(e){return new uo(this.firestore,e,this._path)}}function tC(t,e,...n){if(t=go(t),eC("collection","path",e),t instanceof E1){const r=_r.fromString(e,...n);return ix(r),new uo(t,null,r)}{if(!(t instanceof ps||t instanceof uo))throw new bt($e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(_r.fromString(e,...n));return ix(r),new uo(t.firestore,null,r)}}function gU(t,e,...n){if(t=go(t),arguments.length===1&&(e=ak.I()),eC("doc","path",e),t instanceof E1){const r=_r.fromString(e,...n);return sx(r),new ps(t,null,new yt(r))}{if(!(t instanceof ps||t instanceof uo))throw new bt($e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(_r.fromString(e,...n));return sx(r),new ps(t.firestore,t instanceof uo?t.converter:null,new yt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yU{constructor(){this.Mc=Promise.resolve(),this.Oc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new Fk(this,"async_queue_retry"),this.Kc=()=>{const n=Sg();n&&ut("AsyncQueue","Visibility state changed to "+n.visibilityState),this.So.Eo()};const e=Sg();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const n=Sg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const n=new Zo;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Oc.push(e),this.jc()))}async jc(){if(this.Oc.length!==0){try{await this.Oc[0](),this.Oc.shift(),this.So.reset()}catch(e){if(!Sh(e))throw e;ut("AsyncQueue","Operation failed with retryable error: "+e)}this.Oc.length>0&&this.So.Io(()=>this.jc())}}Qc(e){const n=this.Mc.then(()=>(this.Lc=!0,e().catch(r=>{this.Bc=r,this.Lc=!1;const s=function(i){let a=i.message||"";return i.stack&&(a=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),a}(r);throw Mi("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.Lc=!1,r))));return this.Mc=n,n}enqueueAfterDelay(e,n,r){this.Gc(),this.qc.indexOf(e)>-1&&(n=0);const s=b1.createAndSchedule(this,e,n,r,i=>this.Wc(i));return this.$c.push(s),s}Gc(){this.Bc&&Tt()}verifyOperationInProgress(){}async zc(){let e;do e=this.Mc,await e;while(e!==this.Mc)}Hc(e){for(const n of this.$c)if(n.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.$c)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const n=this.$c.indexOf(e);this.$c.splice(n,1)}}function ax(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const r=e;for(const s of n)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}class vp extends E1{constructor(e,n,r){super(e,n,r),this.type="firestore",this._queue=new yU,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||nC(this),this._firestoreClient.terminate()}}function vU(t=PT()){return dh(t,"firestore").getImmediate()}function rC(t){return t._firestoreClient||nC(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function nC(t){var e;const n=t._freezeSettings(),r=function(s,i,a,o){return new Y3(s,i,a,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,o.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new cU(t._authCredentials,t._appCheckCredentials,t._queue,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new bt($e.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Zl(cn.fromBase64String(e))}catch(n){throw new bt($e.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Zl(cn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new bt($e.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new bt($e.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Xt(this._lat,e._lat)||Xt(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _U=/^__.*__$/;class bU{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ja(e,this.data,this.fieldMask,n,this.fieldTransforms):new Th(e,this.data,n,this.fieldTransforms)}}function iC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Tt()}}class j1{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.wt=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Xc(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new j1(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.ta({path:r,na:!1});return s.sa(e),s}ia(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.ta({path:r,na:!1});return s.Xc(),s}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return _p(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(e.length===0)throw this.oa("Document fields must not be empty");if(iC(this.Zc)&&_U.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class wU{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.wt=r||gm(e)}aa(e,n,r,s=!1){return new j1({Zc:e,methodName:n,ca:r,path:gn.emptyPath(),na:!1,ua:s},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function xU(t){const e=t._freezeSettings(),n=gm(t._databaseId);return new wU(t._databaseId,!!e.ignoreUndefinedProperties,n)}function SU(t,e,n,r,s,i={}){const a=t.aa(i.merge||i.mergeFields?2:0,e,n,s);uC("Data must be an object, but it was:",a,r);const o=aC(r,a);let h,d;if(i.merge)h=new Xs(a.fieldMask),d=a.fieldTransforms;else if(i.mergeFields){const g=[];for(const m of i.mergeFields){const c=TU(e,m,n);if(!a.contains(c))throw new bt($e.INVALID_ARGUMENT,`Field '${c}' is specified in your field mask but missing from your input data.`);kU(g,c)||g.push(c)}h=new Xs(g),d=a.fieldTransforms.filter(m=>h.covers(m.field))}else h=null,d=a.fieldTransforms;return new bU(new ls(o),h,d)}function oC(t,e){if(lC(t=go(t)))return uC("Unsupported field value:",e,t),aC(t,e);if(t instanceof sC)return function(n,r){if(!iC(r.Zc))throw r.oa(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.oa(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.na&&e.Zc!==4)throw e.oa("Nested arrays are not supported");return function(n,r){const s=[];let i=0;for(const a of n){let o=oC(a,r.ra(i));o==null&&(o={nullValue:"NULL_VALUE"}),s.push(o),i++}return{arrayValue:{values:s}}}(t,e)}return function(n,r){if((n=go(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return pF(r.wt,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=Ur.fromDate(n);return{timestampValue:gp(r.wt,s)}}if(n instanceof Ur){const s=new Ur(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:gp(r.wt,s)}}if(n instanceof C1)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Zl)return{bytesValue:Dk(r.wt,n._byteString)};if(n instanceof ps){const s=r.databaseId,i=n.firestore._databaseId;if(!i.isEqual(s))throw r.oa(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:d1(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.oa(`Unsupported field value: ${T1(n)}`)}(t,e)}function aC(t,e){const n={};return lk(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):vu(t,(r,s)=>{const i=oC(s,e.ea(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function lC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ur||t instanceof C1||t instanceof Zl||t instanceof ps||t instanceof sC)}function uC(t,e,n){if(!lC(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const r=T1(n);throw r==="an object"?e.oa(t+" a custom object"):e.oa(t+" "+r)}}function TU(t,e,n){if((e=go(e))instanceof k1)return e._internalPath;if(typeof e=="string")return cC(t,e);throw _p("Field path arguments must be of type string or ",t,!1,void 0,n)}const EU=new RegExp("[~\\*/\\[\\]]");function cC(t,e,n){if(e.search(EU)>=0)throw _p(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new k1(...e.split("."))._internalPath}catch{throw _p(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function _p(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let h="";return(i||a)&&(h+=" (found",i&&(h+=` in field ${r}`),a&&(h+=` in document ${s}`),h+=")"),new bt($e.INVALID_ARGUMENT,o+t+h)}function kU(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ps(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new CU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(dC("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class CU extends hC{data(){return super.data()}}function dC(t,e){return typeof e=="string"?cC(t,e):e instanceof k1?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fC extends hC{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ed(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(dC("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Ed extends fC{data(e={}){return super.data(e)}}class jU{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Hu(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ed(this._firestore,this._userDataWriter,r.key,r,new Hu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new bt($e.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let i=0;return r._snapshot.docChanges.map(a=>({type:"added",doc:new Ed(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Hu(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:i++}))}{let i=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const o=new Ed(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Hu(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,d=-1;return a.type!==0&&(h=i.indexOf(a.doc.key),i=i.delete(a.doc.key)),a.type!==1&&(i=i.add(a.doc),d=i.indexOf(a.doc.key)),{type:MU(a.type),doc:o,oldIndex:h,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function MU(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Tt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AU(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new bt($e.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}function DU(t,...e){for(const n of e)t=n._apply(t);return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OU{convertValue(e,n="none"){switch(_a(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Rr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Hl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Tt()}}convertObject(e,n){const r={};return vu(e.fields,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(e){return new C1(Rr(e.latitude),Rr(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ck(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Gc(e));default:return null}}convertTimestamp(e){const n=_o(e);return new Ur(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=_r.fromString(e);sr(Pk(r));const s=new Xl(r.get(1),r.get(3)),i=new yt(r.popFirst(5));return s.isEqual(n)||Mi(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IU(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class pC extends OU{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ps(this.firestore,null,n)}}function RU(t,e){const n=Td(t.firestore,vp),r=gU(t),s=IU(t.converter,e);return LU(n,[SU(xU(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,vi.exists(!1))]).then(()=>r)}function PU(t,...e){var n,r,s;t=go(t);let i={includeMetadataChanges:!1},a=0;typeof e[a]!="object"||ax(e[a])||(i=e[a],a++);const o={includeMetadataChanges:i.includeMetadataChanges};if(ax(e[a])){const m=e[a];e[a]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[a+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[a+2]=(s=m.complete)===null||s===void 0?void 0:s.bind(m)}let h,d,g;if(t instanceof ps)d=Td(t.firestore,vp),g=c1(t._key.path),h={next:m=>{e[a]&&e[a](NU(d,t,m))},error:e[a+1],complete:e[a+2]};else{const m=Td(t,_m);d=Td(m.firestore,vp),g=m._query;const c=new pC(d);h={next:l=>{e[a]&&e[a](new jU(d,c,m,l))},error:e[a+1],complete:e[a+2]},AU(t._query)}return function(m,c,l,u){const f=new uU(u),p=new q6(c,f,l);return m.asyncQueue.enqueueAndForget(async()=>V6(await rx(m),p)),()=>{f.Tc(),m.asyncQueue.enqueueAndForget(async()=>B6(await rx(m),p))}}(rC(d),g,o,h)}function LU(t,e){return function(n,r){const s=new Zo;return n.asyncQueue.enqueueAndForget(async()=>Z6(await pU(n),r,s)),s.promise}(rC(t),e)}function NU(t,e,n){const r=n.docs.get(e._key),s=new pC(t);return new fC(t,s,e._key,r,new Hu(n.hasPendingWrites,n.fromCache),e.converter)}(function(t,e=!0){(function(n){yu=n})(ZN),yo(new Ci("firestore",(n,{options:r})=>{const s=n.getProvider("app").getImmediate(),i=new vp(s,new L3(n.getProvider("auth-internal")),new V3(n.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),i._setSettings(r),i},"PUBLIC")),Hs(Mw,"3.4.14",t),Hs(Mw,"3.4.14","esm2017")})();const FU={apiKey:"AIzaSyAByYRpgjWbVlJ2ffugAblbKex9FtYxICc",authDomain:"creative-demo-69142.firebaseapp.com",databaseURL:"https://creative-demo-69142-default-rtdb.firebaseio.com",projectId:"creative-demo-69142",storageBucket:"creative-demo-69142.appspot.com",messagingSenderId:"892840106001",appId:"1:892840106001:web:75e89864643fe4f3f739b0",measurementId:"G-ZX8KGNX4M1"},mC=JN(FU);T5(mC);const gC=vU(mC),yC="tonePoints",UU=tC(gC,yC);async function VU(){const t=await RU(tC(gC,yC),{x:Math.random(),y:Math.random(),radius:Math.random(),time:Date.now()});console.log("Document written with ID: ",t.id)}window.firebaseTest=VU;const BU=DU(UU);PU(BU,t=>{const e=[];t.forEach(n=>{e.push(n.data())}),console.log("Current",e)});const GU=.1,zU=.1,qU=.2,WU=2*1e3,$U=5*1e3,HU=1*1e3,Fu=["C3","D3","E3","F3","G3","A3","B3","C4","D4","E4","F4","G4","A4","B4"],vC=new Zs().toDestination();window.Tone=UL;window.synth=vC;const XU=t=>{const e=t.windowWidth,n=t.windowHeight,r=n*qU,s=e,i=n-r,a=WU,o=$U,h=HU,g=Math.min(s,i)*GU,m={x:0,y:0,ratio:0,startTime:0};let c=[],l=[];t.setup=()=>{t.createCanvas(e,n)},t.draw=()=>{t.background(255),t.stroke("#ccc"),t.strokeWeight(2),t.line(0,r,e,r),t.textAlign(t.CENTER,t.CENTER),t.fill("#aaa"),t.strokeWeight(1);const x=s/Fu.length;for(let D=0;D<Fu.length;D++){const L=Fu[D],O=x*D,N=r;t.line(O,N,O,N+i),t.text(L,O+x/2,N+i-30)}t.noStroke();const S=Date.now(),E=[],C=[];c.forEach(D=>{if(y(S,D)<=0){C.push(D);const L=Fu[D.x*Fu.length|0],O=_(S,D)/1e3;O>0&&(console.log(L,O),vC.triggerAttackRelease(L,O))}else E.push(D)}),c=E,c.forEach(D=>{const L=b(S,D),O=f(D.ratio);t.fill(O),p(D.x,L,D.ratio)}),l.forEach(D=>{const L=_(S,D);if(L>0){const O=f(D.ratio);t.fill(O),p(D.x,0,D.ratio*L/h),C.push(D)}}),l=C,t.mouseIsPressed?(u(),t.fill(100,100,100,100),t.stroke("#0bd")):(t.fill(100,100,100,100),t.fill("#0bd"));let{x:M,y:I,ratio:A}=m;A&&p(M,I,A)},t.mousePressed=x=>{m.startTime||t.mouseY<r||(m.x=t.mouseX/s,m.y=(t.mouseY-r)/i,m.ratio=zU,m.startTime=Date.now())};function u(){if(!m.startTime)return;const x=(Date.now()-m.startTime)/a;m.ratio=Math.min(m.ratio+x,1)}t.mouseReleased=x=>(m.startTime&&(c.push({x:m.x,y:m.y,ratio:m.ratio,time:Date.now()}),m.ratio=0,m.startTime=0),!1);function f(x){const S=t.color(`hsl(${(x*360+180)%360|0}, 60%, 70%)`);return S.setAlpha(100),S}function p(x,S,E){const C=t.map(E,0,1,0,g);t.circle(x*s,S*i+r,C*2)}function y(x,S){return S.y*o-(x-S.time)}function _(x,S){const C=-y(x,S);return S.ratio*h-C}function b(x,S){return y(x,S)/o}};let Uu;function YU(t){return Uu&&Uu.remove(),t&&(t.innerHTML=""),Uu=new oA(XU,t),window.myp5=Uu,Uu}var _C={exports:{}},bm={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QU=Yo.exports,KU=Symbol.for("react.element"),ZU=Symbol.for("react.fragment"),JU=Object.prototype.hasOwnProperty,eV=QU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,tV={key:!0,ref:!0,__self:!0,__source:!0};function bC(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)JU.call(e,r)&&!tV.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:KU,type:t,key:i,ref:a,props:s,_owner:eV.current}}bm.Fragment=ZU;bm.jsx=bC;bm.jsxs=bC;(function(t){t.exports=bm})(_C);const Hc=_C.exports.jsx,rV=()=>{const t=Yo.exports.useRef(null),e=Yo.exports.useRef(null);return Yo.exports.useEffect(()=>{const n=t.current;n&&!e.current&&(e.current=YU(n))},[]),Hc("div",{className:"stage",ref:t})};function nV(){return Hc("div",{className:"App",children:Hc(rV,{})})}Tg.createRoot(document.getElementById("root")).render(Hc(nj.StrictMode,{children:Hc(nV,{})}));
